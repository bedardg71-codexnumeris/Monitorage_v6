033-Demande

CONTEXTE : Application de monitorage p√©dagogique (index3.html). Nous avons d√©velopp√© plusieurs onglets dans la sous-navigation des R√©glages. Ces sections servir √† d√©finir des param√®tres qui serviront dans les sections √âtudiant¬∑es, Pr√©sences, √âvaluation. J'ai cr√©√© le bouton ¬´R√©troactions¬ª dans la sous-nav R√©glages. Il reste √† cr√©er la section comme telle.

OBJECTIF : Construisons d'abord la structure de la page.Cette section d√©pend de param√®tres fix√©s par l'enseignant : les crit√®res d'√©valuation et l'√©chelle de performance pour chaque crit√®re. Il s'agit ici de g√©n√©rer √† l'√©l√®ve un retour sur son travail en assemblant diff√©rents commentaires pr√©r√©dig√©s (ex. : 4 crit√®res x 4 niveaux = 16 commentaires). 

Un gabarit de r√©troactions peut √™tre cr√©√© pour des travaux semblables (ex. : √©laborer un plan de r√©daction). Diff√©rents gabarits peuvent √™tre cr√©er pour diff√©rencier la r√©troaction (ex. Strat√©gies de lecture, carte mentale, r√©vision linguistique, etc.)

Cr√©e la carte qui contiendra ces informations :

- nombre de crit√®res
- nombre d'√©chelle de performance
- un champ pour chaque possibilit√© (16 champs ici)

ZONES AUTORIS√âES : NE PAS toucher aux autres √©l√©ments de contenu

NOMS STABLES : Respecter et conserver tous les noms dans NOMS_STABLES.json - AUCUN renommage

CODE : sections crit√®res et √©chelle de performance :

<!-- Sous-section : Grille de crit√®res -->
<div id="reglages-grille-criteres" class="sous-section">
    <h2>Grille de crit√®res d'√©valuation</h2>
    <p class="text-muted">D√©finir les crit√®res d'√©valuation pour chaque travail</p>
    
    <!-- CARTE 3 : GRILLE DE CRIT√àRES -->
    <div class="carte">
        <h3>üìä Grille de crit√®res d'√©valuation</h3>
        
        <!-- S√©lecteur d'√©valuation -->
        <div class="groupe-form" style="max-width: 400px; margin-bottom: 20px;">
            <label>S√©lectionner une √©valuation :</label>
            <select id="selectEvalCriteres" class="controle-form" onchange="chargerCriteres()">
                <option value="">-- Choisir une √©valuation --</option>
            </select>
        </div>
        
        <!-- Message si aucune √©valuation s√©lectionn√©e -->
        <div id="aucuneEvalSelectionnee" style="padding: 20px; background: var(--bleu-tres-pale); 
             border-radius: 6px; text-align: center; color: var(--bleu-leger);">
            <p>S√©lectionnez une √©valuation pour g√©rer ses crit√®res</p>
        </div>
        
        <!-- Conteneur des crit√®res (cach√© par d√©faut) -->
        <div id="criteresContainer" style="display: none;">
            <!-- Liste des crit√®res existants -->
            <div id="listeCriteres" style="margin-bottom: 20px;">
                <!-- Les crit√®res seront affich√©s ici -->
            </div>
            
            <!-- Formulaire d'ajout de crit√®re (cach√© par d√©faut) -->
            <div id="formAjoutCritere" style="display: none; padding: 15px; background: var(--bleu-pale); 
                 border: 1px solid var(--bleu-leger); border-radius: 6px; margin-bottom: 20px;">
                
                <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">Nouveau crit√®re</h4>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                    <div class="groupe-form">
                        <label>Nom du crit√®re *</label>
                        <input type="text" id="critereNom" class="controle-form" 
                               placeholder="Ex: Qualit√© de l'argumentation">
                    </div>
                    <div class="groupe-form">
                        <label>Pond√©ration relative (%)</label>
                        <input type="number" id="criterePonderation" class="controle-form" 
                               min="0" max="100" placeholder="Ex: 25">
                    </div>
                </div>
                
                <div class="groupe-form" style="margin-bottom: 15px;">
                    <label>Description</label>
                    <textarea id="critereDescription" class="controle-form" rows="3" 
                              placeholder="Description d√©taill√©e du crit√®re..."></textarea>
                </div>
                
                <div class="groupe-form" style="margin-bottom: 15px;">
                    <label>Type de crit√®re</label>
                    <select id="critereType" class="controle-form" onchange="afficherChampFormule()">
                        <option value="holistique">Holistique (jugement global)</option>
                        <option value="analytique">Analytique (points par √©l√©ment)</option>
                        <option value="algorithmique">Algorithmique (calcul automatique)</option>
                    </select>
                </div>
                
                <!-- Champ formule (cach√© par d√©faut) -->
                <div id="champFormule" class="groupe-form" style="display: none; margin-bottom: 15px;">
                    <label>Formule de calcul</label>
                    <input type="text" id="critereFormule" class="controle-form" 
                           placeholder="Ex: (nb_erreurs / nb_mots) * 100">
                    <small style="color: var(--bleu-leger);">
                        Pour le fran√ßais √©crit : nombre d'erreurs / nombre de mots
                    </small>
                </div>
                
                <div class="btn-groupe" style="justify-content: flex-end;">
                    <button class="btn btn-annuler" onclick="annulerAjoutCritere()">Annuler</button>
                    <button class="btn btn-confirmer" onclick="sauvegarderCritere()">
                        <span id="btnTexteCritere">Ajouter</span>
                    </button>
                </div>
            </div>
            
            <!-- Boutons d'actions -->
            <div class="btn-groupe" style="justify-content: space-between; margin-bottom: 20px;">
                <div>
                    <button id="btnAjouterCritere" class="btn btn-ajouter" onclick="afficherFormCritere()">
                        + Ajouter un crit√®re
                    </button>
                </div>
                <div>
                    <button class="btn btn-principal" onclick="afficherModelesCriteres()" 
                            style="margin-right: 10px;">
                        üìã Appliquer un mod√®le
                    </button>
                    <button class="btn btn-confirmer" onclick="enregistrerCommeModele()">
                        üíæ Enregistrer comme mod√®le
                    </button>
                </div>
            </div>

            <!-- Modal pour les mod√®les (cach√© par d√©faut) -->
            <div id="modalModeles" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
                 background: rgba(0,0,0,0.5); z-index: 1000;">
                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                     background: white; padding: 30px; border-radius: 8px; max-width: 600px; width: 90%; 
                     max-height: 80vh; overflow-y: auto;">
                    <h3 style="margin-bottom: 20px; color: var(--bleu-principal);">Mod√®les de crit√®res disponibles</h3>
                    
                    <div id="listeModeles" style="margin-bottom: 20px;">
                        <!-- Les mod√®les seront affich√©s ici -->
                    </div>
                    
                    <div class="btn-groupe" style="justify-content: flex-end;">
                        <button class="btn btn-annuler" onclick="fermerModalModeles()">Fermer</button>
                    </div>
                </div>
            </div>
            
            <!-- R√©sum√© de la pond√©ration -->
            <div style="margin-top: 20px; padding: 10px; background: var(--bleu-tres-pale); 
                 border-radius: 6px; text-align: right;">
                <strong>Total des pond√©rations : </strong>
                <span id="totalPonderationCriteres" style="font-size: 1.2rem; font-weight: bold;">0%</span>
                <small id="statutPonderationCriteres" style="display: block; margin-top: 5px;"></small>
            </div>
        </div>
    </div>
    
</div><!--fin sous-section grille-criteres-->

<!-- Sous-section : √âchelle de performance -->
<div id="reglages-echelle-performance" class="sous-section">
    <h2>√âchelle de performance</h2>
    <p class="text-muted">Configuration de l'√©chelle de notation pour les PAN/SBG</p>
    
    <!-- CARTE 4 : √âCHELLE DE PERFORMANCE PAN/SBG -->
    <div class="carte">
        <h3>üìà √âchelle de performance (PAN/SBG)</h3>
        
        <!-- Note explicative -->
        <div style="font-size: 0.85rem; color: #666; margin-bottom: 20px; padding: 12px;
             background: var(--bleu-pale); border-radius: 6px; border-left: 3px solid var(--bleu-moyen);">
            <strong>Note :</strong> Cette √©chelle s'applique uniquement aux pratiques alternatives de notation (PAN). 
            La note finale sera convertie en pourcentage pour respecter le RREC.
        </div>
        
        <!-- CONFIGURATION GLOBALE -->
        <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 6px; margin-bottom: 20px;">
            <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">Configuration globale</h4>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                <div class="groupe-form">
                    <label>Type d'√©chelle</label>
                    <select id="typeEchelle" class="controle-form" onchange="changerTypeEchelle()">
                        <option value="lettres">Lettres (A, B, C, D, E)</option>
                        <option value="pourcentage">Pourcentage (0-100%)</option>
                        <option value="autre">Autre (personnalis√©)</option>
                    </select>
                </div>
                
                <div class="groupe-form">
                    <label>Seuil institutionnel de r√©ussite (%)</label>
                    <input type="number" id="seuilReussite" class="controle-form" 
                           value="60" min="0" max="100" onchange="sauvegarderConfigEchelle()">
                </div>
                
                <div class="groupe-form">
                    <label>Note de passage</label>
                    <div id="notePassageContainer">
                        <select id="notePassage" class="controle-form" onchange="sauvegarderConfigEchelle()">
                            <option value="D">D (65%)</option>
                            <option value="C">C (si √©chelle A-F)</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- Champ personnalis√© pour "Autre" (cach√© par d√©faut) -->
            <div id="champAutreEchelle" style="display: none; margin-top: 15px;">
                <div class="groupe-form" style="max-width: 300px;">
                    <label>Codes personnalis√©s (s√©par√©s par des virgules)</label>
                    <input type="text" id="codesPersonnalises" class="controle-form" 
                           placeholder="Ex: Novice, Apprenti, Comp√©tent, Expert"
                           onchange="genererNiveauxPersonnalises()">
                </div>
            </div>
        </div>
        
        <!-- TABLEAU DES NIVEAUX -->
        <div style="background: white; border: 1px solid var(--bleu-leger); border-radius: 6px; padding: 15px;">
            <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">Niveaux de performance</h4>
            
            <div id="tableauNiveaux">
                <!-- Les niveaux seront g√©n√©r√©s ici -->
            </div>
            
            <!-- Bouton de r√©initialisation -->
            <div class="btn-groupe mt-3" style="justify-content: space-between;">
                <button class="btn btn-principal" onclick="reinitialiserNiveauxDefaut()">
                    üîÑ R√©initialiser aux valeurs par d√©faut
                </button>
                <button class="btn btn-confirmer" onclick="sauvegarderNiveaux()">
                    üíæ Sauvegarder l'√©chelle
                </button>
            </div>
        </div>
        
        <!-- Visualisation de l'√©chelle -->
        <div style="margin-top: 20px; padding: 15px; background: var(--vert-pale); 
             border-radius: 6px; border: 1px solid var(--vert-leger);">
            <h5 style="color: var(--vert-leger); margin-bottom: 10px;">Aper√ßu de l'√©chelle</h5>
            <div id="apercuEchelle" style="display: flex; justify-content: space-between; 
                 align-items: center; padding: 10px; background: white; border-radius: 4px;">
                <!-- L'aper√ßu sera g√©n√©r√© ici -->
            </div>
        </div>
    </div>

ATTENDU : 

FORMAT : Patch minimal uniquement