014-Demande

CONTEXTE : Application de monitorage pédagogique (index3.html). Nous développons l'onglet «calendrier» dans «Réglages». Les boutons ne sont pas fonctionnels.

OBJECTIF : Dans les deux formulaires d'absence prévue et imprévue, le bouton «Ajouter l'événement» doit permettre d'afficher les nouvelles informations enregistrées et de les sauvegarder dans LocalStorage. Je voudrais également que cette information affichée soit «read only» et qu'une case à cocher permettent de la déverrouiller. Un bouton «Modifier» doit permettent de revenir au formulaire.

ZONES AUTORISÉES : 
- NE PAS toucher aux autres éléments de contenu

NOMS STABLES : INTOUCHABLES

CODE ACTUEL :
<!-- AMÉNAGEMENTS -->
                    <div class="carte mt-3">
                        <h3>Aménagements</h3>

                        <h4 class="mt-2">Congés fériés et activités institutionnelles</h4>
                        <p class="text-muted" style="font-size: 0.85rem;">Congés fériés, journée
                            Carrière, etc. avec leurs reprises précvues au calendrier</p>

                        <div id="congesPrevusContainer" style="margin-bottom: 20px;">
                            <!-- Les événements existants seront affichés ici -->
                        </div>

                        <!-- FORMULAIRE D'AJOUT (caché par défaut) -->
                        <div id="formAjoutPrevu"
                            style="display: none; padding: 15px; background: var(--vert-pale); border: 1px solid var(--vert-leger); border-radius: 6px; margin-bottom: 20px;">
                            <strong style="color: var(--vert-leger);">Nouvel événement prévu</strong>
                            
                            <!-- TOUS LES CHAMPS SUR UNE LIGNE -->
                            <div style="display: grid; grid-template-columns: 1fr 2fr 1.5fr 1fr; gap: 10px; margin-top: 15px; align-items: end;">
                                <div class="groupe-form">
                                    <label style="font-size: 0.85rem;">Date événement</label>
                                    <input type="date" class="controle-form" id="nouvelleDatePrevu">
                                </div>
                                    <div class="groupe-form">
                                        <label>Description :</label>
                                        <select class="controle-form" id="nouvelleDescriptionPrevu">
                                            <option>Choisir...</option>
                                            <option>Fête du travail (férié)</option>
                                            <option>Action de grâce (férié)</option>
                                            <option>Journée carrière</option>
                                            <option>Vendredi saint (férié)</option>
                                            <option>Lundi de Pâques (férié)</option>
                                            <option>Fête de la Saint-Patrick (férié)</option>
                                        </select>
                                    </div>
                                <div class="groupe-form">
                                    <label style="font-size: 0.85rem;">Reprise prévue</label>
                                    <select class="controle-form" id="nouvelHoraireReprisePrevu">
                                        <option>Choisir...</option>
                                        <option>Horaire du lundi</option>
                                        <option>Horaire du mardi</option>
                                        <option>Horaire du mercredi</option>
                                        <option>Horaire du jeudi</option>
                                        <option>Horaire du vendredi</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label style="font-size: 0.85rem;">Date reprise</label>
                                    <input type="date" class="controle-form" id="nouvelleDateReprisePrevu">
                                </div>
                            </div>
                            
                            <div class="btn-groupe mt-2" style="justify-content: flex-end;">
                                <button class="btn btn-annuler" onclick="annulerAjoutPrevu()">Annuler</button>
                                <button class="btn btn-confirmer" onclick="confirmerAjoutPrevu()">Ajouter l'événement</button>
                            </div>
                        </div>

                        <button id="btnAjouterPrevu" class="btn btn-ajouter"
                            onclick="afficherFormulaireAjoutPrevu()">+ Ajouter un événement prévu</button>

                        <!-- AJOUTER après le bouton "Ajouter un événement prévu" et avant </div> de la carte: -->

                        <h4 class="mt-3">Événements imprévus</h4>
                        <p class="text-muted" style="font-size: 0.85rem;">Maladie, conditions météorologiques, urgence,
                            autre, etc.</p>

                        <div id="evenementsImprevusContainer" style="margin-bottom: 20px;">
                            <!-- Les événements imprévus existants seront affichés ici -->
                            <p class="text-muted" style="font-style: italic;">Aucun événement imprévu déclaré.</p>
                        </div>

                        <!-- FORMULAIRE D'AJOUT ÉVÉNEMENT IMPRÉVU (caché par défaut) -->
                        <div id="formAjoutEvenementImprevu"
                            style="display: none; padding: 15px; background: #fff4e6; border: 2px solid var(--orange-accent); border-radius: 6px; margin-bottom: 20px;">
                            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                                <span style="color: var(--orange-accent); font-weight: bold; margin-right: 10px;">⚠</span>
                                <strong style="color: var(--orange-accent);">Nouvel événement imprévu</strong>
                            </div>
                            
                            <p style="font-size: 0.75rem; color: #666; margin-bottom: 10px;">
                                Pour les événements imprévus, la reprise peut être planifiée après coup selon les circonstances.
                            </p>
                            
                            <!-- TOUS LES CHAMPS SUR UNE LIGNE -->
                            <div style="display: grid; grid-template-columns: 1fr 1.5fr 1.5fr 1fr; gap: 10px; align-items: end;">
                                <div class="groupe-form">
                                    <label style="font-size: 0.85rem;">Date événement</label>
                                    <input type="date" class="controle-form" id="nouvelleDateImprevu">
                                </div>
                                <div class="groupe-form">
                                    <label style="font-size: 0.85rem;">Description</label>
                                    <select class="controle-form" id="nouvelleDescriptionImprevu">
                                        <option>Choisir...</option>
                                        <option>Maladie</option>
                                        <option>Météo</option>
                                        <option>Urgence</option>
                                        <option>Autre</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label style="font-size: 0.85rem;">Reprise (optionnelle)</label>
                                    <select class="controle-form" id="nouvelHoraireRepriseImprevu">
                                        <option>Choisir...</option>
                                        <option>Le cours n'est pas repris</option>
                                        <option>Le cours est repris</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label style="font-size: 0.85rem;">Date reprise</label>
                                    <input type="date" class="controle-form" id="nouvelleDateRepriseImprevu">
                                </div>
                            </div>
                            
                            <div class="btn-groupe mt-2" style="justify-content: flex-end;">
                                <button class="btn btn-annuler" onclick="annulerAjoutEvenementImprevu()">Annuler</button>
                                <button class="btn btn-confirmer" onclick="confirmerAjoutEvenementImprevu()">Ajouter l'événement</button>
                            </div>
                        </div>

                        <button id="btnAjouterEvenementImprevu" class="btn btn-ajouter"
                            onclick="afficherFormulaireAjoutEvenementImprevu()">+ Ajouter un événement imprévu</button>
                    </div>

                    <div class="btn-groupe mt-3">
                        <button class="btn btn-confirmer">Sauvegarder le cadre général du calendrier</button>
                    </div>

                      



ATTENDU : Les informations entrées par l'utilisateur peuvent être sauvegardées, verrouillées, déverrouillées, modifiées, enregistrées à nouveau.

FORMAT : Patch minimal uniquement