042-Demande

CONTEXTE : Application de monitorage p√©dagogique (index3.html). Nous avons d√©velopp√© plusieurs onglets dans la sous-navigation des R√©glages. Ces sections servent √† d√©finir des param√®tres qui serviront dans les sections √âtudiant¬∑es, Pr√©sences, √âvaluations. Nous sommes pr√©sentement dans l'onglet sous-nav ¬´Grille de crit√®res d'√©valuation¬ª de la nav ¬´R√©glages¬ª. 

OBJECTIF : 
- Le bouton ¬´Ajouter¬ª ne fonctionne pas.


ZONES AUTORIS√âES : NE PAS toucher aux autres √©l√©ments de contenu

NOMS STABLES : Respecter et conserver tous les noms dans NOMS_STABLES.json - AUCUN renommage

CODE : 

                    <!-- Sous-section : Grilles de crit√®res -->
                    <div id="reglages-grille-criteres" class="sous-section">
                        <h2>Crit√®res d'√©valuation et grilles</h2>
                        <p class="text-muted">D√©finir les crit√®res d'√©valuation pour chaque travail. Un ensemble de crit√®res constitue une grille.</p>

                        <!-- CARTE 3 : GRILLES DE CRIT√àRES -->
                        <div class="carte">
                            <h3>üìä Configuration des crit√®res d'√©valuation et des grilles</h3>

                            <!-- S√©lecteur d'√©valuation -->
                            <div class="groupe-form" style="max-width: 400px; margin-bottom: 20px;">
                                <label>S√©lectionner une production √† √©valuer :</label>
                                <select id="selectEvalCriteres" class="controle-form" onchange="chargerCriteres()">
                                    <option value="">-- Choisir une production --</option>
                                </select>
                            </div>

                            <!-- Message si aucune √©valuation s√©lectionn√©e -->
                            <div id="aucuneEvalSelectionnee" style="padding: 20px; background: var(--bleu-tres-pale); 
             border-radius: 6px; text-align: center; color: var(--bleu-leger);">
                                <p>S√©lectionnez une production pour configurer ses crit√®res d'√©valuation</p>
                            </div>

                            <!-- Conteneur des crit√®res (cach√© par d√©faut) -->
                            <div id="criteresContainer" style="display: none;">
                                <!-- Liste des crit√®res existants -->
                                <div id="listeCriteres" style="margin-bottom: 20px;">
                                    <!-- Les crit√®res seront affich√©s ici -->
                                </div>

                                <!-- Formulaire d'ajout de crit√®re (cach√© par d√©faut) -->
                                <div id="formAjoutCritere" style="display: none; padding: 15px; background: var(--bleu-pale); 
                 border: 1px solid var(--bleu-leger); border-radius: 6px; margin-bottom: 20px;">

                                    <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">Nouveau crit√®re</h4>

                                    <div
                                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                        <div class="groupe-form">
                                            <label>Nom du crit√®re *</label>
                                            <input type="text" id="critereNom" class="controle-form"
                                                placeholder="Ex: Qualit√© de l'argumentation">
                                        </div>
                                        <div class="groupe-form">
                                            <label>Pond√©ration relative (%)</label>
                                            <input type="number" id="criterePonderation" class="controle-form" min="0"
                                                max="100" placeholder="Ex: 25">
                                        </div>
                                    </div>

                                    <div class="groupe-form" style="margin-bottom: 15px;">
                                        <label>Description</label>
                                        <textarea id="critereDescription" class="controle-form" rows="3"
                                            placeholder="Description d√©taill√©e du crit√®re..."></textarea>
                                    </div>

                                    <div class="groupe-form" style="margin-bottom: 15px;">
                                        <label>Type de crit√®re</label>
                                        <select id="critereType" class="controle-form"
                                            onchange="afficherChampFormule()">
                                            <option value="holistique">Holistique (jugement global)</option>
                                            <option value="analytique">Analytique (points par √©l√©ment)</option>
                                            <option value="algorithmique">Algorithmique (calcul automatique)</option>
                                        </select>
                                    </div>

                                    <!-- Champ formule (cach√© par d√©faut) -->
                                    <div id="champFormule" class="groupe-form"
                                        style="display: none; margin-bottom: 15px;">
                                        <label>Formule de calcul</label>
                                        <input type="text" id="critereFormule" class="controle-form"
                                            placeholder="Ex: (nb_erreurs / nb_mots) * 100">
                                        <small style="color: var(--bleu-leger);">
                                            Pour le fran√ßais √©crit : nombre d'erreurs / nombre de mots
                                        </small>
                                    </div>

                                    <div class="btn-groupe" style="justify-content: flex-end;">
                                        <button class="btn btn-annuler" onclick="annulerAjoutCritere()">Annuler</button>
                                        <button class="btn btn-confirmer" onclick="sauvegarderCritere()">
                                            <span id="btnTexteCritere">Ajouter</span>
                                        </button>
                                    </div>
                                </div>

                                <!-- Boutons d'actions -->
                                <div class="btn-groupe" style="justify-content: space-between; margin-bottom: 20px;">
                                    <div>
                                        <button id="btnAjouterCritere" class="btn btn-ajouter"
                                            onclick="afficherFormCritere()">
                                            + Ajouter un crit√®re
                                        </button>
                                    </div>
                                    <div>
                                        <button class="btn btn-principal" onclick="afficherGrillesCriteres()"
                                            style="margin-right: 10px;">
                                            üìã Appliquer une grille existante
                                        </button>
                                        <button class="btn btn-confirmer" onclick="enregistrerCommeGrille()">
                                            üíæ Enregistrer comme grille
                                        </button>
                                    </div>
                                </div>

                                <!-- Modal pour les mod√®les (cach√© par d√©faut) -->
                                <div id="modalGrilles" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
                 background: rgba(0,0,0,0.5); z-index: 1000;">
                                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                     background: white; padding: 30px; border-radius: 8px; max-width: 600px; width: 90%; 
                     max-height: 80vh; overflow-y: auto;">
                                        <h3 style="margin-bottom: 20px; color: var(--bleu-principal);">Mod√®les de
                                            crit√®res
                                            disponibles</h3>

                                        <div id="listeGrilles" style="margin-bottom: 20px;">
                                            <!-- Les mod√®les seront affich√©s ici -->
                                        </div>

                                        <div class="btn-groupe" style="justify-content: flex-end;">
                                            <button class="btn btn-annuler"
                                                onclick="fermerModalGrilles()">Fermer</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- R√©sum√© de la pond√©ration -->
                                <div style="margin-top: 20px; padding: 10px; background: var(--bleu-tres-pale); 
                 border-radius: 6px; text-align: right;">
                                    <strong>Total des pond√©rations : </strong>
                                    <span id="totalPonderationCriteres"
                                        style="font-size: 1.2rem; font-weight: bold;">0%</span>
                                    <small id="statutPonderationCriteres"
                                        style="display: block; margin-top: 5px;"></small>
                                </div>
                            </div>
                        </div>

                    </div><!--fin sous-section grille-criteres-->

ATTENDU : 

FORMAT : Patch minimal uniquement