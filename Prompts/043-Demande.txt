043-Demande

CONTEXTE : Application de monitorage p√©dagogique (index3.html). Nous avons d√©velopp√© plusieurs onglets dans la sous-navigation des R√©glages. Ces sections servent √† d√©finir des param√®tres qui serviront dans les sections √âtudiant¬∑es, Pr√©sences, √âvaluations. Nous sommes pr√©sentement dans l'onglet sous-nav ¬´Grille de crit√®res d'√©valuation¬ª de la nav ¬´R√©glages¬ª. La logique actuelle est probl√©matique : on cr√©e des crit√®res d'√©valuation et on les associe directement √† une production √©tudiante. Je voudrais plut√¥t cr√©er des templates de grilles de crit√®res qui peuvent √™tre r√©utilis√©es pour plusieurs productions dans la section ¬´√âvaluations¬ª.

OBJECTIF :
- On cr√©e des grilles de crit√®res r√©utilisables (ex: "Grille analyse litt√©raire", "Grille dissertation", etc.)
R√©glages > planification des √©valuations : On d√©finit les productions (Artefact 1, Analyse 2, etc.)
√âvaluations : On s√©lectionne un √©tudiant + une production ‚Üí √ßa charge automatiquement la grille associ√©e

Changements n√©cessaires :
1. Dans R√©glages > Grilles de crit√®res : u lieu de "S√©lectionner une production √† √©valuer"
Mettre "Cr√©er/modifier une grille d'√©valuation". Les grilles deviennent des templates r√©utilisables

2. Dans R√©glages > Planification des √©valuations : Ajouter un champ "Grille √† utiliser" pour chaque √©valuation. Permettre de s√©lectionner parmi les grilles cr√©√©es.

3. Dans √âvaluations individuelles : Quand on s√©lectionne une production, √ßa charge automatiquement la grille qui lui est associ√©e.


ZONES AUTORIS√âES : NE PAS toucher aux autres √©l√©ments de contenu

NOMS STABLES : Respecter et conserver tous les noms dans NOMS_STABLES.json - AUCUN renommage

CODE : 

<!-- Sous-section : Planification des √©valuations -->
                <div id="reglages-liste-evaluations" class="sous-section">
                    <h2>Planification des √©valuations</h2>
                    <p class="text-muted">D√©finir les √©valuations du cours et leurs pond√©rations</p>

                    <!-- CARTE 2 : D√âFINITION DES √âVALUATIONS -->
                    <div class="carte">
                        <h3>üìù Planification des √©valuations</h3>

                        <!-- VUE D'ENSEMBLE -->
                        <div class="grille-statistiques" style="margin-bottom: 20px;">
                            <div class="carte-metrique">
                                <strong id="nombreEvaluations">0</strong>
                                <span>√âvaluations</span>
                            </div>
                            <div class="carte-metrique">
                                <strong id="ponderationTotale">0%</strong>
                                <span>Total</span>
                                <small id="statutPonderation" style="display: block; margin-top: 5px;"></small>
                            </div>
                            <div class="carte-metrique" style="grid-column: span 2;">
                                <span id="typesEvaluations" style="font-size: 0.9rem;">
                                    Aucune √©valuation configur√©e
                                </span>
                            </div>
                        </div>

                        <!-- TABLEAU/CONTENEUR DES √âVALUATIONS -->
                        <div id="tableauEvaluationsContainer" style="margin-bottom: 20px;">
                            <p class="text-muted" id="aucuneEvaluation" style="font-style: italic;">Aucune
                                √©valuation
                                d√©finie.
                            </p>
                        </div>

                        <!-- FORMULAIRE D'AJOUT/MODIFICATION (cach√© par d√©faut) -->
                        <div id="formulaireEvaluation" style="display: none; margin-top: 20px; padding: 15px; 
     background: var(--bleu-pale); border-radius: 6px;">

                            <h4 id="titreFormEvaluation" style="color: var(--bleu-principal); margin-bottom: 15px;">
                                Nouvelle √©valuation
                            </h4>

                            <!-- Premi√®re ligne : Titre et Description sur la m√™me ligne -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                <div class="groupe-form">
                                    <label>Titre de l'√©valuation</label>
                                    <input type="text" id="evalTitre" class="controle-form"
                                        placeholder="Ex: Analyse litt√©raire #1">
                                </div>
                                <div class="groupe-form">
                                    <label>Description</label>
                                    <input type="text" id="evalDescription" class="controle-form"
                                        placeholder="Ex: Strat√©gies de lecture">
                                </div>
                            </div>

                            <!-- Deuxi√®me ligne : Type, Pond√©ration et Code -->
                            <div
                                style="display: grid; grid-template-columns: 1.5fr 150px 100px; gap: 15px; margin-bottom: 15px;">
                                <div class="groupe-form">
                                    <label>Type</label>
                                    <select id="evalType" class="controle-form">
                                        <option value="">Choisir...</option>
                                        <option value="examen">Examen</option>
                                        <option value="travail">Travail √©crit</option>
                                        <option value="quiz">Quiz/Test</option>
                                        <option value="presentation">Pr√©sentation</option>
                                        <option value="portfolio">Portfolio</option>
                                        <option value="autre">Autre</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Pond√©ration (%)</label>
                                    <input type="number" id="evalPonderation" class="controle-form" min="0" max="100"
                                        step="5" placeholder="Ex: 20">
                                </div>
                                <div class="groupe-form">
                                    <label>Code</label>
                                    <input type="text" id="evalCode" class="controle-form" placeholder="EV1" readonly
                                        style="background: #f0f0f0;">
                                </div>
                            </div>

                            <!-- Troisi√®me ligne : Objectif -->
                            <div class="groupe-form" style="margin-bottom: 15px;">
                                <label>Objectif</label>
                                <textarea id="evalObjectif" class="controle-form" rows="2"
                                    placeholder="Ex: D√©velopper sa capacit√© √† utiliser efficacement diff√©rentes strat√©gies de lecture et √† documenter de mani√®re claire et m√©thodique son processus d'analyse."></textarea>
                            </div>

                            <!-- Quatri√®me ligne : T√¢che -->
                            <div class="groupe-form" style="margin-bottom: 15px;">
                                <label>T√¢che</label>
                                <textarea id="evalTache" class="controle-form" rows="2"
                                    placeholder="Ex: Appliquer au moins trois strat√©gies de lecture diff√©rentes sur un texte litt√©raire et laisser des traces visibles et organis√©es de cette analyse."></textarea>
                            </div>

                            <div class="btn-groupe mt-2" style="justify-content: flex-end;">
                                <button class="btn btn-annuler" onclick="annulerFormEvaluation()">Annuler</button>
                                <button class="btn btn-confirmer" onclick="sauvegarderEvaluation()">
                                    <span id="btnTexteEvaluation">Ajouter</span>
                                </button>
                            </div>
                        </div><!-- Fin du formulaireEvaluation -->

                        <button id="btnAjouterEvaluation" class="btn btn-ajouter mt-2"
                            onclick="afficherFormEvaluation()">
                            + Ajouter une √©valuation
                        </button>

                    </div><!-- Fin de la carte -->

                </div><!--fin sous-section liste-evaluations-->

                <!-- Sous-section : Grilles de crit√®res -->
                <div id="reglages-grille-criteres" class="sous-section">
                    <h2>Crit√®res d'√©valuation et grilles</h2>
                    <p class="text-muted">D√©finir les crit√®res d'√©valuation pour chaque travail. Un ensemble de crit√®res
                        constitue une grille.</p>

                    <!-- CARTE 3 : GRILLES DE CRIT√àRES -->
                    <div class="carte">
                        <h3>üìä Configuration des crit√®res d'√©valuation et des grilles</h3>

                        <!-- S√©lecteur d'√©valuation -->
                        <div class="groupe-form" style="max-width: 400px; margin-bottom: 20px;">
                            <label>S√©lectionner une production √† √©valuer :</label>
                            <select id="selectEvalCriteres" class="controle-form" onchange="chargerCriteres()">
                                <option value="">-- Choisir une production --</option>
                            </select>
                        </div>

                        <!-- Message si aucune √©valuation s√©lectionn√©e -->
                        <div id="aucuneEvalSelectionnee" style="padding: 20px; background: var(--bleu-tres-pale); 
             border-radius: 6px; text-align: center; color: var(--bleu-leger);">
                            <p>S√©lectionnez une production pour configurer ses crit√®res d'√©valuation</p>
                        </div>

                        <!-- Conteneur des crit√®res (cach√© par d√©faut) -->
                        <div id="criteresContainer" style="display: none;">
                            <!-- Liste des crit√®res existants -->
                            <div id="listeCriteres" style="margin-bottom: 20px;">
                                <!-- Les crit√®res seront affich√©s ici -->
                            </div>

                            <!-- Formulaire d'ajout de crit√®re (cach√© par d√©faut) -->
                            <div id="formAjoutCritere" style="display: none; padding: 15px; background: var(--bleu-pale); 
                 border: 1px solid var(--bleu-leger); border-radius: 6px; margin-bottom: 20px;">

                                <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">Nouveau crit√®re</h4>

                                <div
                                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                    <div class="groupe-form">
                                        <label>Nom du crit√®re *</label>
                                        <input type="text" id="critereNom" class="controle-form"
                                            placeholder="Ex: Qualit√© de l'argumentation">
                                    </div>
                                    <div class="groupe-form">
                                        <label>Pond√©ration relative (%)</label>
                                        <input type="number" id="criterePonderation" class="controle-form" min="0"
                                            max="100" placeholder="Ex: 25">
                                    </div>
                                </div>

                                <div class="groupe-form" style="margin-bottom: 15px;">
                                    <label>Description</label>
                                    <textarea id="critereDescription" class="controle-form" rows="3"
                                        placeholder="Description d√©taill√©e du crit√®re..."></textarea>
                                </div>

                                <div class="groupe-form" style="margin-bottom: 15px;">
                                    <label>Type de crit√®re</label>
                                    <select id="critereType" class="controle-form" onchange="afficherChampFormule()">
                                        <option value="holistique">Holistique (jugement global)</option>
                                        <option value="analytique">Analytique (points par √©l√©ment)</option>
                                        <option value="algorithmique">Algorithmique (calcul automatique)</option>
                                    </select>
                                </div>

                                <!-- Champ formule (cach√© par d√©faut) -->
                                <div id="champFormule" class="groupe-form" style="display: none; margin-bottom: 15px;">
                                    <label>Formule de calcul</label>
                                    <input type="text" id="critereFormule" class="controle-form"
                                        placeholder="Ex: (nb_erreurs / nb_mots) * 100">
                                    <small style="color: var(--bleu-leger);">
                                        Pour le fran√ßais √©crit : nombre d'erreurs / nombre de mots
                                    </small>
                                </div>

                                <div class="btn-groupe" style="justify-content: flex-end;">
                                    <button class="btn btn-annuler" onclick="annulerAjoutCritere()">Fermer</button>
                                    <button class="btn btn-principal" onclick="sauvegarderEtFermer()"
                                        style="margin-left: 10px;">
                                        Ajouter et fermer
                                    </button>
                                    <button class="btn btn-confirmer" onclick="sauvegarderCritere()"> <span
                                            id="btnTexteCritere">Ajouter et continuer</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Boutons d'actions -->
                            <div class="btn-groupe" style="justify-content: space-between; margin-bottom: 20px;">
                                <div>
                                    <button id="btnAjouterCritere" class="btn btn-ajouter"
                                        onclick="afficherFormCritere()">
                                        + Ajouter un crit√®re
                                    </button>
                                </div>
                                <div>
                                    <button class="btn btn-principal" onclick="afficherGrillesCriteres()"
                                        style="margin-right: 10px;">
                                        üìã Appliquer une grille existante
                                    </button>
                                    <button class="btn btn-confirmer" onclick="enregistrerCommeGrille()">
                                        üíæ Enregistrer comme grille
                                    </button>
                                </div>
                            </div>

                            <!-- Modal pour les mod√®les (cach√© par d√©faut) -->
                            <div id="modalGrilles" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
                 background: rgba(0,0,0,0.5); z-index: 1000;">
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                     background: white; padding: 30px; border-radius: 8px; max-width: 600px; width: 90%; 
                     max-height: 80vh; overflow-y: auto;">
                                    <h3 style="margin-bottom: 20px; color: var(--bleu-principal);">Mod√®les de
                                        crit√®res
                                        disponibles</h3>

                                    <div id="listeGrilles" style="margin-bottom: 20px;">
                                        <!-- Les mod√®les seront affich√©s ici -->
                                    </div>

                                    <div class="btn-groupe" style="justify-content: flex-end;">
                                        <button class="btn btn-annuler" onclick="fermerModalGrilles()">Fermer</button>
                                    </div>
                                </div>
                            </div>

                            <!-- R√©sum√© de la pond√©ration -->
                            <div style="margin-top: 20px; padding: 10px; background: var(--bleu-tres-pale); 
                 border-radius: 6px; text-align: right;">
                                <strong>Total des pond√©rations : </strong>
                                <span id="totalPonderationCriteres"
                                    style="font-size: 1.2rem; font-weight: bold;">0%</span>
                                <small id="statutPonderationCriteres" style="display: block; margin-top: 5px;"></small>
                            </div>
                        </div>
                    </div>

                </div><!--fin sous-section grille-criteres-->

ATTENDU : 

FORMAT : Patch minimal uniquement