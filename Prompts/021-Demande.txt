021-Demande

CONTEXTE : Application de monitorage p√©dagogique (index3.html). Nous d√©veloppons l'onglet ¬´Groupe¬ª dans ¬´√âtudiant¬∑es¬ª. Cette section permet de cr√©er le groupe d'√©l√®ves inscrits au cours.

OBJECTIF : Nous allons cr√©er une section qui permet : d'importer une liste d'√©tudiants inscrits, de copier-coller une liste d'√©tudiants inscrits, d'ajouter manuellement chacun des √©tudiants inscrits. Voir capture d'√©cran. Le code existait dans une autre version.

ZONES AUTORIS√âES : 
- NE PAS toucher aux autres √©l√©ments de contenu

NOMS STABLES : INTOUCHABLES

CODE ACTUEL :

        <!-- CONTENEUR : Cr√©ation du groupe -->
        <div id="students-content-creation" style="display: none;">
            <!-- SECTION : Importation de liste -->
            <div class="settings-section">
                <h3>
                    üìÅ Importation par lots (liste d'√©tudiant¬∑es)

                </h3>
                <div id="importEtudiants" style="padding: 20px;">
                    <div
                        style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--form-gap); margin-bottom: var(--form-margin-bottom);">
                        <button onclick="importFromFile()" class="btn-settings">
                            üìÑ Fichier CSV/TSV
                        </button>
                        <button onclick="importFromPaste()" class="btn-settings">
                            üìã Copier-coller
                        </button>
                    </div>

                    <!-- Zone d'upload de fichier -->
                    <div id="fileUploadZone" style="display: none; margin-bottom: 20px;">
                        <p style="margin-bottom: 10px; color: #666; font-size: 0.9rem;">
                            Glissez votre fichier CSV/TSV ici ou cliquez pour le s√©lectionner
                        </p>
                        <div style="border: 2px dashed #ddd; border-radius: 8px; padding: 40px; text-align: center; cursor: pointer; transition: all 0.3s ease;"
                            id="dropZone" onclick="document.getElementById('csvFileInput').click()">
                            <div style="font-size: 3rem; margin-bottom: 10px; color: #ccc;">üìÅ</div>
                            <p style="color: #666;">Cliquez ici pour choisir un fichier</p>
                            <p style="font-size: 0.8rem; color: #999; margin-top: 5px;">Formats accept√©s: .csv,
                                .tsv
                            </p>
                        </div>
                        <input type="file" id="csvFileInput" accept=".csv,.tsv,.txt" style="display: none;"
                            onchange="handleFileSelect(event)">
                    </div>

                    <!-- Zone de copier-coller -->
                    <div id="pasteZone" style="display: none; margin-bottom: 20px;">
                        <div class="form-group">
                            <label>Collez vos donn√©es ici (format CSV/TSV) :</label>
                            <textarea id="pastedData" class="form-control" rows="8"
                                placeholder="No de DA&#9;Groupe&#9;Nom de l'√©tudiant&#9;Pr√©nom de l'√©tudiant&#9;Prog.&#9;Services adapt√©s&#10;1234567&#9;1&#9;Beaulieu&#9;Emma&#9;180.B0&#9;&#10;1234570&#9;1&#9;B√©langer&#9;Jacob&#9;300.M0&#9;"
                                style="font-family: monospace; font-size: 0.9rem;"></textarea>
                        </div>
                        <button onclick="parseDataFromTextarea()" class="btn-settings">
                            üîç Analyser les donn√©es
                        </button>
                    </div>

                    <!-- Zone de pr√©visualisation -->
                    <div id="previewZone" style="display: none; margin-bottom: 20px;">
                        <h4>Pr√©visualisation des donn√©es √† importer :</h4>
                        <div id="previewTable"
                            style="background: #f8f9fa; padding: 15px; border-radius: 8px; overflow-x: auto; margin-bottom: 15px;">
                        </div>
                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button onclick="cancelImport()" class="btn-settings btn-secondary">
                                Annuler
                            </button>
                            <button onclick="confirmImport()" class="btn-settings">
                                Importer (<span id="importCount">0</span> √©tudiant¬∑es)
                            </button>
                        </div>
                    </div>

                    <!-- Format attendu -->
                    <div
                        style="background: var(--blue-very-pale); padding: 15px; border-radius: 8px; margin-top: 20px;">
                        <h5>Format attendu :</h5>
                        <p style="font-family: monospace; font-size: 0.85rem; margin-bottom: 10px;">
                            DA | Groupe | Nom, Pr√©nom | Programme | Services adapt√©s
                        </p>
                        <details style="margin-top: 10px;">
                            <summary style="cursor: pointer; color: var(--blue-primary); font-weight: 600;">
                                üí° Voir le guide d'exportation depuis votre LMS
                            </summary>
                            <div style="margin-top: 10px; font-size: 0.9rem; color: #666;">
                                <ol>
                                    <li>Connectez-vous √† L√©a (LMS)</li>
                                    <li>Allez dans votre cours ‚Üí Participants</li>
                                    <li>Cliquez sur "T√©l√©charger" ou "Exporter"</li>
                                    <li>Choisissez le format CSV ou Excel</li>
                                    <li>Importez le fichier ici</li>
                                </ol>
                            </div>
                        </details>
                    </div>
                </div>
            </div>

            <!-- Section d'ajout manuel -->
            <div class="settings-section">
                <h3>
                    + Ajouter un¬∑e √©tudiant¬∑e manuellement

                </h3>
                <div id="ajoutEtudiants" style="padding: 20px;">
                    <!-- Ligne 1: DA, Groupe, Nom, Pr√©nom, Programme (5 colonnes) -->
                    <div
                        style="display: grid; grid-template-columns: 140px 80px 1fr 1fr 140px; gap: var(--form-gap); margin-bottom: var(--form-margin-bottom);">
                        <div class="form-group">
                            <label>Num√©ro de DA :</label>
                            <input type="text" id="studentDA" class="form-control" placeholder="Ex: 1234567"
                                style="width: 100%;">
                        </div>
                        <div class="form-group">
                            <label>Groupe :</label>
                            <input type="text" id="studentGroupe" class="form-control" placeholder="Ex: 1, A1..."
                                style="width: 100%;">
                        </div>
                        <div class="form-group">
                            <label>Nom de famille :</label>
                            <input type="text" id="studentNom" class="form-control" placeholder="Nom de famille"
                                required>
                        </div>
                        <div class="form-group">
                            <label>Pr√©nom :</label>
                            <input type="text" id="studentPrenom" class="form-control" placeholder="Pr√©nom" required>
                        </div>
                        <div class="form-group">
                            <label>Programme :</label>
                            <input type="text" id="studentProgramme" class="form-control" placeholder="Ex: 200.B0...">
                        </div>
                    </div>

                    <!-- Ligne 2: Services adapt√©s et Centre d'aide (2 colonnes) -->
                    <div
                        style="display: grid; grid-template-columns: 200px 200px; gap: var(--form-gap); margin-bottom: var(--form-margin-bottom);">
                        <div class="form-group">
                            <label>Services adapt√©s :</label>
                            <select id="studentSA" class="form-control">
                                <option value="">Non</option>
                                <option value="Oui">Oui</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Centre d'aide en fran√ßais :</label>
                            <select id="studentCAF" class="form-control">
                                <option value="">Non</option>
                                <option value="Oui">Oui</option>
                            </select>
                        </div>
                    </div>

                    <div style="font-size: 0.85rem; color: #666; margin-bottom: 15px;">
                        üí° Seuls le nom et pr√©nom sont obligatoires - les autres champs seront g√©n√©r√©s
                        automatiquement si laiss√©s vides.
                    </div>

                    <button onclick="addStudent()" class="btn">+ Ajouter</button>
                </div>
            </div>


        </div>
        <!-- CONTENEUR : Liste des √©l√®ves -->
        <div id="students-content-liste" style="display: none;">
            <h3>üìã Liste des √©tudiant¬∑es</h3>
            <div id="students-list-container">
                <!-- La liste sera g√©n√©r√©e ici dynamiquement -->
                <div id="students-list">
                    <!-- Le tableau des √©tudiants sera ins√©r√© ici par JavaScript -->
                </div>

                <!-- Gestion des donn√©es √©tudiantes -->
                <div class="settings-section-fixed">
                    <h3>Gestion des donn√©es √©tudiantes</h3>
                    <div class="data-actions">
                        <button onclick="exportStudentsData()" class="btn-settings">
                            Exporter la liste des √©tudiant¬∑es
                        </button>
                        <button onclick="exportStudentsFullData()" class="btn-settings">
                            Exporter donn√©es compl√®tes
                        </button>
                        <button onclick="resetStudentsData()" class="btn-settings btn-danger">
                            R√©initialiser les √©tudiant¬∑es
                        </button>
                    </div>
                </div>
            </div>
        </div>





        <!-- Zone de modification -->
        <div id="edit-student-zone"
            style="display: none; background: var(--blue-pale); padding: var(--section-padding); border-radius: 12px; margin-bottom: 20px; border: 1px solid #d0e7f9;">
            <h4>Modifier les informations de l'√©tudiant¬∑e</h4>

            <!-- Ligne 1: DA | Groupe | Nom | Pr√©nom | Programme -->
            <div
                style="display: grid; grid-template-columns: 140px 80px 1fr 1fr 140px; gap: var(--form-gap); margin-bottom: var(--form-margin-bottom);">
                <div class="form-group">
                    <label>DA :</label>
                    <input type="text" id="editStudentDA" class="form-control" placeholder="1234567">
                </div>
                <div class="form-group">
                    <label>Groupe :</label>
                    <input type="text" id="editStudentGroupe" class="form-control" placeholder="1">
                </div>
                <div class="form-group">
                    <label>Nom :</label>
                    <input type="text" id="editStudentNom" class="form-control" placeholder="Nom de famille" required>
                </div>
                <div class="form-group">
                    <label>Pr√©nom :</label>
                    <input type="text" id="editStudentPrenom" class="form-control" placeholder="Pr√©nom" required>
                </div>
                <div class="form-group">
                    <label>Programme :</label>
                    <input type="text" id="editStudentProgramme" class="form-control" placeholder="300.M0">
                </div>
            </div>

            <!-- Ligne 2: Services adapt√©s | CAF -->
            <div
                style="display: grid; grid-template-columns: 200px 200px; gap: var(--form-gap); margin-bottom: var(--form-margin-bottom);">
                <div class="form-group">
                    <label>Services adapt√©s :</label>
                    <select id="editStudentSA" class="form-control">
                        <option value="">Non</option>
                        <option value="Oui">Oui</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Centre d'aide en fran√ßais :</label>
                    <select id="editStudentCAF" class="form-control">
                        <option value="">Non</option>
                        <option value="Oui">Oui</option>
                    </select>
                </div>
            </div>


            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button onclick="cancelEditStudent()" class="btn-settings btn-secondary">
                    Annuler
                </button>
                <button onclick="saveEditStudent()" class="btn-settings">
                    Enregistrer les modifications
                </button>
            </div>

            <input type="hidden" id="editStudentId" value="">
        </div>

        <div id="students-list">
            <!-- Liste g√©n√©r√©e dynamiquement -->
        </div>
    </div>


ATTENDU : Voir capture d'√©cran.

FORMAT : Patch minimal uniquement