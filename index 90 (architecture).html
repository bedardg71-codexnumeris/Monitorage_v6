<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Système de suivi Beta 90 - Architecture pratiques de notation</title>

    <!-- AJOUTER CETTE LIGNE -->
    <link rel="stylesheet" href="styles.css?v=2025111409">

    <style>
        /* Les styles embarqués restent ici */
        /* ===============================
           VARIABLES CSS
           =============================== */
        :root {
            /* Palette de couleurs bleues */
            --bleu-principal: #032e5c;
            --bleu-moyen: #0a4d8c;
            --bleu-fonce: #021d3a;
            --bleu-pale: #e8f1f8;
            --bleu-tres-pale: #f4f8fc;
            --bleu-leger: #b8d4e8;
            --bleu-carte: #d0e4f5;

            /* Navigation */
            --sous-nav-bg: #f0f6fb;
            --sous-nav-normal: #0a4d8c;
            --sous-nav-hover: #032e5c;
            --sous-nav-actif: #032e5c;

            /* Accents */
            --orange-accent: #ff6b35;

            /* Statuts et alertes */
            --risque-critique: #dc3545;
            --succes: #28a745;

            /* Espacement */
            --espacement-petit: 8px;
            --espacement-moyen: 15px;
            --espacement-grand: 25px;
        }

        /* ===============================
           RESET ET BASE
           =============================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            width: 100%;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: white;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            width: 100%;
            overflow-x: hidden;
        }

        /* ===============================
           CONTENEUR PRINCIPAL
           =============================== */
        .conteneur {
            width: 100%;
            margin: 0;
            background: white;
            overflow: hidden;
        }

        /* ===============================
           EN-TÊTE
           =============================== */
        /* En-tête : styles définis dans styles.css */
        /* Dégradé bleu avec adaptation aux modes */

        /* ===============================
           NAVIGATION PRINCIPALE
           =============================== */
        /* Navigation principale et sous-navigation : styles définis dans styles.css */
        /* Glassmorphisme avec adaptation aux modes */

        /* OVERRIDE pour sous-navigation - Option B : effet de profondeur */
        /* Adaptation aux modes : la sous-navigation prend la couleur du mode actif */

        /* Mode Normal (par défaut) */
        body[data-mode="normal"] .sous-navigation,
        .sous-navigation {
            background:
                linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0)),
                linear-gradient(135deg, #021d3a 100%, #032e5c 0%) !important;
        }

        /* Mode Anonymisé (plus foncé) */
        body[data-mode="anonymisation"] .sous-navigation {
            background:
                linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0)),
                linear-gradient(135deg, #0a1428 100%, #0f1e3a 0%) !important;
        }

        /* Mode Simulé (teal/sarcelle) */
        body[data-mode="simulation"] .sous-navigation {
            background:
                linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0)),
                linear-gradient(135deg, #0f3a44 100%, #1a5266 0%) !important;
        }

        /* ===============================
           CONTENU PRINCIPAL
           =============================== */
        .contenu {
            padding: var(--espacement-grand);
            min-height: 500px;
        }

        /* ===============================
           SECTIONS ET SOUS-SECTIONS
           =============================== */
        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: apparition 0.3s ease;
        }

        .sous-section {
            display: none;
        }

        .sous-section.active {
            display: block;
            animation: apparition 0.3s ease;
        }

        @keyframes apparition {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===============================
           CARTES
           =============================== */
        .carte {
            background: white;
            border: 1px solid var(--bleu-pale);
            border-radius: 8px;
            padding: var(--espacement-moyen);
            margin-bottom: var(--espacement-moyen);
            box-shadow: 0 2px 8px rgba(3, 46, 92, 0.05);
        }

        .carte h3 {
            color: var(--bleu-principal);
            font-size: 1.1rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--bleu-pale);
        }

        /* ===============================
           BADGES
           =============================== */
        /* Badges définis dans styles.css */

        /* ===============================
           FORMULAIRES
           =============================== */
        .controle-form {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.95rem;
            transition: border-color 0.2s;
        }

        .controle-form:focus {
            outline: none;
            border-color: var(--bleu-principal);
            box-shadow: 0 0 0 3px rgba(3, 46, 92, 0.1);
        }

        .groupe-form {
            margin-bottom: 15px;
        }

        .groupe-form label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--bleu-principal);
        }

        /* ===============================
           TABLEAUX
           =============================== */
        .tableau {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .tableau th {
            background: var(--bleu-pale);
            padding: 10px;
            text-align: left;
            border: 1px solid #ddd;
            font-weight: 600;
            color: var(--bleu-principal);
        }

        .tableau td {
            padding: 10px;
            border: 1px solid #ddd;
        }

        .tableau tr:hover {
            background: var(--bleu-tres-pale);
        }

        /* ===============================
           UTILITAIRES
           =============================== */
        .text-muted {
            color: #6c757d;
        }

        .mt-3 {
            margin-top: 15px;
        }

        .btn-groupe {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        /* ===============================
           NOTIFICATIONS (pour module 14-utilitaires.js)
           =============================== */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(400px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .notification-succes {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 9999;
            animation: slideIn 0.3s ease;
            max-width: 400px;
        }

        .notification-details {
            margin-top: 5px;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* ===============================
           ZONE DE DEBUG
           =============================== */
        .debug-zone {
            background: #f8f9fa;
            border: 2px dashed #6c757d;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .debug-zone h4 {
            color: #6c757d;
            margin-bottom: 10px;
        }

        /* ===============================
           MOTEUR DE RECHERCHE AIDE
           =============================== */
        #aide-recherche-input:focus {
            border-color: var(--bleu-principal);
            box-shadow: 0 0 0 3px rgba(3, 46, 92, 0.1);
        }

        #aide-recherche-clear:hover {
            color: var(--risque-critique);
            transform: translateY(-50%) scale(1.2);
        }

        mark.aide-surlignage {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                background-color: #fff;
            }
            to {
                opacity: 1;
                background-color: #ffeb3b;
            }
        }

        /* Animation des cartes lors du filtrage */
        #section-aide .carte {
            transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
        }

        #section-aide .carte[style*="display: none"] {
            opacity: 0;
            transform: scale(0.98);
        }

        /* ===============================
           CLASSES UTILITAIRES POUR REMPLACER INLINE STYLES
           =============================== */

        /* Titres de cartes avec toggle */
        .carte-titre-avec-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .emoji-container {
            font-size: 1.2rem;
        }

        /* Grille de cartes métriques */
        .grille-cartes-metriques {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        /* Carte métrique individuelle */
        .carte-metrique-bleue {
            background: var(--bleu-tres-pale);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--bleu-principal);
        }

        .carte-metrique-verte {
            background: var(--alerte-fond-succes);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--btn-confirmer);
        }

        .carte-metrique-jaune {
            background: #fffbf0;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--risque-eleve);
        }

        .carte-metrique-orange {
            background: #fff8f0;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--risque-tres-eleve);
        }

        .carte-metrique-rouge {
            background: #fff5f5;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--risque-critique);
        }

        /* Contenu de carte métrique */
        .carte-metrique-contenu {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .carte-metrique-label {
            font-size: 0.9rem;
            color: #666;
        }

        .carte-metrique-valeur {
            font-size: 1.8rem;
            color: var(--bleu-principal);
        }

        .carte-metrique-valeur-verte {
            font-size: 1.8rem;
            color: var(--btn-confirmer);
        }

        .carte-metrique-valeur-jaune {
            font-size: 1.8rem;
            color: var(--risque-eleve);
        }

        .carte-metrique-valeur-orange {
            font-size: 1.8rem;
            color: var(--risque-tres-eleve);
        }

        .carte-metrique-valeur-rouge {
            font-size: 1.8rem;
            color: var(--risque-critique);
        }

        .carte-metrique-valeur-violette {
            font-size: 1.8rem;
            color: var(--btn-modifier);
        }

        /* Barres de progression pour patterns */
        .barre-progression-container {
            margin-top: 8px;
            background: white;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }

        .barre-progression {
            height: 100%;
            width: 0%;
        }

        .barre-progression-verte {
            background: var(--btn-confirmer);
        }

        .barre-progression-violette {
            background: var(--btn-modifier);
        }

        .barre-progression-jaune {
            background: var(--risque-modere);
        }

        .barre-progression-rouge {
            background: var(--btn-annuler);
        }

        /* Carte métrique violette pour défi spécifique */
        .carte-metrique-violette {
            background: #f3eeff;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--btn-modifier);
        }

        /* Carte métrique jaune-pale pour blocage émergent */
        .carte-metrique-jaune-pale {
            background: #fffbea;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--risque-modere);
        }

        /* Carte métrique rouge-attention pour blocage critique */
        .carte-metrique-rouge-attention {
            background: var(--alerte-fond-attention);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--btn-annuler);
        }

        /* ===== SECTION MATÉRIEL: Utilitaires de formulaire ===== */

        /* Titre avec emoji toggles */
        .titre-avec-emoji-toggles {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .titre-emoji-container {
            font-size: 1.2rem;
        }

        /* Grilles de formulaire */
        .grille-form-2col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .grille-form-3col {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .grille-form-3col-type-pond-grille {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .grille-form-2col-desc-titre {
            display: grid;
            grid-template-columns: 1.5fr 2fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .grille-form-2col-objectif-tache {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        /* Carte de configuration spéciale (portfolio, etc.) */
        .carte-config-portfolio {
            display: none;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--bleu-carte);
            border-radius: 6px;
            border: 1px solid var(--bleu-moyen);
        }

        .carte-config-portfolio h5 {
            color: var(--bleu-principal);
            margin-bottom: 15px;
        }

        /* Message info artefact */
        .msg-info-artefact {
            display: none;
            padding: 10px;
            background: var(--bleu-pale);
            border-radius: 4px;
            color: var(--bleu-principal);
            font-size: 0.85rem;
            margin-bottom: 15px;
        }

        /* Note explicative dans config */
        .note-explicative-config {
            background: var(--bleu-tres-pale);
            padding: 10px;
            border-radius: 4px;
            font-size: 0.9rem;
            margin-top: 15px;
        }

        /* Section accordéon import/export */
        .section-accordeon {
            display: none;
            margin-top: 20px;
        }

        .accordeon-btns-flex {
            display: flex;
            gap: 10px;
        }

        .accordeon-btns-flex button {
            flex: 1;
        }

        .accordeon-aide-text {
            margin-top: 10px;
        }

        /* ===== SECTION RÉGLAGES: Utilitaires ===== */

        /* Titre avec bouton action à droite */
        .titre-avec-bouton-action {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .titre-avec-bouton-action button {
            font-size: 0.9rem;
            padding: 8px 16px;
        }

        /* ========================================
           UTILITAIRES CSS - Espacement et texte
           ======================================== */

        /* Marges verticales */
        .mt-5 { margin-top: 5px; }
        .mt-8 { margin-top: 8px; }
        .mt-10 { margin-top: 10px; }
        .mt-15 { margin-top: 15px; }
        .mb-10 { margin-bottom: 10px; }
        .mb-12 { margin-bottom: 12px; }
        .mb-15 { margin-bottom: 15px; }
        .mb-20 { margin-bottom: 20px; }
        .my-10 { margin: 10px 0; }
        .my-5-mx-20 { margin: 5px 0 5px 20px; }

        /* Marges horizontales */
        .ml-4 { margin-left: 4px; }
        .ml-10 { margin-left: 10px; }
        .ml-20-mb-10 {
            margin-left: 20px;
            margin-bottom: 10px;
        }

        /* Padding */
        .p-10 { padding: 10px; }
        .py-8 { padding: 8px 0; }

        /* Combinaisons margin-padding */
        .mt-10-pl-10 {
            margin-top: 10px;
            padding-left: 10px;
        }

        /* Alignement et texte */
        .text-center { text-align: center; }
        .text-bleu-principal { color: var(--bleu-principal); }
        .text-muted {
            font-size: 0.9rem;
            color: #666;
        }
        .text-muted-sm {
            font-size: 0.9em;
            color: #666;
        }
        .lh-relaxed { line-height: 1.8; }

        /* Dimensions */
        .w-100 { width: 100%; }

        /* Typographie */
        .fw-bold { font-weight: bold; }

        /* Interactivité */
        .cursor-pointer { cursor: pointer; }

        /* Flexbox */
        .flex-1 { flex: 1; }
        .d-flex-gap-10 {
            display: flex;
            gap: 10px;
        }
        .d-flex-between {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        /* Styles de titres réutilisables */
        .titre-section-aide {
            font-weight: bold;
            color: var(--bleu-principal);
            margin-top: 15px;
        }

        .titre-section-principal {
            color: var(--bleu-principal);
            border-bottom: 2px solid var(--bleu-pale);
            padding-bottom: 5px;
            margin: 25px 0 15px 0;
        }

        .titre-cliquable {
            font-weight: bold;
            cursor: pointer;
            color: var(--bleu-principal);
        }

        .titre-bleu-mb10 {
            color: var(--bleu-principal);
            margin-bottom: 10px;
        }

        /* Éléments de contenu */
        .ligne-separee {
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }

        .carte-grise-info {
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .carte-encadree {
            margin: 20px 0;
            padding: 15px;
            background: white;
            border: 2px solid var(--bleu-moyen);
            border-radius: 6px;
        }

        .alerte-info-bleu {
            margin: 15px 0;
            padding: 15px;
            background: var(--bleu-tres-pale);
            border-left: 4px solid var(--bleu-moyen);
            border-radius: 4px;
        }

        .separateur-section {
            margin: 25px 0;
            border: none;
            border-top: 2px solid var(--bleu-pale);
        }

        .tableau-blanc {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        .titre-1-8 {
            font-size: 1.8rem;
            color: var(--bleu-principal);
        }

        .carte-bleu-encadree {
            background: var(--bleu-tres-pale);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--bleu-principal);
        }

        .alerte-info-grise {
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-left: 4px solid var(--bleu-moyen);
            border-radius: 4px;
        }

        .titre-section-haut {
            color: var(--bleu-principal);
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .titre-sans-marge-haut {
            color: var(--bleu-principal);
            margin-top: 0;
        }

        .m-0 { margin: 0; }

        .justify-end { justify-content: flex-end; }

        .ligne-separee-danger {
            padding: 10px;
            border-bottom: 1px solid #ddd;
            color: #dc3545;
        }

        .ligne-separee-success {
            padding: 10px;
            color: #28a745;
        }

        .ligne-separee-warning {
            padding: 10px;
            border-bottom: 1px solid #ddd;
            color: #ffc107;
        }

        .ligne-separee-info {
            padding: 10px;
            border-bottom: 1px solid #ddd;
            color: #17a2b8;
        }

        .ligne-separee-bleu {
            padding: 10px;
            border-bottom: 1px solid var(--bleu-pale);
        }

        /* Styles de texte additionnels */
        .text-sm-pointer {
            font-size: 0.85rem;
            cursor: pointer;
        }

        .text-sm-muted {
            font-size: 0.85rem;
            color: #666;
        }

        .text-xs-normal {
            font-weight: normal;
            font-size: 0.75rem;
        }

        .text-italic { font-style: italic; }

        .text-warning-dark { color: #856404; }
        .text-secondary { color: #6c757d; }

        /* Cellules de tableau */
        .td-left {
            padding: 12px;
            text-align: left;
        }

        .td-center-clickable {
            padding: 12px;
            text-align: center;
            width: 90px;
            cursor: pointer;
            user-select: none;
        }

        /* Combinaisons typographiques */
        .mt-5-text-95 {
            margin-top: 5px;
            font-size: 0.95em;
        }

        .mt-12-fw-600 {
            margin-top: 12px;
            font-weight: 600;
        }

        /* Backgrounds */
        .bg-white { background: white; }

        /* Dimensions supplémentaires */
        .w-100px { width: 100px; }
        .w-100-pointer {
            width: 100%;
            cursor: pointer;
        }

        /* Marges verticales supplémentaires */
        .mt-20 { margin-top: 20px; }
        .mb-25 { margin-bottom: 25px; }
        .my-20 { margin: 20px 0; }
        .my-20-mb-15 { margin: 20px 0 15px 0; }

        /* Marges horizontales supplémentaires */
        .mr-10 { margin-right: 10px; }
        .ml-10-bleu {
            color: var(--bleu-principal);
            margin-left: 10px;
        }

        /* Marges complexes */
        .m-5-0-0-20 { margin: 5px 0 0 20px; }
        .m-0-pl-20-lh {
            margin: 0;
            padding-left: 20px;
            line-height: 1.6;
        }
        .m-0-text-muted {
            margin: 0;
            font-size: 0.9rem;
            color: #666;
        }
        .mb-15-lh {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        /* Padding de tableau */
        .td-right-bleu {
            padding: 10px;
            text-align: right;
            border-bottom: 1px solid var(--bleu-leger);
        }
        .td-bold-bleu {
            padding: 10px;
            font-weight: bold;
            border-bottom: 1px solid var(--bleu-pale);
        }
        .td-bleu-separee {
            padding: 10px;
            border-bottom: 1px solid var(--bleu-leger);
        }

        /* Alertes */
        .alerte-warning-jaune {
            margin: 15px 0;
            padding: 15px;
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 4px;
        }

        /* Cartes */
        .carte-bleu-pale {
            margin-top: 15px;
            padding: 12px;
            background: var(--bleu-tres-pale);
            border-radius: 6px;
        }

        /* Labels et titres */
        .label-fw-600-block {
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
        }
        .label-fw-600-bleu {
            font-weight: 600;
            color: var(--bleu-principal);
            margin-bottom: 5px;
        }
        .titre-bleu-mb8 {
            color: var(--bleu-principal);
            margin-bottom: 8px;
        }
        .titre-105-mt20 {
            font-size: 1.05em;
            margin-top: 20px;
        }

        /* Flexbox spécifiques */
        .d-flex-between-sm-muted-mt5 {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: #666;
            margin-top: 5px;
        }
        .d-flex-between-center {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .d-flex-center-pointer {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        /* Couleurs de texte */
        .text-succes-bold {
            color: var(--succes);
            font-weight: bold;
        }

        /* Toggles */
        .hidden-mb-20 {
            display: none;
            margin-bottom: 20px;
        }
        .hidden-mb-12 {
            display: none;
            margin-bottom: 12px;
        }

        /* Titres colorés avec marges */
        .titre-bleu-mb-15 {
            color: var(--bleu-principal);
            margin-bottom: 15px;
        }
        .titre-bleu-mb-20 {
            color: var(--bleu-principal);
            margin-bottom: 20px;
        }
        .titre-bleu-lg-mb8 {
            color: var(--bleu-principal);
            font-size: 1.5rem;
            margin-bottom: 8px;
        }
        .titre-orange-mb10 {
            color: #e65100;
            margin-bottom: 10px;
        }
        .titre-mt15-fw-bold-bleu {
            margin-top: 15px;
            font-weight: bold;
            color: var(--bleu-principal);
        }

        /* Bordures spécifiques */
        .border-left-succes {
            border-left: 4px solid var(--succes);
        }

        /* Cartes spécifiques */
        .carte-blanche-centree {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid var(--bleu-pale);
            text-align: center;
        }
        .carte-bleu-pale-mt15 {
            margin-top: 15px;
            padding: 15px;
            background: var(--bleu-tres-pale);
            border-radius: 6px;
        }

        /* Alertes spécifiques */
        .alerte-danger-rouge {
            margin: 15px 0;
            padding: 15px;
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            border-radius: 4px;
        }
        .alerte-warning-or {
            margin: 20px 0;
            padding: 15px;
            background: #fffacd;
            border-left: 4px solid #ffd700;
            border-radius: 4px;
        }

        /* Backgrounds */
        .bg-bleu-tres-pale { background: var(--bleu-tres-pale); }

        /* Tableaux */
        .table-collapse {
            width: 100%;
            border-collapse: collapse;
        }

        /* Cellules de tableau supplémentaires */
        .td-center-80 {
            padding: 12px;
            text-align: center;
            width: 80px;
        }
        .td-center-60 {
            padding: 12px;
            text-align: center;
            width: 60px;
        }
        .td-left-clickable {
            padding: 12px;
            text-align: left;
            cursor: pointer;
            user-select: none;
        }

        /* Padding spécifiques */
        .px-8-py-15 { padding: 8px 15px; }
        .pt-20 { padding-top: 20px; }

        /* Marges supplémentaires */
        .mb-10-only { margin-bottom: 10px; }
        .mr-8 { margin-right: 8px; }
        .ml-20-lh-95 {
            margin-left: 20px;
            line-height: 1.8;
            font-size: 0.95rem;
        }
        .m-0-pl-20-gray-lh {
            margin: 0;
            padding-left: 20px;
            color: #666;
            line-height: 1.8;
        }

        /* Dimensions spécifiques */
        .max-w-500-mb-20 {
            max-width: 500px;
            margin-bottom: 20px;
        }

        /* Texte spécifique */
        .mt-10-text-09 {
            margin-top: 10px;
            font-size: 0.9rem;
        }

        /* Espacements */
        .whitespace-nowrap { white-space: nowrap; }

        /* Line heights */
        .lh-2 { line-height: 2; }
        .lh-16 { line-height: 1.6; }

        /* Grid et Flexbox avancés */
        .grid-col-span { grid-column: 1 / -1; }
        .flex-shrink-0 { flex-shrink: 0; }
        .d-flex-gap-10-center {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .grid-4col-gap15-mb20 {
            display: grid;
            grid-template-columns: 1fr 2fr 1.5fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        /* Tailles de police */
        .text-12 { font-size: 1.2rem; }
        .text-11-mb10 {
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        .text-105-mt15 {
            font-size: 1.05em;
            margin-top: 15px;
        }
        .text-09 { font-size: 0.9rem; }
        .text-09-mt5 {
            font-size: 0.9em;
            margin-top: 5px;
        }
        .text-085-mb15 {
            font-size: 0.85rem;
            margin-bottom: 15px;
        }
        .text-08-fw600-danger {
            font-size: 0.8rem;
            font-weight: 600;
            color: #dc2626;
        }
        .text-08-fw600-danger-dark {
            font-size: 0.8rem;
            font-weight: 600;
            color: #991b1b;
        }

        /* Labels avec styles spécifiques */
        .label-block-fw500-mb8 {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        /* Toggles supplémentaires */
        .hidden-mt-20 {
            display: none;
            margin-top: 20px;
        }

        /* Couleurs de texte supplémentaires */
        .text-vert-leger-mb10 {
            color: var(--vert-leger);
            margin-bottom: 10px;
        }
        .text-warning-bold {
            color: #ffc107;
            font-weight: bold;
        }
        .text-danger { color: #e74c3c; }
        .text-danger-bs { color: #dc3545; }
        .text-warning-856-mt0 {
            color: #856404;
            margin-top: 0;
        }
        .text-warning-856-mb10 {
            color: #856404;
            margin-bottom: 10px;
        }
        .text-purple-mb10 {
            color: #6a1b9a;
            margin-bottom: 10px;
        }

        /* Checkboxes stylisées */
        .checkbox-danger-light {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: #fef2f2;
            border-radius: 4px;
            cursor: pointer;
            user-select: none;
        }
        .checkbox-danger-medium {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: #fee2e2;
            border-radius: 4px;
            cursor: pointer;
            user-select: none;
        }

        /* Couleurs de succès */
        .text-success-dark-mb10 {
            color: #2e7d32;
            margin-bottom: 10px;
        }
        .text-success-mb10 {
            color: #28a745;
            margin-bottom: 10px;
        }
        .text-success-bold {
            color: #28a745;
            font-weight: bold;
        }

        /* Couleurs primaires */
        .text-primary-bold {
            color: #007bff;
            font-weight: bold;
        }

        /* Bordures colorées */
        .border-left-purple {
            border-left: 4px solid #9c27b0;
        }
        .border-left-primary {
            border-left: 4px solid #007bff;
        }

        /* Cellules de tableau avec largeurs spécifiques */
        .td-center-40 {
            padding: 12px;
            text-align: center;
            width: 40px;
        }
        .td-center-50 {
            padding: 12px;
            text-align: center;
            width: 50px;
        }
        .td-center-70 {
            padding: 12px;
            text-align: center;
            width: 70px;
        }
        .td-center-90-clickable {
            padding: 12px;
            text-align: left;
            width: 90px;
            cursor: pointer;
            user-select: none;
        }
        .td-center-100-clickable {
            padding: 12px;
            text-align: center;
            width: 100px;
            cursor: pointer;
            user-select: none;
        }
        .td-center-120 {
            padding: 12px;
            text-align: center;
            width: 120px;
        }
        .td-center-120-clickable {
            padding: 12px;
            text-align: center;
            width: 120px;
            cursor: pointer;
            user-select: none;
        }
        .td-center-160 {
            padding: 12px;
            text-align: center;
            width: 160px;
        }
        .td-center-200 {
            padding: 12px;
            text-align: center;
            width: 200px;
        }
        .td-left-100 {
            padding: 12px;
            text-align: left;
            width: 100px;
        }
        .td-left-auto {
            padding: 12px;
            text-align: left;
            width: auto;
        }
        .td-left-140-clickable {
            padding: 12px;
            text-align: left;
            width: 140px;
            cursor: pointer;
            user-select: none;
        }
        .td-right {
            padding: 10px;
            text-align: right;
        }
        .td-bold {
            padding: 10px;
            font-weight: bold;
        }
        .td-bold-30-bleu {
            padding: 10px;
            font-weight: bold;
            width: 30%;
            border-bottom: 1px solid var(--bleu-pale);
        }
        .td-sm-muted-lh {
            padding: 12px;
            font-size: 0.85rem;
            color: #666;
            line-height: 1.6;
        }
        .td-orange {
            padding: 10px;
            border-bottom: 1px solid #ddd;
            color: #fd7e14;
        }
        .td-nowrap-bold {
            padding: 10px 20px;
            font-size: 0.95rem;
            font-weight: 600;
            white-space: nowrap;
        }

        /* Cartes avec backgrounds spécifiques */
        .carte-gradient-bleu {
            background: linear-gradient(90deg, var(--bleu-pale) 0%, var(--bleu-tres-pale) 100%);
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
        }
        .carte-bleu-pale-p15 {
            padding: 15px;
            background: var(--bleu-tres-pale);
            border-radius: 6px;
        }
        .carte-bleu-pale-p15-mb20 {
            padding: 15px;
            background: var(--bleu-tres-pale);
            border-radius: 6px;
            margin-bottom: 20px;
        }
        .carte-bleu-fonce {
            padding: 15px;
            background: var(--bleu-pale);
            border-radius: 8px;
        }
        .carte-info-bleu-clair {
            padding: 15px;
            background: #f0f8ff;
            border-radius: 6px;
            border-left: 4px solid #2196f3;
        }
        .carte-white-p15 {
            padding: 15px;
            background: white;
        }
        .carte-purple-header {
            width: 100%;
            background: #9c27b0;
            color: white;
            padding: 10px;
            font-size: 0.9rem;
        }

        /* Zones avec overflow */
        .overflow-x-auto { overflow-x: auto; }
        .overflow-x-border {
            overflow-x: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .overflow-xy-600 {
            max-height: 600px;
            overflow-x: auto;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .overflow-y-500 {
            max-height: 500px;
            overflow-y: auto;
        }
        .overflow-y-300-border {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--bleu-pale);
            border-radius: 6px;
            padding: 10px;
        }

        /* Dimensions max */
        .max-w-800 {
            max-width: 800px;
            margin: 0 auto;
        }
        .max-w-500 { max-width: 500px; }
        .max-w-400-mb20 {
            max-width: 400px;
            margin-bottom: 20px;
        }
        .max-w-400-mb20-hidden {
            max-width: 400px;
            margin-bottom: 20px;
            display: none;
        }

        /* Largeurs spécifiques */
        .w-200 { width: 200px; }
        .w-120-center {
            width: 120px;
            text-align: center;
        }
        .w-80-select {
            width: 80px;
            padding: 6px 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
            font-size: 0.95rem;
            margin-right: 10px;
        }
        .w-45 { width: 45%; }
        .w-40 { width: 40%; }
        .w-15 { width: 15%; }

        /* Select/Input full width */
        .select-full-bleu {
            width: 100%;
            padding: 12px 40px 12px 15px;
            font-size: 1rem;
            border: 2px solid var(--bleu-moyen);
            border-radius: 8px;
            outline: none;
            transition: all 0.3s;
        }

        /* Zones de texte vides */
        .empty-state-center-30 {
            text-align: center;
            padding: 30px;
            color: #999;
        }
        .empty-state-center-20 {
            text-align: center;
            padding: 20px;
            color: #999;
        }

        /* Headers et footers spéciaux */
        .sticky-header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: white;
            padding: 20px;
            border-bottom: 2px solid var(--bleu-principal);
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .footer-border-top {
            text-align: right;
            padding-top: 15px;
            border-top: 1px solid #dee2e6;
        }

        /* Bouton clear */
        .btn-clear-input {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            border: none;
            color: #999;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px 10px;
            display: none;
        }

        /* Texte spécial */
        .text-center-leger {
            text-align: center;
            color: var(--bleu-leger);
        }
        .text-underline-bold {
            text-decoration: underline;
            font-weight: 600;
        }

        /* Alertes colorées variées */
        .alerte-success-green {
            margin: 15px 0;
            padding: 15px;
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            border-radius: 4px;
        }
        .alerte-success-dark {
            margin: 15px 0;
            padding: 15px;
            background: #d4edda;
            border-left: 4px solid #28a745;
            border-radius: 4px;
        }
        .alerte-success-bleu-pale {
            margin: 15px 0;
            padding: 15px;
            background: var(--bleu-tres-pale);
            border-left: 4px solid #28a745;
            border-radius: 4px;
        }
        .alerte-info-cyan {
            margin: 15px 0;
            padding: 15px;
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            border-radius: 4px;
        }
        .alerte-info-bleu-ciel {
            margin: 15px 0;
            padding: 15px;
            background: #e1f5fe;
            border-left: 4px solid #03a9f4;
            border-radius: 4px;
        }
        .alerte-warning-orange-clair {
            margin: 15px 0;
            padding: 15px;
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            border-radius: 4px;
        }
        .alerte-warning-orange-fonce {
            margin: 15px 0;
            padding: 15px;
            background: #fff8e1;
            border-left: 4px solid #ff6f00;
            border-radius: 4px;
        }
        .alerte-purple {
            margin: 15px 0;
            padding: 15px;
            background: #f3e5f5;
            border-left: 4px solid #9c27b0;
            border-radius: 4px;
        }
        .alerte-info-grise-my20 {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-left: 4px solid var(--bleu-moyen);
            border-radius: 4px;
        }

        /* Cartes encadrées variées */
        .carte-bleu-border {
            margin: 20px 0;
            padding: 15px;
            background: #e7f3ff;
            border: 2px solid var(--bleu-moyen);
            border-radius: 6px;
        }

        /* Marges spéciales */
        .my-15 { margin: 15px 0; }
        .m-8-0-pl20-lh18 {
            margin: 8px 0 0 0;
            padding-left: 20px;
            line-height: 1.8;
        }
        .m-8-0-pl20-lh16 {
            margin: 8px 0 0 0;
            padding-left: 20px;
            line-height: 1.6;
        }

        /* Textes avec marges et couleurs */
        .text-warning-856-sm-mt5 {
            margin: 5px 0 0 0;
            color: #856404;
            font-size: 0.9rem;
        }
        .text-muted-sm-mt5 {
            margin: 5px 0 0 0;
            color: #666;
            font-size: 0.9rem;
        }

        /* Alertes spéciales */
        .alerte-danger-dark {
            margin: 15px 0;
            padding: 15px;
            background: #721c24;
            color: white;
            border-left: 4px solid #8B0000;
            border-radius: 4px;
        }

        /* Marges variées */
        .mt-3 { margin-top: 3px; }
        .m-10-0-pl20 {
            margin: 10px 0;
            padding-left: 20px;
        }
        .m-10-0-0-20 { margin: 10px 0 0 20px; }
        .m-10-0-0-0 { margin: 10px 0 0 0; }
        .m-0-0-10-0 { margin: 0 0 10px 0; }
        .m-15-0-0-0-sm-bleu {
            margin: 15px 0 0 0;
            font-size: 0.9em;
            color: var(--bleu-principal);
        }
        .m-15-0-0-0-primary {
            margin: 15px 0 0 0;
            color: #007bff;
        }

        /* Textes avec margin 0 et couleurs */
        .m-0-fw600-bleu {
            margin: 0;
            font-weight: 600;
            color: var(--bleu-principal);
        }
        .m-0-bleu-principal {
            margin: 0;
            color: var(--bleu-principal);
        }
        .m-0-bleu-moyen {
            margin: 0;
            color: var(--bleu-moyen);
        }
        .m-0-bleu-moyen-sm {
            margin: 0;
            font-size: 0.95rem;
            color: var(--bleu-moyen);
        }
        .m-0-success {
            margin: 0;
            color: #28a745;
        }
        .m-0-muted-lh16 {
            margin: 0;
            color: #666;
            line-height: 1.6;
        }

        /* Flexbox avec marges */
        .mt-8-flex-gap8-wrap {
            margin-top: 8px;
            font-size: 0.9rem;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        .mt-8-flex-col-gap4 {
            margin-top: 8px;
            display: flex;
            flex-direction: column;
            gap: 4px;
            align-items: center;
        }
        .mt-20-flex-gap10-end {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        .mt-20-justify-between {
            margin-top: 20px;
            justify-content: space-between;
        }
        .mt-15-justify-end {
            margin-top: 15px;
            justify-content: flex-end;
        }

        /* Cartes info avec texte */
        .carte-bleu-mt20-center-italic {
            margin-top: 20px;
            text-align: center;
            font-style: italic;
            color: var(--bleu-principal);
        }
        .carte-grise-mt20-sm-muted {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
            font-size: 0.85rem;
            color: #666;
        }
        .carte-grise-mt10-sm-muted {
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            font-size: 0.85rem;
            color: #666;
        }

        /* Texte taille et couleur */
        .text-09-mt10 {
            margin-top: 10px;
            font-size: 0.9em;
        }
        .text-09-mt10-deep-orange {
            margin-top: 10px;
            font-size: 0.9em;
            color: #bf360c;
        }

        /* Marges spécifiques supplémentaires */
        .mb-30 { margin-bottom: 30px; }
        .mt-0-bleu {
            margin-top: 0;
            color: var(--bleu-principal);
        }
        .mt-0-warning {
            margin-top: 0;
            color: #856404;
        }
        .ml-10-fw-bold {
            margin-left: 10px;
            font-weight: bold;
        }
        .mr-10-icon-18 {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        .mr-10-scale-13 {
            margin-right: 10px;
            transform: scale(1.3);
        }

        /* Cartes supplémentaires */
        .carte-mb25-green {
            margin-bottom: 25px;
            padding: 15px;
            background: #f1f8e9;
            border-radius: 8px;
            border-left: 4px solid #8bc34a;
        }
        .carte-mb25-bleu-clair {
            margin-bottom: 25px;
            padding: 15px;
            background: #e3f2fd;
            border-radius: 8px;
            border-left: 4px solid #2196F3;
        }
        .carte-mb20-orange {
            margin-bottom: 20px;
            padding: 20px;
            background: var(--bleu-tres-pale);
            border-radius: 6px;
            border-left: 4px solid var(--orange-accent);
        }
        .carte-mb20-grise {
            margin-bottom: 20px;
            padding: 15px;
            background: var(--gris-tres-clair);
            border-radius: 8px;
        }
        .carte-mb15-grise {
            margin-bottom: 15px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        /* Zones de dépôt */
        .zone-depot {
            margin-bottom: 20px;
            padding: 10px;
            width: 100%;
            border: 2px dashed var(--bleu-leger);
            border-radius: 6px;
            cursor: pointer;
        }

        /* Listes */
        .list-unstyled {
            list-style: none;
            padding-left: 0;
        }

        /* Typographie avec poids et couleurs */
        .fw-600 { font-weight: 600; }
        .fw-500-bleu {
            font-weight: 500;
            color: var(--bleu-principal);
        }
        .fw-normal-bleu-moyen-sm {
            font-weight: normal;
            color: var(--bleu-moyen);
            font-size: 0.9rem;
        }

        /* Chiffres statistiques grands */
        .stat-2rem-bold-minimal {
            font-size: 2rem;
            font-weight: bold;
            color: var(--risque-minimal);
        }
        .stat-2rem-bold-bleu {
            font-size: 2rem;
            font-weight: bold;
            color: var(--bleu-principal);
        }
        .stat-2rem-bold-bleu-moyen {
            font-size: 2rem;
            font-weight: bold;
            color: var(--bleu-moyen);
        }

        /* Grilles responsive */
        .grid-auto-250 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        .grid-auto-200 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .grid-auto-200-mt15 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .grid-auto-180 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            margin-bottom: 15px;
        }

        /* Grilles fixes */
        .grid-4-gap15-mb20 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        .grid-3-gap15-mb20 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .grid-2-gap15 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .grid-2-gap15-mb20 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .grid-2-gap20 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .grid-2-gap30-mb20 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 20px;
        }
        .grid-2fr-1fr-mb20 {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .grid-1fr-3fr-mb20 {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .grid-1fr-auto-end {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 12px;
            align-items: end;
        }

        /* Flexbox avec gaps variés */
        .d-flex-gap8-mb20 {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
        }
        .d-flex-gap8-center {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        .d-flex-gap10-mt10 {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .d-flex-gap10-mt15 {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .d-flex-gap10-mt20 {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        .d-flex-gap10-end {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        .d-flex-gap15-wrap {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        .d-flex-gap15-wrap-center {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .d-flex-gap30-mt15 {
            display: flex;
            gap: 30px;
            margin-top: 15px;
        }

        /* Flexbox between avec marges */
        .d-flex-between-mb15 {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .d-flex-between-mb20 {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .d-flex-gap10-mb20-info {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f0f8ff;
            border-radius: 6px;
            border-left: 4px solid #2196f3;
        }
        .d-flex-gap10-center-mb8 {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 8px;
        }

        /* Flex avec position */
        .flex-1-relative {
            flex: 1;
            position: relative;
        }
        .flex-1-min200-max300 {
            flex: 1;
            min-width: 200px;
            max-width: 300px;
        }

        /* Cartes avec backgrounds variés */
        .carte-white-border {
            background: white;
            border: 1px solid var(--bleu-leger);
            border-radius: 6px;
            padding: 15px;
        }
        .carte-bleu-tres-pale-mb20 {
            background: var(--bleu-tres-pale);
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        .carte-bleu-tres-pale-mb20-border {
            background: var(--bleu-tres-pale);
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            border-left: 4px solid var(--bleu-principal);
        }
        .carte-bleu-tres-pale-mt10 {
            background: var(--bleu-tres-pale);
            padding: 20px;
            border-radius: 8px;
            margin-top: 10px;
        }
        .carte-bleu-pale-mt10 {
            background: var(--bleu-pale);
            padding: 15px;
            border-radius: 6px;
            margin-top: 10px;
        }
        .carte-grise-mb20 {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .carte-grise-my15 {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        .carte-grise-mt20 {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 10px;
        }
        .carte-orange-my15 {
            background: #fff3e0;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        .carte-purple-my15 {
            background: #f3e5f5;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        .carte-green-my15 {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        /* Cartes code */
        .carte-code-dark {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            margin-top: 15px;
        }
        .carte-code-light {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
            font-family: monospace;
            font-size: 0.9em;
        }
        .carte-code-light-sm {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-family: monospace;
            font-size: 0.85em;
        }

        /* Modales */
        .modal-content-small {
            background: white;
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
        }
        .modal-content-scroll {
            background: white;
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            width: 90%;
        }

        /* Headers sticky */
        .thead-sticky-bleu {
            background: var(--bleu-principal);
            color: white;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .thead-bleu-moyen {
            background: var(--bleu-moyen);
            color: white;
        }

        /* Backgrounds simples */
        .bg-bleu-pale { background: var(--bleu-pale); }
        .bg-bleu-tres-pale-p15-mb20 {
            background: var(--bleu-tres-pale);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .bg-f0f8ff { background: #f0f8ff; }
        .bg-fff9e6 { background: #fff9e6; }

        /* Textes avec tailles et marges */
        .text-09-mb10 {
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        .text-09-mb15 {
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        .text-085-mb15-muted {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 15px;
        }
        .text-085-mb20-muted {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 20px;
        }
        .text-09-muted-mb10 {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 10px;
        }

        /* Titres avec font-size et couleurs */
        .titre-11-bold-bleu-mb10 {
            font-size: 1.1em;
            font-weight: bold;
            color: var(--bleu-principal);
            margin-bottom: 10px;
        }
        .titre-11-bold-bleu-mb15 {
            font-size: 1.1em;
            font-weight: bold;
            color: var(--bleu-principal);
            margin-bottom: 15px;
        }

        /* Couleurs spécifiques avec marges */
        .text-white-mb10 {
            color: white;
            margin-bottom: 10px;
        }
        .text-vert-leger-mb20 {
            color: var(--vert-leger);
            margin-bottom: 20px;
        }
        .text-orange-accent-mb10 {
            color: var(--orange-accent);
            margin-bottom: 10px;
        }
        .text-risque-critique {
            color: var(--risque-critique);
        }

        /* Autres couleurs */
        .text-warning { color: #ffc107; }
        .text-orange-bold {
            color: #ff9800;
            font-weight: bold;
        }
        .text-danger-red-bold {
            color: #f44336;
            font-weight: bold;
        }
        .text-info { color: #17a2b8; }
        .text-info-bold {
            color: #17a2b8;
            font-weight: bold;
        }
        .text-success-green { color: #5cb85c; }
        .text-success-28 { color: #28a745; }

        /* Curseurs */
        .cursor-pointer-user-select {
            cursor: pointer;
            user-select: none;
        }
        .cursor-pointer-bold {
            cursor: pointer;
            font-weight: bold;
        }

        /* Checkboxes supplémentaires */
        .checkbox-warning {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: #fef3c7;
            border-radius: 4px;
            cursor: pointer;
            user-select: none;
        }

        /* Cartes spéciales avec gradient */
        .carte-gradient-success-danger {
            background: linear-gradient(90deg, #d4edda 0%, #f8d7da 100%);
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
        }
        .carte-gradient-bleu-mt15 {
            background: linear-gradient(90deg, var(--bleu-pale) 0%, var(--bleu-tres-pale) 100%);
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
        }

        /* Items cliquables */
        .item-bleu-pale-clickable {
            display: flex;
            align-items: center;
            padding: 10px;
            background: var(--bleu-pale);
            border-radius: 6px;
            cursor: pointer;
        }

        /* Font families */
        .font-courier {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        /* Display none spéciaux */
        .hidden-mt15 {
            display: none;
            margin-top: 15px;
        }
        .hidden-my15-warning {
            display: none;
            margin: 15px 0;
            padding: 12px 15px;
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 4px;
        }
        .hidden-mb20-success {
            display: none;
            margin-bottom: 20px;
            padding: 15px;
            background: #e8f5e9;
            border-radius: 6px;
            border-left: 4px solid #4caf50;
        }

        /* Alertes avec display none */
        .alerte-error-red {
            font-size: 0.85rem;
            color: #d32f2f;
            background: #ffebee;
            padding: 8px;
            border-radius: 4px;
            margin-top: 8px;
        }

        /* Textes spéciaux avec indentation */
        .text-09-lh16-pl20-indent {
            font-size: 0.9rem;
            line-height: 1.6;
            padding-left: 20px;
            text-indent: -20px;
        }

        /* Textes petits avec marges complexes */
        .text-085-muted-m5-0-0-28 {
            font-size: 0.85rem;
            color: #666;
            margin: 5px 0 0 28px;
            line-height: 1.4;
        }
        .text-085-muted-m5-0-0-0 {
            font-size: 0.85rem;
            color: #666;
            margin: 5px 0 0 0;
            line-height: 1.4;
        }

        /* Labels et affichage bloc */
        .label-block-09-fw500-mb8 {
            font-size: 0.9rem;
            font-weight: 500;
            display: block;
            margin-bottom: 8px;
        }
        .label-block-085-muted-center-mb8 {
            font-size: 0.85rem;
            color: #666;
            text-align: center;
            margin-bottom: 8px;
        }

        /* Textes cachés mais avec style */
        .text-09-muted-center-hidden {
            font-size: 0.9rem;
            color: #666;
            text-align: center;
            display: none;
        }

        /* Flexbox wrap simple */
        .d-flex-wrap-gap10 {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        /* Display utilities */
        .d-none { display: none; }
        .d-none-important { display: none !important; }

        /* Label formulaire style */
        .label-form-reglages {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            font-size: 0.85rem;
        }

        /* Sous-titre de section */
        .sous-titre-section {
            color: var(--bleu-moyen);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--bleu-leger);
        }

        /* Section info-legales à droite du header avec boutons d'action */
        .info-legales-section {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: flex-end;
            justify-content: center;
        }

        /* Boutons d'action dans le header (Feedback + Soutenir) */
        .info-legales-section .btn-action-header {
            display: inline-block;
            padding: 4px 8px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: white;
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .info-legales-section .btn-action-header:hover {
            background: rgba(255, 255, 255, 0.18);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        /* Ajustement layout navigation principale : navigation centrée */
        .navigation-principale {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 40px 15px 40px;
        }

        /* Container pour les boutons de navigation (centrés) */
        .navigation-boutons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        /* Sélecteur de mode au centre sous le titre */
        .selecteur-mode-centre {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* ===============================
           BADGES D'INTÉGRITÉ ACADÉMIQUE
           =============================== */

        .badge-jeton {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 8px;
        }

        .badge-jeton-plagiat {
            background-color: #ffebee;
            color: #c62828;
            border: 1px solid #ef5350;
        }

        .badge-jeton-soupcon {
            background-color: #fff3e0;
            color: #e65100;
            border: 1px solid #ff9800;
        }

        .badge-jeton-delai {
            background-color: #fff3e0;
            color: #e65100;
            border: 1px solid #ff9800;
        }

        .badge-jeton-reprise {
            background-color: #f3e5f5;
            color: #6a1b9a;
            border: 1px solid #9c27b0;
        }

        .badge-statut {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge-statut.non-evalue {
            background-color: #f5f5f5;
            color: #757575;
            border: 1px solid #bdbdbd;
        }
    </style>
</head>

<body>
        <!-- EN-TÊTE -->
        <header class="entete">
            <div class="entete-conteneur">
                <!-- Logo et métadonnées -->
                <div class="logo-section">
                    <a href="https://codexnumeris.org" target="_blank" rel="noopener noreferrer" class="logo-link">
                        <div class="logo">
                            <img src="logo-codex-numeris.png" alt="Logo Codex Numeris">
                        </div>
                    </a>
                    <div class="logo-meta">

                        <a href="https://codexnumeris.org" target="_blank" rel="noopener noreferrer"
                            class="site-link">codexnumeris.org</a>
                        <br>
                        Réfléchir, expérimenter, partager.
                    </div>
                </div>

                <!-- Titre et description centrés -->
                <div class="titre-section">
                    <h1>Système de suivi des apprentissages</h1>
                    <p class="meta">Beta 90 par Grégoire Bédard (10 novembre 2025)</p>

                    <!-- Sélecteur de mode au centre (sera généré par 17-modes.js) -->
                    <div id="selecteur-mode" class="selecteur-mode-centre" style="margin-top: 10px;">
                        <!-- Sera généré dynamiquement -->
                    </div>

                    <!-- Informations contextuelles au centre (cours, semaine, date) -->
                    <div id="info-contextuelles-centre" class="info-contextuelles-centre">
                        <!-- Sera rempli dynamiquement par JavaScript -->
                    </div>
                </div>

                <!-- Boutons d'action en haut à droite -->
                <div class="info-legales-section">

                <!-- Bouton Soutenir le projet -->
                    <a href="https://codexnumeris.org/#/portal/support"
                       target="_blank" rel="noopener noreferrer"
                       class="btn-action-header"
                       title="Soutenir financièrement le développement">
                        Soutenir le projet
                    </a>


                    <!-- Bouton Feedback testeurs -->
                    <a href="https://forms.office.com/Pages/ResponsePage.aspx?id=ISONVhCY_k-ORNlO_ecv4ZE_a9_snRBOtx0ASfcIqmBUNUoxMzIzQ0wySVJEQzI3R1E0VlU3MFQ1TS4u"
                       target="_blank" rel="noopener noreferrer"
                       class="btn-action-header"
                       title="Donner votre feedback sur cette version Beta">
                        Fournir un feedback
                    </a>

                    <!-- Bouton Envoi de courriel -->
                    <a href="mailto:labo@codexnumeirs.org"
                       target="_blank" rel="noopener noreferrer"
                       class="btn-action-header"
                       title="Envoyer un courriel">
                        Contacter le développeur
                    </a>
                </div>
            </div>
        </header>

        <!-- NAVIGATION PRINCIPALE -->
        <nav class="navigation-principale">
            <!-- Boutons de navigation centrés -->
            <div class="navigation-boutons">
                <button data-onglet="tableau-bord">Tableau de bord</button>
                <button data-onglet="presences">Présences</button>
                <button data-onglet="evaluations">Évaluations</button>
                <button data-onglet="materiel">Matériel</button>
                <button data-onglet="reglages">Réglages</button>
                <button data-onglet="aide">Aide</button>
            </div>
        </nav>

        <!-- SOUS-NAVIGATION (générée dynamiquement par 02-navigation.js) -->
        <div id="sous-navigation" class="sous-navigation"></div>

    <div class="conteneur">

        <!-- CONTENU PRINCIPAL -->
        <main class="contenu">

            <!-- ===================================
     SECTION: TABLEAU DE BORD
     =================================== -->
            <section id="section-tableau-bord" class="section">

                <!-- Sous-section: Aperçu -->
                <div id="tableau-bord-apercu" class="sous-section">
                    <h2>Vue d'ensemble</h2>
                    <p class="text-muted">Monitorage pédagogique et priorisation des interventions</p>

                    <!-- ========== MÉTRIQUES GLOBALES DU GROUPE ========== -->
                    <div class="carte">
                        <h3 class="carte-titre-avec-toggle">
                            <span>Indicateurs globaux du groupe</span>
                            <span class="emoji-container">
                                <span class="emoji-toggle" data-target="note-indicateurs">📐</span>
                            </span>
                        </h3>

                        <!-- Carte Note -->
                        <div id="note-indicateurs" class="carte-info-toggle carte-info-note" style="display: none;">
                            <strong>Note :</strong> Les indices A-C-P mesurent l'engagement des étudiants. Assiduité (A) : présence en classe. Complétion (C) : remise des travaux. Performance (P) : qualité des productions évaluées. Ces indicateurs permettent de contextualiser l'apprentissage (contexte favorable ou non).
                        </div>

                        <div class="grille-cartes-metriques">
                            <!-- Assiduité SOM -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Assiduité (SOM)</span>
                                    <strong id="tb-assiduite-som" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>

                            <!-- Assiduité PAN -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Assiduité (PAN)</span>
                                    <strong id="tb-assiduite-pan" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>

                            <!-- Complétion SOM -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Complétion (SOM)</span>
                                    <strong id="tb-completion-som" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>

                            <!-- Complétion PAN -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Complétion (PAN)</span>
                                    <strong id="tb-completion-pan" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>

                            <!-- Performance SOM -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Performance (SOM)</span>
                                    <strong id="tb-performance-som" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>

                            <!-- Performance PAN -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Performance (PAN)</span>
                                    <strong id="tb-performance-pan" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ========== NIVEAU D'ENGAGEMENT ========== -->
                    <div class="carte">
                        <h3 class="carte-titre-avec-toggle">
                            <span>Niveau d'engagement</span>
                            <span class="emoji-container">
                                <span class="emoji-toggle" data-target="note-engagement">📐</span>
                            </span>
                        </h3>

                        <!-- Carte Note -->
                        <div id="note-engagement" class="carte-info-toggle carte-info-note" style="display: none;">
                            <strong>Note :</strong> Le niveau d'engagement est calculé avec la formule E = (A × C × P)^(1/3) qui combine assiduité, complétion et performance. La racine cubique compense la décroissance multiplicative. L'engagement favorable regroupe les niveaux très favorable et favorable.
                        </div>

                        <div class="grille-cartes-metriques">
                            <!-- Risques faibles combinés -->
                            <div class="carte-metrique-verte">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Risques faibles</span>
                                    <strong id="tb-risque-faibles" class="carte-metrique-valeur-verte">0</strong>
                                </div>
                            </div>

                            <!-- Risque élevé -->
                            <div class="carte-metrique-jaune">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Risque élevé</span>
                                    <strong id="tb-risque-eleve" class="carte-metrique-valeur-jaune">0</strong>
                                </div>
                            </div>

                            <!-- Risque très élevé -->
                            <div class="carte-metrique-orange">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Risque très élevé</span>
                                    <strong id="tb-risque-tres-eleve" class="carte-metrique-valeur-orange">0</strong>
                                </div>
                            </div>

                            <!-- Risque critique -->
                            <div class="carte-metrique-rouge">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Risque critique</span>
                                    <strong id="tb-risque-critique" class="carte-metrique-valeur-rouge">0</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ========== DISTRIBUTION DES PATTERNS ========== -->
                    <div class="carte">
                        <h3 class="carte-titre-avec-toggle">
                            <span>Répartition des patterns d'apprentissage</span>
                            <span class="emoji-container">
                                <span class="emoji-toggle" data-target="note-patterns">📐</span>
                            </span>
                        </h3>

                        <!-- Carte Note -->
                        <div id="note-patterns" class="carte-info-toggle carte-info-note" style="display: none;">
                            <strong>Note :</strong> Les patterns identifient les trajectoires d'apprentissage selon l'évolution des indices A-C-P. Une progression stable indique une amélioration constante, tandis que les blocages signalent des difficultés nécessitant un accompagnement ciblé.
                        </div>

                        <div class="grille-cartes-metriques">
                            <!-- Stable -->
                            <div class="carte-metrique-verte">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Progression stable</span>
                                    <strong id="tb-pattern-stable" class="carte-metrique-valeur-verte">0</strong>
                                </div>
                                <div class="barre-progression-container">
                                    <div id="tb-barre-stable" class="barre-progression barre-progression-verte"></div>
                                </div>
                            </div>

                            <!-- Défi spécifique -->
                            <div class="carte-metrique-violette">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Défi spécifique</span>
                                    <strong id="tb-pattern-defi" class="carte-metrique-valeur-violette">0</strong>
                                </div>
                                <div class="barre-progression-container">
                                    <div id="tb-barre-defi" class="barre-progression barre-progression-violette"></div>
                                </div>
                            </div>

                            <!-- Blocage émergent -->
                            <div class="carte-metrique-jaune-pale">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Blocage émergent</span>
                                    <strong id="tb-pattern-emergent" class="carte-metrique-valeur-jaune">0</strong>
                                </div>
                                <div class="barre-progression-container">
                                    <div id="tb-barre-emergent" class="barre-progression barre-progression-jaune"></div>
                                </div>
                            </div>

                            <!-- Blocage critique -->
                            <div class="carte-metrique-rouge-attention">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Blocage critique</span>
                                    <strong id="tb-pattern-critique" class="carte-metrique-valeur-rouge">0</strong>
                                </div>
                                <div class="barre-progression-container">
                                    <div id="tb-barre-critique" class="barre-progression barre-progression-rouge"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ========== SYSTÈME RÀI ========== -->
                    <div class="carte">
                        <h3 class="carte-titre-avec-toggle">
                            <span>Modèle de la Réponse à l'intervention (RàI)</span>
                            <span class="emoji-container">
                                <span class="emoji-toggle" data-target="note-rai">📐</span>
                            </span>
                        </h3>

                        <!-- Carte Note -->
                        <div id="note-rai" class="carte-info-toggle carte-info-note" style="display: none;">
                            <strong>Note :</strong> Le système RàI répartit les étudiants en 3 niveaux d'intervention selon leur risque d'échec. Niveau 1 (vert) : suivi régulier en classe. Niveau 2 (violet) : interventions ciblées recommandées. Niveau 3 (terracotta) : Interventions intensives individuelles hors classe.
                        </div>

                        <div class="grille-cartes-metriques">
                            <!-- Niveau 1 -->
                            <div class="carte-metrique-verte">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Niveau 1</span>
                                    <strong id="tb-rai-niveau1-pct" class="carte-metrique-valeur-verte">0%</strong>
                                </div>
                            </div>

                            <!-- Niveau 2 -->
                            <div class="carte-metrique-violette">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Niveau 2</span>
                                    <strong id="tb-rai-niveau2-pct" class="carte-metrique-valeur-violette">0%</strong>
                                </div>
                            </div>

                            <!-- Niveau 3 -->
                            <div class="carte-metrique-rouge-attention">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Niveau 3</span>
                                    <strong id="tb-rai-niveau3-pct" class="carte-metrique-valeur-rouge">0%</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ========== RACCOURCIS RAPIDES ========== -->
                    <div class="carte">
                        <h3>Raccourcis rapides</h3>

                        <div
                            class="grid-auto-250">
                            <!-- Voir la liste complète -->
                            <button onclick="afficherSousSection('tableau-bord-liste')" style="padding: 20px; background: white; border: 2px solid var(--bleu-principal); 
                               border-radius: 8px; cursor: pointer; text-align: left; transition: all 0.2s;"
                                onmouseover="this.style.background='var(--bleu-tres-pale)'"
                                onmouseout="this.style.background='white'">
                                <div class="titre-bleu-lg-mb8">
                                </div>
                                <div class="label-fw-600-bleu">
                                    Liste complète
                                </div>
                                <div class="text-sm-muted">
                                    Consulter tous les étudiants avec filtres et recherche
                                </div>
                            </button>

                            <!-- Saisir présences -->
                            <button onclick="afficherSection('presences')" style="padding: 20px; background: white; border: 2px solid var(--bleu-principal); 
                               border-radius: 8px; cursor: pointer; text-align: left; transition: all 0.2s;"
                                onmouseover="this.style.background='var(--bleu-tres-pale)'"
                                onmouseout="this.style.background='white'">
                                <div class="titre-bleu-lg-mb8">
                                </div>
                                <div class="label-fw-600-bleu">
                                    Saisir présences
                                </div>
                                <div class="text-sm-muted">
                                    Enregistrer l'assiduité au cours d'aujourd'hui
                                </div>
                            </button>

                            <!-- Évaluer productions -->
                            <button onclick="afficherSection('evaluations')" style="padding: 20px; background: white; border: 2px solid var(--bleu-principal); 
                               border-radius: 8px; cursor: pointer; text-align: left; transition: all 0.2s;"
                                onmouseover="this.style.background='var(--bleu-tres-pale)'"
                                onmouseout="this.style.background='white'">
                                <div class="titre-bleu-lg-mb8">
                                </div>
                                <div class="label-fw-600-bleu">
                                    Évaluer productions
                                </div>
                                <div class="text-sm-muted">
                                    Corriger et évaluer les artefacts du portfolio
                                </div>
                            </button>
                        </div>
                    </div>

                </div>
                <!-- FIN sous-section tableau-bord-apercu -->

                <!-- Sous-section: Liste des individus -->
                <div id="tableau-bord-liste" class="sous-section">
                    <h2>Liste des étudiant·es</h2>
                    <p class="text-muted">Consultation de la liste complète et accès aux portfolios individuels</p>

                    <div class="carte">
                        <h3>Étudiant·es inscrit·es
                            <span id="compteur-tableau-bord-liste"
                                style="color: #666; font-size: 0.9rem; font-weight: normal;">
                                (0 étudiant·e)
                            </span>
                        </h3>

                        <!-- CARTES DE STATISTIQUES DU GROUPE -->
                        <div class="grille-metriques">
                            <!-- Risques faibles -->
                            <div class="carte-metrique-standard carte-metrique-bleue">
                                <div class="label">Risques faibles</div>
                                <div class="valeur">
                                    <span id="stat-risques-faibles">—</span>
                                    <span id="stat-risques-faibles-pct"></span>
                                </div>
                            </div>

                            <!-- RàI Niveau 1 -->
                            <div class="carte-metrique-standard carte-metrique-bleue">
                                <div class="label">RàI Niveau 1</div>
                                <div class="valeur">
                                    <span id="stat-rai-1">—</span>
                                    <span id="stat-rai-1-pct"></span>
                                </div>
                            </div>

                            <!-- RàI Niveau 2 -->
                            <div class="carte-metrique-standard carte-metrique-bleue">
                                <div class="label">RàI Niveau 2</div>
                                <div class="valeur">
                                    <span id="stat-rai-2">—</span>
                                    <span id="stat-rai-2-pct"></span>
                                </div>
                            </div>

                            <!-- RàI Niveau 3 -->
                            <div class="carte-metrique-standard carte-metrique-bleue">
                                <div class="label">RàI Niveau 3</div>
                                <div class="valeur">
                                    <span id="stat-rai-3">—</span>
                                    <span id="stat-rai-3-pct"></span>
                                </div>
                            </div>
                        </div>

                        <!-- ZONE INFO: Lien vers configuration -->
                        <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px;
                margin-bottom: 20px; border-left: 4px solid var(--bleu-principal);">
                            <p class="m-0-bleu-moyen">
                                <strong>Pour ajouter, modifier ou supprimer des étudiants :</strong>
                                Allez dans <strong>Réglages › Groupe</strong>
                            </p>
                        </div>

                        <!-- FILTRAGE ET RECHERCHE -->
                        <div class="carte-grise-mb20">
                            <div class="grid-auto-180">
                                <div class="groupe-form">
                                    <label for="filtre-groupe-liste">Groupe</label>
                                    <select id="filtre-groupe-liste" class="controle-form"
                                        onchange="afficherListeEtudiantsConsultation()">
                                        <option value="">Tous les groupes</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label for="filtre-programme-liste">Programme</label>
                                    <select id="filtre-programme-liste" class="controle-form"
                                        onchange="afficherListeEtudiantsConsultation()">
                                        <option value="">Tous les programmes</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label for="filtre-risque-liste">Niveau de risque</label>
                                    <select id="filtre-risque-liste" class="controle-form"
                                        onchange="afficherListeEtudiantsConsultation()">
                                        <option value="">Tous les niveaux</option>
                                        <option value="minimal">🔵 Minimal (≤ 20%)</option>
                                        <option value="faible">🟢 Faible (20-30%)</option>
                                        <option value="modere">🟡 Modéré (30-40%)</option>
                                        <option value="eleve">🟠 Élevé (40-50%)</option>
                                        <option value="tres-eleve">🔴 Très élevé (50-70%)</option>
                                        <option value="critique">⚫ Critique (> 70%)</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label for="filtre-rai-liste">Niveau RàI</label>
                                    <select id="filtre-rai-liste" class="controle-form"
                                        onchange="afficherListeEtudiantsConsultation()">
                                        <option value="">Tous les niveaux</option>
                                        <option value="1">Niveau 1 (Universel)</option>
                                        <option value="2">Niveau 2 (Préventif)</option>
                                        <option value="3">Niveau 3 (Intensif)</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label for="filtre-pattern-liste">Pattern d'apprentissage</label>
                                    <select id="filtre-pattern-liste" class="controle-form"
                                        onchange="afficherListeEtudiantsConsultation()">
                                        <option value="">Tous les patterns</option>
                                        <option value="defi-specifique">Défi spécifique</option>
                                        <option value="stable">Stable</option>
                                        <option value="blocage-emergent">Blocage émergent</option>
                                        <option value="blocage-critique">Blocage critique</option>
                                        <option value="progression">En progression</option>
                                    </select>
                                </div>
                            </div>
                            <div class="grid-1fr-auto-end">
                                <div class="groupe-form">
                                    <label for="recherche-nom-liste">Recherche (nom/prénom/DA)</label>
                                    <input type="text" id="recherche-nom-liste" class="controle-form"
                                        placeholder="Rechercher par nom, prénom ou DA..." oninput="afficherListeEtudiantsConsultation()">
                                </div>
                                <div class="d-flex-wrap-gap10">
                                    <label class="checkbox-danger-light">
                                        <input type="checkbox" id="surligner-critique" onchange="afficherListeEtudiantsConsultation()" class="cursor-pointer">
                                        <span class="text-08-fw600-danger-dark">Engagement insuffisant (&lt;30%)</span>
                                    </label>
                                    <label class="checkbox-danger-medium">
                                        <input type="checkbox" id="surligner-tres-eleve" onchange="afficherListeEtudiantsConsultation()" class="cursor-pointer">
                                        <span class="text-08-fw600-danger">Engagement fragile (30-49%)</span>
                                    </label>
                                    <label class="checkbox-danger-medium">
                                        <input type="checkbox" id="surligner-niveau3" onchange="afficherListeEtudiantsConsultation()" class="cursor-pointer">
                                        <span class="text-08-fw600-danger">Niveau 3</span>
                                    </label>
                                    <label class="checkbox-warning">
                                        <input type="checkbox" id="surligner-niveau2" onchange="afficherListeEtudiantsConsultation()" class="cursor-pointer">
                                        <span style="font-size: 0.8rem; font-weight: 600; color: #f59e0b;">Niveau 2</span>
                                    </label>
                                    <label class="checkbox-danger-light">
                                        <input type="checkbox" id="surligner-blocage" onchange="afficherListeEtudiantsConsultation()" class="cursor-pointer">
                                        <span class="text-08-fw600-danger-dark">Blocage</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- TABLEAU DES ÉTUDIANTS -->
                        <div id="tableEtudiantsListe"
                            class="overflow-xy-600">
                            <table class="tableau" class="tableau-blanc">
                                <thead class="thead-sticky-bleu">
                                    <tr>
                                        <th onclick="trierTableauPar('num')" class="td-center-50" title="Cliquer pour trier">
                                            #<span id="tri-num" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('da')" class="td-center-90-clickable" title="Cliquer pour trier">
                                            DA<span id="tri-da" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('groupe')" class="td-center-70" title="Cliquer pour trier">
                                            Groupe<span id="tri-groupe" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('nom')" class="td-left-clickable" title="Cliquer pour trier">
                                            Nom<span id="tri-nom" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('prenom')" class="td-left-clickable" title="Cliquer pour trier">
                                            Prénom<span id="tri-prenom" class="ml-4">↕</span>
                                        </th>
                                        <th class="td-center-40">SA</th>
                                        <th onclick="trierTableauPar('assiduite')" class="td-center-clickable" title="Cliquer pour trier">
                                            A<br><span class="text-xs-normal">(assiduité)</span><span id="tri-assiduite" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('completion')" class="td-center-clickable" title="Cliquer pour trier">
                                            C<br><span class="text-xs-normal">(complétion)</span><span id="tri-completion" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('performance')" class="td-center-clickable" title="Cliquer pour trier">
                                            P<br><span class="text-xs-normal">(performance)</span><span id="tri-performance" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('engagement')" class="td-center-clickable" title="Cliquer pour trier">
                                            E<br><span class="text-xs-normal">(engagement)</span><span id="tri-engagement" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('pattern')" class="td-left-140-clickable" title="Cliquer pour trier">
                                            Pattern<span id="tri-pattern" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('rai')" class="td-center-100-clickable" title="Cliquer pour trier">
                                            RàI<span id="tri-rai" class="ml-4">↕</span>
                                        </th>
                                        <th class="td-center-80" title="Nombre d'interventions reçues">
                                            Interv.
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="tbody-tableau-bord-liste">
                                    <!-- Généré dynamiquement par le module JS -->
                                </tbody>
                            </table>
                        </div>

                        <!-- MESSAGE SI AUCUN ÉTUDIANT -->
                        <div id="message-aucun-etudiant" style="display: none; text-align: center; padding: 40px; 
                background: #f8f9fa; border-radius: 8px; color: #666;">
                            <p class="text-11-mb10">📭 Aucun·e étudiant·e trouvé·e</p>
                            <p class="text-09-mb15">
                                <span id="message-filtre-actif">
                                    Aucun résultat avec les filtres actuels.
                                </span>
                                <span id="message-liste-vide" style="display: none;">
                                    Allez dans <strong>Réglages › Groupe</strong> pour ajouter des étudiant·es
                                </span>
                            </p>
                            <button onclick="resetFiltresListe()" id="btn-reset-filtres" class="btn btn-annuler">
                                Réinitialiser les filtres
                            </button>
                        </div>

                    </div><!-- FIN carte -->
                </div><!-- FIN sous-section tableau-bord-liste -->

                <!-- Sous-section: Profil -->
                <div id="tableau-bord-profil" class="sous-section">
                    <div id="contenuProfilEtudiant">
                        <div class="carte">
                            <p class="text-muted">Sélectionnez un·e étudiant·e depuis la liste pour voir son profil.</p>
                        </div>
                    </div>
                </div><!-- FIN sous-section tableau-bord-profil -->

                <!-- Sous-section: Interventions RàI -->
                <div id="tableau-bord-interventions" class="sous-section">
                    <h2>Planification et documentation des interventions</h2>
                    <p class="text-muted">Gardez une trace des interventions de niveau 2 et 3</p>

                    <!-- Conteneur pour la liste des interventions ou le formulaire -->
                    <div id="conteneurPrincipal">
                        <div id="listeInterventions"></div>
                    </div>
                </div><!-- FIN sous-section tableau-bord-interventions -->

            </section>
            <!-- FIN section-tableau-bord -->

            <!-- ===================================
                 SECTION: PRÉSENCES
                 =================================== -->
            <section id="section-presences" class="section">

                <!-- Sous-section: Aperçu -->
                <div id="presences-apercu" class="sous-section">
                    <h2 class="carte-titre-avec-toggle">
                        <span>Aperçu des présences</span>
                        <span class="emoji-container">
                            <span class="emoji-toggle" data-target="note-presences-apercu">📐</span>
                        </span>
                    </h2>
                    <p class="text-muted">Vue d'ensemble des statistiques de présence du groupe</p>

                    <!-- Note explicative -->
                    <div id="note-presences-apercu" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les statistiques d'assiduité sont calculées à partir des présences saisies.
                        Le taux d'assiduité moyen reflète la proportion d'heures de présence par rapport aux heures offertes.
                        Les modes Sommatif (SOM) et Alternatif (PAN) peuvent différer selon la configuration dans Réglages › Pratique de notation.
                    </div>

                    <!-- STATISTIQUES GLOBALES -->
                    <div class="carte">
                        <h3>Statistiques du groupe</h3>

                        <div class="grille-cartes-metriques" class="mt-15">
                            <!-- Taux d'assiduité moyen du groupe -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Taux d'assiduité moyen du groupe</span>
                                    <strong id="pa-taux-moyen" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>

                            <!-- Séances données -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Séances données</span>
                                    <strong id="pa-seances-donnees" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>

                            <!-- Prochaine séance -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Prochaine séance</span>
                                    <strong id="pa-prochaine-seance" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>

                            <!-- Élèves -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Élèves</span>
                                    <strong id="stat-nb-eleves" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sous-section: Vue calendaire -->
                <div id="presences-calendrier" class="sous-section">
                    <div class="carte">
                        <h3>Vue calendaire</h3>
                        <div id="conteneur-calendrier">
                            [Le calendrier sera généré ici]
                        </div>
                    </div>
                </div>

                <!-- Sous-section: Saisie -->
                <div id="presences-saisie" class="sous-section">
                    <h2>Enregistrement quotidien</h2>
                    <p class="text-muted">Enregistrer les présences pour une séance</p>

                    <!-- Avertissement si format non configuré -->
                    <div id="alerteFormatHoraire" class="alerte alerte-attention" style="display: none;">
                        <h4>Configuration requise</h4>
                        <p>
                            Le format horaire n'est pas configuré. La durée par défaut est fixée à <strong>2h par
                                séance</strong>.
                            <br>Pour définir le format exact (2×2h ou 1×4h), veuillez configurer l'horaire dans
                            <a href="#"
                                onclick="afficherSection('reglages'); afficherSousSection('reglages-horaire'); return false;"
                                class="text-underline-bold">Réglages >
                                Horaire</a>.
                        </p>
                    </div>

                    <!-- En-tête de la séance -->
                    <div id="enteteDateSeance" style="display: none;">
                        <div id="texteDateSeance"></div>
                    </div>

                    <!-- Contrôles de saisie -->
                    <div class="carte" class="mb-20">
                        <div class="grille-saisie-presences">
                            <div class="groupe-form">
                                <label for="date-cours" class="label-formulaire">Date du cours</label>
                                <div class="d-flex-gap8-center">
                                    <button id="btn-cours-precedent" onclick="allerCoursPrecedent()"
                                        class="btn btn-principal btn-compact" class="flex-shrink-0">
                                        ← Précédent
                                    </button>
                                    <input type="date" id="date-cours" class="controle-form"
                                        onchange="initialiserSaisiePresences(); mettreAJourBoutonsNavigation();"
                                        class="flex-1">
                                    <button id="btn-cours-suivant" onclick="allerCoursSuivant()"
                                        class="btn btn-principal btn-compact" class="flex-shrink-0">
                                        Suivant →
                                    </button>
                                </div>
                            </div>
                            <div class="groupe-form">
                                <label for="selectGroupePresences" class="label-formulaire">Filtrer par groupe</label>
                                <select id="selectGroupePresences" class="controle-form"
                                    onchange="initialiserSaisiePresences()">
                                    <option value="">Tous les groupes</option>
                                </select>
                            </div>
                            <div class="groupe-form">
                                <label for="selectTriPresences" class="label-formulaire">Trier par</label>
                                <select id="selectTriPresences" class="controle-form"
                                    onchange="initialiserSaisiePresences()">
                                    <option value="nom">Ordre alphabétique (nom)</option>
                                    <option value="assiduite-croissant">Assiduité croissante (↑)</option>
                                    <option value="assiduite-decroissant">Assiduité décroissante (↓)</option>
                                </select>
                            </div>

                        </div>

                        <!-- Tableau de saisie -->
                        <div class="carte">
                            <h3>
                                Liste des étudiant·es
                                <span id="nbEtudiantsPresences"
                                    class="fw-normal-bleu-moyen-sm">
                                    (0 étudiant·e)
                                </span>
                            </h3>

                            <!-- Champ de recherche -->
                            <div class="groupe-form" class="mb-15">
                                <input type="text" id="recherche-saisie-presences" class="controle-form"
                                    placeholder="Rechercher un étudiant (nom, prénom, DA)..."
                                    oninput="filtrerTableauPresences()">
                            </div>

                            <!-- Compteur présents/absents -->
                            <div id="compteur-presences" style="background: var(--bleu-tres-pale); padding: 12px 16px; border-radius: 6px; margin-bottom: 15px; display: flex; justify-content: center; gap: 30px; font-size: 0.95rem; font-weight: 500; border-left: 4px solid var(--bleu-principal); color: var(--bleu-moyen);">
                                <span>
                                    Présents : <span id="nb-presents">0</span>
                                </span>
                                <span>
                                    Absents : <span id="nb-absents">0</span>
                                </span>
                                <span>
                                    Total : <span id="nb-total">0</span>
                                </span>
                                <span>
                                    Assiduité aujourd'hui : <span id="assiduite-aujourdhui">0%</span>
                                </span>
                            </div>

                            <table class="tableau">
                                <thead>
                                    <tr>
                                        <th class="w-100px">DA</th>
                                        <th>Prénom</th>
                                        <th>Nom</th>
                                        <th id="colonneHeuresTitre" class="w-120-center">
                                            Heures (par défaut: 2h)
                                            <div
                                                class="mt-8-flex-col-gap4">
                                                <button id="btn-tous-presents" onclick="remplirTousPresents()"
                                                    class="btn btn-principal btn-compact"
                                                    class="fw-600">
                                                    Tous 2h
                                                </button>
                                                <button id="btn-reinit-saisie" onclick="reinitialiserSaisie()"
                                                    class="btn btn-annuler btn-compact"
                                                    title="Réinitialiser la saisie">
                                                    Réinitialiser
                                                </button>
                                            </div>
                                        </th>
                                        <th class="w-200">Notes</th>
                                        <th class="w-100px">Total heures</th>
                                        <th class="w-100px">Assiduité</th>
                                    </tr>
                                </thead>
                                <tbody id="tbody-saisie-presences">
                                    <tr>
                                        <td colspan="7" class="empty-state-center-30">
                                            Sélectionnez une date pour afficher le tableau de saisie
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Boutons d'action -->
                        <div class="btn-groupe" class="mt-20">
                            <button class="btn btn-confirmer" onclick="enregistrerPresences()">
                                Enregistrer les présences
                            </button>
                            <button class="btn btn-annuler" onclick="afficherSousSection('presences-apercu')">
                                Annuler
                            </button>
                        </div>
                    </div>


            </section>

            <!-- ===============================
     SECTION: ÉVALUATIONS
     =============================== -->
            <section id="section-evaluations" class="section">

                <!-- Sous-section: Aperçu -->
                <div id="evaluations-apercu" class="sous-section">
                    <h2 class="carte-titre-avec-toggle">
                        <span>Aperçu des évaluations</span>
                        <span class="emoji-container">
                            <span class="emoji-toggle" data-target="note-evaluations-apercu">📐</span>
                        </span>
                    </h2>
                    <p class="text-muted">Vue d'ensemble des évaluations du groupe</p>

                    <!-- Note explicative -->
                    <div id="note-evaluations-apercu" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les statistiques d'évaluations sont calculées à partir des artefacts complétés.
                        La moyenne du groupe reflète la performance globale selon les critères d'évaluation configurés (SRPNF).
                        Le taux de complétion mesure le nombre d'artefacts remis par rapport aux artefacts attendus.
                    </div>

                    <!-- STATISTIQUES GLOBALES -->
                    <div class="carte">
                        <h3>Statistiques du groupe</h3>

                        <div class="grille-cartes-metriques" class="mt-15">
                            <!-- Taux de complétion -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Taux de complétion moyen</span>
                                    <strong id="ea-taux-completion" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>

                            <!-- Productions réalisées -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Productions réalisées</span>
                                    <strong id="ea-productions-realisees" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>

                            <!-- Productions configurées -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Productions configurées</span>
                                    <strong id="ea-productions-configurees" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sous-section: Liste des évaluations -->
                <div id="evaluations-liste" class="sous-section">
                <h2>Historique et filtres</h2>
                <p class="description-section">Vue d'ensemble des évaluations et calcul automatique des indices C et P</p>

                <!-- Filtres -->
                <div class="carte">
                    <h3>Filtres</h3>
                    <div class="grille-filtres">
                        <div class="groupe-form">
                            <label for="filtre-groupe-eval">Filtrer par groupe</label>
                            <select id="filtre-groupe-eval" class="controle-form" onchange="filtrerListeEvaluations()">
                                <option value="">Tous les groupes</option>
                            </select>
                        </div>
                        <div class="groupe-form">
                            <label for="filtre-production-eval">Filtrer par production</label>
                            <select id="filtre-production-eval" class="controle-form"
                                onchange="filtrerListeEvaluations()">
                                <option value="">Toutes les productions</option>
                            </select>
                        </div>
                        <div class="groupe-form">
                            <label for="filtre-statut-eval">Filtrer par statut</label>
                            <select id="filtre-statut-eval" class="controle-form" onchange="filtrerListeEvaluations()">
                                <option value="">Tous</option>
                                <option value="actives">Actives</option>
                                <option value="evalue">Évalués seulement</option>
                                <option value="non-evalue">Non évalués</option>
                                <option value="jeton-delai">Jeton de délai</option>
                                <option value="jeton-reprise">Jeton de reprise</option>
                                <option value="tous-jetons">Tous les jetons</option>
                                <option value="remplacees">Remplacées</option>
                            </select>
                        </div>
                        <button class="btn btn-principal btn-compact" onclick="reinitialiserFiltresEval()"
                            class="whitespace-nowrap">
                            ↻ Réinit.
                        </button>
                    </div>
                </div>

                <!-- Champ de recherche -->
                <div class="carte">
                    <input type="text"
                           id="recherche-evaluations"
                           class="controle-form"
                           placeholder="Rechercher par nom, prénom, DA, production..."
                           oninput="rechercherEvaluations()">
                </div>

                <!-- Statistiques globales -->
                <div class="carte">
                    <div id="stats-evaluations" style="display: flex; gap: 30px; flex-wrap: wrap; align-items: baseline;">
                        <div style="font-weight: 600; color: var(--bleu-principal);" id="compteur-evaluations">
                            Chargement...
                        </div>
                        <div style="color: #666;" id="moyenne-evaluations"></div>
                        <div style="color: #666;" id="nb-productions"></div>
                    </div>
                </div>

                <!-- Zone de chargement -->
                <div id="zone-chargement-evaluations" class="carte" style="text-align: center; padding: 40px;">
                    <p style="color: #666;">Chargement des évaluations...</p>
                </div>

                <!-- Tableau des évaluations -->
                <div id="conteneur-tableau-evaluations" style="display: none;">
                    <div class="carte" style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="background: var(--bleu-tres-pale); border-bottom: 2px solid var(--bleu-moyen);">
                                    <th onclick="trierTableauParColonne('da')" style="padding: 12px; text-align: left; font-weight: 600; cursor: pointer;" title="Cliquer pour trier">
                                        DA <span id="tri-da" style="font-size: 0.8em; color: #999;">↕</span>
                                    </th>
                                    <th onclick="trierTableauParColonne('nom')" style="padding: 12px; text-align: left; font-weight: 600; cursor: pointer;" title="Cliquer pour trier">
                                        Nom <span id="tri-nom" style="font-size: 0.8em; color: #999;">↑</span>
                                    </th>
                                    <th onclick="trierTableauParColonne('prenom')" style="padding: 12px; text-align: left; font-weight: 600; cursor: pointer;" title="Cliquer pour trier">
                                        Prénom <span id="tri-prenom" style="font-size: 0.8em; color: #999;">↕</span>
                                    </th>
                                    <th onclick="trierTableauParColonne('production')" style="padding: 12px; text-align: left; font-weight: 600; cursor: pointer;" title="Cliquer pour trier">
                                        Production <span id="tri-production" style="font-size: 0.8em; color: #999;">↕</span>
                                    </th>
                                    <th onclick="trierTableauParColonne('jetons')" style="padding: 12px; text-align: center; font-weight: 600; cursor: pointer;" title="Cliquer pour trier">
                                        Jeton <span id="tri-jetons" style="font-size: 0.8em; color: #999;">↕</span>
                                    </th>
                                    <th onclick="trierTableauParColonne('niveau')" style="padding: 12px; text-align: center; font-weight: 600; cursor: pointer;" title="Cliquer pour trier">
                                        Niveau <span id="tri-niveau" style="font-size: 0.8em; color: #999;">↕</span>
                                    </th>
                                    <th onclick="trierTableauParColonne('note')" style="padding: 12px; text-align: center; font-weight: 600; cursor: pointer;" title="Cliquer pour trier">
                                        Note % <span id="tri-note" style="font-size: 0.8em; color: #999;">↕</span>
                                    </th>
                                    <th style="padding: 12px; text-align: center; font-weight: 600;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="corps-tableau-evaluations">
                                <!-- Sera rempli dynamiquement par liste-evaluations.js -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Message si aucun résultat -->
                <div id="message-aucun-resultat" class="carte" style="display: none; text-align: center; padding: 40px;">
                    <p style="color: #999; font-style: italic;">
                        Aucune évaluation ne correspond aux filtres sélectionnés
                    </p>
                </div>
            </div>



            <!-- Sous-section: Évaluer (formulaire d'évaluation) -->
            <div id="evaluations-individuelles" class="sous-section">
                <h2>Évaluation des productions et rétroaction différenciée automatique</h2>
                <p class="text-muted">Évaluation détaillée selon les critères et les échelles de performance</p>

                <!-- Conteneur principal en Layout L modifié -->
                <div class="carte" class="mb-20">

                    <!-- PARTIE HAUTE : 2 colonnes -->
                    <div class="grille-evaluation-principale" class="mb-20">

                        <!-- COLONNE GAUCHE : PARAMÈTRES DE L'ÉVALUATION -->
                        <div class="carte-bleu-fonce">
                            <!-- Boutons de gestion des évaluations -->
                            <div class="groupe-boutons-colonne" class="mb-15">
                                <div class="groupe-boutons-ligne">
                                    <button class="btn btn-modifier btn-tres-compact btn-largeur-auto" onclick="afficherModalReparationEvaluations()"
                                        title="Réparer les évaluations avec critères manquants"
                                        style="font-size: 1.2rem; padding: 4px 10px;">
                                        Réparer
                                    </button>
                                </div>

                                <div class="groupe-boutons-ligne" class="mt-10">
                                    <button class="btn btn-principal btn-tres-compact btn-largeur-auto" onclick="sauvegarderEvaluation()"
                                        title="Sauvegarder l'évaluation">
                                        Sauvegarder
                                    </button>

                                    <button class="btn btn-annuler btn-tres-compact btn-largeur-auto" onclick="nouvelleEvaluation()"
                                        title="Réinitialiser tous les paramètres et commencer une nouvelle évaluation">
                                        Réinitialiser
                                    </button>
                                </div>
                            </div>

                            <hr class="separateur-horizontal">

                            <div class="indicateur-verrouillage" class="mb-15">
                                <h4 class="m-0">Paramètres de l'évaluation</h4>

                                <!-- Indicateur de verrouillage -->
                                <div id="indicateurVerrouillageEval" style="display: none;">
                                    <span id="iconeVerrouEval" onclick="basculerVerrouillageEvaluationCourante()"
                                        style="font-size: 1.2rem; cursor: pointer; user-select: none; color: #4caf50;"
                                        title="Évaluation modifiable - Cliquez pour verrouiller">🔓</span>
                                </div>
                            </div>

                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Groupe :</label>
                                <select id="selectGroupeEval" class="controle-form"
                                    onchange="filtrerEtudiantsParGroupe()">
                                    <option value="">Tous les groupes</option>
                                </select>
                            </div>

                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Étudiant·e :</label>
                                <select id="selectEtudiantEval" class="controle-form"
                                    onchange="chargerEvaluationsEtudiant()">
                                    <option value="">-- Choisir un·e étudiant·e --</option>
                                </select>
                            </div>

                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Production étudiante :</label>
                                <select id="selectProduction1" class="controle-form" onchange="chargerProduction(1)">
                                    <option value="">-- Choisir une production --</option>
                                </select>
                            </div>

                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Grille d'évaluation :</label>
                                <select id="selectGrille1" class="controle-form" onchange="chargerGrilleSelectionnee()">
                                    <option value="">-- Choisir une grille --</option>
                                </select>
                            </div>

                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Échelle de performance :</label>
                                <select id="selectEchelle1" class="controle-form"
                                    onchange="changerEchelleEvaluation(1)">
                                    <option value="">-- Choisir une échelle --</option>
                                </select>
                            </div>

                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Cartouche de rétroaction :</label>
                                <select id="selectCartoucheEval" class="controle-form"
                                    onchange="cartoucheSelectionnee()">
                                    <option value="">-- Choisir une cartouche --</option>
                                </select>
                            </div>

                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Statut de remise :</label>
                                <select id="remiseProduction1" class="controle-form" onchange="changerStatutRemise(1)">
                                    <option value="non-remis">Non remis</option>
                                    <option value="remis">Remis</option>
                                    <option value="en-retard">En retard</option>
                                </select>
                            </div>

                            <!-- STATUT D'INTÉGRITÉ ACADÉMIQUE -->
                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Intégrité académique :</label>
                                <select id="statutIntegrite" class="controle-form" onchange="changerStatutIntegrite()">
                                    <option value="recevable">Recevable</option>
                                    <option value="soupcon">Soupçon à vérifier</option>
                                    <option value="plagiat">Non recevable - Plagiat</option>
                                    <option value="ia">Non recevable - IA non autorisée</option>
                                </select>
                                <p class="text-085-muted-m5-0-0-28">
                                    Les travaux non recevables sont exclus des calculs de moyenne.
                                </p>
                            </div>

                            <!-- NOTES SUR L'INTÉGRITÉ (optionnel) -->
                            <div id="divNotesIntegrite" class="groupe-form" style="display: none;">
                                <label class="label-formulaire">Notes (optionnel) :</label>
                                <textarea id="notesIntegrite" class="controle-form" rows="3" placeholder="Détails du cas, preuves, références..."></textarea>
                            </div>

                            <!-- BOUTON JETON DE DÉLAI -->
                            <div id="boutonJetonDelai" class="groupe-form" class="hidden-mb-12">
                                <button class="btn btn-special" onclick="appliquerJetonDelaiDepuisSidebar()"
                                        style="background: linear-gradient(135deg, #ff6f00 0%, #ff8c00 100%); color: white;">
                                    🕒 Appliquer jeton de délai
                                </button>
                                <p class="text-085-muted-m5-0-0-0">
                                    L'évaluation comptera dans les travaux remis sans pénalité de retard.
                                </p>
                            </div>

                            <!-- BOUTON JETON DE REPRISE -->
                            <div id="boutonJetonReprise" class="groupe-form" class="hidden-mb-12">
                                <button class="btn btn-special" onclick="appliquerJetonRepriseDepuisSidebar()"
                                        class="carte-purple-header">
                                    ⭐ Appliquer jeton de reprise
                                </button>
                                <p class="text-085-muted-m5-0-0-0">
                                    Remplace l'évaluation précédente. L'ancienne note sera archivée.
                                </p>
                            </div>

                            <!-- INFORMATION SUR LES JETONS APPLIQUÉS -->
                            <div id="gestionJetonsEvaluation" class="groupe-form" style="display: none;">
                                <label class="label-formulaire">Jetons appliqués :</label>
                                <div id="infoJetonsAppliques" class="mt-8-flex-gap8-wrap"></div>
                            </div>

                            <!-- NOTE ET NIVEAU -->
                            <div id="noteFinale1" class="boite-note-finale">
                                <div class="label">Note finale</div>
                                <div class="valeur">
                                    <span id="noteProduction1">0.0</span>
                                </div>
                                <div class="niveau">
                                    Niveau: <span id="niveauProduction1">--</span>
                                </div>
                            </div>
                        </div>

                        <!-- COLONNE DROITE : CRITÈRES AVEC RÉTROACTIONS -->
                        <div class="zone-criteres">
                            <h4>Évaluation et prévisualisation de la rétroaction</h4>

                            <div id="listeCriteresGrille1" class="conteneur-liste">
                                <p style="color: #999; font-style: italic; font-size: 0.85rem;">
                                    Sélectionnez une grille et une cartouche
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- PARTIE BASSE : RÉTROACTION FINALE -->
                    <div class="zone-retroaction">
                        <div class="zone-retroaction-header">
                            <h4>Rétroaction finale</h4>
                        </div>

                        <!-- Options à inclure (TOUTES COCHÉES PAR DÉFAUT) -->
                        <div class="grille-checkboxes" class="mb-15">
                            <label class="text-sm-pointer">
                                <input type="checkbox" id="afficherDescription1" onchange="genererRetroaction(1)"
                                    checked>
                                Description
                            </label>
                            <label class="text-sm-pointer">
                                <input type="checkbox" id="afficherObjectif1" onchange="genererRetroaction(1)" checked>
                                Objectif
                            </label>
                            <label class="text-sm-pointer">
                                <input type="checkbox" id="afficherTache1" onchange="genererRetroaction(1)" checked>
                                Tâche
                            </label>
                            <label class="text-sm-pointer">
                                <input type="checkbox" id="afficherAdresse1" onchange="genererRetroaction(1)" checked>
                                Adresse
                            </label>
                            <label class="text-sm-pointer">
                                <input type="checkbox" id="afficherContexte1" onchange="genererRetroaction(1)" checked>
                                Contexte
                            </label>
                        </div>

                        <!-- Zone de texte pour la rétroaction finale -->
                        <textarea id="retroactionFinale1" class="controle-form" rows="12"
                            placeholder="La rétroaction sera générée automatiquement ici selon vos évaluations et les options cochées. Vous pouvez modifier le texte avant de le copier."
                            style="width: 100%; height: 200px; padding: 12px; border-radius: 5px;
    border: 1px solid #ddd; font-family: inherit; resize: vertical;
    font-size: 0.85rem; line-height: 1.5; background: white;">
</textarea>

                        <button class="btn btn-confirmer btn-compact" onclick="copierRetroaction(1)"
                            class="mt-10">
                            Copier dans le presse-papier
                        </button>
                    </div>

                </div><!-- fin carte du layout évaluation -->

            </div><!-- fin sous-section evaluations-individuelles -->

            <!-- Modal Réparation des évaluations -->
            <div id="modalReparationEvaluations" class="modal-overlay">
                <div class="modal-contenu modal-compact">
                    <button onclick="fermerModalReparationEvaluations()" class="modal-fermer">✕</button>

                    <h2 class="modal-titre">Réparation des évaluations</h2>

                    <div class="mb-25">
                        <h3 style="color: var(--bleu-principal); font-size: 1rem; margin-bottom: 10px;">Qu'est-ce que cette fonction ?</h3>
                        <p style="color: #666; line-height: 1.6;">
                            Cette fonction permet de <strong>réparer automatiquement</strong> les évaluations dont les critères n'ont pas été correctement sauvegardés.
                            Elle extrait les niveaux (I, D, M, E) depuis la rétroaction finale et reconstruit le tableau des critères manquants.
                        </p>
                    </div>

                    <div class="alerte alerte-attention" class="mb-25">
                        <h4>Quand l'utiliser ?</h4>
                        <ul class="m-0-pl-20-gray-lh">
                            <li><strong>Après une migration de données</strong> depuis une ancienne version</li>
                            <li><strong>Si des évaluations ne se chargent pas</strong> correctement lors de la modification</li>
                            <li><strong>Si vous constatez des critères vides</strong> alors que la rétroaction contient les niveaux</li>
                            <li><strong>Après un problème technique</strong> ayant affecté la sauvegarde</li>
                        </ul>
                    </div>

                    <div class="carte-mb25-bleu-clair">
                        <h3 style="color: #1565c0; font-size: 1rem; margin-top: 0; margin-bottom: 10px;">Comment ça fonctionne ?</h3>
                        <ol class="m-0-pl-20-gray-lh">
                            <li>Analyse toutes les évaluations sauvegardées</li>
                            <li>Détecte celles avec un tableau <code>criteres</code> vide</li>
                            <li>Extrait les niveaux depuis la rétroaction (ex: "STRUCTURE (I)")</li>
                            <li>Reconstruit automatiquement les critères manquants</li>
                            <li>Sauvegarde les modifications dans le localStorage</li>
                        </ol>
                    </div>

                    <div class="carte-mb25-green">
                        <h3 style="color: #558b2f; font-size: 1rem; margin-top: 0; margin-bottom: 10px;">Résultat attendu</h3>
                        <p class="m-0-muted-lh16">
                            Après la réparation, un rapport détaillé affichera le nombre d'évaluations réparées, ignorées (déjà correctes) et échouées.
                            Les évaluations réparées pourront être modifiées normalement avec tous leurs critères restaurés.
                        </p>
                    </div>

                    <div class="footer-border-top">
                        <button class="btn btn-annuler" onclick="fermerModalReparationEvaluations()" class="mr-10">
                            Annuler
                        </button>
                        <button class="btn btn-confirmer" onclick="lancerReparationEvaluations()">
                            Lancer la réparation
                        </button>
                    </div>
                </div>
            </div>

            </section><!-- fin section-evaluations -->

            <!-- ===================================
                 SECTION: MATÉRIEL PÉDAGOGIQUE
                 =================================== -->
            <section id="section-materiel" class="section">

                <!-- Sous-section: Aperçu du matériel -->
                <div id="materiel-apercu" class="sous-section">
                    <h2 class="d-flex-between-center">
                        <span>Vue d'ensemble</span>
                        <span class="text-12">
                            <span class="emoji-toggle" data-target="note-apercu">📐</span>
                            <span class="emoji-toggle" data-target="conseil-apercu">💡</span>
                        </span>
                    </h2>
                    <p class="text-muted">Résumé du matériel pédagogique configuré</p>

                    <!-- Carte Note -->
                    <div id="note-apercu" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Cette vue d'ensemble présente un résumé du matériel pédagogique configuré pour le cours.
                        Le matériel comprend les productions (exercices formatifs et certificatifs), les grilles de critères d'évaluation,
                        les échelles de performance (IDME), et les cartouches de rétroaction. Un matériel bien configuré facilite l'évaluation
                        cohérente et permet le suivi longitudinal des apprentissages.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-apercu" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong> Commence par configurer la pratique de notation dans la section Réglages, puis crée tes grilles de critères
                        et ton échelle de performance. Enfin, définis les productions du cours en les associant aux grilles créées.
                        Cette séquence assure une configuration cohérente et facilite la gestion des évaluations.
                    </div>

                    <div class="carte">
                        <h3>Matériel configuré</h3>

                        <div class="grid-auto-200-mt15">
                            <!-- Productions -->
                            <div class="carte-bleu-encadree">
                                <div class="d-flex-between">
                                    <span class="text-muted">Productions</span>
                                    <strong id="stat-productions" class="titre-1-8">—</strong>
                                </div>
                            </div>

                            <!-- Grilles de critères -->
                            <div class="carte-bleu-encadree">
                                <div class="d-flex-between">
                                    <span class="text-muted">Grilles de critères</span>
                                    <strong id="stat-grilles" class="titre-1-8">—</strong>
                                </div>
                            </div>

                            <!-- Échelles de performance -->
                            <div class="carte-bleu-encadree">
                                <div class="d-flex-between">
                                    <span class="text-muted">Échelles de performance</span>
                                    <strong id="stat-echelles" class="titre-1-8">—</strong>
                                </div>
                            </div>

                            <!-- Cartouches de rétroaction -->
                            <div class="carte-bleu-encadree">
                                <div class="d-flex-between">
                                    <span class="text-muted">Cartouches de rétroaction</span>
                                    <strong id="stat-cartouches" class="titre-1-8">—</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sous-section: Productions -->
                <div id="materiel-productions" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Exercices formatifs et certificatifs</span>
                        <span class="titre-emoji-container">
                            <span class="emoji-toggle" data-target="note-productions">📐</span>
                            <span class="emoji-toggle" data-target="conseil-productions">💡</span>
                        </span>
                    </h2>
                    <p class="text-muted">Définir les évaluations du cours et leurs pondérations</p>

                    <!-- Carte Note -->
                    <div id="note-productions" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les productions représentent l'ensemble des travaux que les étudiants doivent réaliser
                        durant le cours. Elles peuvent être de type formatif (pour l'apprentissage) ou certificatif (pour l'évaluation).
                        Chaque production peut être associée à une grille de critères et possède une pondération qui contribue à la note finale.
                        Les portfolios permettent de regrouper plusieurs artefacts et de sélectionner automatiquement les N meilleurs selon
                        la pratique de notation configurée.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-productions" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong> Assure-toi que la somme des pondérations totalise 100%. Pour les portfolios, définis d'abord le nombre d'artefacts
                        à retenir (ex: les 3 meilleurs sur 9). Les artefacts individuels n'ont pas de pondération propre, c'est le portfolio
                        conteneur qui définit la pondération globale. Pense à verrouiller les productions une fois finalisées pour éviter
                        les modifications accidentelles.
                    </div>

                    <!-- LAYOUT SIDEBAR 2 COLONNES -->
                    <div class="layout-sidebar-2col">

                        <!-- SIDEBAR GAUCHE (280px, sticky) -->
                        <div class="sidebar-navigation">

                            <!-- Filtre par type -->
                            <div class="sidebar-filtre">
                                <label>Filtrer par type :</label>
                                <select class="controle-form" id="filtreTypeProduction" onchange="filtrerListeProductions()">
                                    <option value="">Toutes</option>
                                    <option value="sommative">Sommatives</option>
                                    <option value="formative">Formatives</option>
                                    <option value="portfolio">Portfolios</option>
                                </select>
                            </div>

                            <!-- Liste des productions -->
                            <div class="sidebar-liste" id="sidebarListeProductions">
                                <!-- Généré par afficherListeProductions() -->
                            </div>
                        </div>

                        <!-- ZONE PRINCIPALE (centrale, scroll) -->
                        <div class="zone-principale">

                            <!-- Barre d'en-tête avec bouton Nouvelle production (toujours visible) -->
                            <div style="display: flex; justify-content: flex-end; margin-bottom: 20px;">
                                <button onclick="creerNouvelleProduction()" class="btn btn-principal">
                                    + Nouvelle production
                                </button>
                            </div>

                            <!-- Message d'accueil initial -->
                            <div class="zone-principale-accueil" id="accueilProductions">
                                <p>Sélectionnez une production dans la liste</p>
                            </div>

                            <!-- Formulaire d'édition -->
                            <div id="formulaireProduction" style="display: none;">

                                <!-- Champs principaux -->
                                <div id="champsStandard" style="display: grid; grid-template-columns: 1.5fr 1.5fr 1.5fr 1fr; gap: 15px; margin-bottom: 15px;">
                                    <div class="groupe-form">
                                        <label>Type</label>
                                        <select id="productionType" class="controle-form"
                                            onchange="gererChangementTypeProduction()">
                                            <option value="">Choisir...</option>
                                            <optgroup label="Évaluations sommatives (comptent dans la note)">
                                                <option value="examen">Examen</option>
                                                <option value="travail">Travail écrit</option>
                                                <option value="quiz">Quiz/Test</option>
                                                <option value="presentation">Présentation</option>
                                                <option value="autre">Autre</option>
                                            </optgroup>
                                            <optgroup label="Évaluations formatives (ne comptent PAS dans la note)">
                                                <option value="examen-formatif">Examen formatif</option>
                                                <option value="travail-formatif">Travail formatif</option>
                                                <option value="quiz-formatif">Quiz/Test formatif</option>
                                                <option value="presentation-formatif">Présentation formative</option>
                                                <option value="autre-formatif">Autre formatif</option>
                                            </optgroup>
                                            <optgroup label="Pratique Alternative de Notation (PAN)">
                                                <option value="portfolio">Portfolio (conteneur)</option>
                                                <option value="artefact-portfolio">Artefact portfolio</option>
                                            </optgroup>
                                        </select>
                                    </div>
                                    <div class="groupe-form">
                                        <label>Titre</label>
                                        <input type="text" id="productionTitre" class="controle-form"
                                            placeholder="Ex: Analyse #1">
                                    </div>
                                    <div class="groupe-form">
                                        <label>Description</label>
                                        <input type="text" id="productionDescription" class="controle-form"
                                            placeholder="Ex: Stratégies">
                                    </div>
                                    <div class="groupe-form" id="champPonderation">
                                        <label>Pondération (%)</label>
                                        <input type="number" id="productionPonderation" class="controle-form" min="0"
                                            max="100" placeholder="Ex: 20">
                                    </div>
                                    <div class="groupe-form" id="champGrilleInline" style="display: none;">
                                        <label>Grille de critères</label>
                                        <select id="productionGrilleInline" class="controle-form">
                                            <option value="">Aucune</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Grille sur sa propre ligne (pour types standards) -->
                                <div class="groupe-form" id="champGrilleSeparee" style="margin-bottom: 15px;">
                                    <label>Grille de critères</label>
                                    <select id="productionGrille" class="controle-form">
                                        <option value="">Aucune</option>
                                    </select>
                                </div>

                                <small id="msgPonderationArtefact" class="msg-info-artefact">
                                    Les artefacts individuels n'ont pas de pondération propre. C'est le Portfolio
                                    conteneur qui définit la pondération globale.
                                </small>

                                <!-- CHAMPS SPÉCIFIQUES AU PORTFOLIO -->
                                <div id="champsPortfolio" class="carte-config-portfolio">
                                    <p class="note-explicative-config" style="margin: 0;">
                                        <strong>ℹ️ Configuration des règles de notation</strong><br>
                                        Les règles de calcul du portfolio (nombre d'artefacts à retenir, minimum requis, etc.)
                                        se configurent dans <strong>Réglages → Pratique de notation → Configuration PAN</strong>.
                                    </p>
                                    <p class="note-explicative-config" style="margin-top: 10px;">
                                        Le portfolio inclura automatiquement tous les artefacts de type «Artefact portfolio» créés durant la session.
                                    </p>
                                </div>

                                <!-- Objectif et Tâche -->
                                <div class="grille-form-2col-objectif-tache">
                                    <div class="groupe-form">
                                        <label>Objectif d'apprentissage</label>
                                        <textarea id="productionObjectif" class="controle-form" rows="3"
                                            placeholder="Ex: Développer les compétences d'analyse..."></textarea>
                                    </div>
                                    <div class="groupe-form">
                                        <label>Description de la tâche</label>
                                        <textarea id="productionTache" class="controle-form" rows="3"
                                            placeholder="Ex: Rédiger un texte de 500 mots..."></textarea>
                                    </div>
                                </div>

                                <!-- Boutons du formulaire -->
                                <div class="btn-groupe" style="display: flex; justify-content: space-between; align-items: center;">
                                    <!-- Boutons gauche (actions destructives) -->
                                    <div style="display: flex; gap: 10px;">
                                        <button id="btnDupliquerProduction" class="btn btn-secondaire" onclick="dupliquerProductionActive()" style="display: none;" title="Créer une copie de cette production">
                                            Dupliquer
                                        </button>
                                        <button id="btnSupprimerProduction" class="btn btn-supprimer" onclick="supprimerProductionActive()" style="display: none;" title="Supprimer cette production">
                                            Supprimer
                                        </button>
                                    </div>
                                    <!-- Boutons droite (actions principales) -->
                                    <div style="display: flex; gap: 10px;">
                                        <button class="btn btn-annuler" onclick="annulerFormProduction()">Annuler</button>
                                        <button class="btn btn-confirmer" onclick="sauvegarderProduction()">
                                            <span id="btnTexteEvaluation">Ajouter</span>
                                        </button>
                                    </div>
                                </div>

                            </div><!-- Fin du formulaireProduction -->

                            <!-- Options d'import/export (accordéon pliable) -->
                            <div id="optionsImportExportProductions" class="section-accordeon">
                                <details>
                                    <summary class="summary-materiel">
                                        Options d'import/export
                                    </summary>
                                    <div class="accordeon-contenu">
                                        <div class="accordeon-btns-flex">
                                            <button class="btn btn-confirmer" onclick="exporterProductions()">
                                                Exporter les productions
                                            </button>
                                            <button class="btn btn-principal" onclick="document.getElementById('fichier-import-productions-local').click()">
                                                Importer des productions
                                            </button>
                                            <input type="file" id="fichier-import-productions-local" accept=".json" style="display: none;" onchange="importerProductions(event)">
                                        </div>
                                        <p class="aide accordeon-aide-text">Les fichiers exportés ne contiennent aucune donnée d'étudiants, seulement la structure des productions.</p>
                                    </div>
                                </details>
                            </div>

                            <!-- Conteneurs cachés pour compatibilité -->
                            <div style="display: none;">
                                <div id="vueProductionsParType"></div>
                                <div id="tableauEvaluationsContainer"></div>
                                <span id="nombreEvaluations">0</span>
                                <span id="ponderationTotale">0%</span>
                                <span id="statutPonderation"></span>
                                <span id="typesEvaluations"></span>
                            </div>

                        </div><!-- Fin zone-principale -->

                    </div><!-- Fin layout-sidebar-2col -->

                </div><!--fin sous-section productions-->

                <!-- Sous-section : Grilles de critères -->
                <div id="materiel-grille-criteres" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Critères d'évaluation</span>
                        <span class="titre-emoji-container">
                            <span class="emoji-toggle" data-target="note-grilles">📐</span>
                            <span class="emoji-toggle" data-target="conseil-grilles">💡</span>
                        </span>
                    </h2>
                    <p class="text-muted">Créer des grilles de critères réutilisables pour évaluer différents types
                        de
                        productions.</p>

                    <!-- Carte Note -->
                    <div id="note-grilles" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les grilles de critères définissent les aspects sur lesquels les productions sont évaluées.
                        Chaque critère possède une pondération relative et peut être de type holistique (jugement global), analytique
                        (points par élément) ou algorithmique (calcul automatique). Dans le modèle SRPNF, les cinq critères sont :
                        Structure (15%), Rigueur (20%), Plausibilité (10%), Nuance (25%) et Français (30%). Les grilles peuvent être
                        réutilisées pour différentes productions et verrouillées une fois finalisées.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-grilles" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong> Pour le critère Français, utilise le type algorithmique avec la formule (nb_erreurs / nb_mots) × 100.
                        Les grilles peuvent être dupliquées et modifiées pour créer des variantes adaptées à différents types
                        de productions. Pense à nommer tes grilles de façon descriptive (ex: "Grille analyse littéraire", "Grille dissertation").
                        La somme des pondérations des critères doit totaliser 100%.
                    </div>

                    <!-- LAYOUT SIDEBAR 2 COLONNES -->
                    <div class="layout-sidebar-2col">

                        <!-- SIDEBAR GAUCHE (280px, sticky) -->
                        <div class="sidebar-navigation">

                            <!-- Liste des grilles -->
                            <div class="sidebar-liste" id="sidebarListeGrilles">
                                <!-- Généré par afficherListeGrilles() -->
                            </div>
                        </div>

                        <!-- ZONE PRINCIPALE (centrale, scroll) -->
                        <div class="zone-principale">

                            <!-- Barre d'en-tête avec bouton Nouvelle grille (toujours visible) -->
                            <div style="display: flex; justify-content: flex-end; margin-bottom: 20px;">
                                <button onclick="creerNouvelleGrille()" class="btn btn-principal">
                                    + Nouvelle grille
                                </button>
                            </div>

                            <!-- Message d'accueil initial -->
                            <div class="zone-principale-accueil" id="accueilGrilles">
                                <p>Sélectionnez une grille dans la liste</p>
                            </div>

                            <!-- Formulaire d'édition de grille -->
                            <div id="conteneurEditionGrille" style="display: none;">

                                <!-- Nom de la grille -->
                                <div class="groupe-form" class="max-w-500-mb-20">
                                    <label>Nom de la grille :</label>
                                    <input type="text" id="nomGrilleTemplate" class="controle-form"
                                        placeholder="Ex: Grille analyse littéraire" onchange="sauvegarderNomGrille()">
                                </div>

                                <!-- Liste des critères -->
                                <div id="listeCriteres" class="mb-20">
                                    <!-- Critères générés dynamiquement -->
                                </div>

                                <!-- Total pondération -->
                                <div style="margin-bottom: 15px; padding: 10px; background: var(--bleu-tres-pale); border-radius: 4px; display: flex; justify-content: space-between; align-items: center;">
                                    <span style="font-weight: 500;">Pondération totale des critères :</span>
                                    <span id="totalPonderationAffichage" style="font-size: 1.2rem; font-weight: 600; color: var(--bleu-fonce);">0%</span>
                                </div>

                                <!-- Boutons du formulaire -->
                                <div class="btn-groupe" style="display: flex; justify-content: space-between; align-items: center;">
                                    <!-- Boutons gauche (actions destructives) -->
                                    <div style="display: flex; gap: 10px;">
                                        <button id="btnDupliquerGrille" class="btn btn-secondaire" onclick="dupliquerGrilleActive()" style="display: none;" title="Créer une copie de cette grille">
                                            Dupliquer la grille
                                        </button>
                                        <button id="btnSupprimerGrille" class="btn btn-supprimer" onclick="supprimerGrilleActive()" style="display: none;" title="Supprimer cette grille">
                                            Supprimer la grille
                                        </button>
                                    </div>
                                    <!-- Boutons droite (actions principales) -->
                                    <div style="display: flex; gap: 10px;">
                                        <button class="btn btn-annuler" onclick="annulerFormGrille()">Annuler</button>
                                        <button class="btn btn-confirmer" onclick="sauvegarderGrilleComplete()">
                                            <span id="btnTexteGrille">Sauvegarder</span>
                                        </button>
                                    </div>
                                </div>

                            </div><!-- Fin conteneurEditionGrille -->

                            <!-- Options d'import/export (accordéon pliable) -->
                            <div id="optionsImportExportGrilles" class="section-accordeon" class="hidden-mt-20">
                                <details>
                                    <summary class="summary-materiel">
                                        Options d'import/export
                                    </summary>
                                    <div class="accordeon-contenu">
                                        <div class="d-flex-gap-10">
                                            <button class="btn btn-confirmer" onclick="exporterGrilles()" class="flex-1">
                                                Exporter les grilles
                                            </button>
                                            <button class="btn btn-principal" onclick="document.getElementById('fichier-import-grilles-local').click()" class="flex-1">
                                                Importer des grilles
                                            </button>
                                            <input type="file" id="fichier-import-grilles-local" accept=".json" style="display: none;" onchange="importerGrilles(event)">
                                        </div>
                                        <p class="aide" class="mt-10">Les grilles exportées contiennent les critères et pondérations, mais aucune donnée d'étudiants.</p>
                                    </div>
                                </details>
                            </div>

                            <!-- Conteneurs cachés pour compatibilité -->
                            <div style="display: none;">
                                <div id="vueGrillesCriteres"></div>
                                <div id="selectGrilleTemplate"></div>
                                <div id="nomGrilleContainer"></div>
                                <div id="aucuneEvalSelectionnee"></div>
                                <div id="criteresContainer"></div>
                                <div id="formAjoutCritere"></div>
                                <span id="totalPonderationCriteres">0%</span>
                                <span id="statutPonderationCriteres"></span>
                            </div>

                        </div><!-- Fin zone-principale -->

                    </div><!-- Fin layout-sidebar-2col -->

                </div><!--fin sous-section grille-criteres-->

                <!-- Sous-section : Échelle de performance -->
                <div id="materiel-echelle-performance" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Niveaux de performance</span>
                        <span class="titre-emoji-container">
                            <span class="emoji-toggle" data-target="note-echelle">📐</span>
                        </span>
                    </h2>
                    <p class="text-muted">Configuration de l'échelle de notation pour les PAN/SBG</p>

                    <!-- Carte Note (pas de Conseil pour Échelle) -->
                    <div id="note-echelle" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> L'échelle de performance définit les niveaux de maîtrise utilisés pour évaluer les critères.
                        Le système utilise par défaut l'échelle IDME (Insuffisant, en Développement, Maîtrisé, Étendu) basée sur la taxonomie SOLO.
                        Chaque niveau correspond à un seuil de performance : Insuffisant (&lt; 64%), Développement (65-74%), Maîtrisé (75-84%),
                        Étendu (≥ 85%). Cette échelle peut être personnalisée selon les besoins pédagogiques et permet un suivi longitudinal
                        de la progression des étudiants.
                    </div>

                    <!-- LAYOUT SIDEBAR 2 COLONNES -->
                    <div class="layout-sidebar-2col">

                        <!-- SIDEBAR GAUCHE (280px, sticky) -->
                        <div class="sidebar-navigation">

                            <!-- Liste des échelles -->
                            <div class="sidebar-liste" id="sidebarListeEchelles">
                                <!-- Généré par afficherListeEchelles() -->
                            </div>
                        </div>

                        <!-- ZONE PRINCIPALE (centrale, scroll) -->
                        <div class="zone-principale">

                            <!-- Barre d'en-tête avec bouton Nouvelle échelle (toujours visible) -->
                            <div style="display: flex; justify-content: flex-end; margin-bottom: 20px;">
                                <button onclick="creerNouvelleEchelle()" class="btn btn-principal">
                                    + Nouvelle échelle
                                </button>
                            </div>

                            <!-- Message d'accueil initial -->
                            <div class="zone-principale-accueil" id="accueilEchelles">
                                <p>Sélectionnez une échelle dans la liste</p>
                            </div>

                            <!-- Formulaire d'édition -->
                            <div id="conteneurEditionEchelle" style="display: none;">

                                <!-- Nom de l'échelle -->
                                <div class="groupe-form" class="max-w-500-mb-20">
                                    <label>Nom de l'échelle :</label>
                                    <input type="text" id="nomEchelleTemplate" class="controle-form"
                                        placeholder="Ex: Échelle standard A-F" onchange="sauvegarderNomEchelle()">
                                </div>

                                <!-- Tableau des niveaux -->
                                <div id="tableauNiveauxEchelle" class="mb-20">
                                    <!-- Niveaux générés dynamiquement -->
                                </div>

                                <!-- Aperçu visuel -->
                                <div id="apercuEchelleNiveaux" style="display: flex; gap: 10px; flex-wrap: wrap;
                     align-items: center; padding: 10px; background: white; border-radius: 4px; margin-bottom: 20px;">
                                    <!-- Généré par afficherApercuEchelle() -->
                                </div>

                                <!-- Boutons du formulaire -->
                                <div class="btn-groupe" style="display: flex; justify-content: space-between; align-items: center;">
                                    <!-- Boutons gauche (actions destructives) -->
                                    <div style="display: flex; gap: 10px;">
                                        <button id="btnDupliquerEchelle" class="btn btn-secondaire" onclick="dupliquerEchelleActive()" style="display: none;" title="Créer une copie de cette échelle">
                                            Dupliquer l'échelle
                                        </button>
                                        <button id="btnSupprimerEchelle" class="btn btn-supprimer" onclick="supprimerEchelleActive()" style="display: none;" title="Supprimer cette échelle">
                                            Supprimer l'échelle
                                        </button>
                                    </div>
                                    <!-- Boutons droite (actions principales) -->
                                    <div style="display: flex; gap: 10px;">
                                        <button class="btn btn-annuler" onclick="annulerFormEchelle()">Annuler</button>
                                        <button class="btn btn-confirmer" onclick="sauvegarderEchelleComplete()">
                                            <span id="btnTexteEchelle">Sauvegarder</span>
                                        </button>
                                    </div>
                                </div>

                            </div><!-- Fin conteneurEditionEchelle -->

                            <!-- Options d'import/export (accordéon pliable) -->
                            <div id="optionsImportExportEchelles" class="section-accordeon" class="hidden-mt-20">
                                <details>
                                    <summary class="summary-materiel">
                                        Options d'import/export
                                    </summary>
                                    <div class="accordeon-contenu">
                                        <div class="d-flex-gap-10">
                                            <button class="btn btn-principal" onclick="exporterEchelles()" class="flex-1">
                                                Exporter l'échelle
                                            </button>
                                            <button class="btn btn-principal" onclick="document.getElementById('fichier-import-echelles-local').click()" class="flex-1">
                                                Importer une échelle
                                            </button>
                                            <input type="file" id="fichier-import-echelles-local" accept=".json" style="display: none;" onchange="importerEchelles(event)">
                                        </div>
                                        <p class="aide" class="mt-10">Les échelles exportées contiennent les niveaux de performance, mais aucune donnée d'étudiants.</p>
                                    </div>
                                </details>
                            </div>

                            <!-- Conteneurs cachés pour compatibilité -->
                            <div style="display: none;">
                                <div id="vueEchellesNiveaux"></div>
                                <div id="selectEchelleTemplate"></div>
                                <div id="nomEchelleContainer"></div>
                                <div id="typeEchelle"></div>
                                <div id="seuilReussite"></div>
                                <div id="champAutreEchelle"></div>
                                <div id="tableauNiveaux"></div>
                                <div id="apercuEchelle"></div>
                            </div>

                        </div><!-- Fin zone-principale -->

                    </div><!-- Fin layout-sidebar-2col -->

                        <!-- ANCIEN SYSTÈME (Caché par défaut, gardé pour compatibilité) -->
                        <div style="display: none;">

                        <!-- Sélecteur d'échelle -->
                        <div class="groupe-form" class="max-w-400-mb20">
                            <label>Créer ou modifier une échelle de performance :</label>
                            <select id="selectEchelleTemplate" class="controle-form"
                                onchange="chargerEchelleTemplate()">
                                <option value="">-- Nouvelle échelle --</option>
                                <option value="new"> Créer une nouvelle échelle</option>
                            </select>
                        </div>

                        <!-- Nom de l'échelle (visible uniquement en création/édition) -->
                        <div id="nomEchelleContainer" class="groupe-form"
                            class="max-w-400-mb20-hidden">
                            <label>Nom de l'échelle :</label>
                            <input type="text" id="nomEchelleTemplate" class="controle-form"
                                placeholder="Ex: Échelle standard A-F" onchange="sauvegarderNomEchelle()">
                        </div>

                        <!-- IMPORT/EXPORT ÉCHELLES -->
                        <div class="d-flex-gap10-mb20-info">
                            <button class="btn btn-principal" onclick="exporterEchelles()" class="flex-1">
                                Exporter l'échelle
                            </button>
                            <button class="btn btn-principal" onclick="document.getElementById('fichier-import-echelles-local').click()" class="flex-1">
                                Importer une échelle
                            </button>
                            <input type="file" id="fichier-import-echelles-local" accept=".json" style="display: none;" onchange="importerEchelles(event)">
                        </div>

                        <!-- Note explicative -->
                        <div style="font-size: 0.85rem; color: #666; margin-bottom: 20px; padding: 12px;
             background: var(--bleu-pale); border-radius: 6px; border-left: 3px solid var(--bleu-moyen);">
                            <strong>Note :</strong> Cette échelle s'applique uniquement aux pratiques alternatives
                            de
                            notation
                            (PAN).
                            La note finale sera convertie en pourcentage pour respecter le RREC. C'est à cette fin
                            que
                            servent les plages de notes et les valeurs ponctuelles.
                        </div>

                        <!-- CONFIGURATION GLOBALE -->
                        <div
                            class="carte-bleu-tres-pale-mb20">
                            <h4 class="titre-bleu-mb-15">Configuration globale
                            </h4>

                            <div class="grid-2-gap15">
                                <div class="groupe-form">
                                    <label>Type d'échelle</label>
                                    <select id="typeEchelle" class="controle-form" onchange="changerTypeEchelle()">
                                        <option value="lettres">Lettres (A, B, C...)</option>
                                        <option value="pourcentage">Pourcentage (%)</option>
                                        <option value="autre">Autre (personnalisé)</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Seuil de réussite (%)</label>
                                    <input type="number" id="seuilReussite" class="controle-form" value="60" min="0"
                                        max="100" onchange="sauvegarderConfigEchelle()">
                                </div>
                            </div>

                            <!-- Champ conditionnel pour type "autre" -->
                            <div id="champAutreEchelle" class="hidden-mt15">
                                <div class="groupe-form">
                                    <label>Note de passage personnalisée :</label>
                                    <div id="notePassageContainer">
                                        <!-- Input sera inséré ici par changerTypeEchelle() -->
                                    </div>
                                </div>
                            </div>

                            <!-- Génération de niveaux personnalisés -->
                            <div class="groupe-form" class="mt-15">
                                <label>Générer des niveaux personnalisés (codes séparés par virgules) :</label>
                                <div class="d-flex-gap-10">
                                    <input type="text" id="codesPersonnalises" class="controle-form"
                                        placeholder="Ex: Excellent, Bon, Moyen, Faible"
                                        onchange="sauvegarderConfigEchelle()">
                                    <button class="btn btn-principal" onclick="genererNiveauxPersonnalises()">Générer</button>
                                </div>
                                <small
                                    style="color: var(--bleu-leger); font-size: 0.8rem; display: block; margin-top: 5px;">
                                    Les niveaux seront créés automatiquement avec répartition uniforme des
                                    pourcentages
                                </small>
                            </div>
                        </div>

                        <!-- TABLEAU DES NIVEAUX -->
                        <div
                            class="carte-white-border">
                            <h4 class="titre-bleu-mb-15">Niveaux de performance
                            </h4>

                            <div id="tableauNiveaux">
                                <!-- Le tableau sera généré ici par afficherTableauNiveaux() -->
                            </div>

                            <!-- Boutons d'actions -->
                            <div class="btn-groupe" class="mt-20-justify-between">
                                <div class="d-flex-gap-10">
                                    <button class="btn btn-principal" onclick="sauvegarderNiveaux()">
                                        Sauvegarder les niveaux
                                    </button>
                                    <button class="btn btn-annuler" onclick="reinitialiserNiveauxDefaut()">
                                        Réinitialiser par défaut
                                    </button>
                                </div>
                                <div class="d-flex-gap-10">
                                    <button id="btnDupliquerEchelle" class="btn btn-modifier"
                                        onclick="dupliquerEchelleActuelle()" style="display: none;">
                                        Dupliquer
                                    </button>
                                    <button class="btn btn-confirmer" onclick="enregistrerCommeEchelle()">
                                        Enregistrer comme échelle
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Visualisation de l'échelle -->
                        <div style="margin-top: 20px; padding: 15px; background: var(--vert-pale); 
             border-radius: 6px; border: 1px solid var(--vert-leger);">
                            <h5 class="text-vert-leger-mb10">Aperçu de l'échelle</h5>
                            <div id="apercuEchelle" style="display: flex; justify-content: space-between; 
                 align-items: center; padding: 10px; background: white; border-radius: 4px;">
                                <!-- L'aperçu sera généré ici par afficherApercuEchelle() -->
                            </div>
                        </div>

                        <!-- Toggle Conseil pratique -->
                        <details class="mb-20">
                            <summary style="cursor: pointer; padding: 12px; background: var(--bleu-tres-pale);
                                border-radius: 6px; border-left: 3px solid var(--bleu-moyen);
                                color: var(--bleu-principal); user-select: none; display: flex;
                                justify-content: space-between; align-items: center;">
                                <span></span>
                                <span class="text-12">💡</span>
                            </summary>
                            <div class="td-sm-muted-lh">
                                <strong>Conseil pratique - Aide à la configuration :</strong>
                                <ul class="m-8-0-pl20-lh16">
                                    <li><strong>Code</strong> : 1 à 3 caractères (ex: I, D, M, E)</li>
                                    <li><strong>Nom</strong> : Titre du niveau (ex: Maîtrisé)</li>
                                    <li><strong>Description</strong> : Contexte pédagogique (optionnel)</li>
                                    <li><strong>Min/Max</strong> : Plage de % (0-100%)</li>
                                    <li><strong>Valeur ponctuelle</strong> : Note utilisée pour les calculs (ex: 75%)</li>
                                    <li><strong>Couleur</strong> : Choisir dans la palette</li>
                                </ul>
                            </div>
                        </details>

                        </div><!-- Fin ANCIEN SYSTÈME -->

                </div><!--fin sous-section echelle-performance-->


                <!-- Sous-section : Rétroactions -->
                <div id="materiel-retroactions" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Rétroactions prédéfinies</span>
                        <span class="titre-emoji-container">
                            <span class="emoji-toggle" data-target="note-retroactions">📐</span>
                            <span class="emoji-toggle" data-target="conseil-retroactions">💡</span>
                        </span>
                    </h2>
                    <p class="text-muted">Créer des cartouches de rétroaction basées sur les critères et l'échelle
                        de
                        performance</p>

                    <!-- Carte Note -->
                    <div id="note-retroactions" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les rétroactions seront générées automatiquement en assemblant les commentaires prérédigés
                        par l'enseignant·e selon les critères d'évaluation et le niveau de performance atteint pour
                        chaque critère. Un ensemble complet de commentaires porte ici le nom de <strong>cartouche</strong>.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-retroactions" class="carte-info-toggle carte-info-conseil" style="display: none;">
                            <strong>Conseil pratique :</strong> Les commentaires peuvent avoir entre 50 et 75 mots environ. Rédige-les de façon personnelle
                            et constructive. Chaque cellule de la matrice correspond à un commentaire pour un niveau de
                            performance donné sur un critère spécifique. Utilise les codes de ta grille (I, D, M, E) et
                            le format proposé pour structurer tes commentaires. Les cartouches peuvent être verrouillées
                            une fois finalisées.
                        </div>

<!-- CARTE : CARTOUCHES DE RÉTROACTION -->
                    <div class="carte">
                        <h3>Cartouches de rétroaction</h3>

                        <!-- LAYOUT SIDEBAR 2 COLONNES -->
                        <div class="layout-sidebar-2col">

                            <!-- SIDEBAR GAUCHE (280px, sticky) -->
                            <div class="sidebar-navigation">
                                <!-- Filtre par grille -->
                                <div class="sidebar-filtre">
                                    <label>Filtrer par grille :</label>
                                    <select id="filtreGrilleCartouche" class="controle-form" onchange="filtrerCartouchesBanque()">
                                        <option value="">Toutes les grilles</option>
                                        <!-- Options générées dynamiquement -->
                                    </select>
                                </div>

                                <!-- Liste des cartouches -->
                                <div class="sidebar-liste" id="listeCartouchesBanque">
                                    <p class="banque-vide">Chargement...</p>
                                </div>
                            </div>

                            <!-- ZONE PRINCIPALE (centrale, scroll) -->
                            <div class="zone-principale">

                                <!-- Barre d'en-tête avec bouton Nouvelle cartouche (toujours visible) -->
                                <div style="display: flex; justify-content: flex-end; margin-bottom: 20px;">
                                    <button onclick="creerNouvelleCartouche()" class="btn btn-principal">
                                        + Nouvelle cartouche
                                    </button>
                                </div>

                                <!-- Message d'accueil initial -->
                                <div class="zone-principale-accueil" id="messageAccueilCartouche">
                                    <p>Sélectionnez une cartouche dans la liste</p>
                                </div>

                                <!-- ANCIEN SYSTÈME (Caché, gardé pour compatibilité interne) -->
                                <div style="display: none;">
                                    <select id="selectGrilleRetroaction"></select>
                                    <select id="selectCartouche"></select>
                                    <div id="aucuneEvalRetroaction"></div>
                                </div>

                                <!-- Informations de la cartouche -->
                                <div id="infoCartouche" class="hidden-mb-20">

                                    <!-- Message de verrouillage -->
                                    <div id="alerteVerrouillage" class="hidden-my15-warning">
                                        <div class="d-flex-between-center">
                                            <div>
                                                <strong class="text-warning-dark">🔒 Cartouche verrouillée</strong>
                                                <p class="text-warning-856-sm-mt5">Cette cartouche est en lecture seule. Déverrouillez-la pour pouvoir la modifier.</p>
                                            </div>
                                            <button class="btn btn-principal" id="btnDeverrouillerCartouche" class="whitespace-nowrap">
                                                Déverrouiller
                                            </button>
                                        </div>
                                    </div>

                            <div class="groupe-form" class="max-w-500">
                                <label>Nom de la cartouche :</label>
                                <input type="text" id="nomCartouche" class="controle-form"
                                    placeholder="Ex: Dissertation argumentative - Session Automne 2025">
                            </div>

                            <div class="groupe-form" class="mt-15">
                                <label>Contexte de la rétroaction (optionnel) :</label>
                                <textarea id="contexteCartouche" class="controle-form" rows="3"
                                    placeholder="Ex: Cette production porte sur l'analyse d'un texte argumentatif. L'étudiant·e devait démontrer sa capacité à..."></textarea>
                                <small style="color: #666; font-size: 0.85rem;">Ce texte apparaîtra au début de la
                                    rétroaction si
                                    l'option est cochée lors de la génération.</small>
                            </div>

                            <!-- Boutons du formulaire -->
                            <div class="btn-groupe" style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px;">
                                <!-- Boutons gauche (actions destructives) -->
                                <div style="display: flex; gap: 10px;">
                                    <button id="btnDupliquerCartouche" class="btn btn-secondaire" onclick="dupliquerCartoucheActive()" style="display: none;" title="Créer une copie de cette cartouche">
                                        Dupliquer la cartouche
                                    </button>
                                    <button id="btnSupprimerCartouche" class="btn btn-supprimer" onclick="supprimerCartoucheActive()" style="display: none;" title="Supprimer cette cartouche">
                                        Supprimer la cartouche
                                    </button>
                                </div>
                                <!-- Boutons droite (actions principales) -->
                                <div style="display: flex; gap: 10px;">
                                    <button class="btn btn-annuler" onclick="annulerFormCartouche()">Annuler</button>
                                    <button class="btn btn-confirmer" onclick="sauvegarderCartoucheComplete()">
                                        Sauvegarder
                                    </button>
                                </div>
                            </div>

                            <!-- Liste des cartouches existantes (DÉSACTIVÉ - remplacé par sidebar) -->
                            <div id="listeCartouchesExistants" class="d-none-important">
                                <div id="listeCartouchesContainer"></div>
                            </div>
                                </div>

                                <!-- ZONE D'IMPORT UNIFIÉE (Accordéon 4 options) -->
                                <div id="zoneImportUnifiee" class="accordeon-import" class="hidden-mb-20">
                            <details>
                                <summary class="summary-materiel">
                                    Options d'importation
                                </summary>
                                <div class="carte-white-p15">

                            <!-- Option 1: Import JSON complet -->
                            <details>
                                <summary>Importer/Exporter JSON complet</summary>
                                <div class="panneau-import">
                                    <p class="aide">Importer une cartouche complète depuis un fichier JSON ou exporter la cartouche actuelle</p>
                                    <div class="d-flex-gap10-mt10">
                                        <button class="btn btn-principal" onclick="document.getElementById('fichier-import-json-modal').click()">
                                            Importer JSON
                                        </button>
                                        <input type="file" id="fichier-import-json-modal" accept=".json" style="display: none;" onchange="importerCartoucheJSON(event)">
                                        <button class="btn btn-confirmer" onclick="exporterCartoucheActive()">
                                            Exporter JSON
                                        </button>
                                    </div>
                                    <p class="aide" class="mt-8">Le fichier JSON remplace toute la cartouche (nom, contexte, commentaires)</p>
                                </div>
                            </details>

                            <!-- Option 2: Coller Markdown -->
                            <details>
                                <summary>Coller Markdown</summary>
                                <div class="panneau-import">
                                    <label class="label-block-09-fw500-mb8">
                                        Collez vos commentaires ici :
                                    </label>
                                    <textarea id="markdownColle" class="panneau-import textarea" rows="10"
                                              placeholder="## STRUCTURE&#10;&#10;**STRUCTURE (I)** : Commentaire incomplet...&#10;&#10;**STRUCTURE (D)** : Commentaire en développement...&#10;&#10;**STRUCTURE (M)** : Commentaire maîtrisé...&#10;&#10;**STRUCTURE (E)** : Commentaire étendu..."></textarea>
                                    <button class="btn btn-confirmer" onclick="importerDepuisMarkdown()">
                                        Importer les commentaires
                                    </button>
                                    <p class="aide">Format: ## CRITÈRE puis **CRITÈRE (NIVEAU)** : Commentaire</p>
                                </div>
                            </details>

                            <!-- Option 3: Charger fichier .txt -->
                            <details>
                                <summary>Charger fichier .txt</summary>
                                <div class="panneau-import">
                                    <button class="btn btn-principal" onclick="document.getElementById('fichier-import-txt-modal').click()">
                                        Sélectionner fichier .txt
                                    </button>
                                    <input type="file" id="fichier-import-txt-modal" accept=".txt" style="display: none;" onchange="importerCartoucheDepuisTxt(event)">
                                    <p class="aide">Même format que l'option textarea ci-dessus</p>
                                    <div class="alerte-error-red">
                                        <strong>Important :</strong> Les noms de critères doivent correspondre exactement (ex: STRUCTURE, RIGUEUR, PLAUSIBILITÉ, NUANCE)
                                    </div>
                                </div>
                            </details>

                            <!-- Option 4: Import partiel -->
                            <details>
                                <summary>Import partiel (sélection critères)</summary>
                                <div class="panneau-import">
                                    <p class="text-09-mb10">Cochez les critères à importer :</p>
                                    <div id="checklistCriteresImport" class="checkboxes-import-partiel">
                                        <!-- Généré dynamiquement -->
                                        <p style="color: #999; font-style: italic;">Chargez d'abord une cartouche pour voir les critères</p>
                                    </div>
                                    <textarea id="markdownImportPartiel" rows="8" placeholder="Collez vos commentaires ici (même format que ci-dessus)"></textarea>
                                    <button class="btn btn-confirmer" onclick="importerPartiel()" disabled id="btnImportPartiel">
                                        Importer critères sélectionnés
                                    </button>
                                    <p class="aide">Importe seulement les commentaires des critères cochés</p>
                                </div>
                            </details>

                                </div>
                            </details>
                                </div>

                                <!-- MATRICE DE RÉTROACTION -->
                                <div id="matriceRetroaction" style="display: none;">
                            <h4 class="titre-bleu-mb-15">
                                Matrice des commentaires de rétroaction
                            </h4>

                            <div id="matriceContainer" class="overflow-x-auto">
                                <!-- La matrice sera générée dynamiquement ici par afficherMatriceRetroaction() -->
                            </div>
                                </div>

                                <!-- APERÇU DE RÉTROACTION -->
                                <div id="apercuRetroaction" style="display: none; margin-top: 20px; padding: 15px;
             background: var(--vert-pale); border-radius: 6px; border: 1px solid var(--vert-leger);">
                                    <h5 class="text-vert-leger-mb10">
                                        Aperçu d'une rétroaction générée
                                    </h5>
                                    <div id="exempleRetroaction" style="padding: 15px; background: white;
                 border-radius: 4px; font-size: 0.9rem; line-height: 1.6;">
                                        <!-- L'aperçu sera généré ici par genererApercuAleatoire() -->
                                    </div>
                                    <button class="btn btn-principal mt-2" onclick="genererApercuAleatoire()">
                                        Générer un aperçu aléatoire
                                    </button>
                                </div>

                            </div><!-- fin zone-principale -->

                        </div><!-- fin layout-sidebar-2col -->

                    </div><!-- fin carte -->

                </div><!--fin sous-section retroactions-->

            </section><!-- fin section-materiel -->

            <!-- ===================================
                 SECTION: RÉGLAGES
                 =================================== -->
            <section id="section-reglages" class="section">

                <!-- Sous-section: Aperçu des réglages -->
                <div id="reglages-apercu" class="sous-section">
                    <h2>Aperçu de la configuration</h2>
                    <p class="text-muted">
                        Résumé de la configuration actuelle du système. Les statistiques sont calculées en temps réel depuis les données stockées localement.
                    </p>

                    <!-- Grille de cartes métriques bleues harmonisées -->
                    <div class="grille-cartes-metriques">

                        <!-- Informations du cours (4 cartes) -->
                        <div class="carte-metrique-bleue">
                            <div class="carte-metrique-contenu">
                                <span class="carte-metrique-label">Trimestre</span>
                                <strong id="stat-trimestre" class="carte-metrique-valeur">—</strong>
                            </div>
                        </div>

                        <!-- Informations système (2 cartes) -->
                        <div class="carte-metrique-bleue">
                            <div class="carte-metrique-contenu">
                                <span class="carte-metrique-label">Version</span>
                                <strong id="stat-version" class="carte-metrique-valeur">—</strong>
                            </div>
                        </div>

                        <div class="carte-metrique-bleue">
                            <div class="carte-metrique-contenu">
                                <span class="carte-metrique-label">Poids des données</span>
                                <strong id="stat-poids" class="carte-metrique-valeur">—</strong>
                            </div>
                        </div>

                        <div class="carte-metrique-bleue">
                            <div class="carte-metrique-contenu">
                                <span class="carte-metrique-label">Développement</span>
                                <strong id="stat-beta-date" class="carte-metrique-valeur">—</strong>
                            </div>
                        </div>

                    </div>
                    <!-- fin grille cartes métriques -->

                    <!-- Carte informations légales -->
                    <div class="carte" style="margin-top: 25px;">
                        <h3>Informations légales et crédits</h3>
                        <div style="line-height: 1.8; color: #555;">
                            <p><strong>Auteur :</strong> Grégoire Bédard</p>
                            <p><strong>Codé avec :</strong> Claude Code (Anthropic)</p>
                            <p><strong>Licences :</strong></p>
                            <ul style="margin-left: 20px; margin-top: 5px;">
                                <li>Code source : AGPL v3.0 (<a href="https://www.gnu.org/licenses/agpl-3.0.html" target="_blank" rel="noopener noreferrer">voir licence</a>)</li>
                                <li>Contenu pédagogique : CC BY-SA 4.0 (<a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">voir licence</a>)</li>
                            </ul>
                            <p style="margin-top: 15px; font-size: 0.9rem; color: #777;">
                                Pour plus de détails sur les licences, consultez le fichier LICENSE.md dans le répertoire du projet.
                            </p>
                        </div>
                    </div>

                </div>
                <!-- fin sous-section reglages-apercu -->

                <!-- Sous-section : Cours -->
                <div id="reglages-cours" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Configuration du cours</span>
                        <span class="titre-emoji-container">
                            <span class="emoji-toggle" data-target="conseil-cours">💡</span>
                        </span>
                    </h2>
                    <p class="text-muted">Informations techniques du cours : code, nom, compétences, enseignant·e,
                        trimestre,
                        format horaire</p>

                    <!-- Carte Conseil pratique (masquée par défaut) -->
                    <div id="conseil-cours" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong>
                        <ul class="m-0-pl-20-lh">
                            <li><strong>Cours actif :</strong> Un seul cours peut être actif à la fois. Le cours
                                actif est utilisé comme référence dans toute l'application</li>
                            <li><strong>Verrouillage :</strong> Verrouillez un cours terminé pour éviter les
                                modifications accidentelles</li>
                            <li><strong>Duplication :</strong> Dupliquez un cours pour créer rapidement une
                                nouvelle session en modifiant seulement l'année</li>
                            <li><strong>Code de cours :</strong> Format habituel : XXX-XXX-XX
                                (département-numéro-pondération)</li>
                            <li><strong>Format horaire :</strong> Définit comment les heures sont réparties dans
                                la semaine (utilisé pour le calendrier)</li>
                        </ul>
                    </div>

                    <div class="carte">
                        <h3>Cours configurés</h3>

                        <!-- TABLEAU/CONTENEUR DES COURS -->
                        <div id="tableauCoursContainer" class="mb-20">
                            <p class="text-muted" class="text-italic">
                                Aucun cours configuré.
                            </p>
                        </div>

                        <!-- BOUTON AJOUTER UN COURS -->
                        <button id="btnAjouterCours" class="btn btn-confirmer" onclick="afficherFormCours()"
                            class="mb-20">
                            + Ajouter un cours
                        </button>

                        <!-- FORMULAIRE D'AJOUT/MODIFICATION (caché par défaut) -->
                        <div id="formulaireCours" class="form-cache-mt"
                             style="padding: 20px; background: var(--bleu-pale); border: 1px solid var(--bleu-leger); border-radius: 8px;">

                            <h4 id="titreFormCours" class="titre-bleu-mb-20">
                                Nouvelle configuration de cours
                            </h4>

                            <!-- Informations générales -->
                            <h5 class="sous-titre-section">
                                Informations générales
                            </h5>
                            <div class="grille-4col-form" style="margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>Code du cours</label>
                                    <input type="text" id="codeCours" class="controle-form controle-form-compact"
                                        placeholder="Ex: 601-101-MQ">
                                </div>
                                <div class="groupe-form">
                                    <label>Nom du cours</label>
                                    <input type="text" id="nomCours" class="controle-form controle-form-compact"
                                        placeholder="Ex: Écriture et littérature">
                                </div>
                                <div class="groupe-form">
                                    <label>N° de la compétence</label>
                                    <input type="text" id="numeroCompetence" class="controle-form controle-form-compact"
                                        placeholder="Ex: 4EF0">
                                </div>
                                <div class="groupe-form">
                                    <label>Compétence</label>
                                    <input type="text" id="competence" class="controle-form controle-form-compact"
                                        placeholder="Ex: Analyser des textes littéraires">
                                </div>
                            </div>

                            <div class="groupe-form" class="mb-20">
                                <label>Éléments de compétence</label>
                                <textarea id="elementsCompetence" class="controle-form controle-form-compact" rows="4"
                                    placeholder="• Reconnaître le propos du texte&#10;• Repérer et classer des thèmes et procédés stylistiques&#10;• Choisir les éléments de l'analyse"></textarea>
                            </div>

                            <!-- Enseignant·e -->
                            <h5 class="sous-titre-section" style="margin-top: 25px;">
                                Enseignant·e
                            </h5>
                            <div class="grille-4col-form" style="margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>Prénom</label>
                                    <input type="text" id="prenomEnseignant" class="controle-form controle-form-compact"
                                        placeholder="Ex: Grégoire">
                                </div>
                                <div class="groupe-form">
                                    <label>Nom</label>
                                    <input type="text" id="nomEnseignant" class="controle-form controle-form-compact"
                                        placeholder="Ex: Bédard">
                                </div>
                                <div class="groupe-form">
                                    <label>Département</label>
                                    <input type="text" id="departement" class="controle-form controle-form-compact"
                                        placeholder="Ex: Littérature et communication">
                                </div>
                                <div class="groupe-form">
                                    <label>Local</label>
                                    <input type="text" id="local" class="controle-form controle-form-compact" placeholder="Ex: 2314">
                                </div>
                            </div>

                            <!-- Session et horaire -->
                            <h5 class="sous-titre-section" style="margin-top: 25px;">
                                Session et horaire
                            </h5>
                            <div
                                class="grid-4-gap15-mb20">
                                <div class="groupe-form">
                                    <label>Session</label>
                                    <select id="session" class="controle-form controle-form-compact">
                                        <option value="H">Hiver</option>
                                        <option value="A">Automne</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Année</label>
                                    <input type="number" id="annee" class="controle-form controle-form-compact" value="2025" min="2020"
                                        max="2030">
                                </div>
                                <div class="groupe-form">
                                    <label>Heures/semaine</label>
                                    <input type="number" id="heuresParSemaine" class="controle-form controle-form-compact" value="4" min="1"
                                        max="10">
                                </div>
                                <div class="groupe-form">
                                    <label>Format horaire</label>
                                    <select id="formatHoraire" class="controle-form controle-form-compact">
                                        <option value="1x4">1 période de 4h</option>
                                        <option value="2x2" selected>2 périodes de 2h</option>
                                        <option value="4x1">4 périodes de 1h</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Boutons d'action -->
                            <div class="btn-groupe btn-groupe-droite"
                                 style="margin-top: 25px; padding-top: 20px; border-top: 2px solid var(--bleu-leger);">
                                <button class="btn btn-annuler" onclick="annulerFormCours()">
                                    Annuler
                                </button>
                                <button class="btn btn-confirmer" onclick="sauvegarderCours()">
                                    <span id="btnTexteCours">Ajouter</span>
                                </button>
                            </div>
                        </div>
                    </div>

                </div><!--fin sous-section cours-->

                <!-- SECTION TRIMESTRE (Réglages > Trimestre) -->
                <!-- Cette section gère les DONNÉES ADMINISTRATIVES du trimestre -->
                <!-- Module associé: trimestre.js -->

                <div id="reglages-trimestre" class="sous-section">
                    <h2>Configuration du trimestre</h2>
                    <p class="text-muted">
                        Définissez les paramètres administratifs du trimestre : dates de début et de fin,
                        semaines spéciales, congés prévus et imprévus avec leurs reprises éventuelles.
                    </p>

                    <!-- CARTE: CADRE RÉGULIER -->
                    <div class="carte">
                        <h3>Cadre régulier</h3>

                        <!-- Grille 2 colonnes : Bornes et Semaines spéciales -->
                        <div class="grille-2col">

                            <!-- COLONNE GAUCHE: Bornes du trimestre -->
                            <div>
                                <h5 class="sous-titre-section">
                                    Bornes du trimestre
                                </h5>
                                <div class="grille-2col-gap15">
                                    <div class="groupe-form">
                                        <label>Début du trimestre :</label>
                                        <input type="date" class="controle-form" id="debutTrimestre"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                    <div class="groupe-form">
                                        <label>Fin des cours réguliers :</label>
                                        <input type="date" class="controle-form" id="finCours"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                    <div class="groupe-form">
                                        <label>Fin du trimestre :</label>
                                        <input type="date" class="controle-form" id="finTrimestre"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                    <div class="groupe-form">
                                        <label>Remise des notes :</label>
                                        <input type="date" class="controle-form" id="remiseNotes"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                </div>
                            </div>

                            <!-- COLONNE DROITE: Semaines spéciales -->
                            <div>
                                <h5 class="sous-titre-section">
                                    Semaines spéciales
                                </h5>

                                <div class="grille-2col-gap15">
                                    <!-- Semaine de planification -->
                                    <div>
                                        <h6>Semaine de planification et de mise à jour</h6>
                                        <div class="d-flex-gap-10-center">
                                            <div class="groupe-form" class="flex-1">
                                                <label>Du :</label>
                                                <input type="date" class="controle-form" id="semainePlanificationDebut"
                                                    onchange="sauvegarderCadreCalendrier()">
                                            </div>
                                            <span class="pt-20">au</span>
                                            <div class="groupe-form" class="flex-1">
                                                <label>&nbsp;</label>
                                                <input type="date" class="controle-form" id="semainePlanificationFin"
                                                    onchange="sauvegarderCadreCalendrier()">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Semaine d'examens -->
                                    <div>
                                        <h6>Semaine d'examens</h6>
                                        <div class="d-flex-gap-10-center">
                                            <div class="groupe-form" class="flex-1">
                                                <label>Du :</label>
                                                <input type="date" class="controle-form" id="semaineExamensDebut"
                                                    onchange="sauvegarderCadreCalendrier()">
                                            </div>
                                            <span class="pt-20">au</span>
                                            <div class="groupe-form" class="flex-1">
                                                <label>&nbsp;</label>
                                                <input type="date" class="controle-form" id="semaineExamensFin"
                                                    onchange="sauvegarderCadreCalendrier()">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Statistiques calculées (texte simple) -->
                                <div class="info-box">
                                    <p>
                                        <strong>Trimestre :</strong>
                                        <span id="nombreSemaines">0</span> semaines •
                                        <span id="nombreJoursCours">0</span> jours de cours •
                                        <span id="totalConges">0</span> congés
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Bouton de sauvegarde -->
                        <div class="btn-groupe" class="justify-end">
                            <button class="btn btn-confirmer" onclick="sauvegarderCadreCalendrier()">
                                Sauvegarder le cadre
                            </button>
                        </div>
                    </div><!-- FIN carte Cadre régulier -->

                    <!-- CARTE: AMÉNAGEMENTS -->
                    <div class="carte mt-3">
                        <h3>Aménagements</h3>

                        <!-- Grille 2 colonnes : Événements prévus et Événements imprévus -->
                        <div class="grille-2col">

                            <!-- COLONNE GAUCHE: Congés prévus -->
                            <div>
                                <h5 class="sous-titre-section">
                                    Congés fériés et activités institutionnelles
                                </h5>
                                <p class="text-muted texte-desc">
                                    Congés fériés, journées pédagogiques, journée Carrière, etc. avec leurs reprises
                                    éventuelles
                                </p>

                                <!-- Container des événements prévus (généré par trimestre.js) -->
                                <div id="congesPrevusContainer" class="mb-20">
                                    <p class="text-muted" class="text-italic">Aucun événement prévu déclaré.</p>
                                </div>

                                <!-- Bouton pour afficher le formulaire d'ajout -->
                                <button id="btnAjouterPrevu" class="btn btn-confirmer mb-30" onclick="afficherFormEvenement()">
                                    + Ajouter un événement prévu
                                </button>

                                <!-- FORMULAIRE D'AJOUT ÉVÉNEMENT PRÉVU (caché par défaut) -->
                                <div id="formEvenementPrevu" class="item-carte form-cache">
                                    <div class="item-carte-header">
                                        <strong class="item-carte-titre titre-vert">
                                            <span id="texteFormPrevu">Nouvel événement prévu</span>
                                        </strong>
                                    </div>
                                    <div class="grille-4col-form">
                                        <div class="groupe-form">
                                            <label>Date événement</label>
                                            <input type="date" class="controle-form controle-form-compact" id="dateEvenementPrevu">
                                        </div>
                                        <div class="groupe-form">
                                            <label>Description</label>
                                            <select class="controle-form controle-form-compact" id="descriptionEvenementPrevu">
                                                <option value="">Choisir...</option>
                                                <option>Fête du travail (férié)</option>
                                                <option>Action de grâce (férié)</option>
                                                <option>Journée carrière</option>
                                                <option>Vendredi saint (férié)</option>
                                                <option>Lundi de Pâques (férié)</option>
                                            </select>
                                        </div>
                                        <div class="groupe-form">
                                            <label>Reprise prévue</label>
                                            <select class="controle-form controle-form-compact" id="horaireReprisePrevu">
                                                <option value="">Pas de reprise</option>
                                                <option value="Horaire du lundi">Horaire du lundi</option>
                                                <option value="Horaire du mardi">Horaire du mardi</option>
                                                <option value="Horaire du mercredi">Horaire du mercredi</option>
                                                <option value="Horaire du jeudi">Horaire du jeudi</option>
                                                <option value="Horaire du vendredi">Horaire du vendredi</option>
                                            </select>
                                        </div>
                                        <div class="groupe-form">
                                            <label>Date reprise</label>
                                            <input type="date" class="controle-form controle-form-compact" id="dateReprisePrevu">
                                        </div>
                                    </div>
                                    <div class="btn-groupe btn-groupe-droite">
                                        <button class="btn btn-annuler btn-sm" onclick="annulerFormEvenement()">Annuler</button>
                                        <button id="btnConfirmerPrevu" class="btn btn-confirmer btn-sm" onclick="confirmerAjoutEvenement()">Ajouter</button>
                                    </div>
                                </div><!-- FIN formulaire ajout prévu -->
                            </div>

                            <!-- COLONNE DROITE: Événements imprévus -->
                            <div>
                                <h5 class="sous-titre-section">
                                    Événements imprévus
                                </h5>
                                <p class="text-muted texte-desc">
                                    Pour les événements imprévus (maladie, conditions météorologiques, urgence, autre, etc.), la reprise peut être planifiée après coup selon les circonstances.
                                </p>

                                <!-- Container des événements imprévus (généré par trimestre.js) -->
                                <div id="congesImprevusContainer" class="mb-20">
                                    <p class="text-muted" class="text-italic">Aucun événement imprévu déclaré.</p>
                                </div>

                                <!-- Bouton pour afficher le formulaire d'ajout -->
                                <button id="btnAjouterEvenementImprevu" class="btn btn-confirmer"
                                    onclick="afficherFormEvenementImprevu()">
                                    + Ajouter un événement imprévu
                                </button>

                                <!-- FORMULAIRE D'AJOUT ÉVÉNEMENT IMPRÉVU (caché par défaut) -->
                                <div id="formEvenementImprevu" class="item-carte form-cache-mt">
                                    <div class="item-carte-header">
                                        <strong class="item-carte-titre titre-orange">
                                            <span id="texteFormImprevu">Nouvel événement imprévu</span>
                                        </strong>
                                    </div>
                                    <div class="grille-4col-form">
                                        <div class="groupe-form">
                                            <label>Date événement</label>
                                            <input type="date" class="controle-form controle-form-compact" id="dateEvenementImprevu">
                                        </div>
                                        <div class="groupe-form">
                                            <label>Description</label>
                                            <select class="controle-form controle-form-compact" id="descriptionEvenementImprevu">
                                                <option value="">Choisir...</option>
                                                <option>Maladie</option>
                                                <option>Météo</option>
                                                <option>Urgence</option>
                                                <option>Autre</option>
                                            </select>
                                        </div>
                                        <div class="groupe-form">
                                            <label>Reprise optionnelle</label>
                                            <select class="controle-form controle-form-compact" id="horaireRepriseImprevu">
                                                <option value="">Pas de reprise</option>
                                                <option value="Horaire du lundi">Horaire du lundi</option>
                                                <option value="Horaire du mardi">Horaire du mardi</option>
                                                <option value="Horaire du mercredi">Horaire du mercredi</option>
                                                <option value="Horaire du jeudi">Horaire du jeudi</option>
                                                <option value="Horaire du vendredi">Horaire du vendredi</option>
                                            </select>
                                        </div>
                                        <div class="groupe-form">
                                            <label>Date reprise</label>
                                            <input type="date" class="controle-form controle-form-compact" id="dateRepriseImprevu">
                                        </div>
                                    </div>
                                    <div class="btn-groupe btn-groupe-droite">
                                        <button class="btn btn-annuler btn-sm" onclick="annulerFormEvenementImprevu()">Annuler</button>
                                        <button id="btnConfirmerImprevu" class="btn btn-confirmer btn-sm"
                                            onclick="confirmerAjoutEvenementImprevu()">Ajouter</button>
                                    </div>
                                </div><!-- FIN formulaire ajout imprévu -->
                            </div>

                        </div><!-- FIN grille 2 colonnes -->

                    </div><!-- FIN carte Aménagements -->

                </div><!-- FIN sous-section reglages-trimestre -->


                <!-- Sous-section: Horaire -->
                <div id="reglages-horaire" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Configuration de l'horaire</span>
                        <span class="titre-emoji-container">
                            <span class="emoji-toggle" data-target="conseil-horaire">💡</span>
                        </span>
                    </h2>
                    <p class="text-muted">Définissez le format horaire hebdomadaire de vos séances de cours</p>

                    <!-- Carte Conseil pratique (masquée par défaut) -->
                    <div id="conseil-horaire" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong>
                        <ul class="m-0-pl-20-lh">
                            <li><strong>Format 2×2h :</strong> Idéal pour deux périodes de cours séparées dans
                                la semaine (ex: lundi et jeudi)</li>
                            <li><strong>Format 1×4h :</strong> Convient aux cours intensifs d'une seule période
                                continue</li>
                            <li><strong>Heure de début/fin :</strong> Respecte le format 24h (ex: 13:00, pas
                                1:00 PM)</li>
                            <li><strong>Reprises :</strong> Les séances de reprise seront automatiquement
                                ajoutées lors de la configuration des congés imprévus dans la section
                                Trimestre</li>
                            <li><strong>Modification :</strong> Vous pouvez modifier le format horaire en tout
                                temps. Les séances existantes seront supprimées et devront être recréées</li>
                        </ul>
                    </div>

                    <!-- Sélecteur de format horaire -->
                    <!-- Configuration des séances -->
                    <div class="carte">
                        <h3>Horaire des séances</h3>
                        <p class="text-muted" style="margin-bottom: 15px;">
                            Configure tes séances de cours de la semaine (de 1 à 6 séances). Chaque séance peut avoir une durée différente (de 1h à 6h).
                        </p>

                        <!-- Conteneur pour les séances existantes -->
                        <div id="seancesContainer" class="mb-20">
                            <p class="text-muted" class="text-italic">Aucune séance configurée.</p>
                        </div>

                        <!-- Bouton pour afficher le formulaire -->
                        <button id="btnAjouterSeance" class="btn btn-confirmer mb-30" onclick="afficherFormAjoutSeance()">
                            + Ajouter une séance
                        </button>

                        <!-- FORMULAIRE D'AJOUT SÉANCE (caché par défaut) -->
                        <div id="formAjoutSeance" class="item-carte form-cache">
                            <div class="item-carte-header">
                                <strong class="item-carte-titre titre-vert">
                                    Nouvelle séance
                                </strong>
                            </div>
                            <div class="grille-4col-form">
                                <div class="groupe-form">
                                    <label>Jour</label>
                                    <select class="controle-form controle-form-compact" id="jourSeance">
                                        <option value="">Choisir...</option>
                                        <option value="Lundi">Lundi</option>
                                        <option value="Mardi">Mardi</option>
                                        <option value="Mercredi">Mercredi</option>
                                        <option value="Jeudi">Jeudi</option>
                                        <option value="Vendredi">Vendredi</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Heure début</label>
                                    <select class="controle-form controle-form-compact" id="debutSeance">
                                        <option value="">Choisir...</option>
                                        <option value="08:00">8h00</option>
                                        <option value="09:00">9h00</option>
                                        <option value="10:00">10h00</option>
                                        <option value="11:00">11h00</option>
                                        <option value="12:00">12h00</option>
                                        <option value="13:00">13h00</option>
                                        <option value="14:00">14h00</option>
                                        <option value="15:00">15h00</option>
                                        <option value="16:00">16h00</option>
                                        <option value="17:00">17h00</option>
                                        <option value="18:00">18h00</option>
                                        <option value="19:00">19h00</option>
                                        <option value="20:00">20h00</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Durée</label>
                                    <select class="controle-form controle-form-compact" id="dureeSeance">
                                        <option value="">Choisir...</option>
                                        <option value="1.0">1h</option>
                                        <option value="1.5">1h30</option>
                                        <option value="2.0">2h</option>
                                        <option value="2.5">2h30</option>
                                        <option value="3.0">3h</option>
                                        <option value="3.5">3h30</option>
                                        <option value="4.0">4h</option>
                                        <option value="4.5">4h30</option>
                                        <option value="5.0">5h</option>
                                        <option value="5.5">5h30</option>
                                        <option value="6.0">6h</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Local</label>
                                    <input type="text" class="controle-form controle-form-compact" id="localSeance"
                                           placeholder="Ex: 1709">
                                </div>
                            </div>
                            <div class="btn-groupe btn-groupe-droite">
                                <button class="btn btn-annuler btn-sm" onclick="annulerFormAjoutSeance()">Annuler</button>
                                <button id="btnConfirmerSeance" class="btn btn-confirmer btn-sm" onclick="confirmerAjoutSeance()">Ajouter</button>
                            </div>
                        </div><!-- FIN formulaire ajout séance -->
                    </div><!-- FIN carte horaire -->

                </div><!-- FIN sous-section reglages-horaire -->

                <!-- Sous-section : Groupe -->
                <div id="reglages-groupe" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Configuration du groupe d'étudiants</span>
                        <span class="titre-emoji-container">
                            <span class="emoji-toggle" data-target="conseil-groupe">💡</span>
                        </span>
                    </h2>
                    <p class="text-muted">Liste complète des étudiants inscrits : ajout, import, modification,
                        export
                    </p>

                    <!-- Carte Conseil pratique (masquée par défaut) -->
                    <div id="conseil-groupe" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong>
                        <ul class="m-0-pl-20-lh">
                            <li><strong>Champ Groupe :</strong> Permet d'organiser tes étudiants si tu as
                                plusieurs groupes (ex: Groupe 1, Groupe 2). Utilise le filtre en haut pour afficher un groupe
                                spécifique.</li>
                            <li><strong>Import CSV/TSV :</strong> Format attendu avec 7 colonnes : DA, Groupe,
                                Nom, Prénom, Programme, Nom du programme, SA. Les colonnes peuvent être séparées par des virgules ou des
                                tabulations. La colonne CAF peut être ajoutée manuellement après l'import.</li>
                            <li><strong>Copier-coller :</strong> Tu peux copier directement depuis Excel ou
                                Google Sheets. La prévisualisation te permet de vérifier avant d'importer.</li>
                            <li><strong>Modification :</strong> Utilise l'icône pour modifier un·e
                                étudiant·e, ou pour le·la supprimer.</li>
                            <li><strong>Export :</strong> Exporte ta liste au format CSV pour backup ou partage.
                                Le fichier peut ensuite être réimporté.</li>
                            <li><strong>Réinitialisation :</strong> Attention ! Le bouton « Réinitialiser »
                                supprime <strong>tous les étudiants</strong>. Cette action est irréversible.</li>
                            <li><strong>Lien avec les autres sections :</strong> La liste configurée ici est
                                automatiquement disponible dans l'onglet « Étudiants › Liste des individus » pour la gestion des
                                portfolios.</li>
                        </ul>
                    </div>

                    <div class="carte">
                        <h3>Groupe d'étudiants</h3>

                        <!-- VUE D'ENSEMBLE -->
                        <div class="grille-cartes-metriques mb-20">
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Étudiant·es au total</span>
                                    <strong id="nbEtudiantsTotal" class="carte-metrique-valeur">0</strong>
                                </div>
                            </div>
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Groupes</span>
                                    <strong id="nbGroupes" class="carte-metrique-valeur">0</strong>
                                </div>
                            </div>
                            <div class="carte-metrique-bleue" class="grid-col-span">
                                <div id="detailGroupes" class="carte-metrique-label" class="text-center">
                                    <em>Aucun groupe configuré</em>
                                </div>
                            </div>
                        </div>

                        <!-- FILTRAGE PAR GROUPE -->
                        <div
                            class="bg-bleu-tres-pale-p15-mb20">
                            <div class="d-flex-gap15-wrap-center">
                                <label class="fw-500-bleu">
                                    Filtrer par groupe :
                                </label>
                                <select id="filtreGroupe" onchange="filtrerParGroupe()" class="controle-form"
                                    class="flex-1-min200-max300">
                                    <option value="">Tous les groupes</option>
                                    <!-- Options générées dynamiquement -->
                                </select>
                                <button onclick="resetFiltreGroupe()" class="btn btn-annuler">
                                    Réinitialiser
                                </button>
                            </div>
                        </div>

                        <!-- FORMULAIRE D'AJOUT MANUEL -->
                        <details class="mb-20">
                            <summary style="cursor: pointer; font-weight: 600; color: var(--bleu-principal); 
       padding: 12px; background: var(--bleu-tres-pale); border-radius: 6px; user-select: none;">
                                Ajouter un·e étudiant·e manuellement
                            </summary>

                            <div
                                class="carte-bleu-tres-pale-mt10">
                                <!-- CHANGEMENT ICI ↓ -->
                                <div class="formulaire-ajout-grid">
                                    <div>
                                        <label
                                            class="label-form-reglages">
                                            DA
                                        </label>
                                        <input type="text" id="etudiantDA" class="controle-form" placeholder="1234567"
                                            class="w-100">
                                    </div>
                                    <div>
                                        <label
                                            class="label-form-reglages">
                                            Groupe
                                        </label>
                                        <input type="text" id="etudiantGroupe" class="controle-form" placeholder="1"
                                            class="w-100">
                                    </div>
                                    <div>
                                        <label
                                            class="label-form-reglages">
                                            Nom <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" id="etudiantNom" class="controle-form" required
                                            placeholder="Nom" class="w-100">
                                    </div>
                                    <div>
                                        <label
                                            class="label-form-reglages">
                                            Prénom <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" id="etudiantPrenom" class="controle-form" required
                                            placeholder="Prénom" class="w-100">
                                    </div>
                                    <div>
                                        <label
                                            class="label-form-reglages">
                                            Programme
                                        </label>
                                        <input type="text" id="etudiantProgramme" class="controle-form"
                                            placeholder="200.B1" class="w-100">
                                    </div>
                                    <div>
                                        <label
                                            class="label-form-reglages">SA</label>
                                        <select id="etudiantSA" class="controle-form" class="w-100">
                                            <option value="">---</option>
                                            <option value="Oui">✓</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label
                                            class="label-form-reglages">CAF</label>
                                        <select id="etudiantCAF" class="controle-form" class="w-100">
                                            <option value="">---</option>
                                            <option value="Oui">✓</option>
                                        </select>
                                    </div>
                                    <div>
                                        <button onclick="addStudent()" class="btn btn-principal"
                                            class="td-nowrap-bold">
                                            Ajouter
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </details>

                        <!-- ZONE D'IMPORT -->
                        <details class="mb-20">
                            <summary style="cursor: pointer; font-weight: 600; color: var(--bleu-principal); 
                           padding: 12px; background: #f8f9fa; border-radius: 6px; 
                           user-select: none;">
                                Importer des étudiants (CSV/TSV ou copier-coller)
                            </summary>

                            <div class="carte-grise-mt20">
                                <div class="mb-15">
                                    <label class="label-block-fw500-mb8">
                                        Option 1 : Importer un fichier CSV/TSV
                                    </label>
                                    <input type="file" id="fichierCsvEntree" accept=".csv,.tsv,.txt"
                                        onchange="handleFileImport(event)" class="controle-form">
                                    <small style="color: #666; display: block; margin-top: 5px;">
                                        Format attendu : DA, Groupe, Nom, Prénom, Programme, Nom du programme, SA
                                    </small>
                                </div>

                                <div>
                                    <label class="label-block-fw500-mb8">
                                        Option 2 : Copier-coller des données
                                    </label>
                                    <textarea id="donneesCollees" class="controle-form" placeholder="Collez vos données ici (colonnes séparées par des tabulations ou virgules)
Exemple :
1234567	1	Tremblay	Marie	582.A1	Oui	
1234568	1	Gagnon	Pierre	582.A1		Oui" rows="6"
                                        class="font-courier"></textarea>
                                    <button onclick="previewPastedData()" class="btn btn-principal"
                                        class="mt-10">
                                        Prévisualiser les données
                                    </button>
                                </div>
                            </div>
                        </details>

                        <!-- ZONE DE PRÉVISUALISATION (cachée par défaut) -->
                        <div id="previewZone" style="display: none; margin-bottom: 20px; background: #fff3cd; 
                                     padding: 15px; border-radius: 8px; border: 2px solid #ffc107;">
                            <h4 class="mt-0-warning">📐 Prévisualisation de l'import</h4>
                            <p style="color: #856404; margin-bottom: 15px;">
                                Vérifiez les données avant de les importer définitivement.
                            </p>
                            <div id="previewTable" style="overflow-x: auto; max-height: 300px; 
                                          border: 1px solid #ddd; border-radius: 4px; background: white;">
                                <!-- Le tableau sera généré ici -->
                            </div>
                            <div class="d-flex-gap10-mt15">
                                <button onclick="confirmImport()" class="btn btn-confirmer">
                                    Confirmer l'import
                                </button>
                                <button onclick="cancelImport()" class="btn btn-annuler">
                                    Annuler
                                </button>
                            </div>
                        </div>

                        <!-- LISTE DES ÉTUDIANTS -->
                        <div id="students-list-container" class="hidden-mb-20">
                            <div
                                class="d-flex-between-mb15">
                                <h4 style="color: var(--bleu-principal); margin: 0;">
                                    Liste des étudiants <span id="compteurFiltres"></span>
                                </h4>
                                <div class="d-flex-gap-10">
                                    <button onclick="exportStudentsData()" class="btn btn-principal"
                                        class="px-8-py-15">
                                        Exporter (CSV)
                                    </button>
                                    <button onclick="resetStudentsData()" class="btn btn-annuler"
                                        class="px-8-py-15">
                                        Réinitialiser
                                    </button>
                                </div>
                            </div>

                            <div class="overflow-x-border">
                                <table id="students-table" class="tableau-blanc" style="width: 100%;">
                                    <thead class="thead-bleu-moyen">
                                        <tr>
                                            <th class="td-left-100">DA</th>
                                            <th class="td-center-80">Groupe</th>
                                            <th class="td-left-auto">Nom</th>
                                            <th class="td-left-auto">Prénom</th>
                                            <th class="td-left-100">Programme</th>
                                            <th class="td-center-60">SA</th>
                                            <th class="td-center-60">CAF</th>
                                            <th class="td-center-200">Actions
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody id="students-tbody">
                                        <!-- Les lignes seront générées par afficherListeEtudiants() -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- MESSAGE SI AUCUN ÉTUDIANT -->
                        <div id="no-students-msg" style="display: block; text-align: center; padding: 40px;
                                         background: #f8f9fa; border-radius: 8px; color: #666;">
                            <p class="text-11-mb10">📭 Aucun·e étudiant·e dans le groupe
                            </p>
                            <p class="text-09">
                                Utilisez le formulaire ci-dessus ou l'import pour ajouter des étudiant·es
                            </p>
                        </div>
                    </div><!-- FIN carte -->

                    <!-- ↓↓↓ AJOUTER LA NOUVELLE CARTE ICI ↓↓↓ -->

                    <div class="carte">
                        <h3 class="cursor-pointer-user-select" onclick="toggleSection('section-clonage-anonymise')">
                            <span id="icone-clonage-anonymise">▶</span> 🔒 Clonage anonymisé (Groupe 9999 → Démo)
                            <span style="font-size: 0.8em; color: #666; font-weight: normal;">(Section avancée)</span>
                        </h3>

                        <div id="section-clonage-anonymise" style="display: none;">
                        <div
                            class="carte-bleu-tres-pale-mb20-border">
                            <p class="m-0-bleu-moyen-sm">
                                <strong>À quoi sert cette fonctionnalité ?</strong><br>
                                Le Groupe 9999 est un groupe fictif utilisé pour les démonstrations et formations.
                                Les étudiants du Groupe 9999 sont des clones anonymisés d'étudiants réels du Groupe
                                1,
                                avec des noms fictifs et des DA reconnaissables (9999XXX).
                            </p>
                        </div>

                        <!-- STATISTIQUES -->
                        <div
                            class="grid-auto-200">
                            <div
                                class="carte-blanche-centree">
                                <div class="stat-2rem-bold-bleu"
                                    id="stat-groupe1">--</div>
                                <div class="text-muted">Étudiants Groupe 1</div>
                            </div>
                            <div
                                class="carte-blanche-centree">
                                <div class="stat-2rem-bold-bleu-moyen"
                                    id="stat-groupe2">--</div>
                                <div class="text-muted">Étudiants Groupe 9999</div>
                            </div>
                            <div
                                class="carte-blanche-centree">
                                <div class="stat-2rem-bold-minimal"
                                    id="stat-mappings">--</div>
                                <div class="text-muted">Mappings actifs</div>
                            </div>
                        </div>

                        <!-- ACTIONS -->
                        <div class="mb-20">
                            <h4 class="titre-bleu-mb10">Actions rapides</h4>

                            <!-- Options de génération -->
                            <div class="carte-mb15-grise">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; font-size: 0.9rem;">
                                    Nombre d'étudiants fictifs :
                                </label>
                                <input type="number" id="input-nb-etudiants" value="10" min="5" max="50"
                                       class="w-80-select">
                                <span class="text-sm-muted">(entre 5 et 50 étudiants)</span>
                            </div>

                            <div class="btn-groupe">
                                <button onclick="genererMappingAleatoire()" class="btn btn-principal">
                                    Cloner depuis Groupe 1
                                </button>
                                <button onclick="genererGroupeFictifAleatoire()" class="btn btn-confirmer">
                                    🎲 Générer groupe aléatoire
                                </button>
                            </div>

                            <div class="btn-groupe" class="mt-10">
                                <button onclick="synchroniserDonnees()" class="btn btn-principal">
                                    Synchroniser maintenant
                                </button>
                                <button onclick="afficherTableauMapping()" class="btn btn-principal">
                                    Afficher le mapping
                                </button>
                            </div>
                        </div>

                        <!-- IMPORT / EXPORT -->
                        <div class="mb-20">
                            <h4 class="titre-bleu-mb10">📦 Import / Export</h4>
                            <p class="text-09-muted-mb10">
                                Partagez des groupes fictifs pour formation ou démonstration. Idéal pour apprendre comment l'application fonctionne.
                            </p>
                            <div class="btn-groupe">
                                <button onclick="exporterGroupeFictif()" class="btn btn-confirmer">
                                    Exporter le Groupe 9999
                                </button>
                                <button onclick="importerGroupeFictif()" class="btn btn-modifier">
                                    Importer un groupe fictif
                                </button>
                            </div>
                            <div class="btn-groupe" class="mt-10">
                                <button onclick="supprimerGroupeFictif()" class="btn btn-annuler" class="w-100">
                                    Supprimer le Groupe 9999
                                </button>
                            </div>
                            <div class="carte-grise-mt10-sm-muted">
                                <strong>💡 Astuce :</strong> Exportez votre Groupe 9999, passez en mode "Simulé" et explorez l'application sans risque !
                            </div>
                        </div>

                        <!-- TABLEAU -->
                        <div id="tableau-mapping-groupes">
                            <div class="empty-state-center-20">Chargement...</div>
                        </div>

                        <!-- INFOS TECHNIQUES -->
                        <div
                            class="carte-grise-mt20-sm-muted">
                            <details>
                                <summary class="cursor-pointer-bold">Informations techniques
                                </summary>
                                <ul class="m-10-0-pl20">
                                    <li><strong>Groupe 1 :</strong> Étudiants réels (DA : 1234567)</li>
                                    <li><strong>Groupe 9999 :</strong> Clones fictifs (DA : 9999001, 9999002...)
                                    </li>
                                    <li><strong>Noms :</strong> 80% québécois, 20% africains</li>
                                    <li><strong>Synchronisation :</strong> Présences, évaluations, portfolios</li>
                                </ul>
                            </details>
                        </div>
                        </div><!-- FIN section-clonage-anonymise -->
                    </div><!-- FIN carte clonage -->

                    <script>
                        // Fonction pour plier/déplier une section
                        function toggleSection(sectionId) {
                            const section = document.getElementById(sectionId);
                            const icone = document.getElementById('icone-' + sectionId);

                            if (section.style.display === 'none') {
                                section.style.display = 'block';
                                icone.textContent = '▼';
                            } else {
                                section.style.display = 'none';
                                icone.textContent = '▶';
                            }
                        }

                        // Initialisation statistiques clonage
                        document.addEventListener('DOMContentLoaded', function () {
                            setTimeout(function () {
                                if (typeof obtenirEtudiantsGroupe1 === 'function') {
                                    mettreAJourStatistiquesClonage();
                                }
                            }, 500);
                        });

                        document.addEventListener('click', function (e) {
                            if (e.target.matches('[data-sous-onglet="reglages-groupe"]')) {
                                setTimeout(function () {
                                    // Note: initialiserModuleGroupe() est maintenant appelé automatiquement par navigation.js

                                    // Clonage anonymisé (section avancée)
                                    if (typeof obtenirEtudiantsGroupe1 === 'function') {
                                        mettreAJourStatistiquesClonage();
                                        afficherTableauMapping();
                                    }
                                }, 100);
                            }
                        });

                        function mettreAJourStatistiquesClonage() {
                            const groupe1 = obtenirEtudiantsGroupe1();
                            const groupe2 = obtenirEtudiantsGroupe2();
                            const mapping = chargerMapping();

                            document.getElementById('stat-groupe1').textContent = groupe1.length;
                            document.getElementById('stat-groupe2').textContent = groupe2.length;
                            document.getElementById('stat-mappings').textContent = Object.keys(mapping).length;
                        }
                    </script>

                </div><!-- FIN sous-section reglages-groupe -->

                <!-- Sous-section : Pratique de notation -->
                <!-- Sous-section : Pratique de notation -->
                <!-- Sous-section : Pratique de notation -->
                <div id="reglages-pratique-notation" class="sous-section">
                    <h2>Configuration de la pratique de notation</h2>
                    <p class="text-muted">Configuration du système de notation du cours</p>

                    <!-- Grille 2 colonnes : Configuration et Affichage -->
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px;">

                        <!-- Colonne gauche : Configuration de la notation -->
                        <div class="carte" style="margin-bottom: 0;">
                            <h3>Configuration de la notation</h3>

                            <!-- NOTE RREC -->
                            <div style="margin-bottom: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                <p class="text-muted" style="margin: 0; font-size: 0.85rem; line-height: 1.5;">
                                    Pendant l'apprentissage, vous pouvez mettre en place une pratique alternative de notation (PAN) qui favorise un parcours formatif. Cependant, le Règlement sur le régime des études collégiales (RREC) exige une note finale chiffrée en pourcentage à la fin du trimestre. Votre évaluation non chiffrée doit être convertie en note chiffrée (%) à la fin du parcours.
                                </p>
                            </div>

                            <!-- Pratique de notation -->
                            <div class="groupe-form">
                                <label>Pratique de notation</label>
                                <select id="pratiqueNotation" class="controle-form">
                                    <option value="">Choisir une pratique de notation</option>
                                    <option value="sommative">Sommative traditionnelle (en %)</option>
                                    <option value="alternative">Alternative (PAN)</option>
                                </select>
                            </div>

                            <!-- Type de PAN -->
                            <div class="groupe-form" id="colonnePAN" style="display: none;">
                                <label>Type de pratique alternative</label>
                                <select id="typePAN" class="controle-form">
                                    <option value="">Choisir un type de PAN...</option>
                                    <option value="maitrise">Notation basée sur la maîtrise de standards</option>
                                    <option value="specifications">Notation par spécifications</option>
                                    <option value="denotation">Dénotation (Ungrading)</option>
                                    <option value="denotation">Système hybride</option>
                                </select>
                            </div>

                            <!-- INFO PAN -->
                            <div id="infoPAN" style="display: none; margin-top: 15px; padding: 10px;
                 background: white; border-radius: 4px; font-size: 0.85rem; color: #666;">
                            </div>

                            <!-- Activation portfolio et jetons -->
                            <div id="activationsExtras" style="display: none; margin-top: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                <h4 style="font-size: 0.95rem; margin-bottom: 12px; color: var(--bleu-principal);">Options de configuration</h4>

                                <!-- Grille 2 colonnes pour les checkboxes -->
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                                    <!-- Checkbox Portfolio -->
                                    <div class="form-group">
                                        <label style="cursor: pointer; display: flex; align-items: center;">
                                            <input type="checkbox" id="portfolioActif" checked>
                                            <strong style="margin-left: 8px;">Activer le portfolio d'artefacts</strong>
                                        </label>
                                    </div>

                                    <!-- Checkbox Jetons -->
                                    <div class="form-group">
                                        <label style="cursor: pointer; display: flex; align-items: center;">
                                            <input type="checkbox" id="jetonsActif" checked>
                                            <strong style="margin-left: 8px;">Activer le système de jetons</strong>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Affichage au tableau de bord -->
                            <div id="sectionAffichageTableauBord" style="display: none; margin-top: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                <h4 style="font-size: 0.95rem; margin-bottom: 10px; color: var(--bleu-principal);">Affichage au tableau de bord</h4>

                                <p class="text-muted" style="margin-bottom: 12px; font-size: 0.8rem; line-height: 1.5;">
                                    Par défaut, le tableau de bord affiche uniquement les indices de la pratique choisie ci-dessus.
                                    Pour fins de recherche ou d'expérimentation, tu peux activer le mode comparatif pour afficher
                                    <strong>les deux systèmes simultanément</strong> (SOM et PAN). Ceci peut être utile pour comparer l'historique et le contexte ponctuel de certains indices.
                                </p>

                                <!-- Option : Mode comparatif -->
                                <div class="form-group">
                                    <label style="cursor: pointer; display: flex; align-items: center;">
                                        <input type="checkbox" id="modeComparatif">
                                        <strong style="margin-left: 8px;">Activer le mode comparatif (expérimental)</strong>
                                    </label>
                                    <small style="display: block; color: #666; margin-top: 5px; margin-left: 28px; font-size: 0.8rem;">
                                        Affiche les indices SOM et PAN côte à côte pour comparer les deux approches
                                    </small>
                                </div>
                            </div>

                            <!-- Bouton Sauvegarder -->
                            <div style="margin-top: 20px;">
                                <button class="btn btn-confirmer" id="btnSauvegarderPratiqueNotation" style="width: 100%;">
                                    Sauvegarder toutes les configurations
                                </button>
                                <span id="statutModalites" style="display: none;"></span>
                            </div>

                        </div>

                        <!-- Colonne droite : Cartes conditionnelles (Portfolio OU Jetons) -->
                        <div id="colonneCartesExtras" style="display: flex; flex-direction: column; gap: 20px;">
                            <!-- Les cartes Portfolio ou Jetons seront affichées ici dynamiquement -->
                        </div>

                    </div>

                        <!-- ==========================================
             SECTION : CONFIGURATION PAN
             ========================================== -->
                        <div id="configurationPAN" style="display: none; margin-top: 20px;">

                            <!-- Grille 2 colonnes pour optimisation espace -->
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px;">

                                <!-- Colonne gauche -->
                                <div style="display: flex; flex-direction: column; gap: 20px;">

                                    <!-- Configuration du portfolio d'artefacts -->
                                    <div class="carte" id="cartePortfolio" style="margin-bottom: 0; display: none;">
                                        <h3>Configuration du portfolio d'artefacts</h3>

                                        <!-- Description du portfolio -->
                                        <div style="margin-bottom: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                            <p class="text-muted" style="margin: 0; font-size: 0.85rem; line-height: 1.5;">
                                                Un portfolio est un dossier d'apprentissage que l'apprenant·e monte tout au long du trimestre et qui a sa pondération propre dans la construction de la note finale. Si vous utilisez un portfolio (ex: ELLAC en littérature), cochez cette case. Sinon, les productions des apprenant·es demeurent indépendantes et ont leur propre pondération.
                                            </p>
                                        </div>

                                        <!-- Configuration détaillée du portfolio -->
                                        <div id="detailsConfigPortfolio">

                                            <!-- Modalité de sélection -->
                                            <div class="groupe-form" style="margin-bottom: 10px;">
                                                <label for="configMethodeSelection" style="font-weight: 600; display: block; margin-bottom: 8px;">
                                                    Modalité de sélection des artefacts
                                                </label>
                                                <select id="configMethodeSelection" class="controle-form" style="max-width: 100%;">
                                                    <option value="meilleurs" selected>N meilleurs artefacts (note maximale atteinte)</option>
                                                    <option value="recents">N récents artefacts (niveau terminal actuel)</option>
                                                    <option value="recents-meilleurs">N récents parmi les meilleurs (hybride)</option>
                                                    <option value="tous">Tous les artefacts (moyenne complète)</option>
                                                </select>
                                            </div>

                                            <!-- Description dynamique -->
                                            <div id="descriptionModalite" class="text-muted" style="margin-bottom: 20px; padding: 12px; background: #f8f9fa; border-radius: 4px; font-size: 0.9rem; line-height: 1.6;">
                                                Dans ma pratique de notation basée sur la maîtrise de standards, le portfolio contient les N meilleures productions de l'apprenant·e.
                                            </div>

                                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                                            <div class="groupe-form" id="groupeNombreARetenir">
                                                <label for="configNombreARetenir" style="font-weight: 500; display: block; margin-bottom: 5px;">
                                                    Artefacts à retenir
                                                </label>
                                                <input type="number" id="configNombreARetenir" class="controle-form"
                                                       value="5" min="1" max="20">
                                                <small id="labelNombreARetenir" style="display: block; color: #666; margin-top: 3px; font-size: 0.8rem;">
                                                    N meilleurs
                                                </small>
                                            </div>

                                            <div class="groupe-form">
                                                <label for="configMinimumCompletion" style="font-weight: 500; display: block; margin-bottom: 5px;">
                                                    Minimum requis
                                                </label>
                                                <input type="number" id="configMinimumCompletion" class="controle-form"
                                                       value="7" min="1" max="20">
                                                <small style="display: block; color: #666; margin-top: 3px; font-size: 0.8rem;">
                                                    Seuil complétion
                                                </small>
                                            </div>

                                            <div class="groupe-form">
                                                <label for="configNombreTotal" style="font-weight: 500; display: block; margin-bottom: 5px;">
                                                    Total prévus
                                                </label>
                                                <input type="number" id="configNombreTotal" class="controle-form"
                                                       value="10" min="1" max="50">
                                                <small style="display: block; color: #666; margin-top: 3px; font-size: 0.8rem;">
                                                    Nombre artefacts
                                                </small>
                                            </div>
                                        </div>
                                        </div>
                                        <!-- FIN détailsConfigPortfolio -->

                                    </div>

                                </div>

                                <!-- Colonne droite -->
                                <div style="display: flex; flex-direction: column; gap: 20px;">

                                    <!-- Système de jetons -->
                                    <div class="carte" id="carteJetons" style="margin-bottom: 0; display: none;">
                                        <h3>Système de jetons</h3>

                                        <!-- Description des jetons -->
                                        <div style="margin-bottom: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                            <p class="text-muted" style="margin: 0; font-size: 0.85rem; line-height: 1.5;">
                                                Les jetons sont des ressources limitées que l'apprenant·e peut utiliser pour adapter son parcours d'apprentissage. Chaque élève reçoit un nombre fixe de jetons par trimestre qu'il peut choisir d'utiliser selon ses besoins (prolonger une échéance, refaire une évaluation, etc.).
                                            </p>
                                        </div>

                                        <!-- Grille 2 colonnes : Nombre de jetons et Types personnalisés -->
                                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">

                                            <!-- Colonne gauche : Nombre de jetons par élève -->
                                            <div class="groupe-form">
                                                <label for="nombreJetonsParEleve" style="font-weight: 500; display: block; margin-bottom: 5px;">
                                                    Nombre de jetons alloués par élève
                                                </label>
                                                <input type="number" id="nombreJetonsParEleve" class="controle-form"
                                                       min="0" max="20" value="4">
                                                <small style="display: block; color: #666; margin-top: 3px; font-size: 0.8rem;">
                                                    Chaque élève peut utiliser ses jetons comme il le souhaite (délai, reprise, ou autres types que vous créez)
                                                </small>
                                            </div>

                                            <!-- Colonne droite : Types de jetons personnalisés -->
                                            <div>
                                                <h4 style="font-size: 0.95rem; margin-bottom: 10px; color: var(--bleu-principal); font-weight: 500;">
                                                    Types de jetons personnalisés
                                                </h4>

                                                <!-- Bouton pour ajouter un nouveau type -->
                                                <button type="button" id="btnAjouterTypeJeton" class="btn btn-secondaire" style="width: 100%;">
                                                    Ajouter un type de jeton
                                                </button>

                                                <p class="text-muted" style="margin-top: 8px; margin-bottom: 0; font-size: 0.8rem;">
                                                    Créez vos propres types de jetons adaptés à votre pratique pédagogique
                                                </p>
                                            </div>

                                        </div>

                                        <!-- Grille 2 colonnes : Délai et Reprise -->
                                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">

                                            <!-- Colonne gauche : Jetons de délai -->
                                            <div id="configJetonsDelai" style="padding: 12px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                <div class="form-group">
                                                    <label style="cursor: pointer;">
                                                        <input type="checkbox" id="jetonDelaiActif" checked>
                                                        <strong style="margin-left: 8px;">Jetons de délai</strong>
                                                    </label>
                                                </div>
                                                <p class="text-muted">
                                                    Permettent de prolonger l'échéance d'une évaluation
                                                </p>
                                                <div class="groupe-form">
                                                    <label for="dureeDelai" style="font-weight: 500;">
                                                        Durée du délai :
                                                    </label>
                                                    <input type="number" id="dureeDelai" class="controle-form"
                                                           min="1" max="30" value="7">
                                                    <span>jours</span>
                                                </div>
                                            </div>

                                            <!-- Colonne droite : Jetons de reprise -->
                                            <div id="configJetonsReprise" style="padding: 12px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                <div class="form-group">
                                                    <label style="cursor: pointer;">
                                                        <input type="checkbox" id="jetonRepriseActif" checked>
                                                        <strong style="margin-left: 8px;">Jetons de reprise</strong>
                                                    </label>
                                                </div>
                                                <p class="text-muted">
                                                    Permettent de refaire une évaluation pour améliorer la maîtrise
                                                </p>
                                                <div class="groupe-form">
                                                    <label style="font-weight: 500; display: block; margin-bottom: 8px;">
                                                        Que fait-on avec l'évaluation originale?
                                                    </label>
                                                    <div>
                                                        <label style="display: inline-flex; align-items: center; margin-bottom: 6px; cursor: pointer;">
                                                            <input type="radio" id="archiverOriginale" name="gestionOriginale" value="archiver" checked>
                                                            <span style="margin-left: 6px;">On la garde en archive</span>
                                                        </label>
                                                    </div>
                                                    <div>
                                                        <label style="display: inline-flex; align-items: center; cursor: pointer;">
                                                            <input type="radio" id="supprimerOriginale" name="gestionOriginale" value="supprimer">
                                                            <span style="margin-left: 6px;">On la supprime</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                        <!-- Liste des types de jetons personnalisés créés -->
                                        <div id="listeJetonsPersonnalises" style="margin-top: 15px; display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                            <!-- Les types personnalisés seront ajoutés ici dynamiquement -->
                                        </div>

                                    </div>

                                </div>

                            </div>

                            <!-- Reste du contenu (jeton personnalisé si nécessaire) -->
                        </div>
                        <!-- FIN SECTION CONFIGURATION PAN -->

                </div><!--fin sous-section pratique-notation-->

                <!-- Sous-section : Interprétation des données -->
                <div id="reglages-interpretation" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Configuration des seuils d'interprétation</span>
                        <span class="titre-emoji-container">
                            <span class="emoji-toggle" data-target="note-interpretation">📐</span>
                            <span class="emoji-toggle" data-target="conseil-interpretation">💡</span>
                        </span>
                    </h2>
                    <p class="text-muted">
                        Ajuste les seuils utilisés pour interpréter les données pédagogiques et détecter les patterns d'apprentissage
                    </p>

                    <!-- Option avancée : Découplage P et R -->
                    <div class="form-group" style="margin-bottom: 20px; padding: 12px; background: #fffef0; border-left: 3px solid #ffc107; border-radius: 4px;">
                        <label style="cursor: pointer; display: flex; align-items: center;">
                            <input type="checkbox" id="decouplerPR">
                            <strong style="margin-left: 8px;">Découpler Performance (P) et Risque (R)</strong>
                        </label>
                        <small style="display: block; color: #666; margin-top: 8px; margin-left: 28px; font-size: 0.85rem; line-height: 1.5;">
                            <strong>P (notation)</strong> : Utilise la modalité choisie ci-dessus pour calculer la note finale.<br>
                            <strong>R (dépistage)</strong> : Toujours basé sur les N dernières productions pour détecter les tendances et intervenir au bon moment.<br>
                            <em>Recommandé avec modalité "N meilleurs" pour valoriser le progrès tout en détectant les décrochages.</em>
                        </small>
                    </div>

                    <!-- Carte Note -->
                    <div id="note-interpretation" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Ces seuils déterminent la sensibilité des algorithmes de détection de progression, de risque et de patterns d'apprentissage. Les valeurs par défaut ont été établies après expérimentation, mais tu peux les ajuster selon ton contexte pédagogique. Les modifications prennent effet immédiatement et sont sauvegardées automatiquement dans le navigateur.
                    </div>

                    <!-- Conseil pratique : Informations techniques -->
                    <div id="conseil-interpretation" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong>
                        <ul class="m-8-0-pl20-lh18">
                            <li><strong>Stockage :</strong> Les seuils sont sauvegardés dans localStorage</li>
                            <li><strong>Portée :</strong> Les modifications affectent tous les calculs immédiatement</li>
                            <li><strong>Valeurs par défaut :</strong>
                                <ul class="mt-8">
                                    <li>Progression : 10 points (%)</li>
                                    <li>Direction risque : 5 points (%)</li>
                                    <li>Défi SRPNF : 71.25%</li>
                                </ul>
                            </li>
                            <li><strong>Impact :</strong> Les seuils influencent les diagnostics RàI, patterns et recommandations</li>
                        </ul>
                    </div>

                    <!-- Grille 2 colonnes pour optimisation espace -->
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px;">

                        <!-- Colonne gauche -->
                        <div style="display: flex; flex-direction: column; gap: 20px;">

                            <!-- Fenêtre d'analyse pour les patterns -->
                            <div class="carte" style="margin-bottom: 0;">
                                <h3>Fenêtre d'analyse des patterns</h3>
                                <p class="text-muted" style="margin-bottom: 15px; font-size: 0.9rem;">
                                    Nombre de productions récentes à analyser pour détecter les patterns d'apprentissage
                                    (progression, stagnation, difficulté croissante).
                                </p>

                                <div class="groupe-form">
                                    <label for="nombreProductionsAnalyse" class="label-fw-600-block" style="margin-bottom: 8px;">
                                        Nombre de productions à analyser
                                    </label>
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <input type="number" id="nombreProductionsAnalyse" class="controle-form"
                                               min="3" max="20" value="3" style="width: 100px;"
                                               onchange="sauvegarderSeuil('nombreProductionsAnalyse', parseInt(this.value))">
                                        <span style="color: #666; font-size: 0.9rem;">dernières productions</span>
                                    </div>
                                    <small style="display: block; color: #666; margin-top: 8px; font-size: 0.85rem;">
                                        <strong>Compromis réactivité vs fiabilité :</strong>
                                        Valeur basse = détection précoce (temps d'intervenir) •
                                        Valeur élevée = détection tardive (plus de recul)
                                    </small>
                                </div>

                                <div class="carte-bleu-pale" style="margin-top: 15px;">
                                    <p style="margin: 0 0 10px 0; font-size: 0.85rem; color: #666;">
                                        <strong>Artefacts nécessaires avant détection :</strong>
                                    </p>
                                    <ul style="margin: 0; padding-left: 20px; font-size: 0.85rem; color: #666; line-height: 1.6;">
                                        <li><strong>3 productions</strong> → Détection dès 4 artefacts (recommandé)</li>
                                        <li><strong>5 productions</strong> → Détection dès 6 artefacts</li>
                                        <li><strong>7 productions</strong> → Détection dès 8 artefacts</li>
                                    </ul>
                                    <p style="margin: 10px 0 0 0; font-size: 0.85rem; color: #666;">
                                        <strong>Exemple :</strong> Avec 9 artefacts dans la session et une fenêtre de 3,
                                        les patterns seront détectables dès le 4<sup>e</sup> artefact (semaine 6 environ),
                                        laissant le temps d'intervenir avant la fin de la session.
                                    </p>
                                </div>
                            </div>

                            <!-- Progression des artefacts -->
                            <div class="carte" style="margin-bottom: 0;">
                                <h3>Détection de la progression</h3>
                                <p class="text-muted" style="margin-bottom: 15px; font-size: 0.9rem;">
                                    Différence minimale entre moyennes pour considérer qu'il y a progression (↗) ou régression (↘).
                                </p>

                                <div class="groupe-form">
                                    <label for="seuil-progression" class="label-fw-600-block">
                                        Progression des artefacts
                                        <span id="valeur-progression" class="ml-10-bleu">10 points (%)</span>
                                    </label>
                                    <input type="range" id="seuil-progression" class="controle-form"
                                           min="0.05" max="0.20" step="0.01" value="0.10"
                                           oninput="mettreAJourAffichageSeuil('progression', this.value)"
                                           onchange="sauvegarderSeuil('progressionArtefacts', parseFloat(this.value))"
                                           class="w-100-pointer">
                                    <div class="d-flex-between-sm-muted-mt5">
                                        <span>5 points (très sensible)</span>
                                        <span>20 points (moins sensible)</span>
                                    </div>
                                </div>

                                <div class="carte-bleu-pale" style="margin-top: 15px;">
                                    <p class="m-0-text-muted" style="font-size: 0.85rem;">
                                        <strong>Exemple :</strong> Avec un seuil de <span id="exemple-progression">10</span> points,
                                        si un étudiant passe de 70% à 81%, cela sera considéré comme une progression (↗).
                                        De 70% à 78%, ce sera stable (→).
                                    </p>
                                </div>
                            </div>

                        </div>

                        <!-- Colonne droite -->
                        <div style="display: flex; flex-direction: column; gap: 20px;">

                            <!-- Direction du risque -->
                            <div class="carte" style="margin-bottom: 0;">
                                <h3>Évolution du risque</h3>
                                <p class="text-muted" style="margin-bottom: 15px; font-size: 0.9rem;">
                                    Variation minimale du risque pour afficher une flèche (→ ou ←). En dessous, un tiret (—) indique un plateau.
                                </p>

                                <div class="groupe-form">
                                    <label for="seuil-risque" class="label-fw-600-block">
                                        Direction du risque
                                        <span id="valeur-risque" class="ml-10-bleu">5 points (%)</span>
                                    </label>
                                    <input type="range" id="seuil-risque" class="controle-form"
                                           min="0.03" max="0.15" step="0.01" value="0.05"
                                           oninput="mettreAJourAffichageSeuil('risque', this.value)"
                                           onchange="sauvegarderSeuil('directionRisque', parseFloat(this.value))"
                                           class="w-100-pointer">
                                    <div class="d-flex-between-sm-muted-mt5">
                                        <span>3 points (très sensible)</span>
                                        <span>15 points (moins sensible)</span>
                                    </div>
                                </div>

                                <div class="carte-bleu-pale" style="margin-top: 15px;">
                                    <p class="m-0-text-muted" style="font-size: 0.85rem;">
                                        <strong>Exemple :</strong> Avec un seuil de <span id="exemple-risque">5</span> points,
                                        si le risque passe de 0.40 à 0.46, cela affichera (→). De 0.40 à 0.44, ce sera (—).
                                    </p>
                                </div>
                            </div>

                            <!-- Défi spécifique -->
                            <div class="carte" style="margin-bottom: 0;">
                                <h3>Identification des défis SRPNF</h3>
                                <p class="text-muted" style="margin-bottom: 15px; font-size: 0.9rem;">
                                    Score en dessous duquel un critère SRPNF est considéré comme un défi spécifique nécessitant une attention particulière.
                                </p>

                                <div class="groupe-form">
                                    <label for="seuil-defi" class="label-fw-600-block">
                                        Défi spécifique (SRPNF)
                                        <span id="valeur-defi" class="ml-10-bleu">71.25%</span>
                                    </label>
                                    <input type="range" id="seuil-defi" class="controle-form"
                                           min="0.60" max="0.80" step="0.0125" value="0.7125"
                                           oninput="mettreAJourAffichageSeuil('defi', this.value)"
                                           onchange="sauvegarderSeuil('defiSpecifique', parseFloat(this.value))"
                                           class="w-100-pointer">
                                    <div class="d-flex-between-sm-muted-mt5">
                                        <span>60% (plus exigeant)</span>
                                        <span>80% (moins exigeant)</span>
                                    </div>
                                </div>

                                <div class="carte-bleu-pale" style="margin-top: 15px;">
                                    <p class="m-0-text-muted" style="font-size: 0.85rem;">
                                        <strong>Exemple :</strong> Avec un seuil de <span id="exemple-defi">71.25</span>%,
                                        un critère à 70% sera identifié comme défi, mais un critère à 72% ne le sera pas.
                                    </p>
                                </div>
                            </div>

                        </div>

                    </div>
                    <!-- Fin grille 2 colonnes -->

                    <!-- Actions -->
                    <div class="carte">
                        <h3>Actions</h3>
                        <div class="d-flex-gap15-wrap">
                            <button class="btn btn-principal" onclick="chargerSeuilsInterpretationUI()">
                                Actualiser
                            </button>
                            <button class="btn btn-secondaire" onclick="restaurerValeursParDefaut()">
                                Restaurer les valeurs par défaut
                            </button>
                        </div>
                    </div>

                </div><!--fin sous-section reglages-interpretation-->

                <!-- Sous-section : Productions -->

                <!-- Sous-section: Import/Export des données -->
                <div id="reglages-import-export" class="sous-section">
                    <h2>Gestion des données</h2>
                    <p class="text-muted">Sauvegarde et restauration des données locales</p>

                    <div class="carte">
                        <h3>Sauvegarde et restauration</h3>
                        <p class="text-muted" class="mb-25">
                            Gère tes données locales : exporte pour sauvegarder, importe pour restaurer.
                        </p>

                        <!-- Export -->
                        <div class="carte-bleu-pale-p15-mb20">
                            <h4 class="titre-bleu-mb10"> Exporter les données</h4>
                            <p>
                                Sauvegarde tes données dans un fichier JSON. Tu pourras choisir quelles
                                données exporter (toutes ou sélection personnalisée).
                            </p>
                            <button class="btn btn-principal" onclick="ouvrirModalExport()" class="mt-10">
                                Ouvrir l'exportation
                            </button>
                            <p class="text-muted" class="mt-10-text-09">
                                💡 Exporte régulièrement pour éviter toute perte de données.
                            </p>
                        </div>

                        <!-- Import -->
                        <div class="carte-bleu-pale-p15">
                            <h4 class="titre-bleu-mb10"> Importer des données</h4>
                            <p>
                                Restaure des données depuis un fichier JSON exporté précédemment.
                            </p>
                            <button class="btn btn-principal" onclick="ouvrirModalImport()" class="mt-10">
                                Ouvrir l'importation
                            </button>
                            <div class="badge-alerte" class="mt-15">
                                <strong>Important :</strong> L'import écrasera les données existantes
                                pour les clés importées. Exporte d'abord si nécessaire !
                            </div>
                        </div>
                    </div>

                    <!-- Informations sur les backups -->
                    <div class="carte">
                        <h3>À propos des sauvegardes</h3>
                        <div class="carte-info-bleu-clair">
                            <h4 style="color: #1565c0; margin-bottom: 10px;"> Backup complet vs Import/Export partiel</h4>
                            <p class="mb-15">
                                <strong>Les boutons ci-dessus</strong> permettent de faire un <strong>backup complet</strong>
                                de toutes tes données d'application (cours, trimestre, étudiants, évaluations, présences, etc.).
                            </p>
                            <p class="mb-15">
                                Pour exporter/importer uniquement du <strong>matériel pédagogique</strong> (grilles, échelles, productions),
                                utilise les boutons d'import/export directement dans les sections :
                            </p>
                            <ul class="ml-20-lh-95">
                                <li><strong>Matériel pédagogique → Productions</strong> : Import/export des évaluations</li>
                                <li><strong>Matériel pédagogique → Critères d'évaluation</strong> : Import/export des grilles</li>
                                <li><strong>Matériel pédagogique → Niveaux de performance</strong> : Import/export des échelles</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Réinitialisation -->
                    <div class="carte">
                        <h4>Réinitialisation complète</h4>
                        <p>
                            Efface <strong>toutes</strong> les données et revient à l'état initial.
                            <strong>Cette action est irréversible.</strong>
                        </p>
                        <button class="btn btn-supprimer" onclick="reinitialiserDonnees()">
                            Réinitialiser toutes les données
                        </button>
                        <p class="text-muted" class="mt-10-text-09">
                            Triple confirmation requise + mot de passe "EFFACER" pour sécurité
                        </p>
                    </div>

                    <!-- Informations -->
                    <div class="carte">
                        <h4>Informations</h4>
                        <ul class="ml-20-lh-95">
                            <li><strong>Stockage :</strong> Local dans le navigateur (localStorage)</li>
                            <li><strong>Format :</strong> Fichiers JSON lisibles</li>
                            <li><strong>Compatibilité :</strong> Fonctionne sur tous appareils</li>
                            <li><strong>Sécurité :</strong> Aucune donnée envoyée sur internet</li>
                            <li><strong>Limite :</strong> ~5-10 Mo selon navigateurs</li>
                        </ul>
                    </div>

                </div>
                <!-- fin sous-section import-export -->

            </section><!-- fin section-reglages -->

            <!-- ===================================
                 SECTION: AIDE
                 =================================== -->
            <section id="section-aide" class="section">

                <!-- Champ de recherche -->
                <div id="aide-recherche-container" class="sticky-header">
                    <div class="max-w-800">
                        <div class="d-flex-gap10-center-mb8">
                            <div class="flex-1-relative">
                                <input
                                    type="text"
                                    id="aide-recherche-input"
                                    placeholder="Rechercher dans toutes les sous-sections de l'Aide..."
                                    class="select-full-bleu"
                                    onkeyup="rechercherDansAide()"
                                >
                                <button
                                    id="aide-recherche-clear"
                                    onclick="effacerRechercheAide()"
                                    class="btn-clear-input"
                                    title="Effacer la recherche"
                                >✕</button>
                            </div>
                        </div>
                        <div class="label-block-085-muted-center-mb8">
                            Recherche dans : Introduction • Configuration • Formation • Utilisation • Consultation • Référence
                        </div>
                        <div id="aide-recherche-resultats" class="text-09-muted-center-hidden"></div>
                    </div>
                </div>

                <!--LLM:OK_TO_EDIT -->
                <!-- ===================================
                     SOUS-SECTION 1: INTRODUCTION
                     =================================== -->
                <div id="aide-introduction" class="sous-section">
                    <h2>Introduction au système de monitorage</h2>
                    <p class="text-muted">« L'objectif est de faire mentir les prédictions de risque par nos interventions proactives ! »</p>

                    <!-- Carte: Qu'est-ce que le monitorage -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Qu'est-ce que le monitorage pédagogique ?</h3>
                        <p><strong>Le système transforme votre intuition pédagogique en intelligence prédictive.</strong></p>

                        <p>Ce système formalise et systématise ce que tout enseignant fait intuitivement : observer ses étudiants, détecter les difficultés émergentes et ajuster ses interventions. Cette formalisation apporte :</p>

                        <ul>
                            <li><strong>Objectivité</strong> : Données factuelles plutôt qu'impressions</li>
                            <li><strong>Systématicité</strong> : Suivi régulier et exhaustif</li>
                            <li><strong>Prédictivité</strong> : Détection précoce des signaux faibles</li>
                        </ul>

                        <p><strong>Fondements théoriques :</strong></p>
                        <ul>
                            <li><strong>RàI (Réponse à l'Intervention)</strong> : Modèle adapté au collégial avec 3 niveaux d'intensification</li>
                            <li><strong>Enseignement explicite</strong> : Efficacité et explicitation des stratégies</li>
                            <li><strong>Taxonomie SOLO / Échelle IDME</strong> : Évaluation de la profondeur de compréhension</li>
                        </ul>
                    </div>

                    <!-- Carte: Concepts clés A-C-P -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Les trois indices primaires (A-C-P)</h3>

                        <div class="alerte-info-bleu">
                            <h4 class="titre-bleu-mb10">A - Assiduité</h4>
                            <p><strong>Présence en classe</strong> - Mesure l'engagement cognitif</p>
                            <p class="text-muted-sm"><em>Module source : saisie-presences.js</em></p>
                            <p>Les étudiants assidus sont davantage exposés au contenu, aux explications et aux pratiques guidées.</p>
                        </div>

                        <div class="alerte-info-bleu">
                            <h4 class="titre-bleu-mb10">C - Complétion</h4>
                            <p><strong>Remise des travaux</strong> - Mesure la mobilisation</p>
                            <p class="text-muted-sm"><em>Module source : portfolio.js</em></p>
                            <p>Reflète la constance et la persévérance dans les efforts, la régularité d'exécution et le respect des délais.</p>
                        </div>

                        <div class="alerte-info-bleu">
                            <h4 class="titre-bleu-mb10">P - Performance</h4>
                            <p><strong>Qualité des productions</strong> - Mesure la maîtrise</p>
                            <p class="text-muted-sm"><em>Module source : portfolio.js</em></p>
                            <p>Évaluée selon les critères SRPNF et l'échelle IDME, indique directement les compétences en lecture et écriture.</p>
                        </div>
                    </div>

                    <!-- Carte: Critères SRPNF -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Critères d'évaluation SRPNF</h3>
                        <p>Inspirés de l'approche ELLAC (Enseignement de la Lecture Littéraire Au Collégial)</p>

                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>Critère</th>
                                    <th class="text-center">Pondération</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Structure</strong></td>
                                    <td class="text-center">15%</td>
                                    <td>Organisation logique des idées</td>
                                </tr>
                                <tr>
                                    <td><strong>Rigueur</strong></td>
                                    <td class="text-center">20%</td>
                                    <td>Exhaustivité des observations</td>
                                </tr>
                                <tr>
                                    <td><strong>Plausibilité</strong></td>
                                    <td class="text-center">10%</td>
                                    <td>Crédibilité de l'interprétation</td>
                                </tr>
                                <tr>
                                    <td><strong>Nuance</strong></td>
                                    <td class="text-center">25%</td>
                                    <td>Qualité du raisonnement</td>
                                </tr>
                                <tr>
                                    <td><strong>Français</strong></td>
                                    <td class="text-center">30%</td>
                                    <td>Maîtrise linguistique</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Carte: Échelle IDME -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Taxonomie SOLO et échelle IDME</h3>
                        <p>L'échelle IDME traduit la profondeur de compréhension selon la taxonomie SOLO :</p>

                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>IDME</th>
                                    <th>SOLO</th>
                                    <th class="text-center">Score</th>
                                    <th>Compréhension</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>I</strong> - Insuffisant</td>
                                    <td>Préstructurel / Unistructurel</td>
                                    <td class="text-center">&lt; 64%</td>
                                    <td>Incompréhension ou superficielle</td>
                                </tr>
                                <tr>
                                    <td><strong>D</strong> - Développement</td>
                                    <td>Multistructurel</td>
                                    <td class="text-center">65-74%</td>
                                    <td>Points pertinents sans liens</td>
                                </tr>
                                <tr>
                                    <td><strong>M</strong> - Maîtrisé</td>
                                    <td>Relationnel</td>
                                    <td class="text-center">75-84%</td>
                                    <td>Compréhension globale avec liens</td>
                                </tr>
                                <tr>
                                    <td><strong>E</strong> - Étendu</td>
                                    <td>Abstrait étendu</td>
                                    <td class="text-center">≥ 85%</td>
                                    <td>Transfert à autres contextes</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Carte: Architecture Single Source of Truth -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Architecture : Single Source of Truth</h3>
                        <p><strong>Principe fondamental :</strong> Chaque donnée a UNE source unique qui la génère et la stocke. Les autres modules la lisent via localStorage.</p>

                        <div class="carte-code-light">
                            <p class="m-0-success"><strong>MODULE SOURCE</strong> (génère/stocke)</p>
                            <p class="my-5-mx-20">trimestre.js → calendrierComplet</p>
                            <p class="my-5-mx-20">saisie-presences.js → indicesAssiduiteDetailles</p>
                            <p class="my-5-mx-20">portfolio.js → indicesCP</p>

                            <p class="m-15-0-0-0-primary"><strong>MODULE LECTEUR</strong> (lit/affiche)</p>
                            <p class="my-5-mx-20">calendrier-vue.js → lit calendrierComplet</p>
                            <p class="my-5-mx-20">tableau-bord-apercu.js → lit indices A, C, P</p>
                            <p class="my-5-mx-20">profil-etudiant.js → lit indices A, C, P</p>
                        </div>

                        <p class="mt-15"><strong>Règle d'or :</strong> Les modules ne se parlent JAMAIS directement. Communication via localStorage uniquement.</p>
                    </div>
                </div>

                <!-- ===================================
                     SOUS-SECTION 2: CONFIGURATION
                     =================================== -->
                <div id="aide-configuration" class="sous-section">
                    <h2>Configuration initiale (1ʳᵉ utilisation)</h2>
                    <p class="text-muted">Guide pas-à-pas pour configurer votre système de monitorage</p>

                    <!-- Carte: Vue d'ensemble -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Étapes de configuration</h3>
                        <p>Suivez ces étapes dans l'ordre pour configurer correctement le système :</p>
                        <ol class="lh-relaxed">
                            <li><strong>Cours</strong> : Informations de base (code, titre, pondération)</li>
                            <li><strong>Trimestre</strong> : Dates et calendrier complet (SOURCE)</li>
                            <li><strong>Groupe</strong> : Liste des étudiants</li>
                            <li><strong>Horaire</strong> : Séances hebdomadaires (en refonte)</li>
                            <li><strong>Pratiques PAN</strong> : Nombre d'artefacts et jetons</li>
                        </ol>
                    </div>

                    <!-- Carte: 1. Cours -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">1. Configurer le cours</h3>
                        <p><strong>Navigation :</strong> Réglages → Cours</p>

                        <p><strong>Informations à saisir :</strong></p>
                        <ul>
                            <li><strong>Code du cours</strong> : Ex. 601-101-MQ</li>
                            <li><strong>Titre</strong> : Ex. Écriture et littérature</li>
                            <li><strong>Pondération</strong> : Ex. 2-2-3</li>
                            <li><strong>Heures/semaine</strong> : Ex. 4 heures</li>
                            <li><strong>Format horaire</strong> : 2×2h, 3h ou 4h continu</li>
                        </ul>

                        <div class="alerte alerte-attention">
                            <strong>Astuce :</strong> Le format horaire est important pour le calcul correct de l'assiduité.
                        </div>
                    </div>

                    <!-- Carte: 2. Trimestre -->
                    <div class="carte" class="border-left-succes">
                        <h3 class="carte-titre-bleu">2. Définir le trimestre - MODULE SOURCE</h3>
                        <p><strong>Navigation :</strong> Réglages → Trimestre</p>
                        <p class="text-succes-bold">Ce module GÉNÈRE le calendrierComplet (source unique)</p>

                        <p><strong>Informations à saisir :</strong></p>
                        <ul>
                            <li><strong>Date de début</strong> : Premier jour de cours</li>
                            <li><strong>Date de fin</strong> : Dernier jour de cours</li>
                            <li><strong>Jours fériés</strong> : Congés prévus</li>
                            <li><strong>Congés imprévus</strong> : À ajouter en cours de trimestre</li>
                            <li><strong>Reprises</strong> : Si nécessaire</li>
                        </ul>

                        <p><strong>Génération automatique :</strong></p>
                        <ul>
                            <li>Calendrier complet sur 124 jours</li>
                            <li>Calcul automatique des semaines (5 jours cours = 1 semaine)</li>
                            <li>Gestion des congés et reprises</li>
                        </ul>

                        <div class="alerte alerte-succes">
                            <strong>API disponibles :</strong><br>
                            <code>obtenirCalendrierComplet()</code> - Récupère le calendrier<br>
                            <code>obtenirInfosJour(date)</code> - Détails d'une journée
                        </div>
                    </div>

                    <!-- Carte: 3. Groupe -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">3. Créer le groupe</h3>
                        <p><strong>Navigation :</strong> Réglages → Groupe</p>

                        <p><strong>Informations à saisir pour chaque étudiant :</strong></p>
                        <ul>
                            <li><strong>Numéro DA</strong> : Dossier administratif</li>
                            <li><strong>Nom</strong> : Nom de famille</li>
                            <li><strong>Prénom</strong> : Prénom</li>
                            <li><strong>Services adaptés (SA)</strong> : Si applicable</li>
                            <li><strong>CAF</strong> : Centre d'Aide en Français (si inscrit)</li>
                        </ul>

                        <p><strong>Options d'import :</strong></p>
                        <ul>
                            <li>Saisie manuelle</li>
                            <li>Import depuis fichier CSV (à venir)</li>
                        </ul>
                    </div>

                    <!-- Carte: 4. Horaire -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">4. Établir l'horaire</h3>
                        <p><strong>Navigation :</strong> Réglages → Horaire</p>
                        <div class="alerte alerte-attention">
                            <strong>Module en refonte :</strong> À venir - génération de seancesCompletes comme source unique
                        </div>

                        <p><strong>Fonctionnalités prévues :</strong></p>
                        <ul>
                            <li>Définition des séances hebdomadaires</li>
                            <li>Gestion des reprises (ex: "Horaire du lundi" le jeudi)</li>
                            <li>API : <code>obtenirSeancesCompletes()</code></li>
                        </ul>
                    </div>

                    <!-- Carte: 5. Pratiques PAN -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">5. Paramétrer les pratiques (PAN)</h3>
                        <p><strong>Navigation :</strong> Réglages → Pratique de notation</p>

                        <p><strong>Paramètres à définir :</strong></p>
                        <ul>
                            <li><strong>Nombre d'artefacts</strong> : 8-14 recommandé
                                <ul class="mt-5">
                                    <li>8 artefacts : Pour enseignants débutants</li>
                                    <li>12 artefacts : Configuration standard</li>
                                    <li>14 artefacts : Pour enseignants expérimentés</li>
                                </ul>
                            </li>
                            <li><strong>Système de jetons</strong> : 3-4 jetons maximum
                                <ul class="mt-5">
                                    <li>Jeton de délai : Report d'échéance sans pénalité</li>
                                    <li>Jeton de reprise : Possibilité de refaire un artefact</li>
                                </ul>
                            </li>
                            <li><strong>Méthode de sélection</strong> : N meilleurs artefacts (PAN)</li>
                        </ul>

                        <div class="alerte alerte-information">
                            <strong>PAN (Pratiques Alternatives de Notation) :</strong> Sélection automatique des N meilleurs artefacts pour l'évaluation finale, permettant aux étudiants de progresser sans pénaliser leurs erreurs initiales.
                        </div>
                    </div>

                    <!-- Carte: Checklist -->
                    <div class="carte" class="bg-bleu-tres-pale">
                        <h3 class="carte-titre-bleu">Checklist de configuration</h3>
                        <p>Avant de commencer à utiliser le système, assurez-vous d'avoir complété :</p>
                        <ul class="list-unstyled">
                            <li class="py-8">[ ] Informations du cours saisies</li>
                            <li class="py-8">[ ] Calendrier du trimestre généré</li>
                            <li class="py-8">[ ] Liste des étudiants importée/saisie</li>
                            <li class="py-8">[ ] Horaire défini (si disponible)</li>
                            <li class="py-8">[ ] Pratiques PAN paramétrées</li>
                        </ul>
                        <p class="titre-mt15-fw-bold-bleu">→ Vous êtes prêt à commencer le suivi hebdomadaire !</p>
                    </div>
                </div>

                <!-- ===================================
                     SOUS-SECTION 3: FORMATION ET DÉMONSTRATION
                     =================================== -->
                <div id="aide-formation" class="sous-section">
                    <h2>Formation et démonstration</h2>
                    <p class="text-muted">Modes de fonctionnement pour explorer l'application sans risque</p>

                    <!-- Carte: Modes de fonctionnement -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Les trois modes de l'application</h3>
                        <p>L'application offre trois modes de fonctionnement pour différents contextes d'utilisation :</p>

                        <div class="alerte-success-bleu-pale">
                            <h4 class="text-success-mb10">Mode Normal</h4>
                            <p><strong>Utilisation en contexte réel</strong> - Données authentiques des étudiants</p>
                            <ul class="mt-8">
                                <li>Toutes les modifications sont sauvegardées dans localStorage</li>
                                <li>Données réelles du cours</li>
                                <li>Mode par défaut de l'application</li>
                            </ul>
                        </div>

                        <div class="alerte-warning-jaune">
                            <h4 class="text-warning-856-mb10">Mode Simulé</h4>
                            <p><strong>Exploration et formation</strong> - Données fictives pour expérimenter</p>
                            <ul class="mt-8">
                                <li>Données sauvegardées avec préfixe <code>simulation_*</code></li>
                                <li>Totalement isolé des données réelles</li>
                                <li>Parfait pour apprendre sans risque</li>
                                <li>Permet de tester scénarios pédagogiques</li>
                            </ul>
                        </div>

                        <div class="alerte-info-cyan">
                            <h4 style="color: #0c5460; margin-bottom: 10px;">Mode Anonymisé</h4>
                            <p><strong>Démonstration publique</strong> - Données réelles avec noms fictifs</p>
                            <ul class="mt-8">
                                <li>Noms et prénoms remplacés par des noms fictifs</li>
                                <li>Préfixe "AN." devant les numéros de groupe</li>
                                <li>Lecture seule (aucune modification possible)</li>
                                <li>Idéal pour présentations et captures d'écran</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-information">
                            <strong>Basculer entre les modes :</strong> Utilisez le sélecteur de mode en haut à droite de l'interface (⚙️ Mode: Normal/Simulé/Anonymisé)
                        </div>
                    </div>

                    <!-- Carte: Groupe fictif 9999 -->
                    <div class="carte" class="border-left-purple">
                        <h3 class="carte-titre-bleu">Le Groupe 9999 : Votre laboratoire pédagogique</h3>
                        <p><strong>Navigation :</strong> Réglages → Groupe → Section "Clonage de groupe"</p>

                        <p class="text-105-mt15"><strong>Qu'est-ce que le Groupe 9999 ?</strong></p>
                        <p>C'est un groupe fictif réservé pour :</p>
                        <ul>
                            <li>Formation des enseignants</li>
                            <li>Démonstrations pédagogiques</li>
                            <li>Tests de scénarios d'intervention</li>
                            <li>Exploration de l'application sans risque</li>
                        </ul>

                        <div class="carte-grise-my15">
                            <p class="m-0-fw600-bleu">
                                ✨ Avantage clé : Données réalistes sans impact sur vos vrais étudiants
                            </p>
                        </div>

                        <p class="titre-105-mt20"><strong>Deux méthodes de création :</strong></p>

                        <div class="alerte-info-bleu">
                            <h4 class="titre-bleu-mb10">Cloner depuis Groupe 1</h4>
                            <p><strong>Clone fidèle de vos données réelles</strong></p>
                            <p>Le système copie :</p>
                            <ul>
                                <li>Les étudiants avec noms fictifs cohérents</li>
                                <li>Toutes les évaluations existantes</li>
                                <li>L'historique des présences</li>
                                <li>Les indices A, C, P recalculés</li>
                            </ul>
                            <p class="mt-10"><strong>Utilisation :</strong> Parfait pour créer un jumeau numérique de votre groupe réel et explorer différentes stratégies d'intervention.</p>
                        </div>

                        <div class="alerte-warning-orange-fonce">
                            <h4 class="titre-orange-mb10">🎲 Générer groupe aléatoire</h4>
                            <p><strong>Création complète avec données réalistes</strong></p>

                            <p class="mt-12-fw-600">Configuration :</p>
                            <ul>
                                <li><strong>Nombre d'étudiants</strong> : Choisir entre 5 et 50 étudiants</li>
                                <li><strong>Noms générés</strong> : 85% québécois, 15% diversifiés (africains, latinos, arabes)</li>
                                <li><strong>Programmes variés</strong> : Assignation aléatoire parmi 15 programmes collégiaux</li>
                            </ul>

                            <p class="mt-12-fw-600">Le système génère automatiquement :</p>
                            <ul>
                                <li><strong>Étudiants fictifs</strong> : DA format 9999XXX (9999001, 9999002, etc.)</li>
                                <li><strong>Évaluations réalistes</strong> : 3 à 6 par étudiant
                                    <ul class="mt-5">
                                        <li>Notes suivant distribution normale (moyenne 75%, écart-type 10%)</li>
                                        <li>Critères SRPNF cohérents avec variation naturelle (±5%)</li>
                                        <li>Conversion automatique en niveaux IDME (I/D/M/E)</li>
                                    </ul>
                                </li>
                                <li><strong>Présences variées</strong> : Taux d'assiduité entre 75% et 95%</li>
                                <li><strong>Indices calculés</strong> : A, C, P recalculés automatiquement</li>
                            </ul>

                            <div class="alerte alerte-succes" class="mt-15">
                                <strong>Avantage pédagogique :</strong> Aucun prérequis nécessaire ! Génère un groupe complet même si vous n'avez pas encore créé de données réelles.
                            </div>

                            <p class="mt-12-fw-600">Étapes de génération :</p>
                            <ol class="lh-relaxed">
                                <li>Accéder à <strong>Réglages → Groupe</strong></li>
                                <li>Dans la section "Clonage de groupe", définir le nombre d'étudiants (5-50)</li>
                                <li>Cliquer sur <strong>🎲 Générer groupe aléatoire</strong></li>
                                <li>Patienter quelques secondes (calculs automatiques)</li>
                                <li>Confirmation : Le système affiche le nombre d'étudiants et d'évaluations créés</li>
                            </ol>

                            <p class="mt-12-fw-600">Réalisme statistique :</p>
                            <p>Les notes générées suivent une <strong>distribution normale de Gauss</strong> :</p>
                            <ul>
                                <li>Environ 68% des notes entre 65% et 85%</li>
                                <li>Environ 95% des notes entre 55% et 95%</li>
                                <li>Pas de valeurs aberrantes ou "fafelues"</li>
                                <li>Reflète la distribution naturelle des résultats étudiants</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-attention" class="mt-15">
                            <strong>⚠️ Important :</strong> Générer un nouveau groupe efface l'ancien Groupe 9999. Utilisez l'export/import si vous voulez conserver plusieurs scénarios.
                        </div>
                    </div>

                    <!-- Carte: Export/Import de groupes fictifs -->
                    <div class="carte" style="border-left: 4px solid #673ab7;">
                        <h3 class="carte-titre-bleu">📦 Partager des scénarios pédagogiques</h3>
                        <p><strong>Navigation :</strong> Réglages → Groupe → Section "Import / Export"</p>

                        <p class="text-105-mt15"><strong>Pourquoi exporter/importer ?</strong></p>
                        <ul>
                            <li><strong>Formation</strong> : Partager des cas types avec collègues</li>
                            <li><strong>Tutoriels</strong> : Créer des scénarios pédagogiques documentés</li>
                            <li><strong>Archivage</strong> : Conserver plusieurs versions du Groupe 9999</li>
                            <li><strong>Démonstrations</strong> : Préparer des contextes de présentation</li>
                        </ul>

                        <p class="titre-105-mt20"><strong> Exporter le Groupe 9999</strong></p>
                        <ol class="lh-relaxed">
                            <li>Cliquer sur <strong> Exporter le Groupe 9999</strong></li>
                            <li>Un fichier JSON est téléchargé : <code>groupe-fictif-9999_YYYY-MM-DD.json</code></li>
                            <li>Ce fichier contient :
                                <ul class="mt-5">
                                    <li>Tous les étudiants du Groupe 9999</li>
                                    <li>Toutes leurs évaluations</li>
                                    <li>Historiques de présences</li>
                                    <li>Indices A, C, P</li>
                                    <li>Mapping (si créé par clonage)</li>
                                </ul>
                            </li>
                        </ol>

                        <p class="titre-105-mt20"><strong> Importer un groupe fictif</strong></p>
                        <ol class="lh-relaxed">
                            <li>Cliquer sur <strong> Importer un groupe fictif</strong></li>
                            <li>Sélectionner un fichier <code>.json</code> exporté précédemment</li>
                            <li>Confirmer l'importation (remplacera le Groupe 9999 actuel)</li>
                            <li>Le système charge toutes les données et recalcule les indices</li>
                        </ol>

                        <div class="carte-gradient-bleu">
                            <p class="titre-11-bold-bleu-mb10">
                                💡 Workflow recommandé pour formation :
                            </p>
                            <ol class="lh-2">
                                <li>Générer un Groupe 9999 réaliste (ou cloner Groupe 1)</li>
                                <li>Exporter le groupe : crée un fichier de sauvegarde</li>
                                <li>Basculer en <strong>Mode Simulé</strong> (sélecteur en haut à droite)</li>
                                <li>Explorer librement : évaluer, modifier, tester interventions</li>
                                <li>Si nécessaire, ré-importer le fichier pour recommencer</li>
                            </ol>
                        </div>

                        <div class="alerte alerte-information" class="mt-15">
                            <strong>Format du fichier :</strong> JSON standard, lisible et modifiable. Inclut métadonnées (version Beta 84, date d'export, statistiques).
                        </div>
                    </div>

                    <!-- Carte: Cas d'usage pédagogiques -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">🎓 Cas d'usage pédagogiques</h3>

                        <div class="alerte-success-green">
                            <h4 class="text-success-dark-mb10">1. Formation des enseignants</h4>
                            <p><strong>Objectif :</strong> Apprendre à utiliser le système sans données réelles</p>
                            <ul>
                                <li>Générer un groupe aléatoire de 15-20 étudiants</li>
                                <li>Basculer en mode Simulé</li>
                                <li>Pratiquer la saisie de présences</li>
                                <li>Explorer les profils étudiants</li>
                                <li>Tester différentes interventions RàI</li>
                            </ul>
                        </div>

                        <div class="alerte-warning-orange-clair">
                            <h4 class="titre-orange-mb10">2. Test de scénarios d'intervention</h4>
                            <p><strong>Objectif :</strong> Planifier interventions avant d'agir sur vrais étudiants</p>
                            <ul>
                                <li>Cloner votre Groupe 1 réel → Groupe 9999</li>
                                <li>Identifier étudiants à risque dans le clone</li>
                                <li>Simuler différentes stratégies d'intervention</li>
                                <li>Observer impact sur indices A-C-P</li>
                                <li>Affiner approche avant intervention réelle</li>
                            </ul>
                        </div>

                        <div class="alerte-purple">
                            <h4 class="text-purple-mb10">3. Démonstrations et présentations</h4>
                            <p><strong>Objectif :</strong> Présenter le système sans compromettre confidentialité</p>
                            <ul>
                                <li>Créer Groupe 9999 avec profils variés (15-25 étudiants)</li>
                                <li>Basculer en mode Anonymisé pour présentation publique</li>
                                <li>Montrer tableaux de bord, profils, échelles de risque</li>
                                <li>Expliquer logique des indices A-C-P</li>
                                <li>Capturer écrans pour documentation sans risque RGPD</li>
                            </ul>
                        </div>

                        <div class="alerte-info-bleu-ciel">
                            <h4 style="color: #01579b; margin-bottom: 10px;">4. Partage de bonnes pratiques</h4>
                            <p><strong>Objectif :</strong> Créer bibliothèque de cas pédagogiques</p>
                            <ul>
                                <li>Créer scénarios types (ex: "Groupe avec 5 étudiants à risque élevé")</li>
                                <li>Exporter en JSON avec nom descriptif</li>
                                <li>Partager avec collègues ou communauté</li>
                                <li>Importer cas partagés pour apprentissage collaboratif</li>
                                <li>Documenter stratégies efficaces testées</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-succes" class="mt-15">
                            <strong>Principe directeur :</strong> Le Groupe 9999 est votre terrain de jeu pédagogique. Explorez, expérimentez, apprenez sans risque !
                        </div>
                    </div>
                </div>

                <!-- ===================================
                     SOUS-SECTION 4: UTILISATION HEBDOMADAIRE
                     =================================== -->
                <div id="aide-utilisation" class="sous-section">
                    <h2>Utilisation hebdomadaire</h2>
                    <p class="text-muted">Routine de saisie et flux de travail (5-15 min/semaine)</p>

                    <!-- Carte: Vue d'ensemble -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Flux de travail hebdomadaire</h3>
                        <p><strong>Temps estimé :</strong> 5-15 minutes par semaine</p>

                        <div class="carte-gradient-bleu">
                            <p class="titre-11-bold-bleu-mb15">Étapes recommandées :</p>
                            <ol class="lh-2">
                                <li><strong>Pendant/après le cours</strong> : Noter les absences/retards</li>
                                <li><strong>Fin de cours</strong> : Saisir les présences (2-5 min)</li>
                                <li><strong>Vérification automatique</strong> : Observer les changements d'indices</li>
                                <li><strong>Action si nécessaire</strong> : Intervenir si seuils critiques atteints</li>
                            </ol>
                        </div>
                    </div>

                    <!-- Carte: Saisir les présences -->
                    <div class="carte" class="border-left-succes">
                        <h3 class="carte-titre-bleu">1. Saisir les présences - MODULE SOURCE</h3>
                        <p><strong>Navigation :</strong> Présences → Saisie</p>
                        <p class="text-succes-bold">Ce module GÉNÈRE les indicesAssiduiteDetailles (source unique)</p>

                        <p><strong>Interface de saisie rapide :</strong></p>
                        <ul>
                            <li><strong>Format 2×2h</strong> : Saisir 2h par bloc (ou 1h/0h si partiel/absent)</li>
                            <li><strong>Retards</strong> : Décompter proportionnellement
                                <ul class="mt-5">
                                    <li>Ex: 20 min de retard sur 2h = 1.7h</li>
                                </ul>
                            </li>
                            <li><strong>Départs anticipés</strong> : Décompter de même</li>
                            <li><strong>Absences justifiées</strong> : Même traitement (le système ne distingue pas)</li>
                        </ul>

                        <p><strong>Cas particulier - Reprises :</strong></p>
                        <ul>
                            <li>Si un étudiant rattrape dans un autre groupe : additionner les heures</li>
                            <li>Ex: 2h cours officiel + 2h reprise = 4h dans la cellule</li>
                        </ul>

                        <div class="alerte alerte-succes">
                            <strong>Calcul automatique :</strong> Le système génère immédiatement les indices d'assiduité (A) qui alimentent tous les diagnostics.
                        </div>

                        <p><strong>Périodes configurables :</strong></p>
                        <ul>
                            <li>Assiduité sommative : sur tout le trimestre</li>
                            <li>Assiduité alternative : sur les 3, 7 ou 12 derniers artefacts</li>
                        </ul>
                    </div>

                    <!-- Carte: Évaluer les productions -->
                    <div class="carte" class="border-left-succes">
                        <h3 class="carte-titre-bleu">2. Évaluer les productions - MODULE SOURCE</h3>
                        <p><strong>Navigation :</strong> Portfolio → Évaluation</p>
                        <p class="text-succes-bold">Ce module GÉNÈRE les indicesCP (Complétion & Performance)</p>

                        <p><strong>Processus d'évaluation :</strong></p>
                        <ol class="lh-relaxed">
                            <li><strong>Lecture et annotation</strong> : Lire le travail de l'étudiant</li>
                            <li><strong>Attribution notes SRPNF</strong> : Noter selon les 5 critères (échelle 1-4)</li>
                            <li><strong>Comptage erreurs</strong> : Saisir le nombre d'erreurs linguistiques</li>
                            <li><strong>Confirmation mots</strong> : Vérifier le nombre de mots</li>
                            <li><strong>Diagnostic automatique</strong> : Observer forces/défis/parcours</li>
                            <li><strong>Rétroaction personnalisée</strong> : Basée sur les diagnostics</li>
                        </ol>

                        <p><strong>Temps estimé :</strong> 15-30 min par production (selon complexité)</p>

                        <div class="alerte alerte-succes">
                            <strong>Génération automatique :</strong>
                            <ul class="m-10-0-0-0">
                                <li>Indices C (Complétion) : % d'artefacts remis</li>
                                <li>Indices P (Performance) : Qualité moyenne des productions</li>
                                <li>Historique longitudinal : Évolution dans le temps</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Carte: Gérer les jetons -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">3. Gérer les jetons</h3>
                        <p><strong>Navigation :</strong> Portfolio → Gestion</p>

                        <p><strong>Types de jetons :</strong></p>
                        <ul>
                            <li><strong>Jeton de délai</strong> : Report d'échéance sans pénalité
                                <ul class="mt-5">
                                    <li>À utiliser pour gérer les imprévus</li>
                                    <li>Maintient l'exigence de complétion</li>
                                </ul>
                            </li>
                            <li><strong>Jeton de reprise</strong> : Possibilité de refaire un artefact
                                <ul class="mt-5">
                                    <li>Encourage l'amélioration continue</li>
                                    <li>Philosophie PAN : apprendre de ses erreurs</li>
                                </ul>
                            </li>
                        </ul>

                        <p><strong>Suivi automatique :</strong> Le système compte automatiquement les jetons utilisés (maximum 3-4 selon configuration).</p>

                        <div class="alerte alerte-attention">
                            <strong>Bonnes pratiques :</strong> Expliquer clairement le système de jetons aux étudiants dès le début du trimestre.
                        </div>
                    </div>

                    <!-- Carte: Gestion des travaux irrecevables et non-remis -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">4. Gestion des travaux irrecevables et non-remis</h3>
                        <p><strong>Navigation :</strong> Portfolio → Évaluation</p>

                        <p>Le système distingue clairement deux situations différentes qui affectent les calculs de manière distincte :</p>

                        <div class="alerte-info-bleu">
                            <h4 class="titre-bleu-mb10">Travail NON REMIS</h4>
                            <p><strong>Définition :</strong> L'étudiant n'a pas soumis de travail.</p>
                            <p><strong>Affichage :</strong> Badge «Non remis» dans le tableau des évaluations.</p>
                            <p><strong>Impact sur les calculs :</strong></p>
                            <ul class="m-10-0-0-0">
                                <li><strong>Complétion (C)</strong> : Compte dans le dénominateur mais pas dans le numérateur</li>
                                <li><strong>Performance (P)</strong> : Exclu du calcul de la moyenne</li>
                                <li><strong>Moyenne</strong> : Exclu du calcul</li>
                            </ul>
                            <p><strong>Exemple :</strong> Si un étudiant a 7 productions remises sur 9 attendues, son indice C = 78%</p>
                        </div>

                        <div class="alerte alerte-attention">
                            <h4 class="titre-bleu-mb10">Travail NON RECEVABLE (Plagiat ou IA)</h4>
                            <p><strong>Définition :</strong> Le travail existe mais ne peut être évalué pour des raisons d'intégrité académique.</p>
                            <p><strong>Affichage :</strong></p>
                            <ul class="m-10-0-0-0">
                                <li>Badge rouge «Non recevable (Plagiat)» ou «Non recevable (IA)»</li>
                                <li>Niveau : 0</li>
                                <li>Note : -- (deux tirets)</li>
                            </ul>
                            <p><strong>Impact sur les calculs :</strong></p>
                            <ul class="m-10-0-0-0">
                                <li><strong>Complétion (C)</strong> : Exclu du total attendu (comme si la production n'existait pas)</li>
                                <li><strong>Performance (P)</strong> : Exclu du calcul de la moyenne</li>
                                <li><strong>Moyenne</strong> : Complètement exclu</li>
                            </ul>
                            <p><strong>Exemple :</strong> Si un étudiant a 7 productions recevables + 1 plagiat sur 9 attendues, son indice C = 7/8 = 88% (le plagiat n'est pas compté dans le total)</p>
                        </div>

                        <div class="alerte-info-bleu">
                            <h4 class="titre-bleu-mb10">Travail SOUPÇONNÉ (À vérifier)</h4>
                            <p><strong>Définition :</strong> Cas en investigation, pas encore confirmé.</p>
                            <p><strong>Affichage :</strong> Badge orange «À vérifier»</p>
                            <p><strong>Impact sur les calculs :</strong> Aucun - le travail est évalué normalement en attendant la décision finale.</p>
                            <p><strong>Usage :</strong> Permet de documenter un doute avant de prendre une décision définitive.</p>
                        </div>

                        <p><strong>Procédure d'application :</strong></p>
                        <ol class="lh-relaxed">
                            <li>Charger l'évaluation (existante ou nouvelle)</li>
                            <li>Dans le champ «Intégrité académique», sélectionner :
                                <ul class="mt-5">
                                    <li><strong>Recevable</strong> : Travail normal (par défaut)</li>
                                    <li><strong>Soupçon à vérifier</strong> : En investigation</li>
                                    <li><strong>Non recevable - Plagiat</strong> : Copie confirmée</li>
                                    <li><strong>Non recevable - IA non autorisée</strong> : Utilisation d'IA détectée</li>
                                </ul>
                            </li>
                            <li>Optionnel : Ajouter des notes (preuves, références, contexte)</li>
                            <li>Si non recevable : tous les critères passent automatiquement à «0 - Aucun»</li>
                            <li>Sauvegarder l'évaluation</li>
                        </ol>

                        <div class="alerte alerte-succes">
                            <strong>Jetons de reprise pour les non recevables :</strong> Un travail non recevable peut recevoir un jeton de reprise pour permettre à l'étudiant de soumettre un nouveau travail original. La nouvelle évaluation remplacera l'ancienne dans tous les calculs.
                        </div>

                        <p><strong>Exemple concret (Étudiant avec 9 artefacts) :</strong></p>
                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>Production</th>
                                    <th>Statut</th>
                                    <th class="text-center">Note</th>
                                    <th>Compte dans C ?</th>
                                    <th>Compte dans P ?</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Artefact 1</td>
                                    <td>Recevable</td>
                                    <td class="text-center">68.5%</td>
                                    <td>Oui (remis)</td>
                                    <td>Oui</td>
                                </tr>
                                <tr>
                                    <td>Artefact 2</td>
                                    <td>Non remis</td>
                                    <td class="text-center">-</td>
                                    <td>Non (manquant)</td>
                                    <td>Non</td>
                                </tr>
                                <tr>
                                    <td>Artefact 3</td>
                                    <td>Non remis</td>
                                    <td class="text-center">-</td>
                                    <td>Non (manquant)</td>
                                    <td>Non</td>
                                </tr>
                                <tr style="background-color: #ffebee;">
                                    <td>Artefact 4</td>
                                    <td>Non recevable (Plagiat)</td>
                                    <td class="text-center">--</td>
                                    <td>N/A (exclu du total)</td>
                                    <td>Non</td>
                                </tr>
                                <tr>
                                    <td>Artefact 5</td>
                                    <td>Recevable</td>
                                    <td class="text-center">78%</td>
                                    <td>Oui (remis)</td>
                                    <td>Oui</td>
                                </tr>
                                <tr>
                                    <td>Artefacts 6-9</td>
                                    <td>Non remis</td>
                                    <td class="text-center">-</td>
                                    <td>Non (manquant)</td>
                                    <td>Non</td>
                                </tr>
                            </tbody>
                        </table>

                        <p><strong>Résultats des calculs :</strong></p>
                        <ul>
                            <li><strong>Évaluations comptées :</strong> 2 (Artefacts 1 et 5 seulement)</li>
                            <li><strong>Moyenne affichée :</strong> (68.5 + 78) / 2 = 73.3%</li>
                            <li><strong>Indice C :</strong> 2 remis / 8 attendus = 25% (Artefact 4 exclu du dénominateur)</li>
                            <li><strong>Indice P :</strong> 73.3%</li>
                        </ul>

                        <div class="alerte alerte-info">
                            <strong>Principe clé :</strong> Un travail non recevable n'est pas une note de 0%, c'est une absence d'évaluation. Le système fait comme si cette production n'avait jamais existé dans les attentes du cours.
                        </div>
                    </div>

                    <!-- Carte: Vérification hebdomadaire -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">5. Vérification hebdomadaire</h3>
                        <p><strong>Navigation :</strong> Tableau de bord → Aperçu</p>

                        <p><strong>Indices à surveiller :</strong></p>
                        <ul>
                            <li><strong>Assiduité (AE/AI)</strong> : Sommative et alternative (3 derniers cours)</li>
                            <li><strong>Complétion (C)</strong> : % d'artefacts remis</li>
                            <li><strong>Performance (P)</strong> : Qualité moyenne</li>
                            <li><strong>Risque (R)</strong> : Calcul automatique 1-(A×C×P)</li>
                        </ul>

                        <p><strong>Seuils d'alerte critiques :</strong></p>
                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>Indice</th>
                                    <th class="text-center">Seuil critique</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Assiduité</td>
                                    <td class="text-center">&lt; 70%</td>
                                    <td>Rencontre immédiate</td>
                                </tr>
                                <tr>
                                    <td>Complétion</td>
                                    <td class="text-center">&lt; 70%</td>
                                    <td>Investigation obstacles</td>
                                </tr>
                                <tr>
                                    <td>Performance</td>
                                    <td class="text-center">&lt; 60%</td>
                                    <td>Soutien pédagogique</td>
                                </tr>
                                <tr>
                                    <td>Risque</td>
                                    <td class="text-center">&gt; 50%</td>
                                    <td>Plan d'intervention personnalisé</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="alerte alerte-erreur">
                            <strong>Détérioration récente :</strong> Comparer les indices sommatifs et alternatifs pour détecter les changements récents, même chez des étudiants au bilan global acceptable.
                        </div>
                    </div>

                    <!-- Carte: Collaboration entre collègues -->
                    <div class="carte" class="border-left-purple">
                        <h3 class="carte-titre-bleu">6. Collaboration entre collègues</h3>
                        <p><strong>Partage de matériel pédagogique via Import/Export</strong></p>

                        <p>Le système permet de partager facilement du matériel pédagogique entre enseignant·es, favorisant la collaboration départementale et l'harmonisation des pratiques.</p>

                        <div class="carte-purple-my15">
                            <h4 class="text-purple-mb10">Matériel partageable (JSON)</h4>
                            <p class="mb-10-only">Chaque type de matériel peut être exporté et partagé :</p>
                            <ul class="lh-relaxed">
                                <li><strong>Grilles de critères</strong> (Matériel → Critères d'évaluation)
                                    <ul class="mt-5-text-95">
                                        <li>Export : <code>grilles-criteres-YYYY-MM-DD.json</code></li>
                                        <li>Contient : critères SRPNF, pondérations, descriptions</li>
                                    </ul>
                                </li>
                                <li><strong>Échelles de performance</strong> (Matériel → Niveaux de performance)
                                    <ul class="mt-5-text-95">
                                        <li>Export : <code>echelle-performance-YYYY-MM-DD.json</code></li>
                                        <li>Contient : niveaux IDME, seuils, descriptions</li>
                                    </ul>
                                </li>
                                <li><strong>Productions</strong> (Matériel → Productions)
                                    <ul class="mt-5-text-95">
                                        <li>Export : <code>productions-YYYY-MM-DD.json</code></li>
                                        <li>Contient : artefacts, pondérations, liens avec grilles</li>
                                    </ul>
                                </li>
                                <li><strong>Cartouches de rétroaction</strong> (Matériel → Rétroactions)
                                    <ul class="mt-5-text-95">
                                        <li>Export : <code>cartouches-retroaction-YYYY-MM-DD.json</code></li>
                                        <li>Contient : commentaires prédéfinis par critère et niveau</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>

                        <div class="carte-green-my15">
                            <h4 class="text-success-dark-mb10">🤝 Scénarios de collaboration</h4>

                            <p><strong>1. Harmonisation départementale</strong></p>
                            <ul class="mb-15-lh">
                                <li>Plusieurs enseignant·es du même cours collaborent</li>
                                <li>Création de grilles et échelles communes</li>
                                <li>Partage de cartouches standardisées</li>
                                <li>Cohérence interdépartementale</li>
                            </ul>

                            <p><strong>2. Mentorat et formation</strong></p>
                            <ul class="mb-15-lh">
                                <li>Enseignant·e expérimenté·e partage avec nouvel·le collègue</li>
                                <li>Exemples de bonnes pratiques</li>
                                <li>Modèles prêts à adapter</li>
                                <li>Réduction du temps de préparation initial</li>
                            </ul>

                            <p><strong>3. Réutilisation entre sessions</strong></p>
                            <ul class="mb-15-lh">
                                <li>Exporter son propre matériel en fin de trimestre</li>
                                <li>Réimporter et ajuster pour la session suivante</li>
                                <li>Amélioration continue du matériel</li>
                                <li>Conservation d'une base de départ éprouvée</li>
                            </ul>

                            <p><strong>4. Communautés de pratique</strong></p>
                            <ul class="lh-16">
                                <li>Partage de matériel entre collèges</li>
                                <li>Contribution à un répertoire commun</li>
                                <li>Mutualisation des efforts de création</li>
                            </ul>
                        </div>

                        <div class="carte-orange-my15">
                            <h4 class="titre-orange-mb10">📄 Import spécial : fichiers .txt Markdown</h4>
                            <p class="mb-10-only">Pour les <strong>cartouches de rétroaction</strong> uniquement, vous pouvez aussi :</p>
                            <ul class="lh-16">
                                <li>Rédiger vos commentaires dans un document texte (Word, Google Docs, etc.)</li>
                                <li>Sauvegarder au format .txt avec structure Markdown</li>
                                <li>Importer directement dans une cartouche en édition</li>
                                <li>Gain de temps : rédaction dans votre environnement préféré</li>
                            </ul>
                            <p class="text-09-mt10-deep-orange"><strong>Format requis :</strong> Les noms de critères dans le fichier doivent correspondre exactement à ceux de la grille (ex: STRUCTURE, RIGUEUR, PLAUSIBILITÉ, NUANCE).</p>
                        </div>

                        <div class="alerte alerte-info">
                            <strong>🔒 Protection de la vie privée :</strong> Les exports de matériel pédagogique ne contiennent JAMAIS de données confidentielles (noms d'étudiants, numéros DA, notes individuelles, présences). Seul le matériel pédagogique réutilisable est exporté.
                        </div>

                        <div class="carte-gradient-bleu-mt15">
                            <h4 class="titre-bleu-mb10">Flux typique de partage</h4>
                            <ol class="lh-relaxed">
                                <li><strong>Enseignant·e A</strong> : Exporte son matériel (boutons d'export dans chaque section)</li>
                                <li><strong>Partage</strong> : Fichiers JSON envoyés par courriel, Drive, Teams, etc.</li>
                                <li><strong>Enseignant·e B</strong> : Importe les fichiers (boutons d'import dans chaque section)</li>
                                <li><strong>Adaptation</strong> : Ajuste le matériel selon ses besoins</li>
                                <li><strong>Utilisation</strong> : Matériel prêt pour le trimestre</li>
                            </ol>
                        </div>
                    </div>

                    <!-- Carte: Interventions RàI avec présences facultatives -->
                    <div class="carte" class="border-left-primary">
                        <h3 class="carte-titre-bleu">6. Interventions RàI avec absences motivées</h3>
                        <p><strong>Navigation :</strong> Tableau de bord → Interventions</p>

                        <p>Le système permet de documenter des interventions de Réponse à l'Intervention (RàI) de niveau 2 ou 3 tout en justifiant les absences des étudiants non participants, sans pénaliser leur assiduité.</p>

                        <div class="carte-gradient-bleu">
                            <h4 class="titre-bleu-mb10">📋 Contexte pédagogique</h4>
                            <p>Lorsque vous planifiez une intervention RàI ciblée :</p>
                            <ul class="lh-16">
                                <li>Certains étudiants ont besoin de soutien spécifique (niveau 2 ou 3)</li>
                                <li>Les autres étudiants reçoivent un congé ou travaillent de façon autonome</li>
                                <li>Les absents ne devraient PAS être pénalisés dans leur calcul d'assiduité</li>
                                <li><strong>Important :</strong> Les séances restent obligatoires, mais les absences sont justifiées</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-info">
                            <h4 class="titre-11-mb10">🎯 Objectif du système</h4>
                            <p class="mb-0-only">Permettre de <strong>documenter les présences</strong> aux interventions tout en <strong>marquant les absences comme motivées</strong>, afin qu'elles ne pénalisent pas l'indice d'assiduité.</p>
                        </div>

                        <div class="carte-gradient-bleu">
                            <h4 class="titre-bleu-mb10">🔍 Distinction entre niveaux 2 et 3</h4>
                            <p class="mb-10"><strong>Le système traite différemment les interventions selon leur nature :</strong></p>

                            <div style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 12px;">
                                <p class="mb-5"><strong style="color: var(--orange-accent);">Niveau 2 (Préventif - en classe ou en période de disponibilité)</strong></p>
                                <ul class="lh-16">
                                    <li><strong>Contexte :</strong> Intervention en classe pendant le cours régulier</li>
                                    <li><strong>Participants</strong> (niveaux 2-3 qui ont besoin de soutien) :
                                        <ul class="mt-5-text-95">
                                            <li>2 heures enregistrées</li>
                                            <li>Compte au numérateur ET au dénominateur de l'assiduité</li>
                                        </ul>
                                    </li>
                                    <li><strong>Non-participants</strong> (niveau 1 qui n'ont pas besoin de soutien) :
                                        <ul class="mt-5-text-95">
                                            <li>0 heures enregistrées (absence motivée)</li>
                                            <li>Affichage en couleur ambre</li>
                                            <li>Ne compte NI au numérateur NI au dénominateur</li>
                                            <li><strong>Résultat :</strong> L'assiduité n'est pas pénalisée</li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>

                            <div style="background: white; padding: 12px; border-radius: 6px;">
                                <p class="mb-5"><strong style="color: var(--bleu-moyen);">Niveau 3 (Intensif - hors classe, au bureau)</strong></p>
                                <ul class="lh-16">
                                    <li><strong>Contexte :</strong> Rencontre individuelle ou petit groupe à votre bureau</li>
                                    <li><strong>Participants uniquement</strong> (étudiants convoqués) :
                                        <ul class="mt-5-text-95">
                                            <li>2 heures enregistrées</li>
                                            <li>Compte au numérateur ET au dénominateur de l'assiduité</li>
                                            <li><strong>Résultat :</strong> L'assiduité augmente (heures supplémentaires)</li>
                                        </ul>
                                    </li>
                                    <li><strong>Non-participants</strong> (autres étudiants) :
                                        <ul class="mt-5-text-95">
                                            <li>Aucune entrée créée (pas concernés par l'intervention)</li>
                                            <li>Aucun impact sur leur assiduité</li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="carte-orange-my15">
                            <h4 class="titre-orange-mb10">📝 Processus en 3 étapes</h4>

                            <p class="mb-5"><strong>ÉTAPE 1 : Planifier l'intervention</strong></p>
                            <ol class="lh-relaxed-mb15">
                                <li>Aller dans <strong>Tableau de bord → Interventions</strong></li>
                                <li>Cliquer sur « Planifier une intervention »</li>
                                <li>Remplir le formulaire :
                                    <ul class="mt-5-text-95">
                                        <li>Titre (ex: « Intervention Rigueur et Nuance »)</li>
                                        <li>Date et heure</li>
                                        <li>Type : Groupe (niveau 2) ou Individuel (niveau 3)</li>
                                        <li>Description optionnelle</li>
                                    </ul>
                                </li>
                                <li>Cliquer sur « Planifier l'intervention »</li>
                            </ol>

                            <p class="mb-5"><strong>ÉTAPE 2 : Marquer les présences pendant l'intervention</strong></p>
                            <ol class="lh-relaxed-mb15">
                                <li>Cliquer sur « Ouvrir » sur l'intervention créée</li>
                                <li>Cocher les étudiants présents à l'intervention</li>
                                <li>Ajouter des observations générales et notes individuelles (optionnel)</li>
                                <li>Cliquer sur « Marquer comme complétée »</li>
                            </ol>

                            <p class="mb-5"><strong>ÉTAPE 3 : Transfert automatique des présences</strong></p>
                            <p class="text-095-lh-16">Dès que vous marquez l'intervention comme complétée, le système transfère automatiquement les données vers le module de saisie des présences :</p>

                            <p class="mb-5-mt-10"><strong>Pour intervention niveau 2 (en classe) :</strong></p>
                            <ul class="lh-16">
                                <li><strong>Participants</strong> :
                                    <ul class="mt-5-text-95">
                                        <li>2 heures enregistrées</li>
                                        <li>Note : « Intervention RàI : [titre de l'intervention] »</li>
                                        <li>Compte au numérateur ET au dénominateur de l'assiduité</li>
                                    </ul>
                                </li>
                                <li><strong>Non-participants</strong> :
                                    <ul class="mt-5-text-95">
                                        <li>0 heures enregistrées (affichage en couleur ambre)</li>
                                        <li>Note : « Absence motivée RàI »</li>
                                        <li>Ne compte NI au numérateur NI au dénominateur (absence justifiée)</li>
                                    </ul>
                                </li>
                            </ul>

                            <p class="mb-5-mt-10"><strong>Pour intervention niveau 3 (hors classe) :</strong></p>
                            <ul class="lh-16">
                                <li><strong>Participants uniquement</strong> :
                                    <ul class="mt-5-text-95">
                                        <li>2 heures enregistrées</li>
                                        <li>Note : « Intervention RàI : [titre de l'intervention] »</li>
                                        <li>Compte au numérateur ET au dénominateur (augmente l'assiduité)</li>
                                    </ul>
                                </li>
                                <li><strong>Non-participants</strong> : Aucune entrée créée (pas concernés)</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-succes">
                            <h4 class="titre-11-mb10">✅ Résultat : Assiduité préservée</h4>
                            <p class="mb-10-only">Les étudiants qui n'ont pas participé à l'intervention (absence motivée) ne voient <strong>pas leur indice d'assiduité diminuer</strong>.</p>
                            <p class="text-095"><strong>Exemple :</strong> Un étudiant avec 85% d'assiduité qui a une absence motivée RàI conservera son 85%. Sans ce système, son assiduité chuterait automatiquement.</p>
                        </div>

                        <div class="carte-green-my15">
                            <h4 class="text-success-dark-mb10">🔍 Vérification du transfert</h4>
                            <p class="mb-10">Pour vérifier que le transfert a fonctionné correctement :</p>
                            <ol class="lh-relaxed">
                                <li>Aller dans <strong>Présences → Saisie</strong></li>
                                <li>Sélectionner la date de l'intervention</li>
                                <li>Vérifier dans le tableau :
                                    <ul class="mt-5-text-95">
                                        <li><strong>Pour niveau 2 (en classe) :</strong>
                                            <ul style="margin-top: 5px;">
                                                <li>Participants : 2h (vert) avec la note d'intervention</li>
                                                <li>Non-participants : 0h (ambre) avec « Absence motivée RàI »</li>
                                            </ul>
                                        </li>
                                        <li><strong>Pour niveau 3 (hors classe) :</strong>
                                            <ul style="margin-top: 5px;">
                                                <li>Participants : 2h (vert) avec la note d'intervention</li>
                                                <li>Non-participants : 2h par défaut (affichage normal, pas concernés)</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li>Pour niveau 2, consulter un profil étudiant non-participant pour confirmer que l'assiduité n'a pas baissé</li>
                            </ol>
                        </div>

                        <div class="alerte alerte-attention">
                            <h4 class="titre-11-mb10">⚠️ Important</h4>
                            <ul class="m-10-0-0-0-lh">
                                <li>Le transfert automatique se déclenche quand vous cliquez sur « Marquer comme complétée »</li>
                                <li>Si vous modifiez l'intervention (ajouter/retirer des étudiants), les changements se propagent automatiquement aux présences</li>
                                <li>Le tableau de présences se recharge automatiquement quand vous revenez sur la section</li>
                                <li>Si vous sauvegardez sans compléter, les données restent dans le module Interventions seulement</li>
                                <li>Le recalcul des indices d'assiduité se fait automatiquement après chaque modification</li>
                            </ul>
                        </div>

                        <p class="titre-mt15-fw-bold-bleu">Temps estimé : 5-10 minutes par intervention (planification + saisie présences)</p>
                    </div>

                    <!-- Carte: Temps estimés -->
                    <div class="carte" class="bg-bleu-tres-pale">
                        <h3 class="carte-titre-bleu">Temps estimés par activité</h3>
                        <table class="table-collapse">
                            <tr class="bg-white">
                                <td class="td-bleu-separee"><strong>Saisie présences</strong></td>
                                <td class="td-right-bleu">2-5 min</td>
                            </tr>
                            <tr class="bg-white">
                                <td class="td-bleu-separee"><strong>Évaluation production</strong></td>
                                <td class="td-right-bleu">15-30 min/production</td>
                            </tr>
                            <tr class="bg-white">
                                <td class="td-bleu-separee"><strong>Gestion jetons</strong></td>
                                <td class="td-right-bleu">1-2 min</td>
                            </tr>
                            <tr class="bg-white">
                                <td class="p-10"><strong>Vérification hebdomadaire</strong></td>
                                <td class="td-right">3-5 min</td>
                            </tr>
                        </table>
                        <p class="titre-mt15-fw-bold-bleu">Total hebdomadaire (hors évaluations) : 5-15 minutes</p>
                    </div>
                </div>

                <!-- ===================================
                     SOUS-SECTION 5: CONSULTATION
                     =================================== -->
                <div id="aide-consultation" class="sous-section">
                    <h2>Consultation et interprétation</h2>
                    <p class="text-muted">Prendre des décisions basées sur les données</p>

                    <!-- Carte: Tableau de bord Aperçu -->
                    <div class="carte" class="border-left-primary">
                        <h3 class="carte-titre-bleu">Tableau de bord → Aperçu - LECTEUR</h3>
                        <p><strong>Navigation :</strong> Tableau de bord → Aperçu</p>
                        <p class="text-primary-bold">Ce module LIT indicesAssiduiteDetailles et indicesCP</p>

                        <p><strong>Vue d'ensemble :</strong></p>
                        <ul>
                            <li>Liste complète de tous les étudiants</li>
                            <li>Indices A-C-P en un coup d'œil</li>
                            <li>Codes couleur pour identification rapide des risques</li>
                            <li>Filtres par niveau de risque (à venir)</li>
                        </ul>

                        <p><strong>Action :</strong> Identifier rapidement qui nécessite une intervention.</p>

                        <div class="alerte alerte-information">
                            <strong>Rechargement automatique :</strong> Les données se mettent à jour automatiquement après chaque saisie.
                        </div>
                    </div>

                    <!-- Carte: Profil étudiant -->
                    <div class="carte" class="border-left-primary">
                        <h3 class="carte-titre-bleu">Profil étudiant (détaillé) - LECTEUR</h3>
                        <p><strong>Navigation :</strong> Tableau de bord → Profil</p>
                        <p class="text-primary-bold">Ce module LIT toutes les sources de données</p>

                        <p><strong>Layout 2 colonnes :</strong></p>
                        <ul>
                            <li><strong>Sidebar gauche</strong> : Navigation Précédent/Suivant entre étudiants</li>
                            <li><strong>Zone principale</strong> : 3 sections structurées</li>
                        </ul>

                        <div class="carte-bleu-pale">
                            <h4 class="text-bleu-principal">Section 1 : Suivi de l'apprentissage</h4>
                            <ul class="mt-10">
                                <li><strong>Indices R (Risque)</strong> : Sommaire et alternatif (1-A×C×P)</li>
                                <li><strong>RàI (Niveau d'intervention)</strong> : 1, 2 ou 3</li>
                                <li><strong>Échelle de risque visuelle</strong> : Gradient 6 niveaux avec indicateur de position</li>
                                <li><strong>Recommandations</strong> : Selon niveau de risque</li>
                            </ul>
                        </div>

                        <div class="carte-bleu-pale-mt15">
                            <h4 class="text-bleu-principal">Section 2 : Développement des habiletés</h4>
                            <ul class="mt-10">
                                <li><strong>Performance SRPNF</strong> : Détail par critère (S, R, P, N, F)</li>
                                <li><strong>Forces identifiées</strong> : Critères ≥ 75%</li>
                                <li><strong>Défis identifiés</strong> : Critères &lt; 75%</li>
                                <li><strong>Diagnostic pattern</strong> : Stable / Défi spécifique / Blocage émergent / Blocage critique</li>
                            </ul>
                        </div>

                        <div class="carte-bleu-pale-mt15">
                            <h4 class="text-bleu-principal">Section 3 : Mobilisation</h4>
                            <ul class="mt-10">
                                <li><strong>Assiduité (A)</strong> : Sommative et alternative avec interprétation</li>
                                <li><strong>Complétion (C)</strong> : % d'artefacts remis</li>
                                <li><strong>Historique artefacts</strong> : Notes et évolution</li>
                                <li><strong>Toggles</strong> : Détails techniques et formules (masquables)</li>
                            </ul>
                        </div>

                        <p class="mt-15"><strong>Navigation intuitive :</strong> Boutons centrés Précédent/Suivant pour parcourir rapidement tous les profils.</p>
                    </div>

                    <!-- Carte: Interpréter les seuils -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Interpréter les diagnostics</h3>
                        <p><strong>Seuils harmonisés A/C/M :</strong> 70%, 80%, 85%</p>

                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>Niveau</th>
                                    <th class="text-center">Seuil</th>
                                    <th>Interprétation</th>
                                    <th>Action RàI</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong class="text-success-28">Favorable</strong></td>
                                    <td class="text-center">≥ 85%</td>
                                    <td>Excellent engagement et performance</td>
                                    <td>Niveau 1 - Enseignement universel</td>
                                </tr>
                                <tr>
                                    <td><strong class="text-info">Acceptable</strong></td>
                                    <td class="text-center">80-84%</td>
                                    <td>Bonne progression, surveiller</td>
                                    <td>Niveau 1 - Suivi régulier</td>
                                </tr>
                                <tr>
                                    <td><strong class="text-warning">Fragile</strong></td>
                                    <td class="text-center">70-79%</td>
                                    <td>Situation précaire, intervention ciblée</td>
                                    <td>Niveau 2 - Soutien ciblé</td>
                                </tr>
                                <tr>
                                    <td><strong class="text-danger-bs">Critique</strong></td>
                                    <td class="text-center">&lt; 70%</td>
                                    <td>Situation alarmante, action urgente</td>
                                    <td>Niveau 3 - Intervention intensive</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Carte: Patterns d'apprentissage -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Patterns d'apprentissage</h3>
                        <p>Le système identifie automatiquement 4 patterns selon la performance moyenne IDME et les défis identifiés :</p>

                        <div class="alerte-success-dark">
                            <h4 class="text-success-mb10">Stable</h4>
                            <p><strong>Critères :</strong> Performance &gt; 3.0 OU aucun défi majeur</p>
                            <p><strong>Intervention :</strong> RàI Niveau 1 - Enseignement universel avec suivi</p>
                            <p><strong>Action :</strong> Maintenir l'engagement, possibilités d'enrichissement</p>
                        </div>

                        <div class="alerte-warning-jaune">
                            <h4 class="text-warning-856-mb10">Défi spécifique</h4>
                            <p><strong>Critères :</strong> Performance ≤ 3.0 avec défis identifiés</p>
                            <p><strong>Intervention :</strong> RàI Niveau 2 - Soutien ciblé en petit groupe</p>
                            <p><strong>Action :</strong> Pratique guidée en s'appuyant sur les forces</p>
                        </div>

                        <div class="alerte-danger-rouge">
                            <h4 style="color: #dc3545; margin-bottom: 10px;">Blocage émergent</h4>
                            <p><strong>Critères :</strong> Assiduité ≥ 75% mais Complétion ou Performance &lt; 65%</p>
                            <p><strong>Intervention :</strong> RàI Niveau 2 - Intervention intensive personnalisée</p>
                            <p><strong>Action :</strong> Remédiation ciblée sur le critère en difficulté</p>
                        </div>

                        <div class="alerte-danger-dark">
                            <h4 class="text-white-mb10">Blocage critique</h4>
                            <p><strong>Critères :</strong> Engagement insuffisant (E &lt; 30%, formule: E = (A×C×P)^(1/3))</p>
                            <p><strong>Intervention :</strong> RàI Niveau 3 - Intervention très intensive ou spécialisée</p>
                            <p><strong>Action :</strong> Rencontre individuelle + CAF + Dépistage + Services adaptés si nécessaire</p>
                        </div>
                    </div>

                    <!-- Carte: Guide détaillé du profil étudiant (Phase 2) -->
                    <div class="carte" class="bg-f0f8ff">
                        <h3 class="carte-titre-bleu">Guide détaillé : Profil étudiant</h3>

                        <p class="mb-20">Le profil étudiant est l'outil central de diagnostic et d'intervention. Il est organisé en 3 grandes sections, chacune fournissant des informations complémentaires pour une vision complète de la progression de l'étudiant.</p>

                        <div class="alerte alerte-info">
                            <strong>Accès :</strong> Tableau de bord → Profil OU Tableau de bord → Liste des individus → Cliquer sur un nom
                        </div>

                        <hr class="separateur-section">

                        <h4 class="titre-section-haut">Section 1 : Suivi de l'apprentissage</h4>

                        <p><strong>Cette section affiche :</strong></p>
                        <ul>
                            <li><strong>Indice de risque (R)</strong> avec valeur en gros caractères</li>
                            <li><strong>Échelle de risque visuelle</strong> : gradient à 6 niveaux avec indicateur de position</li>
                            <li><strong>Indice RàI</strong> : niveau d'intervention recommandé (Universel / Ciblé / Intensif)</li>
                            <li><strong>Recommandations d'intervention</strong> : actions concrètes adaptées au niveau</li>
                        </ul>

                        <div class="carte-encadree">
                            <h5 class="titre-sans-marge-haut">Comment interpréter l'échelle de risque ?</h5>
                            <p>L'échelle visuelle affiche 6 zones de couleur, du vert foncé (Excellent ≥85%) au rouge foncé (Échec probable &lt;40%). Un indicateur triangulaire pointe vers la position exacte de l'étudiant.</p>

                            <table class="tableau" class="text-09-mt10">
                                <thead>
                                    <tr>
                                        <th>Position</th>
                                        <th>Couleur</th>
                                        <th>Interprétation</th>
                                        <th>Action immédiate</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="fw-bold">Zone verte foncée</td>
                                        <td>85-100%</td>
                                        <td>Excellent, autonome</td>
                                        <td>Valoriser, offrir enrichissements</td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold">Zone verte claire</td>
                                        <td>70-84%</td>
                                        <td>Bon, progression normale</td>
                                        <td>Suivi régulier, RàI niveau 1</td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold">Zone jaune</td>
                                        <td>60-69%</td>
                                        <td>Fragile, surveiller</td>
                                        <td>Interventions ciblées préventives en classe, RàI niveau 2</td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold">Zone orange</td>
                                        <td>50-59%</td>
                                        <td>À risque sérieux</td>
                                        <td>Plan d'action, RàI niveau 2</td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold">Zone rouge claire</td>
                                        <td>40-49%</td>
                                        <td>Critique, échec probable</td>
                                        <td>RàI niveau 3, rencontre urgente</td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold">Zone rouge foncée</td>
                                        <td>&lt; 40%</td>
                                        <td>Échec très probable</td>
                                        <td>Référer aux services, CAF</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="alerte-warning-or">
                            <h5 class="text-warning-856-mt0">Astuce : Toggle «Détails techniques»</h5>
                            <p>Cliquez sur ce bouton pour afficher :</p>
                            <ul class="m-5-0-0-20">
                                <li>La formule exacte de calcul de R : (2×A + C + P) / 4</li>
                                <li>Les valeurs numériques des indices primaires A, C, P</li>
                                <li>Les seuils précis utilisés pour déterminer le niveau RàI</li>
                            </ul>
                            <p class="mt-10"><strong>Utilité :</strong> Expliquer le calcul à un étudiant ou justifier une intervention auprès d'un service.</p>
                        </div>

                        <hr class="separateur-section">

                        <h4 class="titre-section-haut">Section 2 : Développement des habiletés et compétences</h4>

                        <p><strong>Cette section affiche :</strong></p>
                        <ul>
                            <li><strong>Performance IDME</strong> : niveau moyen selon l'échelle (I/D/M/E)</li>
                            <li><strong>Scores par critère SRPNF</strong> : tableau détaillé avec badges colorés</li>
                            <li><strong>Diagnostic pédagogique</strong> : forces et défis identifiés automatiquement</li>
                        </ul>

                        <div class="carte-encadree">
                            <h5 class="titre-sans-marge-haut">Comment lire le tableau SRPNF ?</h5>
                            <p>Le tableau présente 5 lignes (un critère par ligne) avec 3 colonnes :</p>

                            <ol>
                                <li><strong>Critère</strong> : Nom du critère avec sa pondération (ex: Structure 15%)</li>
                                <li><strong>Score pondéré</strong> : Moyenne pondérée des évaluations (ex: 0.72)</li>
                                <li><strong>Niveau IDME</strong> : Badge coloré indiquant le niveau atteint
                                    <ul class="mt-5">
                                        <li>Badge rouge : Insuffisant (&lt; .64)</li>
                                        <li>Badge orange : Développement (.65-.74)</li>
                                        <li>Badge bleu : Maîtrisé (.75-.84)</li>
                                        <li>Badge vert : Étendu (≥ .85)</li>
                                    </ul>
                                </li>
                            </ol>

                            <p class="mt-15"><strong>Exemple d'interprétation :</strong></p>
                            <div class="carte-code-light-sm">
                                Structure (15%) : 0.68 [Badge orange : Développement]<br>
                                Rigueur (20%)   : 0.72 [Badge orange : Développement]<br>
                                Plausibilité (10%) : 0.80 [Badge bleu : Maîtrisé]<br>
                                Nuance (25%)    : 0.58 [Badge rouge : Insuffisant]<br>
                                Français (30%)  : 0.75 [Badge bleu : Maîtrisé]
                            </div>

                            <p class="mt-10"><strong>→ Diagnostic :</strong> Forces en Plausibilité et Français (maîtrisés). Défi majeur en Nuance (insuffisant). Structure et Rigueur en développement.</p>
                        </div>

                        <div class="carte-encadree">
                            <h5 class="titre-sans-marge-haut">Comment utiliser le diagnostic pédagogique ?</h5>

                            <p>Le diagnostic automatique identifie :</p>
                            <ul>
                                <li><strong>Forces</strong> : Critères ≥ .75 (Maîtrisé ou Étendu)</li>
                                <li><strong>Défis</strong> : Critères &lt; .75 (Insuffisant ou Développement)</li>
                            </ul>

                            <p class="mt-15"><strong>Stratégies d'intervention différenciée :</strong></p>

                            <table class="tableau" class="mt-10">
                                <thead>
                                    <tr>
                                        <th>Situation</th>
                                        <th>Approche recommandée</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Défi Insuffisant (&lt; .64)</strong></td>
                                        <td>
                                            • Remédiation intensive individuelle<br>
                                            • Enseignement explicite du critère<br>
                                            • Pratique guidée avec rétroaction immédiate<br>
                                            • Référer aux services d'aide si blocage persistant
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>Défi Développement (.65-.74)</strong></td>
                                        <td>
                                            • Pratique guidée additionnelle<br>
                                            • S'appuyer sur les forces pour consolider<br>
                                            • Exercices ciblés sur le critère<br>
                                            • Rétroaction formative fréquente
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>Force Maîtrisée (.75-.84)</strong></td>
                                        <td>
                                            • Valoriser et encourager<br>
                                            • Proposer transfert à d'autres contextes<br>
                                            • Tutorat par les pairs (si applicable)<br>
                                            • Maintenir avec pratique autonome
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>Force Étendue (≥ .85)</strong></td>
                                        <td>
                                            • Enrichissement et approfondissement<br>
                                            • Tâches complexes et créatives<br>
                                            • Mentorat des pairs<br>
                                            • Autonomie accrue
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="alerte-warning-or">
                            <h5 class="text-warning-856-mt0">Astuce : Toggle «Voir formules»</h5>
                            <p>Affiche les formules exactes de calcul pour chaque critère :</p>
                            <ul class="m-5-0-0-20">
                                <li>Score pondéré = (Score1 × Pond1 + Score2 × Pond2 + ...) / Σ Pondérations</li>
                                <li>Seuils IDME pour chaque niveau (I/D/M/E)</li>
                                <li>Nombre d'évaluations prises en compte dans la moyenne</li>
                            </ul>
                        </div>

                        <hr class="separateur-section">

                        <h4 class="titre-section-haut">Section 3 : Mobilisation (A-C-P)</h4>

                        <p><strong>Cette section affiche :</strong></p>
                        <ul>
                            <li><strong>Assiduité (A)</strong> : Taux de présence + interprétation (Acceptable/Confortable/Maîtrisé)</li>
                            <li><strong>Complétion (C)</strong> : Taux de remise des travaux + interprétation</li>
                            <li><strong>Liste des artefacts</strong> : Tableau détaillé de toutes les productions évaluées</li>
                        </ul>

                        <div class="carte-encadree">
                            <h5 class="titre-sans-marge-haut">Comment interpréter les indices A et C ?</h5>

                            <p>Les deux indices utilisent les mêmes seuils harmonisés :</p>

                            <table class="tableau" class="mt-10">
                                <thead>
                                    <tr>
                                        <th>Seuil</th>
                                        <th>Interprétation</th>
                                        <th>Badge</th>
                                        <th>Signification</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>≥ 85%</td>
                                        <td>Maîtrisé</td>
                                        <td class="text-success-bold">Vert</td>
                                        <td>Engagement excellent, aucune inquiétude</td>
                                    </tr>
                                    <tr>
                                        <td>80-84%</td>
                                        <td>Confortable</td>
                                        <td class="text-info-bold">Bleu</td>
                                        <td>Bon engagement, surveiller pour maintenir</td>
                                    </tr>
                                    <tr>
                                        <td>70-79%</td>
                                        <td>Acceptable</td>
                                        <td class="text-warning-bold">Jaune</td>
                                        <td>Engagement minimal, attention requise</td>
                                    </tr>
                                    <tr>
                                        <td>&lt; 70%</td>
                                        <td>Insuffisant</td>
                                        <td style="color: #dc3545; font-weight: bold;">Rouge</td>
                                        <td>Mobilisation problématique, intervention</td>
                                    </tr>
                                </tbody>
                            </table>

                            <p class="mt-15"><strong>Exemples de profils :</strong></p>
                            <ul>
                                <li><strong>A=95%, C=90%</strong> → Étudiant très mobilisé, présent et productif</li>
                                <li><strong>A=85%, C=65%</strong> → Présent mais ne remet pas tous les travaux (procrastination ?)</li>
                                <li><strong>A=60%, C=85%</strong> → Absent souvent mais remet les travaux (maladie ? travail ?)</li>
                                <li><strong>A=55%, C=50%</strong> → Désengagement généralisé, intervention urgente</li>
                            </ul>
                        </div>

                        <div class="carte-encadree">
                            <h5 class="titre-sans-marge-haut">Comment lire le tableau des artefacts ?</h5>

                            <p>Le tableau affiche une ligne par production évaluée avec :</p>
                            <ol>
                                <li><strong>Production</strong> : Nom de l'évaluation (ex: Dissertation 1, Examen mi-session)</li>
                                <li><strong>Statut</strong> : Complété ✓ (vert) ou Non complété ✗ (rouge)</li>
                                <li><strong>Score</strong> : Pourcentage selon l'échelle IDME (ex: 78%)</li>
                                <li><strong>Niveau IDME</strong> : Badge coloré (I/D/M/E)</li>
                                <li><strong>Retenu PAN</strong> : ★ si l'artefact compte dans la note finale du portfolio</li>
                            </ol>

                            <div class="alerte alerte-info" class="mt-15">
                                <strong>📐 Astuce :</strong> Les artefacts marqués d'une étoile ★ sont ceux sélectionnés automatiquement par les règles PAN (les N meilleurs). Si un étudiant a 9 artefacts mais que seuls les 3 meilleurs comptent, seuls ces 3 auront l'étoile.
                            </div>

                            <p class="mt-15"><strong>Actions possibles depuis ce tableau :</strong></p>
                            <ul>
                                <li>Identifier rapidement les travaux non remis</li>
                                <li>Voir la progression de la performance dans le temps</li>
                                <li>Vérifier quels artefacts comptent réellement pour la note (★)</li>
                                <li>Détecter des patterns (ex: toujours faible en Structure)</li>
                            </ul>
                        </div>

                        <hr class="separateur-section">

                        <h4 class="titre-section-haut">Navigation entre étudiants</h4>

                        <div class="alerte-info-grise-my20">
                            <p>Les boutons <strong>« ← Précédent »</strong> et <strong>« Suivant → »</strong> en haut de la page permettent de naviguer rapidement entre les profils sans retourner à la liste.</p>

                            <p class="mt-10"><strong>Workflow recommandé pour révision complète :</strong></p>
                            <ol>
                                <li>Aller dans Tableau de bord → Liste des individus</li>
                                <li>Cliquer sur le premier étudiant</li>
                                <li>Consulter les 3 sections du profil</li>
                                <li>Prendre des notes d'intervention si nécessaire</li>
                                <li>Cliquer «Suivant →» pour passer au prochain</li>
                                <li>Répéter jusqu'au dernier étudiant</li>
                            </ol>

                            <div class="alerte alerte-succes" class="mt-15">
                                <strong>✓ Astuce :</strong> Les boutons sont désactivés visuellement (grisés) quand vous êtes au premier ou au dernier étudiant de la liste. Le curseur change pour indiquer qu'ils ne sont pas cliquables.
                            </div>
                        </div>

                        <hr class="separateur-section">

                        <h4 class="titre-section-haut">Checklist d'utilisation hebdomadaire</h4>

                        <div class="carte-bleu-border">
                            <p><strong>Pour un suivi efficace, consultez les profils régulièrement :</strong></p>

                            <table class="tableau" class="mt-15">
                                <thead>
                                    <tr>
                                        <th class="w-15">Fréquence</th>
                                        <th class="w-40">Action</th>
                                        <th class="w-45">Objectif</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Hebdomadaire</strong></td>
                                        <td>Consulter l'Aperçu du Tableau de bord</td>
                                        <td>Vue d'ensemble, identifier rapidement les étudiants en difficulté (zones orange/rouge)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Hebdomadaire</strong></td>
                                        <td>Profils des étudiants «À risque» ou «Critique»</td>
                                        <td>Planifier interventions ciblées, vérifier l'évolution</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Bi-hebdomadaire</strong></td>
                                        <td>Profils des étudiants «Fragile»</td>
                                        <td>Prévenir la dégradation, offrir soutien proactif</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Mi-session</strong></td>
                                        <td>Révision complète de tous les profils</td>
                                        <td>Bilan global, ajustements pédagogiques, rencontres individuelles</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Fin session</strong></td>
                                        <td>Analyse longitudinale des profils</td>
                                        <td>Évaluer l'efficacité des interventions, documenter les cas critiques</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Carte: Planifier interventions -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Planifier les interventions RàI</h3>

                        <div class="alerte-info-bleu">
                            <h4 class="text-bleu-principal">Niveau 1 : Enseignement universel avec suivi</h4>
                            <p><strong>Pour qui :</strong> Étudiants en progression normale (≥ 70% en A-C-P)</p>
                            <p><strong>Modalités :</strong></p>
                            <ul>
                                <li>Enseignement explicite en grand groupe</li>
                                <li>Pratique guidée intégrée naturellement</li>
                                <li>Suivi hebdomadaire des indices</li>
                                <li>Rétroactions formatives régulières</li>
                            </ul>
                        </div>

                        <div class="alerte-warning-jaune">
                            <h4 class="text-warning-dark">Niveau 2 : Soutien ciblé en petit groupe</h4>
                            <p><strong>Pour qui :</strong> Étudiants identifiés comme à risque (un ou plusieurs indices &lt; 70%)</p>
                            <p><strong>Modalités :</strong></p>
                            <ul>
                                <li>Approche proactive de l'enseignant</li>
                                <li>Interventions en classe avec opportunités de reprise/rattrapage</li>
                                <li>Pratique guidée additionnelle sur critères en difficulté</li>
                                <li>Remédiation ciblée (ex: Structure, Rigueur, Nuance)</li>
                                <li>Utilisation des forces pour développer les défis</li>
                            </ul>
                            <p><strong>Exemples concrets :</strong></p>
                            <ul>
                                <li>"Remédiation en Structure | Exercice supplémentaire"</li>
                                <li>"Pratique guidée en Rigueur"</li>
                                <li>"Pratique autonome → Explorer jumelage"</li>
                            </ul>
                        </div>

                        <div class="alerte-danger-rouge">
                            <h4 class="text-danger-bs">Niveau 3 : Intervention très intensive ou spécialisée</h4>
                            <p><strong>Pour qui :</strong> Blocages critiques (performance ≤ 1.5 ou risque &gt; 70%)</p>
                            <p><strong>Modalités :</strong></p>
                            <ul>
                                <li>Hors classe, sur rendez-vous</li>
                                <li>Accompagnement plus approfondi selon besoins spécifiques</li>
                                <li>Collaboration avec services spécialisés :
                                    <ul>
                                        <li>CAF (Centre d'Aide en Français)</li>
                                        <li>Services adaptés</li>
                                        <li>Soutien psychosocial si nécessaire</li>
                                    </ul>
                                </li>
                                <li>Plan d'intervention personnalisé</li>
                                <li>Suivi rapproché hebdomadaire</li>
                            </ul>
                            <p><strong>Exemples concrets :</strong></p>
                            <ul>
                                <li>"Rencontre individuelle | CAF | Dépistage"</li>
                                <li>"Blocage critique | Intervention intensive | Services adaptés"</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- ===================================
                     SOUS-SECTION 6: RÉFÉRENCE RAPIDE
                     =================================== -->
                <div id="aide-reference" class="sous-section">
                    <h2>Référence rapide</h2>
                    <p class="text-muted">Aide-mémoire et seuils critiques</p>

                    <!-- Carte: Seuils critiques -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Seuils critiques d'alerte</h3>

                        <div class="carte-gradient-success-danger">
                            <h4 class="mb-15">ASSIDUITÉ (A)</h4>
                            <table class="tableau-blanc">
                                <tr>
                                    <td class="ligne-separee"><strong>&lt; 70%</strong></td>
                                    <td class="ligne-separee-danger">Critique - Intervention immédiate</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>70-79%</strong></td>
                                    <td class="ligne-separee-warning">Fragile - Surveiller de près</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>80-89%</strong></td>
                                    <td class="ligne-separee-info">Acceptable</td>
                                </tr>
                                <tr>
                                    <td class="p-10"><strong>≥ 90%</strong></td>
                                    <td class="ligne-separee-success">Favorable</td>
                                </tr>
                            </table>

                            <h4 class="my-20-mb-15">COMPLÉTION (C) - Mêmes seuils</h4>
                            <table class="tableau-blanc">
                                <tr>
                                    <td class="ligne-separee"><strong>&lt; 70%</strong></td>
                                    <td class="ligne-separee-danger">Critique - Investigation obstacles</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>70-79%</strong></td>
                                    <td class="ligne-separee-warning">Fragile - Système de rappels</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>80-89%</strong></td>
                                    <td class="ligne-separee-info">Acceptable</td>
                                </tr>
                                <tr>
                                    <td class="p-10"><strong>≥ 90%</strong></td>
                                    <td class="ligne-separee-success">Favorable</td>
                                </tr>
                            </table>

                            <h4 class="my-20-mb-15">PERFORMANCE (P) - Mêmes seuils</h4>
                            <table class="tableau-blanc">
                                <tr>
                                    <td class="ligne-separee"><strong>&lt; 70%</strong></td>
                                    <td class="ligne-separee-danger">Critique - Soutien pédagogique urgent</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>70-79%</strong></td>
                                    <td class="ligne-separee-warning">Fragile - Remédiation ciblée</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>80-89%</strong></td>
                                    <td class="ligne-separee-info">Acceptable</td>
                                </tr>
                                <tr>
                                    <td class="p-10"><strong>≥ 90%</strong></td>
                                    <td class="ligne-separee-success">Favorable</td>
                                </tr>
                            </table>

                            <h4 class="my-20-mb-15">RISQUE D'ÉCHEC (1-A×C×P)</h4>
                            <table class="tableau-blanc">
                                <tr>
                                    <td class="ligne-separee"><strong>&gt; 70%</strong></td>
                                    <td class="ligne-separee-danger">Critique</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>50-70%</strong></td>
                                    <td class="ligne-separee-danger">Très élevé</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>40-50%</strong></td>
                                    <td class="td-orange">Élevé</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>30-40%</strong></td>
                                    <td class="ligne-separee-warning">Modéré</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>20-30%</strong></td>
                                    <td class="ligne-separee-info">Faible</td>
                                </tr>
                                <tr>
                                    <td class="p-10"><strong>≤ 20%</strong></td>
                                    <td class="ligne-separee-success">Minimal</td>
                                </tr>
                            </table>
                        </div>

                        <div class="alerte alerte-erreur">
                            <strong>Règle d'or :</strong> Un étudiant avec un indice &lt; 70% nécessite UNE action. Un étudiant avec un risque &gt; 50% nécessite un PLAN D'INTERVENTION.
                        </div>
                    </div>

                    <!-- Carte: Architecture Single Source of Truth -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Architecture Single Source of Truth (rappel)</h3>
                        <p><strong>Les modules sources ne doivent JAMAIS être contournés.</strong></p>

                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>Module SOURCE</th>
                                    <th>Génère/Stocke</th>
                                    <th>Module LECTEUR</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>trimestre.js</strong></td>
                                    <td><code>calendrierComplet</code></td>
                                    <td>calendrier-vue.js</td>
                                </tr>
                                <tr>
                                    <td><strong>saisie-presences.js</strong></td>
                                    <td><code>indicesAssiduiteDetailles</code></td>
                                    <td>tableau-bord-apercu.js<br>profil-etudiant.js</td>
                                </tr>
                                <tr>
                                    <td><strong>portfolio.js</strong></td>
                                    <td><code>indicesCP</code></td>
                                    <td>tableau-bord-apercu.js<br>profil-etudiant.js</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="alerte alerte-information">
                            <strong>Règle d'or :</strong> Les modules ne se parlent JAMAIS directement. Toute communication passe exclusivement par localStorage.
                        </div>
                    </div>

                    <!-- Carte: Résolution de problèmes -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Résolution de problèmes courants</h3>

                        <div class="alerte-info-grise">
                            <h4 class="text-bleu-principal">Calendrier vide après rechargement</h4>
                            <p><strong>Cause :</strong> calendrierComplet pas généré ou corrompu</p>
                            <p><strong>Solution :</strong> Aller dans Réglages → Trimestre → Régénérer le calendrier</p>
                        </div>

                        <div class="alerte-info-grise">
                            <h4 class="text-bleu-principal">Indices A non calculés</h4>
                            <p><strong>Cause :</strong> Présences pas saisies ou module non initialisé</p>
                            <p><strong>Solution :</strong>
                                <ol class="m-5-0-0-20">
                                    <li>Vérifier ordre de chargement dans index 71</li>
                                    <li>Aller dans Présences → Saisie</li>
                                    <li>Saisir au moins une présence pour initialiser</li>
                                </ol>
                            </p>
                        </div>

                        <div class="alerte-info-grise">
                            <h4 class="text-bleu-principal">« Invalid Date » dans le calendrier</h4>
                            <p><strong>Cause :</strong> Conflit de noms de fonctions entre modules</p>
                            <p><strong>Solution :</strong> Vérifier que les fonctions sont préfixées (ex: formaterDateTrimestreYMD au lieu de formaterDate)</p>
                        </div>

                        <div class="alerte-info-grise">
                            <h4 class="text-bleu-principal">Données perdues</h4>
                            <p><strong>Cause :</strong> localStorage effacé (navigation privée, nettoyage navigateur)</p>
                            <p><strong>Solution :</strong> Utiliser Import/Export régulièrement pour backup JSON</p>
                            <p><strong>Prévention :</strong> Activer Export automatique hebdomadaire (à venir)</p>
                        </div>
                    </div>

                    <!-- Carte: Debug localStorage -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Debug - Console navigateur</h3>
                        <p>Commandes à exécuter dans la console du navigateur (F12) :</p>

                        <div class="carte-code-dark">
                            <p class="text-secondary">// Vérifier calendrierComplet</p>
                            <p style="color: #66d9ef;">console</p><span style="color: #f8f8f2;">.log(</span><span style="color: #e6db74;">'calendrierComplet existe?'</span><span style="color: #f8f8f2;">, </span><span style="color: #f92672;">!!</span><span style="color: #66d9ef;">localStorage</span><span style="color: #f8f8f2;">.getItem(</span><span style="color: #e6db74;">'calendrierComplet'</span><span style="color: #f8f8f2;">));</span>
                            <br><br>
                            <p class="text-secondary">// Voir contenu calendrier</p>
                            <p><span style="color: #66d9ef;">JSON</span><span style="color: #f8f8f2;">.parse(</span><span style="color: #66d9ef;">localStorage</span><span style="color: #f8f8f2;">.getItem(</span><span style="color: #e6db74;">'calendrierComplet'</span><span style="color: #f8f8f2;">));</span></p>
                            <br>
                            <p class="text-secondary">// Vérifier indices A</p>
                            <p><span style="color: #66d9ef;">console</span><span style="color: #f8f8f2;">.log(</span><span style="color: #e6db74;">'Indices A existent?'</span><span style="color: #f8f8f2;">, </span><span style="color: #f92672;">!!</span><span style="color: #66d9ef;">localStorage</span><span style="color: #f8f8f2;">.getItem(</span><span style="color: #e6db74;">'indicesAssiduiteDetailles'</span><span style="color: #f8f8f2;">));</span></p>
                            <br>
                            <p class="text-secondary">// Vérifier APIs disponibles</p>
                            <p><span style="color: #66d9ef;">console</span><span style="color: #f8f8f2;">.log(</span><span style="color: #e6db74;">'API calendrier:'</span><span style="color: #f8f8f2;">, </span><span style="color: #f92672;">typeof</span><span style="color: #f8f8f2;"> obtenirCalendrierComplet);</span></p>
                        </div>
                    </div>

                    <!-- Carte: FAQ (Phase 2) -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Questions fréquentes (FAQ)</h3>

                        <div class="my-20">
                            <h4 class="titre-bleu-mb8">Questions sur le monitorage</h4>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Quelle est la différence entre Assiduité (A), Complétion (C) et Performance (P) ?</summary>
                                <div class="mt-10-pl-10">
                                    <ul>
                                        <li><strong>Assiduité (A) :</strong> Mesure la présence physique et cognitive en classe. Un étudiant assidu est engagé dans son apprentissage.</li>
                                        <li><strong>Complétion (C) :</strong> Mesure la remise des travaux demandés. Un taux élevé indique une bonne mobilisation.</li>
                                        <li><strong>Performance (P) :</strong> Mesure la qualité des productions selon les critères SRPNF. Reflète le niveau de maîtrise.</li>
                                    </ul>
                                    <p class="mt-10"><strong>Exemple concret :</strong> Un étudiant peut avoir A=95% (toujours présent), C=80% (remet la plupart des travaux) et P=65% (qualité variable). L'indice R combinera ces trois dimensions pour prédire le risque.</p>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Comment interpréter l'indice de risque R ?</summary>
                                <div class="mt-10-pl-10">
                                    <p>L'indice R prédit le risque d'échec selon 6 niveaux :</p>
                                    <table class="tableau" class="mt-10">
                                        <thead>
                                            <tr>
                                                <th>Indice R</th>
                                                <th>Niveau</th>
                                                <th>Action recommandée</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>≥ 85%</td>
                                                <td class="text-success-bold">Excellent</td>
                                                <td>Valoriser et encourager l'autonomie</td>
                                            </tr>
                                            <tr>
                                                <td>70-84%</td>
                                                <td class="text-success-green">Bon</td>
                                                <td>Maintenir l'engagement, offrir défis</td>
                                            </tr>
                                            <tr>
                                                <td>60-69%</td>
                                                <td class="text-warning-bold">Fragile</td>
                                                <td>Surveiller de près, Interventions ciblées préventives en classe</td>
                                            </tr>
                                            <tr>
                                                <td>50-59%</td>
                                                <td class="text-orange-bold">À risque</td>
                                                <td>Rencontre individuelle, plan d'action</td>
                                            </tr>
                                            <tr>
                                                <td>40-49%</td>
                                                <td class="text-danger-red-bold">Critique</td>
                                                <td>Intervention intensive, RàI niveau 2</td>
                                            </tr>
                                            <tr>
                                                <td>&lt; 40%</td>
                                                <td style="color: #d32f2f; font-weight: bold;">Échec probable</td>
                                                <td>RàI niveau 3, référer aux services</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Qu'est-ce que la Réponse à l'Intervention (RàI) ?</summary>
                                <div class="mt-10-pl-10">
                                    <p>La RàI est un système d'intervention à trois niveaux :</p>
                                    <ul>
                                        <li><strong>Niveau 1 - Universel :</strong> Enseignement de qualité pour tous (80% des étudiants)</li>
                                        <li><strong>Niveau 2 - Ciblé :</strong> Interventions de groupe pour étudiants fragiles ou à risque (15% des étudiants)</li>
                                        <li><strong>Niveau 3 - Intensif :</strong> Soutien individualisé pour étudiants en situation critique (&lt; 5% des étudiants)</li>
                                    </ul>
                                    <p class="mt-10"><strong>Dans l'application :</strong> Le profil étudiant suggère automatiquement le niveau RàI selon l'indice R et fournit des recommandations d'intervention adaptées.</p>
                                </div>
                            </details>
                        </div>

                        <div class="my-20">
                            <h4 class="titre-bleu-mb8">Questions techniques</h4>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Mes données sont-elles sauvegardées automatiquement ?</summary>
                                <div class="mt-10-pl-10">
                                    <p><strong>Oui,</strong> toutes les modifications sont sauvegardées automatiquement dans le localStorage du navigateur.</p>
                                    <div class="alerte alerte-attention" class="mt-10">
                                        <strong>⚠️ Important :</strong> Le localStorage peut être effacé si vous :
                                        <ul class="m-10-0-0-20">
                                            <li>Utilisez le mode navigation privée</li>
                                            <li>Nettoyez l'historique/les données du navigateur</li>
                                            <li>Changez de navigateur ou d'appareil</li>
                                        </ul>
                                    </div>
                                    <p class="mt-10"><strong>Recommandation :</strong> Exportez vos données régulièrement via Réglages → Import/Export pour créer des sauvegardes JSON.</p>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Puis-je utiliser l'application sur plusieurs appareils ?</summary>
                                <div class="mt-10-pl-10">
                                    <p><strong>Oui,</strong> mais avec transfert manuel :</p>
                                    <ol>
                                        <li>Sur l'appareil source : Réglages → Import/Export → Exporter</li>
                                        <li>Transférer le fichier JSON (email, iCloud, USB, etc.)</li>
                                        <li>Sur l'appareil cible : Réglages → Import/Export → Importer</li>
                                    </ol>
                                    <p class="mt-10"><strong>Note :</strong> Il n'y a pas de synchronisation automatique pour garantir la protection des données et le fonctionnement hors-ligne.</p>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">L'application fonctionne-t-elle sans connexion Internet ?</summary>
                                <div class="mt-10-pl-10">
                                    <p><strong>Oui, totalement.</strong> L'application est 100% autonome et ne nécessite aucune connexion Internet pour fonctionner.</p>
                                    <p class="mt-10">Vous pouvez l'utiliser :</p>
                                    <ul>
                                        <li>En mode hors-ligne complet</li>
                                        <li>Sur un appareil sans accès réseau</li>
                                        <li>En ouvrant simplement le fichier HTML local</li>
                                    </ul>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Pourquoi le calendrier affiche «Invalid Date» ?</summary>
                                <div class="mt-10-pl-10">
                                    <p><strong>Cause probable :</strong> Le calendrier n'a pas été généré ou a été corrompu.</p>
                                    <p class="mt-10"><strong>Solution :</strong></p>
                                    <ol>
                                        <li>Aller dans Réglages → Trimestre</li>
                                        <li>Remplir les champs (date début, date fin, nb semaines)</li>
                                        <li>Cliquer sur «Générer le calendrier complet»</li>
                                        <li>Vérifier que le message de succès apparaît</li>
                                        <li>Retourner dans Présences → Vue calendaire pour confirmer</li>
                                    </ol>
                                </div>
                            </details>
                        </div>

                        <div class="my-20">
                            <h4 class="titre-bleu-mb8">Questions sur l'utilisation</h4>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Dans quel ordre dois-je configurer l'application ?</summary>
                                <div class="mt-10-pl-10">
                                    <p><strong>Ordre recommandé :</strong></p>
                                    <ol>
                                        <li><strong>Réglages → Cours :</strong> Informations de base (code, titre, programme)</li>
                                        <li><strong>Réglages → Trimestre :</strong> Dates et génération du calendrier complet</li>
                                        <li><strong>Réglages → Horaire :</strong> Définir les plages horaires des séances</li>
                                        <li><strong>Réglages → Groupe :</strong> Importer ou créer la liste des étudiants</li>
                                        <li><strong>Matériel → Grilles de critères :</strong> Créer vos grilles SRPNF</li>
                                        <li><strong>Matériel → Échelle de performance :</strong> Personnaliser l'échelle IDME si nécessaire</li>
                                        <li><strong>Matériel → Productions :</strong> Définir toutes les évaluations du cours</li>
                                        <li><strong>Matériel → Rétroactions :</strong> Créer vos cartouches de rétroaction</li>
                                    </ol>
                                    <div class="alerte alerte-succes" class="mt-10">
                                        <strong>✓ Astuce :</strong> Une fois configuré, vous pouvez exporter tout le matériel et le réutiliser pour les prochaines sessions !
                                    </div>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Comment gérer un étudiant qui abandonne en cours de session ?</summary>
                                <div class="mt-10-pl-10">
                                    <ol>
                                        <li>Aller dans Réglages → Groupe</li>
                                        <li>Trouver l'étudiant dans la liste</li>
                                        <li>Changer son statut de «Actif» à «Inactif» ou «Abandon»</li>
                                        <li>L'étudiant disparaîtra des aperçus actifs mais ses données seront conservées</li>
                                    </ol>
                                    <p class="mt-10"><strong>Note :</strong> Vous pouvez réactiver l'étudiant en changeant à nouveau son statut si nécessaire.</p>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Que faire si la pondération totale n'est pas 100% ?</summary>
                                <div class="mt-10-pl-10">
                                    <p>L'application affiche la pondération totale dans Matériel → Productions. Si elle n'est pas égale à 100% :</p>
                                    <ol>
                                        <li>Vérifier que toutes les évaluations sont créées</li>
                                        <li>Ajuster les pondérations pour atteindre exactement 100%</li>
                                        <li>Les artefacts d'un portfolio ne comptent PAS dans le total (seul le Portfolio conteneur compte)</li>
                                    </ol>
                                    <div class="alerte alerte-attention" class="mt-10">
                                        <strong>⚠️ Important :</strong> Le calcul de la note finale nécessite que la pondération totale soit exactement 100%.
                                    </div>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Puis-je modifier les seuils des indices A, C, M ?</summary>
                                <div class="mt-10-pl-10">
                                    <p><strong>Actuellement :</strong> Les seuils sont harmonisés à 70% (Acceptable), 80% (Confortable), 85% (Maîtrisé) et ne sont pas modifiables dans l'interface.</p>
                                    <p class="mt-10"><strong>Pourquoi ?</strong> Ces seuils sont basés sur la recherche pédagogique et garantissent la cohérence des prédictions de risque.</p>
                                    <p class="mt-10"><strong>Personnalisation future :</strong> Une version avancée pourrait permettre de personnaliser ces seuils dans Réglages → Pratique de notation.</p>
                                </div>
                            </details>
                        </div>
                    </div>

                    <!-- Carte: Glossaire (Phase 2) -->
                    <div class="carte" class="bg-fff9e6">
                        <h3 class="carte-titre-bleu">Glossaire des termes</h3>

                        <div class="my-15">
                            <h4 style="color: var(--bleu-principal); border-bottom: 2px solid var(--bleu-pale); padding-bottom: 5px; margin-bottom: 15px;">A</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Artefact</dt>
                                <dd class="ml-20-mb-10">Production évaluée d'un étudiant. Peut être une dissertation, un examen, une présentation, etc. Dans un portfolio, plusieurs artefacts sont regroupés et seuls les N meilleurs sont retenus pour la note finale selon les règles PAN.</dd>

                                <dt class="titre-section-aide">Assiduité (A)</dt>
                                <dd class="ml-20-mb-10">Indice primaire mesurant la présence en classe. Calculé automatiquement à partir des présences saisies. Formule : (nombre de présences / nombre de séances) × 100. Reflète l'engagement cognitif de l'étudiant.</dd>
                            </dl>

                            <h4 class="titre-section-principal">C</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Calendrier complet</dt>
                                <dd class="ml-20-mb-10">Structure de données générée par le module trimestre.js. Contient 124 jours (début session jusqu'à fin + 10 jours). Chaque jour indique s'il y a cours, congé, reprise, etc. Source unique pour toutes les dates de l'application.</dd>

                                <dt class="titre-section-aide">Cartouche de rétroaction</dt>
                                <dd class="ml-20-mb-10">Matrice de commentaires prédéfinis organisés par critère SRPNF et niveau de performance IDME. Permet de générer rapidement des rétroactions personnalisées et cohérentes. Peut être verrouillée une fois finalisée.</dd>

                                <dt class="titre-section-aide">Complétion (C)</dt>
                                <dd class="ml-20-mb-10">Indice primaire mesurant la remise des travaux. Formule : (nombre d'artefacts complétés / nombre d'artefacts attendus) × 100. Reflète la mobilisation de l'étudiant. Calculé par portfolio.js.</dd>

                                <dt class="titre-section-aide">Congé imprévu</dt>
                                <dd class="ml-20-mb-10">Jour où le cours est annulé de manière non planifiée (tempête, urgence, etc.). N'affecte pas le calcul des semaines. Peut nécessiter une reprise pour maintenir le nombre de séances requis.</dd>

                                <dt class="titre-section-aide">Congé prévu</dt>
                                <dd class="ml-20-mb-10">Jour férié ou pause planifiée dans le calendrier académique (ex: semaine de lecture). Pris en compte lors de la génération du calendrier complet.</dd>
                            </dl>

                            <h4 class="titre-section-principal">É</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Échelle IDME</dt>
                                <dd class="ml-20-mb-10">Échelle de performance à 4 niveaux : <strong>I</strong>nsuffisant (&lt;.64), <strong>D</strong>éveloppement (.65-.74), <strong>M</strong>aîtrisé (.75-.84), <strong>E</strong>tendu (≥.85). Basée sur la taxonomie SOLO de Biggs & Collis. Utilisée pour interpréter les scores SRPNF.</dd>
                            </dl>

                            <h4 class="titre-section-principal">G</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Grille de critères SRPNF</dt>
                                <dd class="ml-20-mb-10">Outil d'évaluation structuré selon 5 critères : Structure (15%), Rigueur (20%), Plausibilité (10%), Nuance (25%), Français (30%). Chaque critère comporte 4 descripteurs permettant d'attribuer un score précis. Peut être dupliquée et personnalisée.</dd>
                            </dl>

                            <h4 class="titre-section-principal">I</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Indice de risque (R)</dt>
                                <dd class="ml-20-mb-10">Indice composite prédisant le risque d'échec. Formule : R = (2×A + C + P) / 4. Combine assiduité, complétion et performance en un seul score. 6 niveaux d'interprétation : Excellent (≥85%), Bon (70-84%), Fragile (60-69%), À risque (50-59%), Critique (40-49%), Échec probable (&lt;40%).</dd>

                                <dt class="titre-section-aide">Indice RàI</dt>
                                <dd class="ml-20-mb-10">Score déterminant le niveau d'intervention selon le cadre Réponse à l'Intervention. Calculé à partir de l'indice R. Trois niveaux : Universel (≥70%), Ciblé (40-69%), Intensif (&lt;40%).</dd>
                            </dl>

                            <h4 class="titre-section-principal">L</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">localStorage</dt>
                                <dd class="ml-20-mb-10">Mécanisme de stockage local du navigateur. Toutes les données de l'application y sont sauvegardées automatiquement. Permet le fonctionnement 100% hors-ligne. Limité à 5-10 MB selon les navigateurs. Peut être effacé (mode privé, nettoyage) d'où l'importance des exports réguliers.</dd>
                            </dl>

                            <h4 class="titre-section-principal">M</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Mode provisoire / final (Portfolio)</dt>
                                <dd class="ml-20-mb-10"><strong>Provisoire :</strong> Tous les artefacts complétés sont considérés, même si &lt; nombre total attendu. <strong>Final :</strong> Ne calcule la note que si le nombre minimum d'artefacts complétés est atteint, sinon retourne 0. Permet de gérer les portfolios en cours de session.</dd>

                                <dt class="titre-section-aide">Monitorage pédagogique</dt>
                                <dd class="ml-20-mb-10">Approche systémique de suivi des apprentissages combinant observation continue (présences), évaluation formative (artefacts) et intervention différenciée (RàI). Objectif : identifier précocement les étudiants à risque pour intervenir avant l'échec.</dd>
                            </dl>

                            <h4 class="titre-section-principal">P</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">PAN (Pratiques d'Appréciation Nuancée)</dt>
                                <dd class="ml-20-mb-10">Système de notation permettant de sélectionner automatiquement les N meilleurs artefacts d'un portfolio. Exemple : sur 9 artefacts, retenir les 3 meilleurs. Règle configurable par portfolio. Respecte un minimum de complétion requis.</dd>

                                <dt class="titre-section-aide">Performance (P)</dt>
                                <dd class="ml-20-mb-10">Indice primaire mesurant la qualité des productions. Moyenne pondérée des scores SRPNF des artefacts sélectionnés (PAN). Reflète le niveau de maîtrise des compétences. Calculé par portfolio.js.</dd>

                                <dt class="titre-section-aide">Pondération</dt>
                                <dd class="ml-20-mb-10">Poids relatif d'une évaluation dans la note finale (%). La somme de toutes les pondérations doit être exactement 100%. Les artefacts d'un portfolio n'ont pas de pondération individuelle ; seul le Portfolio conteneur en a une.</dd>

                                <dt class="titre-section-aide">Portfolio</dt>
                                <dd class="ml-20-mb-10">Production composite regroupant plusieurs artefacts. Définit des règles PAN (nombre total, nombre à retenir, minimum requis). Le score final du portfolio est calculé selon les N meilleurs artefacts. Type spécial dans Matériel → Productions.</dd>

                                <dt class="titre-section-aide">Production</dt>
                                <dd class="ml-20-mb-10">Terme générique désignant toute évaluation du cours : examen, travail écrit, quiz, présentation, portfolio. Chaque production a un type, une pondération, et peut être liée à une grille de critères.</dd>
                            </dl>

                            <h4 class="titre-section-principal">R</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Reprise</dt>
                                <dd class="ml-20-mb-10">Séance de rattrapage planifiée pour compenser un congé imprévu. Exemple : si le lundi est férié, on peut reprendre le jeudi avec «Horaire du lundi». Gérée dans le calendrier complet pour maintenir le nombre requis de séances.</dd>

                                <dt class="titre-section-aide">RàI (Réponse à l'Intervention)</dt>
                                <dd class="ml-20-mb-10">Cadre d'intervention à trois paliers : <strong>Niveau 1</strong> (Universel, 80% des étudiants), <strong>Niveau 2</strong> (Ciblé, 15%), <strong>Niveau 3</strong> (Intensif, 5%). Permet d'adapter le soutien selon l'indice de risque. L'application suggère automatiquement le niveau approprié.</dd>
                            </dl>

                            <h4 class="titre-section-principal">S</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Séances complètes</dt>
                                <dd class="ml-20-mb-10">Structure de données générée par horaire.js. Fusionne les plages horaires (seancesHoraire) avec le calendrier complet pour créer la liste exhaustive de toutes les séances du trimestre avec leurs horaires précis. Source unique pour la saisie des présences.</dd>

                                <dt class="titre-section-aide">Single Source of Truth</dt>
                                <dd class="ml-20-mb-10">Principe architectural : chaque donnée a UNE source unique qui la génère et la stocke dans localStorage. Les autres modules la lisent uniquement. Exemples : trimestre.js génère calendrierComplet, saisie-presences.js génère indicesAssiduiteDetailles. Évite les duplications et incohérences.</dd>

                                <dt class="titre-section-aide">SOLO (Taxonomie)</dt>
                                <dd class="ml-20-mb-10">Structure of Observed Learning Outcomes (Biggs & Collis). Hiérarchie de 5 niveaux de compréhension : Préstructurel, Unistructurel, Multistructurel, Relationnel, Abstrait étendu. Fondement théorique de l'échelle IDME.</dd>

                                <dt class="titre-section-aide">SRPNF (Critères)</dt>
                                <dd class="ml-20-mb-10">Grille d'évaluation en 5 critères : <strong>S</strong>tructure (15%), <strong>R</strong>igueur (20%), <strong>P</strong>lausibilité (10%), <strong>N</strong>uance (25%), <strong>F</strong>rançais (30%). Développée spécifiquement pour l'évaluation de productions en littératie. Permet une évaluation objective et cohérente.</dd>
                            </dl>

                            <h4 class="titre-section-principal">T</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Trimestre</dt>
                                <dd class="ml-20-mb-10">Période académique (automne, hiver, été). Défini par une date de début, une date de fin, et un nombre de semaines de cours. Le module trimestre.js génère automatiquement le calendrier complet de 124 jours couvrant toute la session.</dd>
                            </dl>

                            <h4 class="titre-section-principal">V</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Verrouillage</dt>
                                <dd class="ml-20-mb-10">Fonction de protection empêchant la modification ou suppression accidentelle. Disponible pour : productions, grilles de critères, échelles, cartouches. Un élément verrouillé affiche une icône de cadenas et ses boutons d'action sont désactivés. Peut être déverrouillé si nécessaire.</dd>
                            </dl>
                        </div>

                        <div class="alerte alerte-info" class="mt-20">
                            <strong>📐 Note :</strong> Ce glossaire est une référence rapide. Pour des explications détaillées avec exemples et formules, consultez le Guide complet (PDF) disponible dans les ressources ci-dessous.
                        </div>
                    </div>

                    <!-- Carte: Ressources -->
                    <div class="carte" class="bg-bleu-tres-pale">
                        <h3 class="carte-titre-bleu">Ressources et documentation</h3>

                        <p><strong>Références bibliographiques :</strong></p>
                        <div class="text-09-lh16-pl20-indent">
                            <p class="my-10">Arseneault-Hubert, F., Cormier, C. et Voisard, B. (2024). Les pratiques alternatives de notation : Pour mieux soutenir les apprentissages et en témoigner. <em>Pédagogie collégiale</em>, <em>37</em>(2), 27. <a href="https://eduq.info/xmlui/bitstream/handle/11515/39399/Voisard-et-al-37-2-24.pdf" target="_blank" class="text-bleu-principal">https://eduq.info/xmlui/bitstream/handle/11515/39399/Voisard-et-al-37-2-24.pdf</a></p>

                            <p class="my-10">Bédard, G. (2024). L'enseignement explicite de la littératie. <em>Pédagogie collégiale</em>, <em>37</em>(3), 85-92. <a href="https://eduq.info/xmlui/bitstream/handle/11515/39438/Bedard-37-3-24.pdf?sequence=2&isAllowed=y" target="_blank" class="text-bleu-principal">https://eduq.info/xmlui/bitstream/handle/11515/39438/Bedard-37-3-24.pdf</a></p>

                            <p class="my-10">Bédard, G. (2025). Observer pour mieux accompagner. <em>Pédagogie collégiale</em>, <em>38</em>(2), 38-45. <a href="https://eduq.info/xmlui/bitstream/handle/11515/39749/Bedard-38-2-25.pdf?sequence=2&isAllowed=y" target="_blank" class="text-bleu-principal">https://eduq.info/xmlui/bitstream/handle/11515/39749/Bedard-38-2-25.pdf</a></p>

                            <p class="my-10">Bélec, C. et Doré, R. (2023). <em>Une recherche collaborative pour renouveler l'enseignement de la littérature au collégial dans une optique de cohérence disciplinaire : l'intérêt d'une approche par compétence de la lecture</em>. Rapport PAREA, Cégep Gérald-Godin. <a href="https://www.cdc.qc.ca/parea/786755-belec-dore-litterature-competence-lecture-gerald-godin-PAREA-2023.pdf" target="_blank" class="text-bleu-principal">https://www.cdc.qc.ca/parea/786755-belec-dore-litterature-competence-lecture-gerald-godin-PAREA-2023.pdf</a></p>

                            <p class="my-10">Biggs, J. B. et Collis, K. F. (1982). <em>Evaluating the quality of learning: The SOLO taxonomy (Structure of the Observed Learning Outcome)</em>. Elsevier Inc.</p>

                            <p class="my-10">Blum, S. D. (dir.) (2020). <em>Ungrading: Why rating students undermines learning (and what to do instead)</em>. West Virginia University Press.</p>

                            <p class="my-10">Clark, R. et Talbert, R. (2023). <em>Grading for growth: A guide to alternative grading practices that promote authentic learning and student engagement</em>. Stylus Publishing.</p>

                            <p class="my-10">Conseil supérieur de l'éducation. (2018). <em>Évaluer pour que ça compte vraiment : Rapport sur l'état et les besoins de l'éducation 2016-2018</em>. Gouvernement du Québec.</p>

                            <p class="my-10">Gauthier, C. et Bissonnette, S. (2023). <em>Enseignement explicite et données probantes</em>. Gaëtan Morin Éditeur.</p>

                            <p class="my-10">Gauthier, C., Bissonnette, S. et Richard, M. (2013). <em>Enseignement explicite et réussite des élèves : La gestion des apprentissages</em>. Gaëtan Morin Éditeur.</p>

                            <p class="my-10">Gauthier, C. et Tardif, M. (2017). <em>La pédagogie</em> (4<sup>e</sup> édition) : <em>Théories et pratiques de l'Antiquité à nos jours</em>. Gaëtan Morin.</p>

                            <p class="my-10">Hollingsworth, J. et Ybarra, S. (2012). <em>L'enseignement explicite</em>. Chenelière.</p>

                            <p class="my-10">Nilson, L. B. (2014). <em>Specifications grading: Restoring rigor, motivating students, and saving faculty time</em>. Stylus Publishing.</p>

                            <p class="my-10">Viau, R. (2009). <em>La motivation à apprendre en milieu scolaire</em>. Éditions du renouveau pédagogique (ERPI).</p>
                        </div>

                        <p class="mt-15"><strong>Labo Codex :</strong></p>
                        <ul>
                            <li>Site web : <a href="https://codexnumeris.org/apropos" target="_blank" class="text-bleu-principal">https://codexnumeris.org/apropos</a></li>
                            <li>Approche systémique complète</li>
                            <li>Ressources additionnelles et outils</li>
                        </ul>

                        <p class="mt-15"><strong>Licence et partage :</strong></p>
                        <div class="carte-bleu-pale-mt10">
                            <p class="m-0-0-10-0"><strong>📜 Double licence :</strong></p>
                            <ul class="m-0">
                                <li><strong>Code source (HTML, CSS, JavaScript) :</strong> GNU GPL v3.0
                                    <ul class="text-09-mt5">
                                        <li>Garantit que le code reste libre et open source</li>
                                        <li>Modifications doivent être partagées sous même licence</li>
                                    </ul>
                                </li>
                                <li class="mt-10"><strong>Contenu pédagogique (documentation, aide, concepts) :</strong> Creative Commons BY-SA 4.0
                                    <ul class="text-09-mt5">
                                        <li>Partage et adaptation autorisés avec attribution</li>
                                        <li>Redistribution sous même licence</li>
                                        <li>Usage non-commercial autorisé</li>
                                    </ul>
                                </li>
                            </ul>
                            <p class="m-15-0-0-0-sm-bleu"><strong>📐 Détails complets :</strong> Voir LICENSE.md dans le dépôt du projet</p>
                        </div>
                    </div>

                    <!-- Carte: À propos -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">À propos de l'application</h3>
                        <table class="table-collapse">
                            <tr>
                                <td class="td-bold-30-bleu">Version</td>
                                <td class="ligne-separee-bleu">Beta 85 (interventions RàI)</td>
                            </tr>
                            <tr>
                                <td class="td-bold-bleu">Développé par</td>
                                <td class="ligne-separee-bleu">Grégoire Bédard<br>
                                    <span class="text-muted-sm">Cégep de Drummondville</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="td-bold-bleu">Licence</td>
                                <td class="ligne-separee-bleu">Double licence<br>
                                    <span class="text-muted-sm">GPL v3.0 (code) + CC BY-SA 4.0 (contenu)</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="td-bold-bleu">Technologies</td>
                                <td class="ligne-separee-bleu">HTML5 / CSS3 / JavaScript ES6+ pur<br>
                                    <span class="text-muted-sm">100% autonome, aucune dépendance externe</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="td-bold">Stockage</td>
                                <td class="p-10">localStorage uniquement<br>
                                    <span class="text-muted-sm">Fonctionnement hors-ligne</span>
                                </td>
                            </tr>
                        </table>

                        <p class="carte-bleu-mt20-center-italic">
                            <strong>"L'objectif pédagogique : Faire mentir les prédictions de risque par des interventions proactives !"</strong>
                        </p>
                    </div>
                </div>
                <!-- LLM:OK_TO_EDIT -->

            </section><!-- fin section-aide -->

        </main>

    </div>



    <!-- ===================================
     CHARGEMENT DES MODULES JAVASCRIPT
     ORDRE CRITIQUE - Voir: js/ordre-chargement.txt
     =================================== -->

    <!-- PRIORITÉ 1: Fondations -->
    <script src="js/config.js"></script>
    <script src="js/navigation.js?v=2025111431"></script>
    <script src="js/modes.js"></script>

    <!-- PRIORITÉ 2: Données de base -->
    <script src="js/trimestre.js?v=2025111325"></script>
    <script src="js/etudiants.js?v=2025111442"></script>
    <script src="js/productions.js?v=2025111303"></script>
    <script src="js/grilles.js?v=2025111215"></script>
    <script src="js/echelles.js?v=2025111202"></script>
    <script src="js/cartouches.js?v=2025111201"></script>
    <script src="js/cours.js?v=2025111313"></script>
    <script src="js/contexte.js?v=2025111201"></script>

    <!-- PRIORITÉ 3: Configuration et calcul des indices (AVANT affichage) -->
    <script src="js/interpretation-config.js"></script>

    <!-- Système de pratiques de notation (NOUVEAU - Beta 90) -->
    <script src="js/pratiques/pratique-registre.js"></script>
    <script src="js/pratiques/migration-pratiques.js"></script>
    <script src="js/pratiques/pratique-test.js"></script>
    <script src="js/pratiques/pratique-pan-maitrise.js?v=2025111302"></script>
    <script src="js/pratiques/pratique-sommative.js?v=2025111440"></script>

    <script src="js/portfolio.js?v=2025111310"></script>
    <script src="js/saisie-presences.js?v=2025111202"></script>

    <!-- PRIORITÉ 4: Modules d'affichage (APRÈS calcul) -->
    <script src="js/tableau-bord-apercu.js?v=2025111406"></script>
    <script src="js/profil-etudiant.js?v=2025111410"></script>
    <script src="js/presences-apercu.js?v=2025111029"></script>
    <script src="js/evaluations-apercu.js?v=2025111026"></script>

    <!-- PRIORITÉ 5: Modules fonctionnels -->
    <script src="js/calendrier-vue.js"></script>
    <script src="js/horaire.js?v=2025111328"></script>
    <script src="js/groupe.js?v=2025111332"></script>
    <script src="js/pratiques.js?v=2025111433"></script>
    <script src="js/interventions.js?v=2025111016"></script>

    <!-- PRIORITÉ 6: Modules avancés -->
    <script src="js/import-export.js?v=1761387764"></script>
    <script src="js/statistiques.js?v=2025111032"></script>
    <script src="js/liste-evaluations.js?v=2025111312"></script>

    <!-- PRIORITÉ 7: Utilitaires -->
    <script src="js/evaluation-jetons.js?v=2025111435"></script>
    <script src="js/evaluation.js?v=2025110908"></script>

    <!-- PRIORITÉ 8: Initialisation finale (TOUJOURS EN DERNIER) -->
    <script src="js/main.js?v=2025111400"></script>

    <!-- Script de débogage additionnel (optionnel) -->
    <script>
        // Mise à jour de la zone de débogage visuelle
        setInterval(() => {
            const debugSection = document.getElementById('debug-section');
            const debugSousSection = document.getElementById('debug-sous-section');

            if (debugSection && typeof sectionActive !== 'undefined') {
                debugSection.textContent = sectionActive || '--';
            }

            if (debugSousSection && typeof sousSectionActive !== 'undefined') {
                debugSousSection.textContent = sousSectionActive || '--';
            }
        }, 500);
    </script>

    <!-- Script pour gérer les toggles emoji dans les H2 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sélectionner tous les emojis avec la classe emoji-toggle
            const emojiToggles = document.querySelectorAll('.emoji-toggle');

            emojiToggles.forEach(emoji => {
                emoji.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();

                    // Récupérer l'ID de la cible depuis l'attribut data-target
                    const targetId = this.getAttribute('data-target');
                    const targetElement = document.getElementById(targetId);

                    if (targetElement) {
                        // Toggle la visibilité
                        if (targetElement.style.display === 'none' || targetElement.style.display === '') {
                            targetElement.style.display = 'block';
                        } else {
                            targetElement.style.display = 'none';
                        }
                    }
                });
            });
        });
    </script>

    <!-- Script d'initialisation des seuils d'interprétation -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Charger les seuils d'interprétation dans l'interface dès que la page est chargée
            if (typeof chargerSeuilsInterpretationUI === 'function') {
                // Attendre que la sous-section soit potentiellement affichée
                setTimeout(() => {
                    const sectionInterpretation = document.getElementById('reglages-interpretation');
                    if (sectionInterpretation) {
                        chargerSeuilsInterpretationUI();
                        console.log('Interface des seuils d\'interprétation initialisée');
                    }
                }, 100);
            }

            // Observer les changements de sous-section pour recharger les seuils si nécessaire
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                        const section = mutation.target;
                        if (section.id === 'reglages-interpretation' && section.classList.contains('actif')) {
                            if (typeof chargerSeuilsInterpretationUI === 'function') {
                                chargerSeuilsInterpretationUI();
                            }
                        }
                    }
                });
            });

            // Observer la sous-section des réglages d'interprétation
            const sectionInterpretation = document.getElementById('reglages-interpretation');
            if (sectionInterpretation) {
                observer.observe(sectionInterpretation, {
                    attributes: true,
                    attributeFilter: ['class']
                });
            }
        });
    </script>

    <!-- ===============================
     MODALES IMPORT/EXPORT
     À placer AVANT </body>
     =============================== -->

    <!-- Modal Export -->
    <div id="modalExport" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
     background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
        <div
            class="modal-content-scroll">
            <h3 class="titre-bleu-mb-20">Exporter les données</h3>

            <div class="mb-20">
                <label
                    class="item-bleu-pale-clickable">
                    <input type="checkbox" id="checkToutesLes" onchange="toggleToutesLesCles()"
                        class="mr-10-scale-13">
                    <strong>Toutes les clés</strong>
                </label>
            </div>

            <div id="listeClesExport"
                class="overflow-y-300-border">
                <!-- Rempli dynamiquement -->
            </div>

            <div class="mt-20-flex-gap10-end">
                <button class="btn btn-annuler" onclick="fermerModalExport()">Annuler</button>
                <button class="btn btn-confirmer" onclick="executerExport()">Exporter</button>
            </div>
        </div>
    </div>

    <!-- Modal Import -->
    <div id="modalImport" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
     background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
        <div class="modal-content-small">
            <h3 class="titre-bleu-mb-20">Importer les données</h3>

            <div
                class="carte-mb20-orange">
                <p class="m-0-bleu-principal">
                    <strong>📐 Attention :</strong> L'importation écrasera les données existantes pour les clés
                    importées.
                </p>
            </div>

            <input type="file" id="fichierImport" accept=".json"
                class="zone-depot">

            <div id="apercu-import"
                class="hidden-mb20-success">
                <!-- Rempli après sélection du fichier -->
            </div>

            <div class="d-flex-gap10-end">
                <button class="btn btn-annuler" onclick="fermerModalImport()">Annuler</button>
                <button class="btn btn-confirmer" id="btnExecuterImport" onclick="executerImport()" disabled>Importer</button>
            </div>
        </div>
    </div>

    <!-- ===============================
     MOTEUR DE RECHERCHE AIDE
     =============================== -->
    <script>
        /**
         * Recherche dans la section Aide en temps réel
         */
        function rechercherDansAide() {
            const input = document.getElementById('aide-recherche-input');
            const clearBtn = document.getElementById('aide-recherche-clear');
            const resultatsDiv = document.getElementById('aide-recherche-resultats');
            const recherche = input.value.trim().toLowerCase();

            // Afficher/masquer le bouton X
            clearBtn.style.display = recherche ? 'block' : 'none';

            // Si recherche vide, tout réafficher
            if (!recherche) {
                reafficherToutesLesCartes();
                resultatsDiv.style.display = 'none';
                return;
            }

            // Rechercher dans toutes les cartes
            const cartes = document.querySelectorAll('#section-aide .carte');
            let nbResultats = 0;
            let nbCartesVisibles = 0;

            cartes.forEach(carte => {
                // Retirer les surlignages précédents
                retirerSurlignage(carte);

                // Chercher dans le texte de la carte
                const texte = carte.textContent.toLowerCase();

                if (texte.includes(recherche)) {
                    carte.style.display = 'block';
                    nbCartesVisibles++;

                    // Surligner les occurrences
                    nbResultats += surlignerTexte(carte, recherche);
                } else {
                    carte.style.display = 'none';
                }
            });

            // Afficher/masquer les sous-sections vides
            const sousSections = document.querySelectorAll('#section-aide .sous-section');
            sousSections.forEach(section => {
                const cartesVisibles = section.querySelectorAll('.carte[style*="display: block"], .carte:not([style*="display: none"])').length;

                // Masquer le titre de la sous-section s'il n'y a pas de cartes visibles
                const titre = section.querySelector('h2');
                if (titre) {
                    titre.style.display = cartesVisibles > 0 ? 'block' : 'none';
                }
            });

            // Afficher les résultats
            resultatsDiv.style.display = 'block';
            if (nbCartesVisibles === 0) {
                resultatsDiv.innerHTML = '❌ Aucun résultat trouvé pour « ' + recherche + ' »';
                resultatsDiv.style.color = '#dc3545';
            } else {
                resultatsDiv.innerHTML = '' + nbResultats + ' occurrence(s) trouvée(s) dans ' + nbCartesVisibles + ' carte(s)';
                resultatsDiv.style.color = '#28a745';
            }
        }

        /**
         * Surligne le texte recherché dans un élément
         */
        function surlignerTexte(element, recherche) {
            let nbOccurrences = 0;
            const regex = new RegExp('(' + recherche.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + ')', 'gi');

            // Parcourir tous les nœuds de texte
            const walker = document.createTreeWalker(
                element,
                NodeFilter.SHOW_TEXT,
                null,
                false
            );

            const nodesATraiter = [];
            let node;
            while (node = walker.nextNode()) {
                if (node.textContent.toLowerCase().includes(recherche)) {
                    nodesATraiter.push(node);
                }
            }

            nodesATraiter.forEach(node => {
                const parent = node.parentNode;

                // Ne pas surligner dans les scripts ou styles
                if (parent.nodeName === 'SCRIPT' || parent.nodeName === 'STYLE') {
                    return;
                }

                const texte = node.textContent;
                const fragments = texte.split(regex);

                if (fragments.length > 1) {
                    const span = document.createElement('span');

                    fragments.forEach((fragment, index) => {
                        if (fragment.toLowerCase() === recherche.toLowerCase()) {
                            const mark = document.createElement('mark');
                            mark.textContent = fragment;
                            mark.style.backgroundColor = '#ffeb3b';
                            mark.style.padding = '2px 4px';
                            mark.style.borderRadius = '3px';
                            mark.style.fontWeight = 'bold';
                            mark.className = 'aide-surlignage';
                            span.appendChild(mark);
                            nbOccurrences++;
                        } else if (fragment) {
                            span.appendChild(document.createTextNode(fragment));
                        }
                    });

                    parent.replaceChild(span, node);
                }
            });

            return nbOccurrences;
        }

        /**
         * Retire tous les surlignages
         */
        function retirerSurlignage(element) {
            const marks = element.querySelectorAll('mark.aide-surlignage');
            marks.forEach(mark => {
                const parent = mark.parentNode;
                parent.replaceChild(document.createTextNode(mark.textContent), mark);
                parent.normalize(); // Fusionner les nœuds de texte adjacents
            });
        }

        /**
         * Réaffiche toutes les cartes et sous-sections
         */
        function reafficherToutesLesCartes() {
            // Réafficher toutes les cartes
            const cartes = document.querySelectorAll('#section-aide .carte');
            cartes.forEach(carte => {
                carte.style.display = 'block';
                retirerSurlignage(carte);
            });

            // Réafficher tous les titres de sous-sections
            const titres = document.querySelectorAll('#section-aide .sous-section h2');
            titres.forEach(titre => {
                titre.style.display = 'block';
            });
        }

        /**
         * Efface la recherche et réinitialise l'affichage
         */
        function effacerRechercheAide() {
            const input = document.getElementById('aide-recherche-input');
            const clearBtn = document.getElementById('aide-recherche-clear');
            const resultatsDiv = document.getElementById('aide-recherche-resultats');

            input.value = '';
            clearBtn.style.display = 'none';
            resultatsDiv.style.display = 'none';
            reafficherToutesLesCartes();

            // Remettre le focus sur le champ
            input.focus();
        }

        // Amélioration UX : Focus sur le champ de recherche avec Ctrl+F ou Cmd+F
        document.addEventListener('keydown', function(e) {
            // Vérifier si on est dans la section Aide
            const sectionAide = document.getElementById('section-aide');
            if (!sectionAide || !sectionAide.classList.contains('active')) {
                return;
            }

            // Ctrl+F ou Cmd+F
            if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                e.preventDefault();
                const input = document.getElementById('aide-recherche-input');
                if (input) {
                    input.focus();
                    input.select();
                }
            }

            // ESC pour effacer
            if (e.key === 'Escape') {
                const input = document.getElementById('aide-recherche-input');
                if (input && document.activeElement === input) {
                    effacerRechercheAide();
                }
            }
        });
    </script>

    <!-- Fonctions d'import/export du matériel pédagogique (Beta 78) -->
    <script>
        // ========================================
        // DEBUG: AFFICHER LE CONTENU DU LOCALSTORAGE
        // ========================================
        function debugLocalStorage() {
            console.clear();
            console.log('========================================');
            console.log('DEBUG: Contenu du localStorage');
            console.log('========================================');

            // Lister toutes les clés
            console.log('\nToutes les clés disponibles:');
            for (let i = 0; i < localStorage.length; i++) {
                const cle = localStorage.key(i);
                console.log(`  - ${cle}`);
            }

            // Vérifier productions (clé: productions)
            console.log('\nProductions (artefacts):');
            const productions = localStorage.getItem('productions');
            if (productions) {
                try {
                    const parsed = JSON.parse(productions);
                    console.log(`  Trouvées: ${Array.isArray(parsed) ? parsed.length : 'Structure invalide'} production(s)`);
                    console.log('  Contenu:', parsed);
                } catch (e) {
                    console.log('  ERREUR de parsing:', e);
                }
            } else {
                console.log('  ❌ Aucune production trouvée (clé "productions" vide)');
            }

            // Vérifier grillesTemplates
            console.log('\nGrilles de critères:');
            const grilles = localStorage.getItem('grillesTemplates');
            if (grilles) {
                try {
                    const parsed = JSON.parse(grilles);
                    if (Array.isArray(parsed)) {
                        console.log(`  Grilles: ${parsed.length}`);
                        console.log('  Contenu:', parsed);
                    } else {
                        console.log('  Structure invalide (pas un tableau)');
                    }
                } catch (e) {
                    console.log('  ERREUR de parsing:', e);
                }
            } else {
                console.log('  ❌ Aucune grille trouvée (clé "grillesTemplates" vide)');
            }

            // Vérifier échelles
            console.log('\n📐 Échelles de performance:');
            const echellesTemplates = localStorage.getItem('echellesTemplates');
            const niveauxEchelle = localStorage.getItem('niveauxEchelle');
            const configEchelle = localStorage.getItem('configEchelle');

            if (echellesTemplates || niveauxEchelle || configEchelle) {
                console.log('  Données trouvées:');
                if (echellesTemplates) {
                    console.log('    • echellesTemplates:', JSON.parse(echellesTemplates));
                }
                if (niveauxEchelle) {
                    console.log('    • niveauxEchelle:', JSON.parse(niveauxEchelle));
                }
                if (configEchelle) {
                    console.log('    • configEchelle:', JSON.parse(configEchelle));
                }
            } else {
                console.log('  ❌ Aucune échelle trouvée');
            }

            console.log('\n========================================');
            alert('Informations affichées dans la console du navigateur.\n\nAppuie sur F12 pour voir les détails.');
        }

        // ========================================
        // EXPORT DES GRILLES D'ÉVALUATION
        // ========================================
        function exporterGrilles() {
            try {
                const grillesTemplates = JSON.parse(localStorage.getItem('grillesTemplates') || '[]');

                // Filtrer pour garder seulement les grilles (pas les échelles)
                const grilles = grillesTemplates.filter(g => g.type !== 'echelle');

                if (grilles.length === 0) {
                    alert('Aucune grille d\'évaluation à exporter.\n\nCrée d\'abord des grilles dans la section Évaluations.');
                    return;
                }

                // Créer le fichier JSON
                const json = JSON.stringify(grilles, null, 2);
                const blob = new Blob([json], { type: 'application/json' });
                const url = URL.createObjectURL(blob);

                // Télécharger
                const a = document.createElement('a');
                a.href = url;
                const dateStr = new Date().toISOString().slice(0, 10);
                a.download = `grilles-evaluation-${dateStr}.json`;
                a.click();
                URL.revokeObjectURL(url);

                if (typeof afficherNotificationSucces === 'function') {
                    afficherNotificationSucces(`Export réussi : ${grilles.length} grille(s) exportée(s)`);
                } else {
                    alert(`Export réussi : ${grilles.length} grille(s) exportée(s)`);
                }

            } catch (err) {
                console.error('Erreur exportation grilles:', err);
                alert('Erreur lors de l\'exportation des grilles.');
            }
        }

        // ========================================
        // EXPORT DES ÉCHELLES DE PERFORMANCE
        // ========================================
        function exporterEchelles() {
            try {
                const echellesTemplates = JSON.parse(localStorage.getItem('echellesTemplates') || '[]');
                const niveauxEchelle = JSON.parse(localStorage.getItem('niveauxEchelle') || '[]');
                const configEchelle = JSON.parse(localStorage.getItem('configEchelle') || '{}');

                // Vérifier qu'il y a des données
                if (echellesTemplates.length === 0 && niveauxEchelle.length === 0 && Object.keys(configEchelle).length === 0) {
                    alert('Aucune échelle de performance à exporter.\n\nConfigure d\'abord ton échelle dans Réglages → Échelles de performance.');
                    return;
                }

                // Créer un objet avec toutes les données d'échelles
                const exportData = {
                    echellesTemplates: echellesTemplates,
                    niveauxEchelle: niveauxEchelle,
                    configEchelle: configEchelle
                };

                // Créer le fichier JSON
                const json = JSON.stringify(exportData, null, 2);
                const blob = new Blob([json], { type: 'application/json' });
                const url = URL.createObjectURL(blob);

                // Télécharger
                const a = document.createElement('a');
                a.href = url;
                const dateStr = new Date().toISOString().slice(0, 10);
                a.download = `echelles-performance-${dateStr}.json`;
                a.click();
                URL.revokeObjectURL(url);

                if (typeof afficherNotificationSucces === 'function') {
                    afficherNotificationSucces(`Export réussi : échelle(s) exportée(s)`);
                } else {
                    alert(`Export réussi : échelle(s) exportée(s)`);
                }

            } catch (err) {
                console.error('Erreur exportation échelles:', err);
                alert('Erreur lors de l\'exportation des échelles.');
            }
        }

        // ========================================
        // EXPORT DES PRODUCTIONS
        // ========================================
        function exporterProductions() {
            try {
                const productions = JSON.parse(localStorage.getItem('productions') || '[]');

                if (productions.length === 0) {
                    alert('Aucune production à exporter.\n\nCrée d\'abord des productions dans Réglages → Productions.');
                    return;
                }

                // Créer le fichier JSON
                const json = JSON.stringify(productions, null, 2);
                const blob = new Blob([json], { type: 'application/json' });
                const url = URL.createObjectURL(blob);

                // Télécharger
                const a = document.createElement('a');
                a.href = url;
                const dateStr = new Date().toISOString().slice(0, 10);
                a.download = `productions-${dateStr}.json`;
                a.click();
                URL.revokeObjectURL(url);

                if (typeof afficherNotificationSucces === 'function') {
                    afficherNotificationSucces(`Export réussi : ${productions.length} production(s) exportée(s)`);
                } else {
                    alert(`Export réussi : ${productions.length} production(s) exportée(s)`);
                }

            } catch (err) {
                console.error('Erreur exportation productions:', err);
                alert('Erreur lors de l\'exportation des productions.');
            }
        }

        // ========================================
        // IMPORT DES GRILLES D'ÉVALUATION
        // ========================================
        function importerGrilles(event) {
            const fichier = event.target.files[0];
            if (!fichier) return;

            const lecteur = new FileReader();
            lecteur.onload = function(e) {
                try {
                    const grillesImportees = JSON.parse(e.target.result);

                    // Validation structure
                    if (!Array.isArray(grillesImportees)) {
                        alert('Format invalide : le fichier doit contenir un tableau de grilles.');
                        return;
                    }

                    // Validation contenu
                    for (let grille of grillesImportees) {
                        if (!grille.id || !grille.nom || !grille.criteres) {
                            alert('Format invalide : chaque grille doit avoir un id, un nom et des critères.');
                            return;
                        }
                    }

                    // Charger les grilles existantes
                    let grillesTemplates = JSON.parse(localStorage.getItem('grillesTemplates') || '[]');

                    // Fusionner (remplacer si ID existe, ajouter sinon)
                    let nbAjoutees = 0;
                    let nbMisesAJour = 0;

                    grillesImportees.forEach(grilleImportee => {
                        const index = grillesTemplates.findIndex(g => g.id === grilleImportee.id);
                        if (index >= 0) {
                            grillesTemplates[index] = grilleImportee;
                            nbMisesAJour++;
                        } else {
                            grillesTemplates.push(grilleImportee);
                            nbAjoutees++;
                        }
                    });

                    // Sauvegarder
                    localStorage.setItem('grillesTemplates', JSON.stringify(grillesTemplates));

                    // Notification
                    let message = `Import réussi :\n• ${nbAjoutees} grille(s) ajoutée(s)\n• ${nbMisesAJour} grille(s) mise(s) à jour`;

                    if (typeof afficherNotificationSucces === 'function') {
                        afficherNotificationSucces(message.replace(/\n/g, ' '));
                    } else {
                        alert(message);
                    }

                    // Réinitialiser le champ fichier
                    event.target.value = '';

                } catch (err) {
                    console.error('Erreur import grilles:', err);
                    alert('Fichier JSON invalide ou format incorrect.');
                }
            };
            lecteur.readAsText(fichier);
        }

        // ========================================
        // IMPORT DES ÉCHELLES DE PERFORMANCE
        // ========================================
        function importerEchelles(event) {
            const fichier = event.target.files[0];
            if (!fichier) return;

            const lecteur = new FileReader();
            lecteur.onload = function(e) {
                try {
                    const donneesImportees = JSON.parse(e.target.result);

                    // Validation structure (doit contenir au moins une des trois clés)
                    if (!donneesImportees.echellesTemplates && !donneesImportees.niveauxEchelle && !donneesImportees.configEchelle) {
                        alert('Format invalide : le fichier doit contenir echellesTemplates, niveauxEchelle ou configEchelle.');
                        return;
                    }

                    // Importer echellesTemplates
                    if (donneesImportees.echellesTemplates) {
                        localStorage.setItem('echellesTemplates', JSON.stringify(donneesImportees.echellesTemplates));
                    }

                    // Importer niveauxEchelle
                    if (donneesImportees.niveauxEchelle) {
                        localStorage.setItem('niveauxEchelle', JSON.stringify(donneesImportees.niveauxEchelle));
                    }

                    // Importer configEchelle
                    if (donneesImportees.configEchelle) {
                        localStorage.setItem('configEchelle', JSON.stringify(donneesImportees.configEchelle));
                    }

                    // Notification
                    let message = 'Import réussi : Échelle(s) de performance importée(s)';

                    if (typeof afficherNotificationSucces === 'function') {
                        afficherNotificationSucces(message);
                    } else {
                        alert(message);
                    }

                    // Réinitialiser le champ fichier
                    event.target.value = '';

                    // Recharger la page pour appliquer les changements
                    if (confirm('Import terminé ! Recharger la page pour voir les échelles importées ?')) {
                        location.reload();
                    }

                } catch (err) {
                    console.error('Erreur import échelles:', err);
                    alert('Fichier JSON invalide ou format incorrect.');
                }
            };
            lecteur.readAsText(fichier);
        }

        // ========================================
        // IMPORT DES PRODUCTIONS
        // ========================================
        function importerProductions(event) {
            const fichier = event.target.files[0];
            if (!fichier) return;

            const lecteur = new FileReader();
            lecteur.onload = function(e) {
                try {
                    const productionsImportees = JSON.parse(e.target.result);

                    // Validation structure
                    if (!Array.isArray(productionsImportees)) {
                        alert('Format invalide : le fichier doit contenir un tableau de productions.');
                        return;
                    }

                    // Validation contenu
                    for (let prod of productionsImportees) {
                        if (!prod.id || !prod.titre || !prod.type) {
                            alert('Format invalide : chaque production doit avoir au minimum un id, un titre et un type.');
                            return;
                        }
                    }

                    // Charger les productions existantes (clé: productions)
                    let productions = JSON.parse(localStorage.getItem('productions') || '[]');

                    // Fusionner (remplacer si ID existe, ajouter sinon)
                    let nbAjoutees = 0;
                    let nbMisesAJour = 0;

                    productionsImportees.forEach(prodImportee => {
                        const index = productions.findIndex(p => p.id === prodImportee.id);
                        if (index >= 0) {
                            productions[index] = prodImportee;
                            nbMisesAJour++;
                        } else {
                            productions.push(prodImportee);
                            nbAjoutees++;
                        }
                    });

                    // Sauvegarder (clé: productions)
                    localStorage.setItem('productions', JSON.stringify(productions));

                    // Recalculer si module disponible
                    if (typeof afficherTableauProductions === 'function') {
                        afficherTableauProductions();
                    }

                    // Notification
                    let message = `Import réussi :\n• ${nbAjoutees} production(s) ajoutée(s)\n• ${nbMisesAJour} production(s) mise(s) à jour`;

                    if (typeof afficherNotificationSucces === 'function') {
                        afficherNotificationSucces(message.replace(/\n/g, ' '));
                    } else {
                        alert(message);
                    }

                    // Réinitialiser le champ fichier
                    event.target.value = '';

                    // Recharger la page pour appliquer les changements
                    if (confirm('Import terminé ! Recharger la page pour voir les productions importées ?')) {
                        location.reload();
                    }

                } catch (err) {
                    console.error('Erreur import productions:', err);
                    alert('Fichier JSON invalide ou format incorrect.');
                }
            };
            lecteur.readAsText(fichier);
        }
    </script>

    <!-- Script pour afficher les informations contextuelles dans la navigation -->
    <script>
        /**
         * Affiche les informations contextuelles au centre sous le titre (cours, semaine, date)
         * Sources : cours.js (listeCours), calendrierComplet (semaine), Date système
         */
        function afficherInfosContextuelles() {
            const container = document.getElementById('info-contextuelles-centre');
            if (!container) return;

            // 1. Récupérer le cours actif depuis cours.js (localStorage)
            const listeCours = JSON.parse(localStorage.getItem('listeCours') || '[]');
            const coursActif = listeCours.find(c => c.actif) || listeCours[0] || null;
            const nomCours = coursActif ? (coursActif.nomCours || coursActif.codeCours || 'Aucun cours') : 'Aucun cours';

            // 2. Calculer la semaine actuelle depuis calendrierComplet (trimestre.js)
            const calendrier = JSON.parse(localStorage.getItem('calendrierComplet') || '{}');
            const aujourdhuiISO = new Date().toISOString().split('T')[0];
            const infoJour = calendrier[aujourdhuiISO] || null;

            const semaine = infoJour && infoJour.numeroSemaine ? `Semaine ${infoJour.numeroSemaine}` : 'Semaine non définie';

            // 3. Formater la date d'aujourd'hui (format: lundi 3 novembre 2025)
            const options = { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' };
            const dateFormatee = new Date().toLocaleDateString('fr-CA', options);

            // 4. Récupérer le groupe et le rang de la séance
            let groupeInfo = '';
            let seanceInfo = '';
            if (infoJour && (infoJour.statut === 'cours' || infoJour.statut === 'reprise')) {
                const seancesCompletes = JSON.parse(localStorage.getItem('seancesCompletes') || '{}');
                const seancesDuJour = seancesCompletes[aujourdhuiISO];

                // Récupérer le groupe de la première séance du jour
                if (seancesDuJour && seancesDuJour.length > 0 && seancesDuJour[0].groupe) {
                    groupeInfo = `Groupe ${seancesDuJour[0].groupe} : `;
                }

                // Utiliser la fonction source unique définie dans horaire.js
                const rangSeance = window.obtenirRangSeanceDansSemaine(aujourdhuiISO);
                if (rangSeance && rangSeance.ordinal) {
                    seanceInfo = ` · ${rangSeance.ordinal} séance`;
                }
            }

            // 5. Mettre à jour le HTML dans la navigation
            container.innerHTML = `
                <br>${nomCours}
                <br>${groupeInfo}${semaine} · ${dateFormatee}${seanceInfo}
            `;
        }

        // Appeler au chargement de la page
        document.addEventListener('DOMContentLoaded', afficherInfosContextuelles);

        // Rafraîchir si changement de cours ou calendrier
        window.addEventListener('storage', afficherInfosContextuelles);
    </script>
</body>

</html>