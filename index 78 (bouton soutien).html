<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Syst√®me de suivi Beta 0.79 - Correctifs hi√©rarchie</title>

    <!-- AJOUTER CETTE LIGNE -->
    <link rel="stylesheet" href="styles.css?v=1761668400">

    <style>
        /* Les styles embarqu√©s restent ici */
        /* ===============================
           VARIABLES CSS
           =============================== */
        :root {
            /* Palette de couleurs bleues */
            --bleu-principal: #032e5c;
            --bleu-moyen: #0a4d8c;
            --bleu-fonce: #021d3a;
            --bleu-pale: #e8f1f8;
            --bleu-tres-pale: #f4f8fc;
            --bleu-leger: #b8d4e8;
            --bleu-carte: #d0e4f5;

            /* Navigation */
            --sous-nav-bg: #f0f6fb;
            --sous-nav-normal: #0a4d8c;
            --sous-nav-hover: #032e5c;
            --sous-nav-actif: #032e5c;

            /* Accents */
            --orange-accent: #ff6b35;

            /* Statuts et alertes */
            --risque-critique: #dc3545;
            --succes: #28a745;

            /* Espacement */
            --espacement-petit: 8px;
            --espacement-moyen: 15px;
            --espacement-grand: 25px;
        }

        /* ===============================
           RESET ET BASE
           =============================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
            padding: 20px;
        }

        /* ===============================
           CONTENEUR PRINCIPAL
           =============================== */
        .conteneur {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(3, 46, 92, 0.1);
            overflow: hidden;
        }

        /* ===============================
           EN-T√äTE
           =============================== */
        .entete {
            background: var(--bleu-principal);
            color: white;
            padding: var(--espacement-grand);
            text-align: center;
            position: relative;
        }

        .entete h1 {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        .entete h2 {
            font-size: 1.2rem;
            font-weight: 300;
            color: var(--bleu-pale);
            margin-bottom: 15px;
        }

        .version {
            font-size: 0.9rem;
            color: var(--bleu-pale);
            margin-top: 10px;
        }

        .statut-test {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--orange-accent);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
        }

        /* ===============================
           NAVIGATION PRINCIPALE
           =============================== */
        .navigation-principale {
            background: var(--bleu-principal);
            padding: 0;
            display: flex;
            justify-content: center;
            gap: 0;
            border-bottom: 3px solid var(--orange-accent);
        }

        .navigation-principale button {
            flex: 1;
            padding: 15px 25px;
            background: transparent;
            color: var(--bleu-pale);
            border: none;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .navigation-principale button:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .navigation-principale button.actif {
            background: var(--bleu-moyen);
            color: white;
            border-bottom: 3px solid var(--orange-accent);
        }

        /* ===============================
           SOUS-NAVIGATION
           =============================== */
        .sous-navigation {
            background: var(--sous-nav-bg);
            padding: 12px 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            border-bottom: 1px solid var(--bleu-leger);
            min-height: 50px;
            align-items: center;
        }

        .sous-navigation button {
            padding: 8px 16px;
            background: white;
            color: var(--sous-nav-normal);
            border: 1px solid var(--bleu-leger);
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .sous-navigation button:hover {
            background: var(--bleu-pale);
            border-color: var(--sous-nav-hover);
            color: var(--sous-nav-hover);
        }

        .sous-navigation button.actif {
            background: var(--sous-nav-actif);
            color: white;
            border-color: var(--sous-nav-actif);
        }

        .sous-navigation.vide {
            background: transparent;
            padding: 20px;
            border: none;
        }

        .sous-navigation .vide {
            width: 100%;
            text-align: center;
            color: var(--bleu-leger);
            font-style: italic;
        }

        /* ===============================
           CONTENU PRINCIPAL
           =============================== */
        .contenu {
            padding: var(--espacement-grand);
            min-height: 500px;
        }

        /* ===============================
           SECTIONS ET SOUS-SECTIONS
           =============================== */
        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: apparition 0.3s ease;
        }

        .sous-section {
            display: none;
        }

        .sous-section.active {
            display: block;
            animation: apparition 0.3s ease;
        }

        @keyframes apparition {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===============================
           CARTES
           =============================== */
        .carte {
            background: white;
            border: 1px solid var(--bleu-pale);
            border-radius: 8px;
            padding: var(--espacement-moyen);
            margin-bottom: var(--espacement-moyen);
            box-shadow: 0 2px 8px rgba(3, 46, 92, 0.05);
        }

        .carte h3 {
            color: var(--bleu-principal);
            font-size: 1.1rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--bleu-pale);
        }

        /* ===============================
           BADGES DE TEST
           =============================== */
        .badge-info {
            display: inline-block;
            background: var(--bleu-pale);
            color: var(--bleu-principal);
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            margin: 5px;
        }

        .badge-succes {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        /* ===============================
           FORMULAIRES
           =============================== */
        .controle-form {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.95rem;
            transition: border-color 0.2s;
        }

        .controle-form:focus {
            outline: none;
            border-color: var(--bleu-principal);
            box-shadow: 0 0 0 3px rgba(3, 46, 92, 0.1);
        }

        .groupe-form {
            margin-bottom: 15px;
        }

        .groupe-form label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--bleu-principal);
        }

        /* ===============================
           TABLEAUX
           =============================== */
        .tableau {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .tableau th {
            background: var(--bleu-pale);
            padding: 10px;
            text-align: left;
            border: 1px solid #ddd;
            font-weight: 600;
            color: var(--bleu-principal);
        }

        .tableau td {
            padding: 10px;
            border: 1px solid #ddd;
        }

        .tableau tr:hover {
            background: var(--bleu-tres-pale);
        }

        /* ===============================
           UTILITAIRES
           =============================== */
        .text-muted {
            color: #6c757d;
        }

        .mt-3 {
            margin-top: 15px;
        }

        .btn-groupe {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        /* ===============================
           NOTIFICATIONS (pour module 14-utilitaires.js)
           =============================== */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(400px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .notification-succes {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 9999;
            animation: slideIn 0.3s ease;
            max-width: 400px;
        }

        .notification-details {
            margin-top: 5px;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* ===============================
           ZONE DE DEBUG
           =============================== */
        .debug-zone {
            background: #f8f9fa;
            border: 2px dashed #6c757d;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .debug-zone h4 {
            color: #6c757d;
            margin-bottom: 10px;
        }

        /* ===============================
           MOTEUR DE RECHERCHE AIDE
           =============================== */
        #aide-recherche-input:focus {
            border-color: var(--bleu-principal);
            box-shadow: 0 0 0 3px rgba(3, 46, 92, 0.1);
        }

        #aide-recherche-clear:hover {
            color: var(--risque-critique);
            transform: translateY(-50%) scale(1.2);
        }

        mark.aide-surlignage {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                background-color: #fff;
            }
            to {
                opacity: 1;
                background-color: #ffeb3b;
            }
        }

        /* Animation des cartes lors du filtrage */
        #section-aide .carte {
            transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
        }

        #section-aide .carte[style*="display: none"] {
            opacity: 0;
            transform: scale(0.98);
        }

        /* Bouton Soutenir le projet */
        .btn-soutien {
            display: inline-block;
            margin-top: 12px;
            padding: 8px 16px;
            background: var(--orange-accent);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(255, 107, 53, 0.3);
        }

        .btn-soutien:hover {
            background: #ff5722;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.4);
        }

        .btn-soutien:active {
            transform: translateY(0);
            box-shadow: 0 2px 6px rgba(255, 107, 53, 0.3);
        }
    </style>
</head>

<body>
    <div class="conteneur">

        <!-- EN-T√äTE -->
        <header class="entete">
            <div class="entete-conteneur">
                <!-- Logo et m√©tadonn√©es -->
                <div class="logo-section">
                    <a href="https://codexnumeris.org" target="_blank" rel="noopener noreferrer" class="logo-link">
                        <div class="logo">
                            <img src="logo-codex-numeris.png" alt="Logo Codex Numeris">
                        </div>
                    </a>
                    <div class="logo-meta">

                        <a href="https://codexnumeris.org" target="_blank" rel="noopener noreferrer"
                            class="site-link">codexnumeris.org</a>
                        <br>
                        R√©fl√©chir, exp√©rimenter, partager.
                        <br>
                        <a href="https://codexnumeris.org/#/portal/support" target="_blank" rel="noopener noreferrer"
                            class="btn-soutien">Soutenir le projet</a>
                    </div>
                </div>

                <!-- Titre et description centr√©s -->
                <div class="titre-section">
                    <h1>CODEX NUMERIS</h1>
                    <p class="sous-titre">Syst√®me de suivi des apprentissages</p>

                    <!-- S√©lecteur de mode (sera g√©n√©r√© par 17-modes.js) -->
                    <div id="selecteur-mode"></div>
                </div>

                <!-- Informations l√©gales et techniques (√† droite) -->
                <div class="info-legales-section">
                    <div class="meta">
                        Beta 0.79
                        <br>Cr√©√© par Gr√©goire B√©dard
                        <br>Double licence : GPL v3 (code) + CC BY-SA 4.0 (contenu)
                        <br>28 octobre 2025
                    </div>
                </div>
            </div>
        </header>

        <!-- NAVIGATION PRINCIPALE -->
        <nav class="navigation-principale">
            <button data-onglet="tableau-bord">Tableau de bord</button>
            <button data-onglet="presences">Pr√©sences</button>
            <button data-onglet="evaluations">√âvaluations</button>
            <button data-onglet="materiel">Mat√©riel</button>
            <button data-onglet="reglages">R√©glages</button>
            <button data-onglet="aide">Aide</button>
        </nav>

        <!-- SOUS-NAVIGATION (g√©n√©r√©e dynamiquement par 02-navigation.js) -->
        <div id="sous-navigation" class="sous-navigation"></div>

        <!-- CONTENU PRINCIPAL -->
        <main class="contenu">

            <!-- ===================================
     SECTION: TABLEAU DE BORD
     =================================== -->
            <section id="section-tableau-bord" class="section">

                <!-- Sous-section: Aper√ßu -->
                <div id="tableau-bord-apercu" class="sous-section">
                    <h2>Vue d'ensemble</h2>
                    <p class="text-muted">Monitorage p√©dagogique et priorisation des interventions</p>

                    <!-- ========== M√âTRIQUES GLOBALES DU GROUPE ========== -->
                    <div class="carte">
                        <h3 style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Indicateurs globaux du groupe</span>
                            <span style="font-size: 1.2rem;">
                                <span class="emoji-toggle" data-target="note-indicateurs">‚ÑπÔ∏è</span>
                            </span>
                        </h3>

                        <!-- Carte Note -->
                        <div id="note-indicateurs" class="carte-info-toggle carte-info-note" style="display: none;">
                            <strong>Note :</strong> Les indices A-C-P mesurent l'engagement des √©tudiants. Assiduit√© (A) : pr√©sence en classe. Compl√©tion (C) : remise des travaux. Performance (P) : qualit√© des productions √©valu√©es. Ces trois indicateurs permettent d'identifier les √©tudiants √† risque.
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <!-- Assiduit√© SOM -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Assiduit√© (SOM)</span>
                                    <strong id="tb-assiduite-som" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Assiduit√© PAN -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Assiduit√© (PAN)</span>
                                    <strong id="tb-assiduite-pan" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Compl√©tion SOM -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Compl√©tion (SOM)</span>
                                    <strong id="tb-completion-som" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Compl√©tion PAN -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Compl√©tion (PAN)</span>
                                    <strong id="tb-completion-pan" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Performance SOM -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Performance (SOM)</span>
                                    <strong id="tb-performance-som" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Performance PAN -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Performance (PAN)</span>
                                    <strong id="tb-performance-pan" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ========== RISQUE D'√âCHEC ========== -->
                    <div class="carte">
                        <h3 style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Risque d'√©chec</span>
                            <span style="font-size: 1.2rem;">
                                <span class="emoji-toggle" data-target="note-risque">‚ÑπÔ∏è</span>
                            </span>
                        </h3>

                        <!-- Carte Note -->
                        <div id="note-risque" class="carte-info-toggle carte-info-note" style="display: none;">
                            <strong>Note :</strong> Le risque d'√©chec est calcul√© √† partir des indices A-C-P (Assiduit√©, Compl√©tion, Performance). Les risques faibles regroupent les niveaux minimal, faible et mod√©r√©, indiquant une situation stable.
                        </div>

                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <!-- Risques faibles combin√©s -->
                            <div
                                style="background: var(--alerte-fond-succes); padding: 15px; border-radius: 8px; border: 2px solid var(--btn-confirmer);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Risques faibles</span>
                                    <strong id="tb-risque-faibles"
                                        style="font-size: 1.8rem; color: var(--btn-confirmer);">0</strong>
                                </div>
                            </div>

                            <!-- Risque √©lev√© -->
                            <div
                                style="background: #fffbf0; padding: 15px; border-radius: 8px; border: 2px solid var(--risque-eleve);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Risque √©lev√©</span>
                                    <strong id="tb-risque-eleve"
                                        style="font-size: 1.8rem; color: var(--risque-eleve);">0</strong>
                                </div>
                            </div>

                            <!-- Risque tr√®s √©lev√© -->
                            <div
                                style="background: #fff8f0; padding: 15px; border-radius: 8px; border: 2px solid var(--risque-tres-eleve);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Risque tr√®s √©lev√©</span>
                                    <strong id="tb-risque-tres-eleve"
                                        style="font-size: 1.8rem; color: var(--risque-tres-eleve);">0</strong>
                                </div>
                            </div>

                            <!-- Risque critique -->
                            <div
                                style="background: #fff5f5; padding: 15px; border-radius: 8px; border: 2px solid var(--risque-critique);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Risque critique</span>
                                    <strong id="tb-risque-critique"
                                        style="font-size: 1.8rem; color: var(--risque-critique);">0</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ========== DISTRIBUTION DES PATTERNS ========== -->
                    <div class="carte">
                        <h3 style="display: flex; justify-content: space-between; align-items: center;">
                            <span>R√©partition des patterns d'apprentissage</span>
                            <span style="font-size: 1.2rem;">
                                <span class="emoji-toggle" data-target="note-patterns">‚ÑπÔ∏è</span>
                            </span>
                        </h3>

                        <!-- Carte Note -->
                        <div id="note-patterns" class="carte-info-toggle carte-info-note" style="display: none;">
                            <strong>Note :</strong> Les patterns identifient les trajectoires d'apprentissage selon l'√©volution des indices A-C-P. Une progression stable indique une am√©lioration constante, tandis que les blocages signalent des difficult√©s n√©cessitant un accompagnement cibl√©.
                        </div>

                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <!-- Stable -->
                            <div style="background: var(--alerte-fond-succes); padding: 15px; border-radius: 8px; border: 2px solid var(--btn-confirmer);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Progression stable</span>
                                    <strong id="tb-pattern-stable"
                                        style="font-size: 1.8rem; color: var(--btn-confirmer);">0</strong>
                                </div>
                                <div
                                    style="margin-top: 8px; background: white; height: 8px; border-radius: 4px; overflow: hidden;">
                                    <div id="tb-barre-stable"
                                        style="height: 100%; background: var(--btn-confirmer); width: 0%;"></div>
                                </div>
                            </div>

                            <!-- D√©fi sp√©cifique -->
                            <div style="background: #f3eeff; padding: 15px; border-radius: 8px; border: 2px solid var(--btn-modifier);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">D√©fi sp√©cifique</span>
                                    <strong id="tb-pattern-defi"
                                        style="font-size: 1.8rem; color: var(--btn-modifier);">0</strong>
                                </div>
                                <div
                                    style="margin-top: 8px; background: white; height: 8px; border-radius: 4px; overflow: hidden;">
                                    <div id="tb-barre-defi"
                                        style="height: 100%; background: var(--btn-modifier); width: 0%;"></div>
                                </div>
                            </div>

                            <!-- Blocage √©mergent -->
                            <div style="background: #fffbea; padding: 15px; border-radius: 8px; border: 2px solid var(--risque-modere);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Blocage √©mergent</span>
                                    <strong id="tb-pattern-emergent"
                                        style="font-size: 1.8rem; color: var(--risque-modere);">0</strong>
                                </div>
                                <div
                                    style="margin-top: 8px; background: white; height: 8px; border-radius: 4px; overflow: hidden;">
                                    <div id="tb-barre-emergent"
                                        style="height: 100%; background: var(--risque-modere); width: 0%;"></div>
                                </div>
                            </div>

                            <!-- Blocage critique -->
                            <div style="background: var(--alerte-fond-attention); padding: 15px; border-radius: 8px; border: 2px solid var(--btn-annuler);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Blocage critique</span>
                                    <strong id="tb-pattern-critique"
                                        style="font-size: 1.8rem; color: var(--btn-annuler);">0</strong>
                                </div>
                                <div
                                    style="margin-top: 8px; background: white; height: 8px; border-radius: 4px; overflow: hidden;">
                                    <div id="tb-barre-critique"
                                        style="height: 100%; background: var(--btn-annuler); width: 0%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ========== SYST√àME R√ÄI ========== -->
                    <div class="carte">
                        <h3 style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Mod√®le de la R√©ponse √† l'intervention (R√†I)</span>
                            <span style="font-size: 1.2rem;">
                                <span class="emoji-toggle" data-target="note-rai">‚ÑπÔ∏è</span>
                            </span>
                        </h3>

                        <!-- Carte Note -->
                        <div id="note-rai" class="carte-info-toggle carte-info-note" style="display: none;">
                            <strong>Note :</strong> Le syst√®me R√†I r√©partit les √©tudiants en 3 niveaux d'intervention selon leur risque d'√©chec. Niveau 1 (vert) : suivi r√©gulier suffisant. Niveau 2 (violet) : interventions cibl√©es recommand√©es. Niveau 3 (terracotta) : interventions intensives n√©cessaires.
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <!-- Niveau 1 -->
                            <div style="background: var(--alerte-fond-succes); padding: 15px; border-radius: 8px; border: 2px solid var(--btn-confirmer);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Niveau 1</span>
                                    <strong id="tb-rai-niveau1-pct"
                                            style="font-size: 1.8rem; color: var(--btn-confirmer);">0%</strong>
                                </div>
                            </div>

                            <!-- Niveau 2 -->
                            <div style="background: #f3eeff; padding: 15px; border-radius: 8px; border: 2px solid var(--btn-modifier);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Niveau 2</span>
                                    <strong id="tb-rai-niveau2-pct"
                                            style="font-size: 1.8rem; color: var(--btn-modifier);">0%</strong>
                                </div>
                            </div>

                            <!-- Niveau 3 -->
                            <div style="background: var(--alerte-fond-attention); padding: 15px; border-radius: 8px; border: 2px solid var(--btn-annuler);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Niveau 3</span>
                                    <strong id="tb-rai-niveau3-pct"
                                            style="font-size: 1.8rem; color: var(--btn-annuler);">0%</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ========== RACCOURCIS RAPIDES ========== -->
                    <div class="carte">
                        <h3>Raccourcis rapides</h3>

                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                            <!-- Voir la liste compl√®te -->
                            <button onclick="afficherSousSection('tableau-bord-liste')" style="padding: 20px; background: white; border: 2px solid var(--bleu-principal); 
                               border-radius: 8px; cursor: pointer; text-align: left; transition: all 0.2s;"
                                onmouseover="this.style.background='var(--bleu-tres-pale)'"
                                onmouseout="this.style.background='white'">
                                <div style="color: var(--bleu-principal); font-size: 1.5rem; margin-bottom: 8px;">
                                </div>
                                <div style="font-weight: 600; color: var(--bleu-principal); margin-bottom: 5px;">
                                    Liste compl√®te
                                </div>
                                <div style="font-size: 0.85rem; color: #666;">
                                    Consulter tous les √©tudiants avec filtres et recherche
                                </div>
                            </button>

                            <!-- Saisir pr√©sences -->
                            <button onclick="afficherSection('presences')" style="padding: 20px; background: white; border: 2px solid var(--bleu-principal); 
                               border-radius: 8px; cursor: pointer; text-align: left; transition: all 0.2s;"
                                onmouseover="this.style.background='var(--bleu-tres-pale)'"
                                onmouseout="this.style.background='white'">
                                <div style="color: var(--bleu-principal); font-size: 1.5rem; margin-bottom: 8px;">
                                </div>
                                <div style="font-weight: 600; color: var(--bleu-principal); margin-bottom: 5px;">
                                    Saisir pr√©sences
                                </div>
                                <div style="font-size: 0.85rem; color: #666;">
                                    Enregistrer l'assiduit√© au cours d'aujourd'hui
                                </div>
                            </button>

                            <!-- √âvaluer productions -->
                            <button onclick="afficherSection('evaluations')" style="padding: 20px; background: white; border: 2px solid var(--bleu-principal); 
                               border-radius: 8px; cursor: pointer; text-align: left; transition: all 0.2s;"
                                onmouseover="this.style.background='var(--bleu-tres-pale)'"
                                onmouseout="this.style.background='white'">
                                <div style="color: var(--bleu-principal); font-size: 1.5rem; margin-bottom: 8px;">üìù
                                </div>
                                <div style="font-weight: 600; color: var(--bleu-principal); margin-bottom: 5px;">
                                    √âvaluer productions
                                </div>
                                <div style="font-size: 0.85rem; color: #666;">
                                    Corriger et √©valuer les artefacts du portfolio
                                </div>
                            </button>
                        </div>
                    </div>

                </div>
                <!-- FIN sous-section tableau-bord-apercu -->

                <!-- Sous-section: Liste des individus -->
                <div id="tableau-bord-liste" class="sous-section">
                    <h2>Liste des √©tudiant¬∑es</h2>
                    <p class="text-muted">Consultation de la liste compl√®te et acc√®s aux portfolios individuels</p>

                    <div class="carte">
                        <h3>üë• √âtudiant¬∑es inscrit¬∑es
                            <span id="compteur-tableau-bord-liste"
                                style="color: #666; font-size: 0.9rem; font-weight: normal;">
                                (0 √©tudiant¬∑e)
                            </span>
                        </h3>

                        <!-- ZONE INFO: Lien vers configuration -->
                        <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px;
                margin-bottom: 20px; border-left: 4px solid var(--bleu-principal);">
                            <p style="margin: 0; color: var(--bleu-moyen);">
                                <strong>Pour ajouter, modifier ou supprimer des √©tudiants :</strong>
                                Allez dans <strong>R√©glages ‚Ä∫ Groupe</strong>
                            </p>
                        </div>

                        <!-- FILTRAGE ET RECHERCHE -->
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div class="groupe-form">
                                    <label for="filtre-groupe-liste">Groupe</label>
                                    <select id="filtre-groupe-liste" class="controle-form"
                                        onchange="afficherListeEtudiantsConsultation()">
                                        <option value="">Tous les groupes</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label for="filtre-programme-liste">Programme</label>
                                    <select id="filtre-programme-liste" class="controle-form"
                                        onchange="afficherListeEtudiantsConsultation()">
                                        <option value="">Tous les programmes</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label for="filtre-statut-liste">Statut</label>
                                    <select id="filtre-statut-liste" class="controle-form"
                                        onchange="afficherListeEtudiantsConsultation()">
                                        <option value="actifs">Actifs seulement</option>
                                        <option value="tous">Tous</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label for="recherche-nom-liste">Recherche (nom/pr√©nom)</label>
                                    <input type="text" id="recherche-nom-liste" class="controle-form"
                                        placeholder="Rechercher..." oninput="afficherListeEtudiantsConsultation()">
                                </div>
                            </div>
                        </div>

                        <!-- TABLEAU DES √âTUDIANTS -->
                        <div id="tableEtudiantsListe"
                            style="overflow-x: auto; border: 1px solid #ddd; border-radius: 4px;">
                            <table class="tableau" style="width: 100%; border-collapse: collapse; background: white;">
                                <thead style="background: var(--bleu-moyen); color: white;">
                                    <tr>
                                        <th style="padding: 12px; text-align: left; width: 100px;">DA</th>
                                        <th style="padding: 12px; text-align: center; width: 80px;">Groupe</th>
                                        <th style="padding: 12px; text-align: left;">Nom</th>
                                        <th style="padding: 12px; text-align: left;">Pr√©nom</th>
                                        <th style="padding: 12px; text-align: center; width: 100px;">Code prog.</th>
                                        <th style="padding: 12px; text-align: left;">Nom du programme</th>
                                        <th style="padding: 12px; text-align: center; width: 60px;">SA</th>
                                        <th style="padding: 12px; text-align: center; width: 60px;">CAF</th>
                                        <th style="padding: 12px; text-align: center; width: 100px;">
                                            Assiduit√©<br>
                                            <span style="font-weight: normal; font-size: 0.8rem;">(indice A)</span>
                                        </th>
                                        <th style="padding: 12px; text-align: center; width: 100px;">
                                            Compl√©tion<br>
                                            <span style="font-weight: normal; font-size: 0.8rem;">(indice C)</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="tbody-tableau-bord-liste">
                                    <!-- G√©n√©r√© dynamiquement par le module JS -->
                                </tbody>
                            </table>
                        </div>

                        <!-- MESSAGE SI AUCUN √âTUDIANT -->
                        <div id="message-aucun-etudiant" style="display: none; text-align: center; padding: 40px; 
                background: #f8f9fa; border-radius: 8px; color: #666;">
                            <p style="font-size: 1.1rem; margin-bottom: 10px;">üì≠ Aucun¬∑e √©tudiant¬∑e trouv√©¬∑e</p>
                            <p style="font-size: 0.9rem; margin-bottom: 15px;">
                                <span id="message-filtre-actif">
                                    Aucun r√©sultat avec les filtres actuels.
                                </span>
                                <span id="message-liste-vide" style="display: none;">
                                    Allez dans <strong>R√©glages ‚Ä∫ Groupe</strong> pour ajouter des √©tudiant¬∑es
                                </span>
                            </p>
                            <button onclick="resetFiltresListe()" id="btn-reset-filtres" class="btn btn-annuler">
                                R√©initialiser les filtres
                            </button>
                        </div>

                    </div><!-- FIN carte -->
                </div><!-- FIN sous-section tableau-bord-liste -->

                <!-- Sous-section: Profil -->
                <div id="tableau-bord-profil" class="sous-section">
                    <div id="contenuProfilEtudiant">
                        <div class="carte">
                            <p class="text-muted">S√©lectionnez un¬∑e √©tudiant¬∑e depuis la liste pour voir son profil.</p>
                        </div>
                    </div>
                </div><!-- FIN sous-section tableau-bord-profil -->

            </section>
            <!-- FIN section-tableau-bord -->

            <!-- ===================================
                 SECTION: PR√âSENCES
                 =================================== -->
            <section id="section-presences" class="section">

                <!-- Sous-section: Aper√ßu -->
                <div id="presences-apercu" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Aper√ßu des pr√©sences</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="note-presences-apercu">‚ÑπÔ∏è</span>
                        </span>
                    </h2>
                    <p class="text-muted">Vue d'ensemble des statistiques de pr√©sence du groupe</p>

                    <!-- Note explicative -->
                    <div id="note-presences-apercu" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les statistiques d'assiduit√© sont calcul√©es √† partir des pr√©sences saisies.
                        Le taux d'assiduit√© moyen refl√®te la proportion d'heures de pr√©sence par rapport aux heures offertes.
                        Les modes Sommatif (SOM) et Alternatif (PAN) peuvent diff√©rer selon la configuration dans R√©glages ‚Ä∫ Pratique de notation.
                    </div>

                    <!-- STATISTIQUES GLOBALES -->
                    <div class="carte">
                        <h3>Statistiques du groupe</h3>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                            <!-- Taux moyen SOM -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Taux moyen (SOM)</span>
                                    <strong id="pa-taux-som" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Taux moyen PAN -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Taux moyen (PAN)</span>
                                    <strong id="pa-taux-pan" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Heures offertes -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Heures offertes</span>
                                    <strong id="pa-heures-offertes" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Heures manqu√©es (total) -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Heures manqu√©es</span>
                                    <strong id="pa-heures-manquees" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- S√©ances compl√©t√©es -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">S√©ances compl√©t√©es</span>
                                    <strong id="pa-seances-completees" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Absences non justifi√©es -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Absences non justifi√©es</span>
                                    <strong id="pa-absences-non-justifiees" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ALERTES ASSIDUIT√â -->
                    <div class="carte">
                        <h3>Alertes d'assiduit√©</h3>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                            <!-- Assiduit√© < 80% -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Assiduit√© &lt; 80%</span>
                                    <strong id="pa-alerte-80" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Assiduit√© < 70% -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Assiduit√© &lt; 70%</span>
                                    <strong id="pa-alerte-70" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sous-section: Vue calendaire -->
                <div id="presences-calendrier" class="sous-section">
                    <div class="carte">
                        <h3>Vue calendaire</h3>
                        <div id="conteneur-calendrier">
                            [Le calendrier sera g√©n√©r√© ici]
                        </div>
                    </div>
                </div>

                <!-- Sous-section: Saisie -->
                <div id="presences-saisie" class="sous-section">
                    <h2>Enregistrement quotidien</h2>
                    <p class="text-muted">Enregistrer les pr√©sences pour une s√©ance</p>

                    <!-- Avertissement si format non configur√© -->
                    <div id="alerteFormatHoraire" class="alerte alerte-attention" style="display: none;">
                        <h4>‚ÑπÔ∏è Configuration requise</h4>
                        <p>
                            Le format horaire n'est pas configur√©. La dur√©e par d√©faut est fix√©e √† <strong>2h par
                                s√©ance</strong>.
                            <br>Pour d√©finir le format exact (2√ó2h ou 1√ó4h), veuillez configurer l'horaire dans
                            <a href="#"
                                onclick="afficherSection('reglages'); afficherSousSection('reglages-horaire'); return false;"
                                style="text-decoration: underline; font-weight: 600;">R√©glages >
                                Horaire</a>.
                        </p>
                    </div>

                    <!-- En-t√™te de la s√©ance -->
                    <div id="enteteDateSeance" style="display: none;">
                        <div id="texteDateSeance"></div>
                    </div>

                    <!-- Contr√¥les de saisie -->
                    <div class="carte" style="margin-bottom: 20px;">
                        <div class="grille-saisie-presences">
                            <div class="groupe-form">
                                <label for="date-cours" class="label-formulaire">Date du cours</label>
                                <div style="display: flex; gap: 8px; align-items: center;">
                                    <button id="btn-cours-precedent" onclick="allerCoursPrecedent()"
                                        class="btn btn-principal btn-compact" style="flex-shrink: 0;">
                                        ‚Üê Pr√©c√©dent
                                    </button>
                                    <input type="date" id="date-cours" class="controle-form"
                                        onchange="initialiserSaisiePresences(); mettreAJourBoutonsNavigation();"
                                        style="flex: 1;">
                                    <button id="btn-cours-suivant" onclick="allerCoursSuivant()"
                                        class="btn btn-principal btn-compact" style="flex-shrink: 0;">
                                        Suivant ‚Üí
                                    </button>
                                </div>
                            </div>
                            <div class="groupe-form">
                                <label for="selectGroupePresences" class="label-formulaire">Filtrer par groupe</label>
                                <select id="selectGroupePresences" class="controle-form"
                                    onchange="initialiserSaisiePresences()">
                                    <option value="">Tous les groupes</option>
                                </select>
                            </div>
                            <div class="groupe-form">
                                <label for="selectTriPresences" class="label-formulaire">Trier par</label>
                                <select id="selectTriPresences" class="controle-form"
                                    onchange="initialiserSaisiePresences()">
                                    <option value="nom">Ordre alphab√©tique (nom)</option>
                                    <option value="assiduite-croissant">Assiduit√© croissante (‚Üë)</option>
                                    <option value="assiduite-decroissant">Assiduit√© d√©croissante (‚Üì)</option>
                                </select>
                            </div>

                        </div>

                        <!-- Tableau de saisie -->
                        <div class="carte">
                            <h3>
                                Liste des √©tudiant¬∑es
                                <span id="nbEtudiantsPresences"
                                    style="font-weight: normal; color: var(--bleu-moyen); font-size: 0.9rem;">
                                    (0 √©tudiant¬∑e)
                                </span>
                            </h3>

                            <!-- Champ de recherche -->
                            <div class="groupe-form" style="margin-bottom: 15px;">
                                <input type="text" id="recherche-saisie-presences" class="controle-form"
                                    placeholder="üîç Rechercher un √©tudiant (nom, pr√©nom, DA)..."
                                    oninput="filtrerTableauPresences()">
                            </div>

                            <table class="tableau">
                                <thead>
                                    <tr>
                                        <th style="width: 100px;">DA</th>
                                        <th>Pr√©nom</th>
                                        <th>Nom</th>
                                        <th id="colonneHeuresTitre" style="width: 120px; text-align: center;">
                                            Heures (par d√©faut: 2h)
                                            <div
                                                style="margin-top: 8px; display: flex; flex-direction: column; gap: 4px; align-items: center;">
                                                <button id="btn-tous-presents" onclick="remplirTousPresents()"
                                                    class="btn btn-principal btn-compact"
                                                    style="font-weight: 600;">
                                                    Tous 2h
                                                </button>
                                                <button id="btn-reinit-saisie" onclick="reinitialiserSaisie()"
                                                    class="btn btn-annuler btn-compact"
                                                    title="R√©initialiser la saisie">
                                                    R√©initialiser
                                                </button>
                                            </div>
                                        </th>
                                        <th style="width: 200px;">Notes</th>
                                        <th style="width: 100px;">Total heures</th>
                                        <th style="width: 100px;">Assiduit√©</th>
                                    </tr>
                                </thead>
                                <tbody id="tbody-saisie-presences">
                                    <tr>
                                        <td colspan="7" style="text-align: center; padding: 30px; color: #999;">
                                            S√©lectionnez une date pour afficher le tableau de saisie
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Boutons d'action -->
                        <div class="btn-groupe" style="margin-top: 20px;">
                            <button class="btn btn-confirmer" onclick="enregistrerPresences()">
                                Enregistrer les pr√©sences
                            </button>
                            <button class="btn btn-annuler" onclick="afficherSousSection('presences-apercu')">
                                Annuler
                            </button>
                        </div>
                    </div>


            </section>

            <!-- ===============================
     SECTION: √âVALUATIONS
     =============================== -->
            <section id="section-evaluations" class="section">

                <!-- Sous-section: Aper√ßu -->
                <div id="evaluations-apercu" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Aper√ßu des √©valuations</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="note-evaluations-apercu">‚ÑπÔ∏è</span>
                        </span>
                    </h2>
                    <p class="text-muted">Vue d'ensemble des √©valuations du groupe</p>

                    <!-- Note explicative -->
                    <div id="note-evaluations-apercu" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les statistiques d'√©valuations sont calcul√©es √† partir des artefacts compl√©t√©s.
                        La moyenne du groupe refl√®te la performance globale selon les crit√®res d'√©valuation configur√©s (SRPNF).
                        Le taux de compl√©tion mesure le nombre d'artefacts remis par rapport aux artefacts attendus.
                    </div>

                    <!-- STATISTIQUES GLOBALES -->
                    <div class="carte">
                        <h3>Statistiques du groupe</h3>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                            <!-- √âtudiants √©valu√©s -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">√âtudiant¬∑es √©valu√©¬∑es</span>
                                    <strong id="ea-etudiants-evalues" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Artefacts compl√©t√©s -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Artefacts compl√©t√©s</span>
                                    <strong id="ea-artefacts-completes" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Moyenne du groupe -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Moyenne du groupe</span>
                                    <strong id="ea-moyenne-groupe" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Taux de compl√©tion -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Taux de compl√©tion moyen</span>
                                    <strong id="ea-taux-completion" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Productions configur√©es -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Productions configur√©es</span>
                                    <strong id="ea-productions-configurees" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Derni√®re √©valuation -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Derni√®re √©valuation</span>
                                    <strong id="ea-derniere-evaluation" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sous-section: Liste des √©valuations -->
                <div id="evaluations-liste" class="sous-section">
                <h2>Historique et filtres</h2>
                <p class="description-section">Vue d'ensemble des √©valuations et calcul automatique des indices C et P</p>

                <!-- Filtres -->
                <div class="carte">
                    <h3>üîç Filtres</h3>
                    <div class="grille-filtres">
                        <div class="groupe-form">
                            <label for="filtre-groupe-eval">Filtrer par groupe</label>
                            <select id="filtre-groupe-eval" class="controle-form" onchange="filtrerListeEvaluations()">
                                <option value="">Tous les groupes</option>
                            </select>
                        </div>
                        <div class="groupe-form">
                            <label for="filtre-production-eval">Filtrer par production</label>
                            <select id="filtre-production-eval" class="controle-form"
                                onchange="filtrerListeEvaluations()">
                                <option value="">Toutes les productions</option>
                            </select>
                        </div>
                        <div class="groupe-form">
                            <label for="filtre-statut-eval">Filtrer par statut</label>
                            <select id="filtre-statut-eval" class="controle-form" onchange="filtrerListeEvaluations()">
                                <option value="">Tous</option>
                                <option value="evalues">√âvalu√©s seulement</option>
                                <option value="non-evalues">Non √©valu√©s</option>
                                <option value="risque">√Ä risque</option>
                            </select>
                        </div>
                        <div class="groupe-form">
                            <label for="tri-evaluations">Trier</label>
                            <select id="tri-evaluations" class="controle-form" onchange="trierListeEvaluations()">
                                <option value="nom-asc">Par ordre alphab√©tique de nom (A‚ÜíZ)</option>
                                <option value="assiduite-asc">Par assiduit√© croissante (‚Üë)</option>
                                <option value="assiduite-desc">Par assiduit√© d√©croissante (‚Üì)</option>
                                <option value="completion-asc">Par compl√©tion croissante (‚Üë)</option>
                                <option value="completion-desc">Par compl√©tion d√©croissante (‚Üì)</option>
                                <option value="performance-asc">Par performance croissante (‚Üë)</option>
                                <option value="performance-desc">Par performance d√©croissante (‚Üì)</option>
                                <option value="risque-asc">Par risque croissant (‚Üë)</option>
                                <option value="risque-desc">Par risque d√©croissant (‚Üì)</option>
                            </select>
                        </div>
                        <button class="btn btn-principal btn-compact" onclick="reinitialiserFiltresEval()"
                            style="white-space: nowrap;">
                            ‚Üª R√©init.
                        </button>
                    </div>
                </div>

                <!-- Champ de recherche -->
                <div class="carte" style="margin-bottom: 15px;">
                    <input type="text" id="recherche-liste-evaluations" class="controle-form"
                        placeholder="üîç Rechercher un √©tudiant (nom, pr√©nom, DA)..."
                        oninput="filtrerListeEvaluations()">
                </div>

                <!-- Liste des √©tudiants avec √©valuations -->
                <div id="conteneur-evaluations-accordeon">
                    <!-- Sera rempli dynamiquement par JavaScript -->
                </div>

                <!-- Message si aucune √©valuation -->
                <div id="message-aucune-evaluation" class="carte" style="display:none;">
                    <p style="text-align:center; color: var(--bleu-leger);">
                        <em>Aucune √©valuation trouv√©e selon les filtres s√©lectionn√©s</em>
                    </p>
                </div>
            </div>



            <!-- Sous-section: √âvaluer (formulaire d'√©valuation) -->
            <div id="evaluations-individuelles" class="sous-section">
                <h2>√âvaluation des productions et r√©troaction diff√©renci√©e automatique</h2>
                <p class="text-muted">√âvaluation d√©taill√©e selon les crit√®res et les √©chelles de performance</p>

                <!-- Conteneur principal en Layout L modifi√© -->
                <div class="carte" style="margin-bottom: 20px;">

                    <!-- PARTIE HAUTE : 2 colonnes -->
                    <div class="grille-evaluation-principale" style="margin-bottom: 20px;">

                        <!-- COLONNE GAUCHE : PARAM√àTRES DE L'√âVALUATION -->
                        <div style="padding: 15px; background: var(--bleu-pale); border-radius: 8px;">
                            <!-- Boutons de gestion des √©valuations -->
                            <div class="groupe-boutons-colonne" style="margin-bottom: 15px;">
                                <div class="groupe-boutons-ligne">
                                    <button class="btn btn-modifier btn-tres-compact btn-largeur-auto" onclick="ouvrirBanqueEvaluations()"
                                        title="Parcourir les √©valuations sauvegard√©es et en charger une">
                                        Charger
                                    </button>

                                    <button class="btn btn-modifier btn-tres-compact btn-largeur-auto" onclick="afficherModalReparationEvaluations()"
                                        title="R√©parer les √©valuations avec crit√®res manquants"
                                        style="font-size: 1.2rem; padding: 4px 10px;">
                                        üîß
                                    </button>
                                </div>

                                <!-- Champ de recherche rapide -->
                                <div style="margin-top: 10px;">
                                    <input type="text" id="recherche-rapide-evaluation" class="controle-form"
                                        placeholder="üîç Rechercher une √©valuation..."
                                        onfocus="ouvrirBanqueAvecRecherche()"
                                        style="font-size: 0.9rem;">
                                </div>

                                <div class="groupe-boutons-ligne" style="margin-top: 10px;">
                                    <button class="btn btn-principal btn-tres-compact btn-largeur-auto" onclick="sauvegarderEvaluation()"
                                        title="Sauvegarder l'√©valuation">
                                        Sauvegarder
                                    </button>

                                    <button class="btn btn-annuler btn-tres-compact btn-largeur-auto" onclick="nouvelleEvaluation()"
                                        title="R√©initialiser tous les param√®tres et commencer une nouvelle √©valuation">
                                        R√©initialiser
                                    </button>
                                </div>
                            </div>

                            <hr class="separateur-horizontal">

                            <div class="indicateur-verrouillage" style="margin-bottom: 15px;">
                                <h4 style="margin: 0;">Param√®tres de l'√©valuation</h4>

                                <!-- Indicateur de verrouillage -->
                                <div id="indicateurVerrouillageEval" style="display: none;">
                                    <span id="iconeVerrouEval" onclick="basculerVerrouillageEvaluationCourante()"
                                        style="font-size: 1.2rem; cursor: pointer; user-select: none; color: #4caf50;"
                                        title="√âvaluation modifiable - Cliquez pour verrouiller">üîì</span>
                                </div>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 12px;">
                                <label class="label-formulaire">Groupe :</label>
                                <select id="selectGroupeEval" class="controle-form"
                                    onchange="filtrerEtudiantsParGroupe()">
                                    <option value="">Tous les groupes</option>
                                </select>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 12px;">
                                <label class="label-formulaire">√âtudiant¬∑e :</label>
                                <select id="selectEtudiantEval" class="controle-form"
                                    onchange="chargerEvaluationsEtudiant()">
                                    <option value="">-- Choisir un¬∑e √©tudiant¬∑e --</option>
                                </select>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 12px;">
                                <label class="label-formulaire">Production √©tudiante :</label>
                                <select id="selectProduction1" class="controle-form" onchange="chargerProduction(1)">
                                    <option value="">-- Choisir une production --</option>
                                </select>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 12px;">
                                <label class="label-formulaire">Grille d'√©valuation :</label>
                                <select id="selectGrille1" class="controle-form" onchange="chargerGrilleSelectionnee()">
                                    <option value="">-- Choisir une grille --</option>
                                </select>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 12px;">
                                <label class="label-formulaire">√âchelle de performance :</label>
                                <select id="selectEchelle1" class="controle-form"
                                    onchange="changerEchelleEvaluation(1)">
                                    <option value="">-- Choisir une √©chelle --</option>
                                </select>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 12px;">
                                <label class="label-formulaire">Cartouche de r√©troaction :</label>
                                <select id="selectCartoucheEval" class="controle-form"
                                    onchange="cartoucheSelectionnee()">
                                    <option value="">-- Choisir une cartouche --</option>
                                </select>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 12px;">
                                <label class="label-formulaire">Statut de remise :</label>
                                <select id="remiseProduction1" class="controle-form" onchange="changerStatutRemise(1)">
                                    <option value="non-remis">Non remis</option>
                                    <option value="remis">Remis</option>
                                    <option value="en-retard">En retard</option>
                                </select>
                            </div>

                            <!-- D√âLAI DE REMISE ACCORD√â -->
                            <div class="groupe-form" style="margin-bottom: 12px;">
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="checkbox" id="delaiAccordeCheck"
                                           style="margin-right: 10px; width: 18px; height: 18px; cursor: pointer;"
                                           onchange="gererDelaiAccorde()">
                                    <span class="label-formulaire" style="margin: 0;">Application de jeton de d√©lai</span>
                                </label>
                                <p style="font-size: 0.85rem; color: #666; margin: 5px 0 0 28px; line-height: 1.4;">
                                    L'√©valuation comptera dans les travaux remis sans p√©nalit√© de retard.
                                </p>
                            </div>

                            <!-- INFORMATION SUR LES JETONS APPLIQU√âS -->
                            <div id="gestionJetonsEvaluation" class="groupe-form" style="margin-bottom: 12px; display: none;">
                                <label class="label-formulaire">Jetons appliqu√©s :</label>
                                <div id="infoJetonsAppliques" style="margin-top: 8px; font-size: 0.9rem; display: flex; gap: 8px; flex-wrap: wrap;"></div>
                            </div>

                            <!-- NOTE ET NIVEAU -->
                            <div id="noteFinale1" class="boite-note-finale">
                                <div class="label">Note finale</div>
                                <div class="valeur">
                                    <span id="noteProduction1">0.0</span>
                                </div>
                                <div class="niveau">
                                    Niveau: <span id="niveauProduction1">--</span>
                                </div>
                            </div>
                        </div>

                        <!-- COLONNE DROITE : CRIT√àRES AVEC R√âTROACTIONS -->
                        <div class="zone-criteres">
                            <h4>√âvaluation et pr√©visualisation de la r√©troaction</h4>

                            <div id="listeCriteresGrille1" class="conteneur-liste">
                                <p style="color: #999; font-style: italic; font-size: 0.85rem;">
                                    S√©lectionnez une grille et une cartouche
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- PARTIE BASSE : R√âTROACTION FINALE -->
                    <div class="zone-retroaction">
                        <div class="zone-retroaction-header">
                            <h4>R√©troaction finale</h4>
                        </div>

                        <!-- Options √† inclure (TOUTES COCH√âES PAR D√âFAUT) -->
                        <div class="grille-checkboxes" style="margin-bottom: 15px;">
                            <label style="font-size: 0.85rem; cursor: pointer;">
                                <input type="checkbox" id="afficherDescription1" onchange="genererRetroaction(1)"
                                    checked>
                                Description
                            </label>
                            <label style="font-size: 0.85rem; cursor: pointer;">
                                <input type="checkbox" id="afficherObjectif1" onchange="genererRetroaction(1)" checked>
                                Objectif
                            </label>
                            <label style="font-size: 0.85rem; cursor: pointer;">
                                <input type="checkbox" id="afficherTache1" onchange="genererRetroaction(1)" checked>
                                T√¢che
                            </label>
                            <label style="font-size: 0.85rem; cursor: pointer;">
                                <input type="checkbox" id="afficherAdresse1" onchange="genererRetroaction(1)" checked>
                                Adresse
                            </label>
                            <label style="font-size: 0.85rem; cursor: pointer;">
                                <input type="checkbox" id="afficherContexte1" onchange="genererRetroaction(1)" checked>
                                Contexte
                            </label>
                        </div>

                        <!-- Zone de texte pour la r√©troaction finale -->
                        <textarea id="retroactionFinale1" class="controle-form" rows="12"
                            placeholder="La r√©troaction sera g√©n√©r√©e automatiquement ici selon vos √©valuations et les options coch√©es. Vous pouvez modifier le texte avant de le copier."
                            style="width: 100%; height: 200px; padding: 12px; border-radius: 5px;
    border: 1px solid #ddd; font-family: inherit; resize: vertical;
    font-size: 0.85rem; line-height: 1.5; background: white;">
</textarea>

                        <button class="btn btn-confirmer btn-compact" onclick="copierRetroaction(1)"
                            style="margin-top: 10px;">
                            Copier dans le presse-papier
                        </button>
                    </div>

                </div><!-- fin carte du layout √©valuation -->

            </div><!-- fin sous-section evaluations-individuelles -->

            <!-- MODAL: Banque d'√©valuations (Charger une √©valuation) -->
            <div id="modalBanqueEvaluations" class="modal-overlay">
                <div class="modal-contenu modal-large">
                    <button onclick="fermerBanqueEvaluations()" class="modal-fermer">‚úï</button>

                    <h2 class="modal-titre">Banque d'√©valuations</h2>
                    <p style="color: #666; margin-bottom: 20px;">Parcourez toutes les √©valuations sauvegard√©es et s√©lectionnez-en une pour la charger dans le formulaire.</p>

                    <!-- Filtres -->
                    <div class="grille-4-colonnes" style="margin-bottom: 20px; padding: 15px; background: var(--gris-tres-clair); border-radius: 8px;">
                        <div>
                            <label class="label-formulaire">Groupe</label>
                            <select id="filtreBanqueGroupe" onchange="filtrerBanqueEvaluations()" class="controle-form">
                                <option value="">Tous les groupes</option>
                            </select>
                        </div>
                        <div>
                            <label class="label-formulaire">√âtudiant</label>
                            <select id="filtreBanqueEtudiant" onchange="filtrerBanqueEvaluations()" class="controle-form">
                                <option value="">Tous les √©tudiants</option>
                            </select>
                        </div>
                        <div>
                            <label class="label-formulaire">Production</label>
                            <select id="filtreBanqueProduction" onchange="filtrerBanqueEvaluations()" class="controle-form">
                                <option value="">Toutes les productions</option>
                            </select>
                        </div>
                        <div>
                            <label class="label-formulaire">Trier par</label>
                            <select id="triBanqueEvaluation" onchange="filtrerBanqueEvaluations()" class="controle-form">
                                <option value="date-desc">Date (plus r√©cent)</option>
                                <option value="date-asc">Date (plus ancien)</option>
                                <option value="groupe-asc">Groupe (A-Z)</option>
                                <option value="etudiant-asc">√âtudiant (A-Z)</option>
                                <option value="production-asc">Production (A-Z)</option>
                                <option value="note-desc">Note (plus haute)</option>
                                <option value="note-asc">Note (plus basse)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Actions globales -->
                    <div style="display: flex; gap: 8px; margin-bottom: 20px;">
                        <button class="btn btn-principal btn-compact" onclick="verrouillerToutesEvaluations(true)">
                            Verrouiller tout
                        </button>
                        <button class="btn btn-annuler btn-compact" onclick="verrouillerToutesEvaluations(false)">
                            D√©verrouiller tout
                        </button>
                    </div>

                    <!-- Champ de recherche -->
                    <div style="margin-bottom: 15px;">
                        <input type="text" id="recherche-banque-evaluations" class="controle-form"
                            placeholder="üîç Rechercher une √©valuation (√©tudiant, production)..."
                            oninput="filtrerBanqueEvaluations()">
                    </div>

                    <!-- Liste des √©valuations -->
                    <div id="listeBanqueEvaluations" style="max-height: 500px; overflow-y: auto;">
                        <!-- G√©n√©r√© par JS -->
                    </div>
                </div>
            </div>

            <!-- Modal R√©paration des √©valuations -->
            <div id="modalReparationEvaluations" class="modal-overlay">
                <div class="modal-contenu modal-compact">
                    <button onclick="fermerModalReparationEvaluations()" class="modal-fermer">‚úï</button>

                    <h2 class="modal-titre">R√©paration des √©valuations</h2>

                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--bleu-principal); font-size: 1rem; margin-bottom: 10px;">Qu'est-ce que cette fonction ?</h3>
                        <p style="color: #666; line-height: 1.6;">
                            Cette fonction permet de <strong>r√©parer automatiquement</strong> les √©valuations dont les crit√®res n'ont pas √©t√© correctement sauvegard√©s.
                            Elle extrait les niveaux (I, D, M, E) depuis la r√©troaction finale et reconstruit le tableau des crit√®res manquants.
                        </p>
                    </div>

                    <div class="alerte alerte-attention" style="margin-bottom: 25px;">
                        <h4>‚ÑπÔ∏è Quand l'utiliser ?</h4>
                        <ul style="margin: 0; padding-left: 20px; color: #666; line-height: 1.8;">
                            <li><strong>Apr√®s une migration de donn√©es</strong> depuis une ancienne version</li>
                            <li><strong>Si des √©valuations ne se chargent pas</strong> correctement lors de la modification</li>
                            <li><strong>Si vous constatez des crit√®res vides</strong> alors que la r√©troaction contient les niveaux</li>
                            <li><strong>Apr√®s un probl√®me technique</strong> ayant affect√© la sauvegarde</li>
                        </ul>
                    </div>

                    <div style="margin-bottom: 25px; padding: 15px; background: #e3f2fd; border-radius: 8px; border-left: 4px solid #2196F3;">
                        <h3 style="color: #1565c0; font-size: 1rem; margin-top: 0; margin-bottom: 10px;">Comment √ßa fonctionne ?</h3>
                        <ol style="margin: 0; padding-left: 20px; color: #666; line-height: 1.8;">
                            <li>Analyse toutes les √©valuations sauvegard√©es</li>
                            <li>D√©tecte celles avec un tableau <code>criteres</code> vide</li>
                            <li>Extrait les niveaux depuis la r√©troaction (ex: "STRUCTURE (I)")</li>
                            <li>Reconstruit automatiquement les crit√®res manquants</li>
                            <li>Sauvegarde les modifications dans le localStorage</li>
                        </ol>
                    </div>

                    <div style="margin-bottom: 25px; padding: 15px; background: #f1f8e9; border-radius: 8px; border-left: 4px solid #8bc34a;">
                        <h3 style="color: #558b2f; font-size: 1rem; margin-top: 0; margin-bottom: 10px;">‚úÖ R√©sultat attendu</h3>
                        <p style="margin: 0; color: #666; line-height: 1.6;">
                            Apr√®s la r√©paration, un rapport d√©taill√© affichera le nombre d'√©valuations r√©par√©es, ignor√©es (d√©j√† correctes) et √©chou√©es.
                            Les √©valuations r√©par√©es pourront √™tre modifi√©es normalement avec tous leurs crit√®res restaur√©s.
                        </p>
                    </div>

                    <div style="text-align: right; padding-top: 15px; border-top: 1px solid #dee2e6;">
                        <button class="btn btn-annuler" onclick="fermerModalReparationEvaluations()" style="margin-right: 10px;">
                            Annuler
                        </button>
                        <button class="btn btn-confirmer" onclick="lancerReparationEvaluations()">
                            Lancer la r√©paration
                        </button>
                    </div>
                </div>
            </div>

            </section><!-- fin section-evaluations -->

            <!-- ===================================
                 SECTION: MAT√âRIEL P√âDAGOGIQUE
                 =================================== -->
            <section id="section-materiel" class="section">

                <!-- Sous-section: Aper√ßu du mat√©riel -->
                <div id="materiel-apercu" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Vue d'ensemble</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="note-apercu">‚ÑπÔ∏è</span>
                            <span class="emoji-toggle" data-target="conseil-apercu">üí°</span>
                        </span>
                    </h2>
                    <p class="text-muted">R√©sum√© du mat√©riel p√©dagogique configur√©</p>

                    <!-- Carte Note -->
                    <div id="note-apercu" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Cette vue d'ensemble pr√©sente un r√©sum√© du mat√©riel p√©dagogique configur√© pour le cours.
                        Le mat√©riel comprend les productions (exercices formatifs et certificatifs), les grilles de crit√®res d'√©valuation,
                        les √©chelles de performance (IDME), et les cartouches de r√©troaction. Un mat√©riel bien configur√© facilite l'√©valuation
                        coh√©rente et permet le suivi longitudinal des apprentissages.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-apercu" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong> Commence par configurer la pratique de notation dans la section R√©glages, puis cr√©e tes grilles de crit√®res
                        et ton √©chelle de performance. Enfin, d√©finis les productions du cours en les associant aux grilles cr√©√©es.
                        Cette s√©quence assure une configuration coh√©rente et facilite la gestion des √©valuations.
                    </div>

                    <div class="carte">
                        <h3>Mat√©riel configur√©</h3>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                            <!-- Pratique de notation -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Pratique de notation</span>
                                    <strong id="stat-pratique" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Productions -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Productions</span>
                                    <strong id="stat-productions" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Grilles de crit√®res -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Grilles de crit√®res</span>
                                    <strong id="stat-grilles" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- √âchelles de performance -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">√âchelles de performance</span>
                                    <strong id="stat-echelles" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>

                            <!-- Cartouches de r√©troaction -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Cartouches de r√©troaction</span>
                                    <strong id="stat-cartouches" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sous-section: Productions -->
                <div id="materiel-productions" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Exercices formatifs et certificatifs</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="note-productions">‚ÑπÔ∏è</span>
                            <span class="emoji-toggle" data-target="conseil-productions">üí°</span>
                        </span>
                    </h2>
                    <p class="text-muted">D√©finir les √©valuations du cours et leurs pond√©rations</p>

                    <!-- Carte Note -->
                    <div id="note-productions" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les productions repr√©sentent l'ensemble des travaux que les √©tudiants doivent r√©aliser
                        durant le cours. Elles peuvent √™tre de type formatif (pour l'apprentissage) ou certificatif (pour l'√©valuation).
                        Chaque production peut √™tre associ√©e √† une grille de crit√®res et poss√®de une pond√©ration qui contribue √† la note finale.
                        Les portfolios permettent de regrouper plusieurs artefacts et de s√©lectionner automatiquement les N meilleurs selon
                        la pratique de notation configur√©e.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-productions" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong> Assure-toi que la somme des pond√©rations totalise 100%. Pour les portfolios, d√©finis d'abord le nombre d'artefacts
                        √† retenir (ex: les 3 meilleurs sur 9). Les artefacts individuels n'ont pas de pond√©ration propre, c'est le portfolio
                        conteneur qui d√©finit la pond√©ration globale. Pense √† verrouiller les productions une fois finalis√©es pour √©viter
                        les modifications accidentelles.
                    </div>

                    <!-- D√âFINITION DES √âVALUATIONS -->
                    <div class="carte">
                        <h3>üìù Productions</h3>

                        <!-- VUE D'ENSEMBLE - FORMAT HARMONIS√â -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <!-- Nombre de productions -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Productions</span>
                                    <strong id="nombreEvaluations" style="font-size: 1.8rem; color: var(--bleu-principal);">0</strong>
                                </div>
                            </div>

                            <!-- Pond√©ration totale -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Pond√©ration totale</span>
                                    <strong id="ponderationTotale" style="font-size: 1.8rem; color: var(--bleu-principal);">0%</strong>
                                </div>
                                <div id="statutPonderation" style="font-size: 0.75rem; color: #666; margin-top: 5px; text-align: right;"></div>
                            </div>

                            <!-- Types d'√©valuations (portfolios/artefacts) -->
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal); grid-column: 1 / -1;">
                                <div id="typesEvaluations" style="font-size: 0.9rem; color: #666; text-align: center;">
                                    Aucune production configur√©e
                                </div>
                            </div>
                        </div>

                        <!-- IMPORT/EXPORT PRODUCTIONS -->
                        <div style="display: flex; gap: 10px; margin-bottom: 20px; padding: 15px; background: #f1f8e9; border-radius: 6px; border-left: 4px solid #4caf50;">
                            <button class="btn btn-confirmer" onclick="exporterProductions()" style="flex: 1;">
                                üì§ Exporter les productions
                            </button>
                            <button class="btn btn-principal" onclick="document.getElementById('fichier-import-productions-local').click()" style="flex: 1;">
                                üì• Importer des productions
                            </button>
                            <input type="file" id="fichier-import-productions-local" accept=".json" style="display: none;" onchange="importerProductions(event)">
                        </div>

                        <!-- NOUVELLE VUE: Toutes les productions par type -->
                        <div id="vueProductionsParType" style="margin-bottom: 30px;">
                            <!-- Contenu g√©n√©r√© par afficherToutesLesProductionsParType() -->
                        </div>

                        <!-- ANCIEN SYST√àME (Cach√© par d√©faut, gard√© pour compatibilit√©) -->
                        <div style="display: none;">
                            <!-- TABLEAU/CONTENEUR DES √âVALUATIONS -->
                            <div id="tableauEvaluationsContainer" style="margin-bottom: 20px;">
                                <p class="text-muted" id="aucuneEvaluation" style="font-style: italic;">
                                    Aucune √©valuation d√©finie.
                                </p>
                            </div>
                        </div>

                        <!-- FORMULAIRE D'AJOUT/MODIFICATION (cach√© par d√©faut) -->
                        <div id="formulaireProduction" style="display: none; margin-top: 20px; padding: 15px; 
             background: var(--bleu-pale); border-radius: 6px;">

                            <h4 id="titreFormEvaluation" style="color: var(--bleu-principal); margin-bottom: 15px;">
                                Nouvelle production
                            </h4>

                            <!-- Ligne 1 : Tous les champs principaux sur une ligne -->
                            <div
                                style="display: grid; grid-template-columns: 1.5fr 2fr 2fr 1.5fr 100px; gap: 10px; margin-bottom: 15px;">
                                <div class="groupe-form">
                                    <label>Description</label>
                                    <input type="text" id="productionDescription" class="controle-form"
                                        placeholder="Ex: Strat√©gies">
                                </div>
                                <div class="groupe-form">
                                    <label>Titre</label>
                                    <input type="text" id="productionTitre" class="controle-form"
                                        placeholder="Ex: Analyse #1">
                                </div>
                                <div class="groupe-form">
                                    <label>Type</label>
                                    <select id="productionType" class="controle-form"
                                        onchange="gererChangementTypeProduction()">
                                        <option value="">Choisir...</option>
                                        <optgroup label="√âvaluations sommatives (comptent dans la note)">
                                            <option value="examen">Examen</option>
                                            <option value="travail">Travail √©crit</option>
                                            <option value="quiz">Quiz/Test</option>
                                            <option value="presentation">Pr√©sentation</option>
                                            <option value="autre">Autre</option>
                                        </optgroup>
                                        <optgroup label="√âvaluations formatives (ne comptent PAS dans la note)">
                                            <option value="examen-formatif">Examen formatif</option>
                                            <option value="travail-formatif">Travail formatif</option>
                                            <option value="quiz-formatif">Quiz/Test formatif</option>
                                            <option value="presentation-formatif">Pr√©sentation formative</option>
                                            <option value="autre-formatif">Autre formatif</option>
                                        </optgroup>
                                        <optgroup label="Pratique Alternative de Notation (PAN)">
                                            <option value="portfolio">üìÅ Portfolio (conteneur d'artefacts)</option>
                                            <option value="artefact-portfolio">Artefact d'un portfolio</option>
                                        </optgroup>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Pond√©ration (%)</label>
                                    <input type="number" id="productionPonderation" class="controle-form" min="0"
                                        max="100" placeholder="Ex: 20">
                                </div>
                                <div class="groupe-form">
                                    <label>Grille</label>
                                    <select id="productionGrille" class="controle-form">
                                        <option value="">Aucune</option>
                                    </select>
                                </div>
                            </div>

                            <small id="msgPonderationArtefact"
                                style="display: none; padding: 10px; background: var(--bleu-pale); border-radius: 4px; color: var(--bleu-principal); font-size: 0.85rem; margin-top: 10px;">
                                Les artefacts individuels n'ont pas de pond√©ration propre. C'est le Portfolio
                                conteneur qui d√©finit la pond√©ration globale.
                            </small>

                            <!-- CHAMPS SP√âCIFIQUES AU PORTFOLIO (cach√©s par d√©faut) -->
                            <div id="champsPortfolio" style="display: none; margin-top: 20px; padding: 15px; 
                 background: var(--bleu-carte); border-radius: 6px; border: 2px solid var(--bleu-moyen);">

                                <h5 style="color: var(--bleu-principal); margin-bottom: 15px;">Configuration du
                                    portfolio</h5>

                                <!-- R√®gles du portfolio -->
                                <div
                                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                                    <div class="groupe-form">
                                        <label>Nombre d'artefacts √† retenir (note finale)</label>
                                        <input type="number" id="portfolioNombreRetenir" class="controle-form" value="3"
                                            min="1" max="10">
                                    </div>
                                    <div class="groupe-form">
                                        <label>Minimum d'artefacts √† compl√©ter</label>
                                        <input type="number" id="portfolioMinimumCompleter" class="controle-form"
                                            value="7" min="1" max="20">
                                    </div>

                                    <div class="groupe-form">
                                        <label>Nombre total d'artefacts pr√©vus</label>
                                        <input type="number" id="portfolioNombreTotal" class="controle-form" value="9"
                                            min="1" max="50">
                                        <small style="color: #666; font-size: 0.8rem;">Ex: 9 au programme</small>
                                    </div>
                                </div>

                                <p
                                    style="background: var(--bleu-tres-pale); padding: 10px; border-radius: 4px; font-size: 0.9rem;">
                                    Le portfolio inclura automatiquement tous les artefacts de type "Artefact
                                    d'un
                                    portfolio" cr√©√©s durant la session.
                                </p>
                            </div>

                            <!-- Ligne 2 : Objectif et T√¢che sur 2 colonnes -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
                                <div class="groupe-form">
                                    <label>Objectif d'apprentissage</label>
                                    <textarea id="productionObjectif" class="controle-form" rows="3"
                                        placeholder="Ex: D√©velopper les comp√©tences d'analyse..."></textarea>
                                </div>
                                <div class="groupe-form">
                                    <label>Description de la t√¢che</label>
                                    <textarea id="productionTache" class="controle-form" rows="3"
                                        placeholder="Ex: R√©diger un texte de 500 mots..."></textarea>
                                </div>
                            </div>

                            <!-- Boutons du formulaire -->
                            <div class="btn-groupe" style="justify-content: flex-end; margin-top: 15px;">
                                <button class="btn btn-annuler" onclick="annulerFormProduction()">Annuler</button>
                                <button class="btn btn-confirmer" onclick="sauvegarderProduction()">
                                    <span id="btnTexteEvaluation">Ajouter</span>
                                </button>
                            </div>

                        </div><!-- Fin du formulaireProduction -->

                        <button id="btnajouterProduction" class="btn btn-confirmer" style="margin-top: 15px;"
                            onclick="afficherFormProduction()">
                            + Ajouter une production
                        </button>

                    </div><!-- Fin de la carte -->

                </div><!--fin sous-section productions-->

                <!-- Sous-section : Grilles de crit√®res -->
                <div id="materiel-grille-criteres" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Crit√®res d'√©valuation</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="note-grilles">‚ÑπÔ∏è</span>
                            <span class="emoji-toggle" data-target="conseil-grilles">üí°</span>
                        </span>
                    </h2>
                    <p class="text-muted">Cr√©er des grilles de crit√®res r√©utilisables pour √©valuer diff√©rents types
                        de
                        productions.</p>

                    <!-- Carte Note -->
                    <div id="note-grilles" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les grilles de crit√®res d√©finissent les aspects sur lesquels les productions sont √©valu√©es.
                        Chaque crit√®re poss√®de une pond√©ration relative et peut √™tre de type holistique (jugement global), analytique
                        (points par √©l√©ment) ou algorithmique (calcul automatique). Dans le mod√®le SRPNF, les cinq crit√®res sont :
                        Structure (15%), Rigueur (20%), Plausibilit√© (10%), Nuance (25%) et Fran√ßais (30%). Les grilles peuvent √™tre
                        r√©utilis√©es pour diff√©rentes productions et verrouill√©es une fois finalis√©es.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-grilles" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong> Pour le crit√®re Fran√ßais, utilise le type algorithmique avec la formule (nb_erreurs / nb_mots) √ó 100.
                        Les grilles peuvent √™tre dupliqu√©es et modifi√©es pour cr√©er des variantes adapt√©es √† diff√©rents types
                        de productions. Pense √† nommer tes grilles de fa√ßon descriptive (ex: "Grille analyse litt√©raire", "Grille dissertation").
                        La somme des pond√©rations des crit√®res doit totaliser 100%.
                    </div>

                    <!-- CARTE : GRILLES DE CRIT√àRES -->
                    <div class="carte">
                        <h3>Gestion des grilles de crit√®res d'√©valuation</h3>

                        <!-- NOUVELLE VUE: Toutes les grilles et crit√®res -->
                        <div id="vueGrillesCriteres" style="margin-bottom: 30px;">
                            <!-- Contenu g√©n√©r√© par afficherToutesLesGrillesCriteres() -->
                        </div>

                        <!-- ANCIEN SYST√àME (Cach√© par d√©faut, gard√© pour compatibilit√©) -->
                        <div style="display: none;">

                        <!-- S√©lecteur d'√©valuation -->
                        <div class="groupe-form" style="max-width: 400px; margin-bottom: 20px;">
                            <label>Cr√©er ou modifier une grille d'√©valuation :</label>
                            <select id="selectGrilleTemplate" class="controle-form" onchange="chargerGrilleTemplate()">
                                <option value="">-- Nouvelle grille --</option>
                                <option value="new">‚ûï Cr√©er une nouvelle grille</option>
                            </select>
                        </div>

                        <!-- Nom de la grille (visible uniquement en cr√©ation/√©dition) -->
                        <div id="nomGrilleContainer" class="groupe-form"
                            style="max-width: 400px; margin-bottom: 20px; display: none;">
                            <label>Nom de la grille :</label>
                            <input type="text" id="nomGrilleTemplate" class="controle-form"
                                placeholder="Ex: Grille analyse litt√©raire" onchange="sauvegarderNomGrille()">
                        </div>

                        <!-- IMPORT/EXPORT GRILLES -->
                        <div style="display: flex; gap: 10px; margin-bottom: 20px; padding: 15px; background: #fff8f0; border-radius: 6px; border-left: 4px solid #ff9800;">
                            <button class="btn btn-confirmer" onclick="exporterGrilles()" style="flex: 1;">
                                üì§ Exporter les grilles
                            </button>
                            <button class="btn btn-principal" onclick="document.getElementById('fichier-import-grilles-local').click()" style="flex: 1;">
                                üì• Importer des grilles
                            </button>
                            <input type="file" id="fichier-import-grilles-local" accept=".json" style="display: none;" onchange="importerGrilles(event)">
                        </div>

                        <!-- Message si aucune √©valuation s√©lectionn√©e -->
                        <div id="aucuneEvalSelectionnee" style="padding: 20px; background: var(--bleu-tres-pale); 
             border-radius: 6px; text-align: center; color: var(--bleu-leger);">
                            <p>Cr√©ez une nouvelle grille ou s√©lectionnez une grille existante √† modifier</p>
                        </div>

                        <!-- Conteneur des crit√®res (cach√© par d√©faut) -->
                        <div id="criteresContainer" style="display: none;">
                            <!-- Liste des crit√®res existants -->
                            <div id="listeCriteres" style="margin-bottom: 20px;">
                                <!-- Les crit√®res seront affich√©s ici -->
                            </div>

                            <!-- Formulaire d'ajout de crit√®re (cach√© par d√©faut) -->
                            <div id="formAjoutCritere" style="display: none; padding: 15px; background: var(--bleu-pale); 
                 border: 1px solid var(--bleu-leger); border-radius: 6px; margin-bottom: 20px;">

                                <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">Nouveau crit√®re</h4>

                                <div
                                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                    <div class="groupe-form">
                                        <label>Nom du crit√®re *</label>
                                        <input type="text" id="critereNom" class="controle-form"
                                            placeholder="Ex: Qualit√© de l'argumentation">
                                    </div>
                                    <div class="groupe-form">
                                        <label>Pond√©ration relative (%)</label>
                                        <input type="number" id="criterePonderation" class="controle-form" min="0"
                                            max="100" placeholder="Ex: 25">
                                    </div>
                                </div>

                                <div class="groupe-form" style="margin-bottom: 15px;">
                                    <label>Description</label>
                                    <textarea id="critereDescription" class="controle-form" rows="3"
                                        placeholder="Description d√©taill√©e du crit√®re..."></textarea>
                                </div>

                                <div class="groupe-form" style="margin-bottom: 15px;">
                                    <label>Type de crit√®re</label>
                                    <select id="critereType" class="controle-form" onchange="afficherChampFormule()">
                                        <option value="holistique">Holistique (jugement global)</option>
                                        <option value="analytique">Analytique (points par √©l√©ment)</option>
                                        <option value="algorithmique">Algorithmique (calcul automatique)</option>
                                    </select>
                                </div>

                                <!-- Champ formule (cach√© par d√©faut) -->
                                <div id="champFormule" class="groupe-form" style="display: none; margin-bottom: 15px;">
                                    <label>Formule de calcul</label>
                                    <input type="text" id="critereFormule" class="controle-form"
                                        placeholder="Ex: (nb_erreurs / nb_mots) * 100">
                                    <small style="color: var(--bleu-leger);">
                                        Pour le fran√ßais √©crit : nombre d'erreurs / nombre de mots
                                    </small>
                                </div>

                                <div class="btn-groupe" style="justify-content: flex-end;">
                                    <button class="btn btn-annuler" onclick="annulerAjoutCritere()">Fermer</button>
                                    <button class="btn btn-principal" onclick="sauvegarderEtFermer()"
                                        style="margin-left: 10px;">
                                        Ajouter et fermer
                                    </button>
                                    <button class="btn btn-confirmer" onclick="sauvegarderCritere()">
                                        <span id="btnTexteCritere">Ajouter et continuer</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Boutons d'actions -->
                            <div class="btn-groupe" style="justify-content: space-between; margin-bottom: 20px;">
                                <div>
                                    <button id="btnAjouterCritere" class="btn btn-confirmer"
                                        onclick="afficherFormCritere()">
                                        + Ajouter un crit√®re
                                    </button>
                                </div>
                                <div>
                                    <button class="btn btn-principal" onclick="afficherGrillesCriteres()"
                                        style="margin-right: 10px;">
                                        Voir les grilles existantes
                                    </button>
                                    <button id="btnDupliquerGrille" class="btn btn-modifier"
                                        onclick="dupliquerGrilleActuelle()" style="margin-right: 10px; display: none;">
                                        Dupliquer cette grille
                                    </button>
                                    <button class="btn btn-confirmer" onclick="enregistrerCommeGrille()">
                                        Sauvegarder cette grille
                                    </button>
                                </div>
                            </div>

                            <!-- Modal pour les grilles existantes (cach√© par d√©faut) -->
                            <div id="modalGrilles" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
                 background: rgba(0,0,0,0.5); z-index: 1000;">
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                     background: white; padding: 30px; border-radius: 8px; max-width: 600px; width: 90%; 
                     max-height: 80vh; overflow-y: auto;">
                                    <h3 style="margin-bottom: 20px; color: var(--bleu-principal);">Grilles de
                                        crit√®res
                                        disponibles</h3>

                                    <div id="listeGrilles" style="margin-bottom: 20px;">
                                        <!-- Les grilles seront affich√©es ici -->
                                    </div>

                                    <div class="btn-groupe" style="justify-content: flex-end;">
                                        <button class="btn btn-annuler" onclick="fermerModalGrilles()">Fermer</button>
                                    </div>
                                </div>
                            </div>

                            <!-- R√©sum√© de la pond√©ration -->
                            <div style="margin-top: 20px; padding: 10px; background: var(--bleu-tres-pale);
                 border-radius: 6px; text-align: right;">
                                <strong>Total des pond√©rations : </strong>
                                <span id="totalPonderationCriteres"
                                    style="font-size: 1.2rem; font-weight: bold;">0%</span>
                                <small id="statutPonderationCriteres" style="display: block; margin-top: 5px;"></small>
                            </div>
                        </div>

                        </div><!-- Fin ANCIEN SYST√àME -->
                    </div>

                </div><!--fin sous-section grille-criteres-->

                <!-- Sous-section : √âchelle de performance -->
                <div id="materiel-echelle-performance" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Niveaux de performance</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="note-echelle">‚ÑπÔ∏è</span>
                        </span>
                    </h2>
                    <p class="text-muted">Configuration de l'√©chelle de notation pour les PAN/SBG</p>

                    <!-- Carte Note (pas de Conseil pour √âchelle) -->
                    <div id="note-echelle" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> L'√©chelle de performance d√©finit les niveaux de ma√Ætrise utilis√©s pour √©valuer les crit√®res.
                        Le syst√®me utilise par d√©faut l'√©chelle IDME (Insuffisant, en D√©veloppement, Ma√Ætris√©, √âtendu) bas√©e sur la taxonomie SOLO.
                        Chaque niveau correspond √† un seuil de performance : Insuffisant (&lt; 64%), D√©veloppement (65-74%), Ma√Ætris√© (75-84%),
                        √âtendu (‚â• 85%). Cette √©chelle peut √™tre personnalis√©e selon les besoins p√©dagogiques et permet un suivi longitudinal
                        de la progression des √©tudiants.
                    </div>

                    <!-- CARTE : √âCHELLE DE PERFORMANCE PAN/SBG -->
                    <div class="carte">
                        <h3>üìà √âchelle de performance</h3>

                        <!-- NOUVELLE VUE: Toutes les √©chelles et niveaux -->
                        <div id="vueEchellesNiveaux" style="margin-bottom: 30px;">
                            <!-- Contenu g√©n√©r√© par afficherToutesLesEchellesNiveaux() -->
                        </div>

                        <!-- ANCIEN SYST√àME (Cach√© par d√©faut, gard√© pour compatibilit√©) -->
                        <div style="display: none;">

                        <!-- S√©lecteur d'√©chelle -->
                        <div class="groupe-form" style="max-width: 400px; margin-bottom: 20px;">
                            <label>Cr√©er ou modifier une √©chelle de performance :</label>
                            <select id="selectEchelleTemplate" class="controle-form"
                                onchange="chargerEchelleTemplate()">
                                <option value="">-- Nouvelle √©chelle --</option>
                                <option value="new">‚ûï Cr√©er une nouvelle √©chelle</option>
                            </select>
                        </div>

                        <!-- Nom de l'√©chelle (visible uniquement en cr√©ation/√©dition) -->
                        <div id="nomEchelleContainer" class="groupe-form"
                            style="max-width: 400px; margin-bottom: 20px; display: none;">
                            <label>Nom de l'√©chelle :</label>
                            <input type="text" id="nomEchelleTemplate" class="controle-form"
                                placeholder="Ex: √âchelle standard A-F" onchange="sauvegarderNomEchelle()">
                        </div>

                        <!-- IMPORT/EXPORT √âCHELLES -->
                        <div style="display: flex; gap: 10px; margin-bottom: 20px; padding: 15px; background: #f0f8ff; border-radius: 6px; border-left: 4px solid #2196f3;">
                            <button class="btn btn-principal" onclick="exporterEchelles()" style="flex: 1;">
                                üì§ Exporter l'√©chelle
                            </button>
                            <button class="btn btn-principal" onclick="document.getElementById('fichier-import-echelles-local').click()" style="flex: 1;">
                                üì• Importer une √©chelle
                            </button>
                            <input type="file" id="fichier-import-echelles-local" accept=".json" style="display: none;" onchange="importerEchelles(event)">
                        </div>

                        <!-- Note explicative -->
                        <div style="font-size: 0.85rem; color: #666; margin-bottom: 20px; padding: 12px;
             background: var(--bleu-pale); border-radius: 6px; border-left: 3px solid var(--bleu-moyen);">
                            <strong>Note :</strong> Cette √©chelle s'applique uniquement aux pratiques alternatives
                            de
                            notation
                            (PAN).
                            La note finale sera convertie en pourcentage pour respecter le RREC. C'est √† cette fin
                            que
                            servent les plages de notes et les valeurs ponctuelles.
                        </div>

                        <!-- CONFIGURATION GLOBALE -->
                        <div
                            style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 6px; margin-bottom: 20px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">Configuration globale
                            </h4>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                <div class="groupe-form">
                                    <label>Type d'√©chelle</label>
                                    <select id="typeEchelle" class="controle-form" onchange="changerTypeEchelle()">
                                        <option value="lettres">Lettres (A, B, C...)</option>
                                        <option value="pourcentage">Pourcentage (%)</option>
                                        <option value="autre">Autre (personnalis√©)</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Seuil de r√©ussite (%)</label>
                                    <input type="number" id="seuilReussite" class="controle-form" value="60" min="0"
                                        max="100" onchange="sauvegarderConfigEchelle()">
                                </div>
                            </div>

                            <!-- Champ conditionnel pour type "autre" -->
                            <div id="champAutreEchelle" style="display: none; margin-top: 15px;">
                                <div class="groupe-form">
                                    <label>Note de passage personnalis√©e :</label>
                                    <div id="notePassageContainer">
                                        <!-- Input sera ins√©r√© ici par changerTypeEchelle() -->
                                    </div>
                                </div>
                            </div>

                            <!-- G√©n√©ration de niveaux personnalis√©s -->
                            <div class="groupe-form" style="margin-top: 15px;">
                                <label>G√©n√©rer des niveaux personnalis√©s (codes s√©par√©s par virgules) :</label>
                                <div style="display: flex; gap: 10px;">
                                    <input type="text" id="codesPersonnalises" class="controle-form"
                                        placeholder="Ex: Excellent, Bon, Moyen, Faible"
                                        onchange="sauvegarderConfigEchelle()">
                                    <button class="btn btn-principal" onclick="genererNiveauxPersonnalises()">G√©n√©rer</button>
                                </div>
                                <small
                                    style="color: var(--bleu-leger); font-size: 0.8rem; display: block; margin-top: 5px;">
                                    Les niveaux seront cr√©√©s automatiquement avec r√©partition uniforme des
                                    pourcentages
                                </small>
                            </div>
                        </div>

                        <!-- TABLEAU DES NIVEAUX -->
                        <div
                            style="background: white; border: 1px solid var(--bleu-leger); border-radius: 6px; padding: 15px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">Niveaux de performance
                            </h4>

                            <div id="tableauNiveaux">
                                <!-- Le tableau sera g√©n√©r√© ici par afficherTableauNiveaux() -->
                            </div>

                            <!-- Boutons d'actions -->
                            <div class="btn-groupe" style="margin-top: 20px; justify-content: space-between;">
                                <div style="display: flex; gap: 10px;">
                                    <button class="btn btn-principal" onclick="sauvegarderNiveaux()">
                                        Sauvegarder les niveaux
                                    </button>
                                    <button class="btn btn-annuler" onclick="reinitialiserNiveauxDefaut()">
                                        R√©initialiser par d√©faut
                                    </button>
                                </div>
                                <div style="display: flex; gap: 10px;">
                                    <button id="btnDupliquerEchelle" class="btn btn-modifier"
                                        onclick="dupliquerEchelleActuelle()" style="display: none;">
                                        Dupliquer
                                    </button>
                                    <button class="btn btn-confirmer" onclick="enregistrerCommeEchelle()">
                                        Enregistrer comme √©chelle
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Visualisation de l'√©chelle -->
                        <div style="margin-top: 20px; padding: 15px; background: var(--vert-pale); 
             border-radius: 6px; border: 1px solid var(--vert-leger);">
                            <h5 style="color: var(--vert-leger); margin-bottom: 10px;">Aper√ßu de l'√©chelle</h5>
                            <div id="apercuEchelle" style="display: flex; justify-content: space-between; 
                 align-items: center; padding: 10px; background: white; border-radius: 4px;">
                                <!-- L'aper√ßu sera g√©n√©r√© ici par afficherApercuEchelle() -->
                            </div>
                        </div>

                        <!-- Toggle Conseil pratique -->
                        <details style="margin-bottom: 20px;">
                            <summary style="cursor: pointer; padding: 12px; background: var(--bleu-tres-pale);
                                border-radius: 6px; border-left: 3px solid var(--bleu-moyen);
                                color: var(--bleu-principal); user-select: none; display: flex;
                                justify-content: space-between; align-items: center;">
                                <span></span>
                                <span style="font-size: 1.2rem;">üí°</span>
                            </summary>
                            <div style="padding: 12px; font-size: 0.85rem; color: #666; line-height: 1.6;">
                                <strong>Conseil pratique - Aide √† la configuration :</strong>
                                <ul style="margin: 8px 0 0 0; padding-left: 20px; line-height: 1.6;">
                                    <li><strong>Code</strong> : 1 √† 3 caract√®res (ex: I, D, M, E)</li>
                                    <li><strong>Nom</strong> : Titre du niveau (ex: Ma√Ætris√©)</li>
                                    <li><strong>Description</strong> : Contexte p√©dagogique (optionnel)</li>
                                    <li><strong>Min/Max</strong> : Plage de % (0-100%)</li>
                                    <li><strong>Valeur ponctuelle</strong> : Note utilis√©e pour les calculs (ex: 75%)</li>
                                    <li><strong>Couleur</strong> : Choisir dans la palette</li>
                                </ul>
                            </div>
                        </details>

                        </div><!-- Fin ANCIEN SYST√àME -->
                    </div>

                </div><!--fin sous-section echelle-performance-->


                <!-- Sous-section : R√©troactions -->
                <div id="materiel-retroactions" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>R√©troactions pr√©d√©finies</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="note-retroactions">‚ÑπÔ∏è</span>
                            <span class="emoji-toggle" data-target="conseil-retroactions">üí°</span>
                        </span>
                    </h2>
                    <p class="text-muted">Cr√©er des cartouches de r√©troaction bas√©es sur les crit√®res et l'√©chelle
                        de
                        performance</p>

                    <!-- Carte Note -->
                    <div id="note-retroactions" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les r√©troactions seront g√©n√©r√©es automatiquement en assemblant les commentaires pr√©r√©dig√©s
                        par l'enseignant¬∑e selon les crit√®res d'√©valuation et le niveau de performance atteint pour
                        chaque crit√®re. Un ensemble complet de commentaires porte ici le nom de <strong>cartouche</strong>.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-retroactions" class="carte-info-toggle carte-info-conseil" style="display: none;">
                            <strong>Conseil pratique :</strong> Les commentaires peuvent avoir entre 50 et 75 mots environ. R√©dige-les de fa√ßon personnelle
                            et constructive. Chaque cellule de la matrice correspond √† un commentaire pour un niveau de
                            performance donn√© sur un crit√®re sp√©cifique. Utilise les codes de ta grille (I, D, M, E) et
                            le format propos√© pour structurer tes commentaires. Les cartouches peuvent √™tre verrouill√©es
                            une fois finalis√©es.
                        </div>

<!-- CARTE : CARTOUCHES DE R√âTROACTION -->
                    <div class="carte">
                        <h3>üí¨ Cartouches de r√©troaction</h3>

                        <!-- IMPORT/EXPORT CARTOUCHES -->
                        <div style="margin-bottom: 20px;">
                            <!-- Export et Import JSON (partage entre enseignants) -->
                            <div style="display: flex; gap: 10px; padding: 15px; background: #f0f8ff; border-radius: 6px; border-left: 4px solid #2196f3; margin-bottom: 10px;">
                                <button class="btn btn-confirmer" onclick="exporterCartouches()" style="flex: 1;">
                                    üì§ Exporter les cartouches (JSON)
                                </button>
                                <button class="btn btn-principal" onclick="document.getElementById('fichier-import-cartouches-local').click()" style="flex: 1;">
                                    üì• Importer des cartouches (JSON)
                                </button>
                                <input type="file" id="fichier-import-cartouches-local" accept=".json" style="display: none;" onchange="importerCartouches(event)">
                            </div>

                            <!-- Import TXT (pour remplir une cartouche) -->
                            <div style="padding: 12px; background: #e3f2fd; border-radius: 6px; border-left: 4px solid #1976d2;">
                                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                    <button class="btn btn-principal" onclick="document.getElementById('fichier-import-txt-local').click()" style="font-size: 0.9rem;">
                                        üìÑ Importer depuis fichier .txt
                                    </button>
                                    <input type="file" id="fichier-import-txt-local" accept=".txt" style="display: none;" onchange="importerCartoucheDepuisTxt(event)">
                                    <small style="color: #1565c0;">
                                        Pour remplir la cartouche s√©lectionn√©e avec vos commentaires r√©dig√©s dans un fichier .txt (format Markdown)
                                    </small>
                                </div>
                                <div style="font-size: 0.85rem; color: #0d47a1; background: white; padding: 8px; border-radius: 4px;">
                                    <strong>‚ö†Ô∏è Important :</strong> Les noms de crit√®res dans la grille doivent correspondre exactement aux noms dans le fichier .txt (ex: STRUCTURE, RIGUEUR, PLAUSIBILIT√â, NUANCE).
                                </div>
                            </div>
                        </div>

                        <!-- NOUVELLE VUE: Toutes les grilles et cartouches -->
                        <div id="vueGrillesCartouches" style="margin-bottom: 30px;">
                            <!-- Contenu g√©n√©r√© par afficherToutesLesGrillesEtCartouches() -->
                        </div>

                        <!-- ANCIEN SYST√àME (Cach√© par d√©faut, gard√© pour compatibilit√©) -->
                        <div style="display: none;">
                            <!-- S√©lecteur de grille et cartouche -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>Grille de crit√®res :</label>
                                    <select id="selectGrilleRetroaction" class="controle-form"
                                        onchange="chargerCartouchesRetroaction()">
                                        <option value="">-- Choisir une grille --</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Cartouche :</label>
                                    <select id="selectCartouche" class="controle-form"
                                        onchange="chargerMatriceRetroaction()">
                                        <option value="">-- Nouvelle cartouche --</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Message si aucune grille s√©lectionn√©e -->
                            <div id="aucuneEvalRetroaction" style="padding: 20px; background: var(--bleu-tres-pale);
                 border-radius: 6px; text-align: center; color: var(--bleu-leger);">
                                <p>S√©lectionnez une grille de crit√®res pour cr√©er ou modifier une cartouche de
                                    r√©troaction
                                </p>
                            </div>
                        </div>

                        <!-- Informations de la cartouche -->
                        <div id="infoCartouche" style="display: none; margin-bottom: 20px;">
                            <div class="groupe-form" style="max-width: 500px;">
                                <label>Nom de la cartouche :</label>
                                <input type="text" id="nomCartouche" class="controle-form"
                                    placeholder="Ex: Dissertation argumentative - Session Automne 2025">
                            </div>

                            <div class="groupe-form" style="margin-top: 15px;">
                                <label>Contexte de la r√©troaction (optionnel) :</label>
                                <textarea id="contexteCartouche" class="controle-form" rows="3"
                                    placeholder="Ex: Cette production porte sur l'analyse d'un texte argumentatif. L'√©tudiant¬∑e devait d√©montrer sa capacit√© √†..."></textarea>
                                <small style="color: #666; font-size: 0.85rem;">Ce texte appara√Ætra au d√©but de la
                                    r√©troaction si
                                    l'option est coch√©e lors de la g√©n√©ration.</small>
                            </div>

                            <!-- Liste des cartouches existantes -->
                            <div id="listeCartouchesExistants" style="display: none; margin-bottom: 20px;">
                                <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">Cartouches
                                    enregistr√©es
                                </h4>
                                <div id="listeCartouchesContainer">
                                    <!-- Les cartouches seront affich√©es ici par afficherListeCartouches() -->
                                </div>
                            </div>

                            <!-- M√©triques de la cartouche -->
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; 
                 margin-top: 15px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                <div class="carte-metrique">
                                    <strong id="nbCriteres">0</strong>
                                    <span>Crit√®res</span>
                                </div>
                                <div class="carte-metrique">
                                    <strong id="nbNiveaux">0</strong>
                                    <span>Niveaux</span>
                                </div>
                                <div class="carte-metrique">
                                    <strong id="nbCommentaires">0</strong>
                                    <span>Commentaires √† r√©diger</span>
                                </div>
                                <div class="carte-metrique">
                                    <strong id="pctComplete">0%</strong>
                                    <span>Compl√©t√©</span>
                                </div>
                            </div>
                        </div>

                        <!-- ZONE D'IMPORTATION DES COMMENTAIRES -->
                        <div id="zoneImportCommentaires" style="display: none; margin-bottom: 20px;">
                            <div class="carte"
                                style="background: var(--vert-pale); border-left: 3px solid var(--vert-leger);">
                                <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">
                                    Importation rapide des commentaires
                                </h4>

                                <div class="groupe-form">
                                    <label>Collez vos commentaires ici (format Markdown) :</label>
                                    <textarea id="commentairesColles" class="controle-form" rows="12"
                                        placeholder="## STRUCTURE&#10;&#10;**STRUCTURE (I)** : Commentaire incomplet...&#10;&#10;**STRUCTURE (D)** : Commentaire en d√©veloppement...&#10;&#10;**STRUCTURE (M)** : Commentaire ma√Ætris√©...&#10;&#10;**STRUCTURE (E)** : Commentaire √©tendu..."
                                        style="font-family: monospace; font-size: 0.85rem;"></textarea>
                                </div>

                                <div class="btn-groupe">
                                    <button onclick="annulerImportCommentaires()" class="btn btn-annuler">
                                        Annuler
                                    </button>
                                    <button onclick="importerCommentaires()" class="btn btn-confirmer">
                                        Importer les commentaires
                                    </button>
                                </div>

                                <div
                                    style="background: white; padding: 12px; border-radius: 6px; margin-top: 15px; font-size: 0.85rem;">
                                    <strong>Format attendu :</strong>
                                    <pre
                                        style="margin-top: 8px; color: #666; font-family: monospace; line-height: 1.4;">## NOM_DU_CRIT√àRE

**NOM_DU_CRIT√àRE (I)** : Texte du commentaire...

**NOM_DU_CRIT√àRE (D)** : Texte du commentaire...

**NOM_DU_CRIT√àRE (M)** : Texte du commentaire...

**NOM_DU_CRIT√àRE (E)** : Texte du commentaire...</pre>
                                    <small style="color: var(--bleu-moyen); display: block; margin-top: 10px;">
                                        üí° Les codes de niveau (I, D, M, E) doivent correspondre √† ceux de votre
                                        √©chelle
                                        de
                                        performance.
                                    </small>
                                </div>
                            </div>
                        </div>

                        <!-- MATRICE DE R√âTROACTION -->
                        <div id="matriceRetroaction" style="display: none;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">
                                Matrice des commentaires de r√©troaction
                            </h4>

                            <div id="matriceContainer" style="overflow-x: auto;">
                                <!-- La matrice sera g√©n√©r√©e dynamiquement ici par afficherMatriceRetroaction() -->
                            </div>

                            <!-- Boutons d'action de la matrice -->
                            <div class="btn-groupe" style="margin-top: 20px;">
                                <button class="btn btn-confirmer" onclick="sauvegarderCartouche()">
                                    Sauvegarder la cartouche
                                </button>
                                <button class="btn btn-supprimer" onclick="supprimerCartouche()"
                                    style="margin-left: 10px;">
                                    Supprimer
                                </button>
                            </div>
                        </div>

                        <!-- APER√áU DE R√âTROACTION -->
                        <div id="apercuRetroaction" style="display: none; margin-top: 20px; padding: 15px; 
             background: var(--vert-pale); border-radius: 6px; border: 1px solid var(--vert-leger);">
                            <h5 style="color: var(--vert-leger); margin-bottom: 10px;">
                                Aper√ßu d'une r√©troaction g√©n√©r√©e
                            </h5>
                            <div id="exempleRetroaction" style="padding: 15px; background: white; 
                 border-radius: 4px; font-size: 0.9rem; line-height: 1.6;">
                                <!-- L'aper√ßu sera g√©n√©r√© ici par genererApercuAleatoire() -->
                            </div>
                            <button class="btn btn-principal mt-2" onclick="genererApercuAleatoire()">
                                G√©n√©rer un aper√ßu al√©atoire
                            </button>
                        </div>
                    </div>

                </div><!--fin sous-section retroactions-->

            </section><!-- fin section-materiel -->

            <!-- ===================================
                 SECTION: R√âGLAGES
                 =================================== -->
            <section id="section-reglages" class="section">

                <!-- Sous-section: Aper√ßu des r√©glages -->
                <div id="reglages-apercu" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Aper√ßu de la configuration</span>
                        <button class="btn btn-principal" onclick="chargerStatistiquesApercu()"
                            style="font-size: 0.9rem; padding: 8px 16px;">
                            Rafra√Æchir
                        </button>
                    </h2>
                    <p class="text-muted">
                        R√©sum√© de la configuration actuelle du syst√®me. Les statistiques sont calcul√©es en temps r√©el depuis les donn√©es stock√©es localement.
                    </p>

                    <!-- Grille de cartes m√©triques bleues harmonis√©es -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">

                        <!-- Informations du cours (4 cartes) -->
                        <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <span style="font-size: 0.9rem; color: #666;">Trimestre</span>
                                <strong id="stat-trimestre" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                            </div>
                        </div>

                        <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <span style="font-size: 0.9rem; color: #666;">Nombre de cours</span>
                                <strong id="stat-nb-cours" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                            </div>
                        </div>

                        <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <span style="font-size: 0.9rem; color: #666;">Groupes</span>
                                <strong id="stat-nb-groupes" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                            </div>
                        </div>

                        <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <span style="font-size: 0.9rem; color: #666;">√âl√®ves</span>
                                <strong id="stat-nb-eleves" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                            </div>
                        </div>

                        <!-- Informations syst√®me (2 cartes) -->
                        <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <span style="font-size: 0.9rem; color: #666;">Version</span>
                                <strong id="stat-version" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                            </div>
                        </div>

                        <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                <span style="font-size: 0.9rem; color: #666;">Poids des donn√©es</span>
                                <strong id="stat-poids" style="font-size: 1.8rem; color: var(--bleu-principal);">‚Äî</strong>
                            </div>
                        </div>

                    </div>
                    <!-- fin grille cartes m√©triques -->


                </div>
                <!-- fin sous-section reglages-apercu -->

                <!-- Sous-section : Cours -->
                <div id="reglages-cours" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Configuration du cours</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="conseil-cours">üí°</span>
                        </span>
                    </h2>
                    <p class="text-muted">Informations techniques du cours : code, nom, comp√©tences, enseignant¬∑e,
                        trimestre,
                        format horaire</p>

                    <!-- Carte Conseil pratique (masqu√©e par d√©faut) -->
                    <div id="conseil-cours" class="carte-info-toggle" carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6;">
                            <li><strong>Cours actif :</strong> Un seul cours peut √™tre actif √† la fois. Le cours
                                actif est utilis√© comme r√©f√©rence dans toute l'application</li>
                            <li><strong>Verrouillage :</strong> Verrouillez un cours termin√© pour √©viter les
                                modifications accidentelles</li>
                            <li><strong>Duplication :</strong> Dupliquez un cours pour cr√©er rapidement une
                                nouvelle session en modifiant seulement l'ann√©e</li>
                            <li><strong>Code de cours :</strong> Format habituel : XXX-XXX-XX
                                (d√©partement-num√©ro-pond√©ration)</li>
                            <li><strong>Format horaire :</strong> D√©finit comment les heures sont r√©parties dans
                                la semaine (utilis√© pour le calendrier)</li>
                        </ul>
                    </div>

                    <div class="carte">
                        <h3>üìö Cours configur√©s</h3>

                        <!-- VUE D'ENSEMBLE -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Configurations</span>
                                    <strong id="nombreCours" style="font-size: 1.8rem; color: var(--bleu-principal);">0</strong>
                                </div>
                            </div>
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Session active</span>
                                    <strong id="sessionActive" style="font-size: 1.8rem; color: var(--bleu-principal);">H2025</strong>
                                </div>
                            </div>
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal); grid-column: 1 / -1;">
                                <div id="resumeCours" style="font-size: 0.9rem; color: #666; text-align: center;">
                                    Aucune configuration de cours
                                </div>
                            </div>
                        </div>

                        <!-- BOUTON AJOUTER UN COURS -->
                        <button id="btnAjouterCours" class="btn btn-confirmer" onclick="afficherFormCours()"
                            style="margin-bottom: 20px;">
                            + Ajouter un cours
                        </button>

                        <!-- TABLEAU/CONTENEUR DES COURS -->
                        <div id="tableauCoursContainer" style="margin-bottom: 20px;">
                            <p class="text-muted" style="font-style: italic;">
                                Aucun cours configur√©.
                            </p>
                        </div>

                        <!-- FORMULAIRE D'AJOUT/MODIFICATION (cach√© par d√©faut) -->
                        <div id="formulaireCours" style="display: none; margin-top: 20px; padding: 20px; 
             background: var(--bleu-pale); border: 1px solid var(--bleu-leger); border-radius: 8px;">

                            <h4 id="titreFormCours" style="color: var(--bleu-principal); margin-bottom: 20px;">
                                Nouvelle configuration de cours
                            </h4>

                            <!-- Informations g√©n√©rales -->
                            <h5 style="color: var(--bleu-moyen); margin-bottom: 15px; padding-bottom: 8px; 
                border-bottom: 2px solid var(--bleu-leger);">
                                Informations g√©n√©rales
                            </h5>
                            <div
                                style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>Code du cours</label>
                                    <input type="text" id="codeCours" class="controle-form"
                                        placeholder="Ex: 601-101-MQ">
                                </div>
                                <div class="groupe-form">
                                    <label>Nom du cours</label>
                                    <input type="text" id="nomCours" class="controle-form"
                                        placeholder="Ex: √âcriture et litt√©rature">
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 3fr; gap: 15px; margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>N¬∞ de la comp√©tence</label>
                                    <input type="text" id="numeroCompetence" class="controle-form"
                                        placeholder="Ex: 4EF0">
                                </div>
                                <div class="groupe-form">
                                    <label>Comp√©tence</label>
                                    <input type="text" id="competence" class="controle-form"
                                        placeholder="Ex: Analyser des textes litt√©raires">
                                </div>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 20px;">
                                <label>√âl√©ments de comp√©tence</label>
                                <textarea id="elementsCompetence" class="controle-form" rows="4"
                                    placeholder="‚Ä¢ Reconna√Ætre le propos du texte&#10;‚Ä¢ Rep√©rer et classer des th√®mes et proc√©d√©s stylistiques&#10;‚Ä¢ Choisir les √©l√©ments de l'analyse"></textarea>
                            </div>

                            <!-- Enseignant¬∑e -->
                            <h5 style="color: var(--bleu-moyen); margin-bottom: 15px; margin-top: 25px; padding-bottom: 8px; 
                border-bottom: 2px solid var(--bleu-leger);">
                                Enseignant¬∑e
                            </h5>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>Pr√©nom</label>
                                    <input type="text" id="prenomEnseignant" class="controle-form"
                                        placeholder="Ex: Gr√©goire">
                                </div>
                                <div class="groupe-form">
                                    <label>Nom</label>
                                    <input type="text" id="nomEnseignant" class="controle-form"
                                        placeholder="Ex: B√©dard">
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>D√©partement</label>
                                    <input type="text" id="departement" class="controle-form"
                                        placeholder="Ex: Litt√©rature et communication">
                                </div>
                                <div class="groupe-form">
                                    <label>Local</label>
                                    <input type="text" id="local" class="controle-form" placeholder="Ex: 2314">
                                </div>
                            </div>

                            <!-- Session et horaire -->
                            <h5 style="color: var(--bleu-moyen); margin-bottom: 15px; margin-top: 25px; padding-bottom: 8px; 
                border-bottom: 2px solid var(--bleu-leger);">
                                Session et horaire
                            </h5>
                            <div
                                style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>Session</label>
                                    <select id="session" class="controle-form">
                                        <option value="H">Hiver</option>
                                        <option value="A">Automne</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Ann√©e</label>
                                    <input type="number" id="annee" class="controle-form" value="2025" min="2020"
                                        max="2030">
                                </div>
                                <div class="groupe-form">
                                    <label>Heures/semaine</label>
                                    <input type="number" id="heuresParSemaine" class="controle-form" value="4" min="1"
                                        max="10">
                                </div>
                                <div class="groupe-form">
                                    <label>Format horaire</label>
                                    <select id="formatHoraire" class="controle-form">
                                        <option value="1x4">1 p√©riode de 4h</option>
                                        <option value="2x2" selected>2 p√©riodes de 2h</option>
                                        <option value="4x1">4 p√©riodes de 1h</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Boutons d'action -->
                            <div class="btn-groupe" style="justify-content: flex-end; margin-top: 25px; padding-top: 20px; 
                 border-top: 2px solid var(--bleu-leger);">
                                <button class="btn btn-annuler" onclick="annulerFormCours()">
                                    Annuler
                                </button>
                                <button class="btn btn-confirmer" onclick="sauvegarderCours()">
                                    <span id="btnTexteCours">Ajouter</span>
                                </button>
                            </div>
                        </div>
                    </div>

                </div><!--fin sous-section cours-->

                <!-- SECTION TRIMESTRE (R√©glages > Trimestre) -->
                <!-- Cette section g√®re les DONN√âES ADMINISTRATIVES du trimestre -->
                <!-- Module associ√©: trimestre.js -->

                <div id="reglages-trimestre" class="sous-section">
                    <h2>Configuration du trimestre</h2>
                    <p class="text-muted">
                        D√©finissez les param√®tres administratifs du trimestre : dates de d√©but et de fin,
                        semaines sp√©ciales, cong√©s pr√©vus et impr√©vus avec leurs reprises √©ventuelles.
                    </p>

                    <!-- CARTE: CADRE R√âGULIER -->
                    <div class="carte">
                        <h3>Cadre r√©gulier</h3>

                        <!-- Statistiques (calcul√©es automatiquement) -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Semaines</span>
                                    <strong id="nombreSemaines" style="font-size: 1.8rem; color: var(--bleu-principal);">0</strong>
                                </div>
                            </div>
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Jours de cours</span>
                                    <strong id="nombreJoursCours" style="font-size: 1.8rem; color: var(--bleu-principal);">0</strong>
                                </div>
                            </div>
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Cong√©s</span>
                                    <strong id="totalConges" style="font-size: 1.8rem; color: var(--bleu-principal);">0</strong>
                                </div>
                            </div>
                        </div>

                        <!-- Bornes du trimestre -->
                        <h5 style="color: var(--bleu-moyen); margin-bottom: 15px; padding-bottom: 8px; 
            border-bottom: 2px solid var(--bleu-leger);">
                            Bornes du trimestre
                        </h5>
                        <div class="grille-statistiques">
                            <div class="groupe-form">
                                <label>D√©but du trimestre :</label>
                                <input type="date" class="controle-form" id="debutTrimestre"
                                    onchange="sauvegarderCadreCalendrier()">
                            </div>
                            <div class="groupe-form">
                                <label>Fin des cours r√©guliers :</label>
                                <input type="date" class="controle-form" id="finCours"
                                    onchange="sauvegarderCadreCalendrier()">
                            </div>
                            <div class="groupe-form">
                                <label>Fin du trimestre :</label>
                                <input type="date" class="controle-form" id="finTrimestre"
                                    onchange="sauvegarderCadreCalendrier()">
                            </div>
                            <div class="groupe-form">
                                <label>Remise des notes :</label>
                                <input type="date" class="controle-form" id="remiseNotes"
                                    onchange="sauvegarderCadreCalendrier()">
                            </div>
                        </div>

                        <!-- Semaines sp√©ciales -->
                        <h5 class="mt-3" style="color: var(--bleu-moyen); margin-bottom: 15px; padding-bottom: 8px; 
            border-bottom: 2px solid var(--bleu-leger);">
                            Semaines sp√©ciales
                        </h5>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 20px;">

                            <!-- COLONNE GAUCHE: Semaine de planification -->
                            <div>
                                <h6>Semaine de planification et de mise √† jour</h6>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <div class="groupe-form" style="flex: 1;">
                                        <label>Du :</label>
                                        <input type="date" class="controle-form" id="semainePlanificationDebut"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                    <span style="padding-top: 20px;">au</span>
                                    <div class="groupe-form" style="flex: 1;">
                                        <label>&nbsp;</label>
                                        <input type="date" class="controle-form" id="semainePlanificationFin"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                </div>
                            </div>

                            <!-- COLONNE DROITE: Semaine d'examens -->
                            <div>
                                <h6>Semaine d'examens</h6>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <div class="groupe-form" style="flex: 1;">
                                        <label>Du :</label>
                                        <input type="date" class="controle-form" id="semaineExamensDebut"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                    <span style="padding-top: 20px;">au</span>
                                    <div class="groupe-form" style="flex: 1;">
                                        <label>&nbsp;</label>
                                        <input type="date" class="controle-form" id="semaineExamensFin"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Bouton de sauvegarde -->
                        <div class="btn-groupe" style="justify-content: flex-end;">
                            <button class="btn btn-confirmer" onclick="sauvegarderCadreCalendrier()">
                                Sauvegarder les bornes
                            </button>
                        </div>
                    </div><!-- FIN carte Cadre r√©gulier -->

                    <!-- CARTE: AM√âNAGEMENTS -->
                    <div class="carte mt-3">
                        <h3>Am√©nagements</h3>

                        <!-- SECTION: Cong√©s pr√©vus -->
                        <h5 style="color: var(--bleu-moyen); margin-bottom: 15px; padding-bottom: 8px; 
            border-bottom: 2px solid var(--bleu-leger);">
                            Cong√©s f√©ri√©s et activit√©s institutionnelles
                        </h5>
                        <p class="text-muted" style="font-size: 0.85rem; margin-bottom: 15px;">
                            Cong√©s f√©ri√©s, journ√©es p√©dagogiques, journ√©e Carri√®re, etc. avec leurs reprises
                            √©ventuelles
                        </p>

                        <!-- Container des √©v√©nements pr√©vus (g√©n√©r√© par trimestre.js) -->
                        <div id="congesPrevusContainer" style="margin-bottom: 20px;">
                            <p class="text-muted" style="font-style: italic;">Aucun √©v√©nement pr√©vu d√©clar√©.</p>
                        </div>

                        <!-- Bouton pour afficher le formulaire d'ajout -->
                        <button id="btnAjouterPrevu" class="btn btn-confirmer" onclick="afficherFormEvenement()"
                            style="margin-bottom: 30px;">
                            + Ajouter un √©v√©nement pr√©vu
                        </button>

                        <!-- FORMULAIRE D'AJOUT √âV√âNEMENT PR√âVU (cach√© par d√©faut) -->
                        <div id="formEvenementPrevu" style="display: none; margin-bottom: 30px; padding: 20px; background: var(--vert-pale); 
    border: 1px solid var(--vert-leger); border-radius: 8px;">

                            <h4 style="color: var(--vert-leger); margin-bottom: 20px;">
                                <span style="margin-right: 10px;">‚úì</span>Nouvel √©v√©nement pr√©vu
                            </h4>

                            <div
                                style="display: grid; grid-template-columns: 1fr 2fr 1.5fr 1fr; gap: 15px; margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>Date √©v√©nement</label>
                                    <input type="date" class="controle-form" id="dateEvenementPrevu">
                                </div>
                                <div class="groupe-form">
                                    <label>Description</label>
                                    <select class="controle-form" id="descriptionEvenementPrevu">
                                        <option value="">Choisir...</option>
                                        <option>F√™te du travail (f√©ri√©)</option>
                                        <option>Action de gr√¢ce (f√©ri√©)</option>
                                        <option>Journ√©e carri√®re</option>
                                        <option>Vendredi saint (f√©ri√©)</option>
                                        <option>Lundi de P√¢ques (f√©ri√©)</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Reprise pr√©vue</label>
                                    <select class="controle-form" id="horaireReprisePrevu">
                                        <option value="">Pas de reprise</option>
                                        <option value="Horaire du lundi">Horaire du lundi</option>
                                        <option value="Horaire du mardi">Horaire du mardi</option>
                                        <option value="Horaire du mercredi">Horaire du mercredi</option>
                                        <option value="Horaire du jeudi">Horaire du jeudi</option>
                                        <option value="Horaire du vendredi">Horaire du vendredi</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Date reprise</label>
                                    <input type="date" class="controle-form" id="dateReprisePrevu">
                                </div>
                            </div>

                            <div class="btn-groupe" style="justify-content: flex-end;">
                                <button class="btn btn-annuler" onclick="annulerFormEvenement()">Annuler</button>
                                <button class="btn btn-confirmer" onclick="confirmerAjoutEvenement()">Ajouter</button>
                            </div>
                        </div><!-- FIN formulaire ajout pr√©vu -->

                        <!-- SECTION: √âv√©nements impr√©vus -->
                        <h5 class="mt-3" style="color: var(--bleu-moyen); margin-bottom: 15px; padding-bottom: 8px; 
            border-bottom: 2px solid var(--bleu-leger);">
                            √âv√©nements impr√©vus
                        </h5>
                        <p class="text-muted" style="font-size: 0.85rem; margin-bottom: 15px;">
                            Maladie, conditions m√©t√©orologiques, urgence, autre, etc.
                        </p>

                        <!-- Container des √©v√©nements impr√©vus (g√©n√©r√© par trimestre.js) -->
                        <div id="congesImprevusContainer" style="margin-bottom: 20px;">
                            <p class="text-muted" style="font-style: italic;">Aucun √©v√©nement impr√©vu d√©clar√©.</p>
                        </div>

                        <!-- Bouton pour afficher le formulaire d'ajout -->
                        <button id="btnAjouterEvenementImprevu" class="btn btn-confirmer"
                            onclick="afficherFormEvenementImprevu()">
                            + Ajouter un √©v√©nement impr√©vu
                        </button>

                        <!-- FORMULAIRE D'AJOUT √âV√âNEMENT IMPR√âVU (cach√© par d√©faut) -->
                        <div id="formEvenementImprevu" style="display: none; margin-top: 20px; padding: 20px; background: #fff4e6; 
    border: 1px solid var(--orange-accent); border-radius: 8px;">

                            <h4 style="color: var(--orange-accent); margin-bottom: 10px;">
                                <span style="margin-right: 10px;">‚ö†</span>Nouvel √©v√©nement impr√©vu
                            </h4>

                            <p style="font-size: 0.85rem; color: #666; margin-bottom: 20px;">
                                Pour les √©v√©nements impr√©vus, la reprise peut √™tre planifi√©e apr√®s coup selon les
                                circonstances.
                            </p>

                            <div
                                style="display: grid; grid-template-columns: 1fr 2fr 1.5fr 1fr; gap: 15px; margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>Date √©v√©nement</label>
                                    <input type="date" class="controle-form" id="dateEvenementImprevu">
                                </div>
                                <div class="groupe-form">
                                    <label>Description</label>
                                    <select class="controle-form" id="descriptionEvenementImprevu">
                                        <option value="">Choisir...</option>
                                        <option>Maladie</option>
                                        <option>M√©t√©o</option>
                                        <option>Urgence</option>
                                        <option>Autre</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Reprise pr√©vue (optionnelle)</label>
                                    <select class="controle-form" id="horaireRepriseImprevu">
                                        <option value="">Pas de reprise</option>
                                        <option value="Horaire du lundi">Horaire du lundi</option>
                                        <option value="Horaire du mardi">Horaire du mardi</option>
                                        <option value="Horaire du mercredi">Horaire du mercredi</option>
                                        <option value="Horaire du jeudi">Horaire du jeudi</option>
                                        <option value="Horaire du vendredi">Horaire du vendredi</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Date reprise</label>
                                    <input type="date" class="controle-form" id="dateRepriseImprevu">
                                </div>
                            </div>

                            <div class="btn-groupe" style="justify-content: flex-end;">
                                <button class="btn btn-annuler" onclick="annulerFormEvenementImprevu()">Annuler</button>
                                <button class="btn btn-confirmer"
                                    onclick="confirmerAjoutEvenementImprevu()">Ajouter</button>
                            </div>
                        </div><!-- FIN formulaire ajout impr√©vu -->

                    </div><!-- FIN carte Am√©nagements -->

                </div><!-- FIN sous-section reglages-trimestre -->


                <!-- Sous-section: Horaire -->
                <div id="reglages-horaire" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Configuration de l'horaire</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="conseil-horaire">üí°</span>
                        </span>
                    </h2>
                    <p class="text-muted">D√©finissez le format horaire hebdomadaire de vos s√©ances de cours</p>

                    <!-- Carte Conseil pratique (masqu√©e par d√©faut) -->
                    <div id="conseil-horaire" class="carte-info-toggle" carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6;">
                            <li><strong>Format 2√ó2h :</strong> Id√©al pour deux p√©riodes de cours s√©par√©es dans
                                la semaine (ex: lundi et jeudi)</li>
                            <li><strong>Format 1√ó4h :</strong> Convient aux cours intensifs d'une seule p√©riode
                                continue</li>
                            <li><strong>Heure de d√©but/fin :</strong> Respecte le format 24h (ex: 13:00, pas
                                1:00 PM)</li>
                            <li><strong>Reprises :</strong> Les s√©ances de reprise seront automatiquement
                                ajout√©es lors de la configuration des cong√©s impr√©vus dans la section
                                Trimestre</li>
                            <li><strong>Modification :</strong> Vous pouvez modifier le format horaire en tout
                                temps. Les s√©ances existantes seront supprim√©es et devront √™tre recr√©√©es</li>
                        </ul>
                    </div>

                    <!-- S√©lecteur de format horaire -->
                    <div class="carte" style="margin-bottom: 20px;">
                        <h3>üïê Format des cours</h3>
                        <div style="display: flex; gap: 30px; margin-top: 15px;">
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="radio" name="formatHoraire" value="2x2" id="format2x2"
                                    style="margin-right: 8px;">
                                <span>2 s√©ances de 2h s√©par√©es</span>
                            </label>
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="radio" name="formatHoraire" value="1x4" id="format1x4"
                                    style="margin-right: 8px;">
                                <span>1 s√©ance de 4h cons√©cutives</span>
                            </label>
                        </div>
                    </div><!-- FIN carte format -->

                    <!-- Configuration des s√©ances -->
                    <div class="carte">
                        <h3>Horaire des s√©ances</h3>
                        <div id="messageAucunFormat" style="display: block; 
     background: #fff3cd; 
     border: 1px solid #ffc107; 
     border-radius: 6px; 
     padding: 12px; 
     margin-bottom: 15px;
     font-size: 0.9rem;">
                            <strong style="color: #856404;">‚ÑπÔ∏è √âtape 1 :</strong>
                            <span style="color: #856404;">S√©lectionne d'abord un format horaire ci-dessus (2√ó2h ou
                                1√ó4h)</span>
                        </div>

                        <!-- Conteneur pour les s√©ances existantes -->
                        <div id="seancesContainer" style="margin-bottom: 20px;">
                            <p class="text-muted" style="font-style: italic;">Aucune s√©ance configur√©e.</p>
                        </div>

                        <!-- Formulaire d'ajout (cach√© par d√©faut) -->
                        <div id="formAjoutSeance" style="display: none; 
             background: var(--bleu-tres-pale); 
             padding: 20px; 
             border-radius: 6px; 
             border: 1px solid var(--bleu-leger);
             margin-bottom: 20px;">
                            <h4 style="margin-top: 0; color: var(--bleu-principal);">Configurer les s√©ances</h4>

                            <!-- Le contenu dynamique sera ins√©r√© ici par afficherFormulaireSeances() -->
                            <div id="seancesFormContainer"></div>

                            <div class="btn-groupe" style="margin-top: 15px; justify-content: flex-end;">
                                <button class="btn btn-annuler" onclick="annulerAjoutSeance()">Annuler</button>
                                <button class="btn btn-confirmer" id="btnConfirmerSeances"
                                    onclick="confirmerAjoutSeances()">
                                    Ajouter les s√©ances
                                </button>
                            </div>
                        </div><!-- FIN formulaire ajout -->

                        <!-- Bouton pour afficher le formulaire -->
                        <button class="btn btn-confirmer" onclick="afficherFormulaireSeances()">
                            + Configurer l'horaire
                        </button>
                    </div><!-- FIN carte horaire -->

                </div><!-- FIN sous-section reglages-horaire -->

                <!-- Sous-section : Groupe -->
                <div id="reglages-groupe" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Configuration du groupe d'√©tudiants</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="conseil-groupe">üí°</span>
                        </span>
                    </h2>
                    <p class="text-muted">Liste compl√®te des √©tudiants inscrits : ajout, import, modification,
                        export
                    </p>

                    <!-- Carte Conseil pratique (masqu√©e par d√©faut) -->
                    <div id="conseil-groupe" class="carte-info-toggle" carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6;">
                            <li><strong>Champ Groupe :</strong> Permet d'organiser tes √©tudiants si tu as
                                plusieurs groupes (ex: Groupe 1, Groupe 2). Utilise le filtre en haut pour afficher un groupe
                                sp√©cifique.</li>
                            <li><strong>Import CSV/TSV :</strong> Format attendu avec 7 colonnes : DA, Groupe,
                                Nom, Pr√©nom, Programme, Nom du programme, SA. Les colonnes peuvent √™tre s√©par√©es par des virgules ou des
                                tabulations. La colonne CAF peut √™tre ajout√©e manuellement apr√®s l'import.</li>
                            <li><strong>Copier-coller :</strong> Tu peux copier directement depuis Excel ou
                                Google Sheets. La pr√©visualisation te permet de v√©rifier avant d'importer.</li>
                            <li><strong>Modification :</strong> Utilise l'ic√¥ne pour modifier un¬∑e
                                √©tudiant¬∑e, ou pour le¬∑la supprimer.</li>
                            <li><strong>Export :</strong> Exporte ta liste au format CSV pour backup ou partage.
                                Le fichier peut ensuite √™tre r√©import√©.</li>
                            <li><strong>R√©initialisation :</strong> Attention ! Le bouton ¬´ R√©initialiser ¬ª
                                supprime <strong>tous les √©tudiants</strong>. Cette action est irr√©versible.</li>
                            <li><strong>Lien avec les autres sections :</strong> La liste configur√©e ici est
                                automatiquement disponible dans l'onglet ¬´ √âtudiants ‚Ä∫ Liste des individus ¬ª pour la gestion des
                                portfolios.</li>
                        </ul>
                    </div>

                    <div class="carte">
                        <h3>üë• Groupe d'√©tudiants</h3>

                        <!-- VUE D'ENSEMBLE -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">√âtudiant¬∑es au total</span>
                                    <strong id="nbEtudiantsTotal" style="font-size: 1.8rem; color: var(--bleu-principal);">0</strong>
                                </div>
                            </div>
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Groupes</span>
                                    <strong id="nbGroupes" style="font-size: 1.8rem; color: var(--bleu-principal);">0</strong>
                                </div>
                            </div>
                            <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; border: 2px solid var(--bleu-principal); grid-column: 1 / -1;">
                                <div id="detailGroupes" style="font-size: 0.9rem; color: #666; text-align: center;">
                                    <em>Aucun groupe configur√©</em>
                                </div>
                            </div>
                        </div>

                        <!-- FILTRAGE PAR GROUPE -->
                        <div
                            style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                                <label style="font-weight: 500; color: var(--bleu-principal);">
                                    üîç Filtrer par groupe :
                                </label>
                                <select id="filtreGroupe" onchange="filtrerParGroupe()" class="controle-form"
                                    style="flex: 1; min-width: 200px; max-width: 300px;">
                                    <option value="">Tous les groupes</option>
                                    <!-- Options g√©n√©r√©es dynamiquement -->
                                </select>
                                <button onclick="resetFiltreGroupe()" class="btn btn-annuler">
                                    R√©initialiser
                                </button>
                            </div>
                        </div>

                        <!-- FORMULAIRE D'AJOUT MANUEL -->
                        <details style="margin-bottom: 20px;">
                            <summary style="cursor: pointer; font-weight: 600; color: var(--bleu-principal); 
       padding: 12px; background: var(--bleu-tres-pale); border-radius: 6px; user-select: none;">
                                ‚ûï Ajouter un¬∑e √©tudiant¬∑e manuellement
                            </summary>

                            <div
                                style="background: var(--bleu-tres-pale); padding: 20px; border-radius: 8px; margin-top: 10px;">
                                <!-- CHANGEMENT ICI ‚Üì -->
                                <div class="formulaire-ajout-grid">
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.85rem;">
                                            DA
                                        </label>
                                        <input type="text" id="etudiantDA" class="controle-form" placeholder="1234567"
                                            style="width: 100%;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.85rem;">
                                            Groupe
                                        </label>
                                        <input type="text" id="etudiantGroupe" class="controle-form" placeholder="1"
                                            style="width: 100%;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.85rem;">
                                            Nom <span style="color: #e74c3c;">*</span>
                                        </label>
                                        <input type="text" id="etudiantNom" class="controle-form" required
                                            placeholder="Nom" style="width: 100%;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.85rem;">
                                            Pr√©nom <span style="color: #e74c3c;">*</span>
                                        </label>
                                        <input type="text" id="etudiantPrenom" class="controle-form" required
                                            placeholder="Pr√©nom" style="width: 100%;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.85rem;">
                                            Programme
                                        </label>
                                        <input type="text" id="etudiantProgramme" class="controle-form"
                                            placeholder="200.B1" style="width: 100%;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.85rem;">SA</label>
                                        <select id="etudiantSA" class="controle-form" style="width: 100%;">
                                            <option value="">---</option>
                                            <option value="Oui">‚úì</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.85rem;">CAF</label>
                                        <select id="etudiantCAF" class="controle-form" style="width: 100%;">
                                            <option value="">---</option>
                                            <option value="Oui">‚úì</option>
                                        </select>
                                    </div>
                                    <div>
                                        <button onclick="addStudent()" class="btn btn-principal"
                                            style="padding: 10px 20px; font-size: 0.95rem; font-weight: 600; white-space: nowrap;">
                                            ‚ûï Ajouter
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </details>

                        <!-- ZONE D'IMPORT -->
                        <details style="margin-bottom: 20px;">
                            <summary style="cursor: pointer; font-weight: 600; color: var(--bleu-principal); 
                           padding: 12px; background: #f8f9fa; border-radius: 6px; 
                           user-select: none;">
                                Importer des √©tudiants (CSV/TSV ou copier-coller)
                            </summary>

                            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 10px;">
                                <div style="margin-bottom: 15px;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">
                                        Option 1 : Importer un fichier CSV/TSV
                                    </label>
                                    <input type="file" id="fichierCsvEntree" accept=".csv,.tsv,.txt"
                                        onchange="handleFileImport(event)" class="controle-form">
                                    <small style="color: #666; display: block; margin-top: 5px;">
                                        Format attendu : DA, Groupe, Nom, Pr√©nom, Programme, Nom du programme, SA
                                    </small>
                                </div>

                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">
                                        Option 2 : Copier-coller des donn√©es
                                    </label>
                                    <textarea id="donneesCollees" class="controle-form" placeholder="Collez vos donn√©es ici (colonnes s√©par√©es par des tabulations ou virgules)
Exemple :
1234567	1	Tremblay	Marie	582.A1	Oui	
1234568	1	Gagnon	Pierre	582.A1		Oui" rows="6"
                                        style="font-family: 'Courier New', monospace; font-size: 0.9rem;"></textarea>
                                    <button onclick="previewPastedData()" class="btn btn-principal"
                                        style="margin-top: 10px;">
                                        Pr√©visualiser les donn√©es
                                    </button>
                                </div>
                            </div>
                        </details>

                        <!-- ZONE DE PR√âVISUALISATION (cach√©e par d√©faut) -->
                        <div id="previewZone" style="display: none; margin-bottom: 20px; background: #fff3cd; 
                                     padding: 15px; border-radius: 8px; border: 2px solid #ffc107;">
                            <h4 style="margin-top: 0; color: #856404;">‚ÑπÔ∏è Pr√©visualisation de l'import</h4>
                            <p style="color: #856404; margin-bottom: 15px;">
                                V√©rifiez les donn√©es avant de les importer d√©finitivement.
                            </p>
                            <div id="previewTable" style="overflow-x: auto; max-height: 300px; 
                                          border: 1px solid #ddd; border-radius: 4px; background: white;">
                                <!-- Le tableau sera g√©n√©r√© ici -->
                            </div>
                            <div style="display: flex; gap: 10px; margin-top: 15px;">
                                <button onclick="confirmImport()" class="btn btn-confirmer">
                                    Confirmer l'import
                                </button>
                                <button onclick="cancelImport()" class="btn btn-annuler">
                                    Annuler
                                </button>
                            </div>
                        </div>

                        <!-- LISTE DES √âTUDIANTS -->
                        <div id="students-list-container" style="display: none; margin-bottom: 20px;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <h4 style="color: var(--bleu-principal); margin: 0;">
                                    Liste des √©tudiants <span id="compteurFiltres"></span>
                                </h4>
                                <div style="display: flex; gap: 10px;">
                                    <button onclick="exportStudentsData()" class="btn btn-principal"
                                        style="padding: 8px 15px;">
                                        Exporter (CSV)
                                    </button>
                                    <button onclick="resetStudentsData()" class="btn btn-supprimer"
                                        style="padding: 8px 15px;">
                                        R√©initialiser
                                    </button>
                                </div>
                            </div>

                            <div style="overflow-x: auto; border: 1px solid #ddd; border-radius: 4px;">
                                <table id="students-table" class="tableau-donnees"
                                    style="width: 100%; border-collapse: collapse; background: white;">
                                    <thead style="background: var(--bleu-moyen); color: white;">
                                        <tr>
                                            <th style="padding: 12px; text-align: left;">DA</th>
                                            <th style="padding: 12px; text-align: center; width: 80px;">Groupe</th>
                                            <th style="padding: 12px; text-align: left;">Nom</th>
                                            <th style="padding: 12px; text-align: left;">Pr√©nom</th>
                                            <th style="padding: 12px; text-align: left;">Programme</th>
                                            <th style="padding: 12px; text-align: center; width: 60px;">SA</th>
                                            <th style="padding: 12px; text-align: center; width: 60px;">CAF</th>
                                            <th style="padding: 12px; text-align: center; width: 120px;">Actions
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody id="students-tbody">
                                        <!-- Les lignes seront g√©n√©r√©es par afficherListeEtudiants() -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- MESSAGE SI AUCUN √âTUDIANT -->
                        <div id="no-students-msg" style="display: block; text-align: center; padding: 40px;
                                         background: #f8f9fa; border-radius: 8px; color: #666;">
                            <p style="font-size: 1.1rem; margin-bottom: 10px;">üì≠ Aucun¬∑e √©tudiant¬∑e dans le groupe
                            </p>
                            <p style="font-size: 0.9rem;">
                                Utilisez le formulaire ci-dessus ou l'import pour ajouter des √©tudiant¬∑es
                            </p>
                        </div>
                    </div><!-- FIN carte -->

                    <!-- ‚Üì‚Üì‚Üì AJOUTER LA NOUVELLE CARTE ICI ‚Üì‚Üì‚Üì -->

                    <div class="carte">
                        <h3 style="cursor: pointer; user-select: none;" onclick="toggleSection('section-clonage-anonymise')">
                            <span id="icone-clonage-anonymise">‚ñ∂</span> üîí Clonage anonymis√© (Groupe 9999 ‚Üí D√©mo)
                            <span style="font-size: 0.8em; color: #666; font-weight: normal;">(Section avanc√©e)</span>
                        </h3>

                        <div id="section-clonage-anonymise" style="display: none;">
                        <div
                            style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 6px; margin-bottom: 20px; border-left: 4px solid var(--bleu-principal);">
                            <p style="margin: 0; font-size: 0.95rem; color: var(--bleu-moyen);">
                                <strong>√Ä quoi sert cette fonctionnalit√© ?</strong><br>
                                Le Groupe 9999 est un groupe fictif utilis√© pour les d√©monstrations et formations.
                                Les √©tudiants du Groupe 9999 sont des clones anonymis√©s d'√©tudiants r√©els du Groupe
                                1,
                                avec des noms fictifs et des DA reconnaissables (9999XXX).
                            </p>
                        </div>

                        <!-- STATISTIQUES -->
                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div
                                style="background: white; padding: 15px; border-radius: 6px; border: 1px solid var(--bleu-pale); text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: var(--bleu-principal);"
                                    id="stat-groupe1">--</div>
                                <div style="font-size: 0.9rem; color: #666;">√âtudiants Groupe 1</div>
                            </div>
                            <div
                                style="background: white; padding: 15px; border-radius: 6px; border: 1px solid var(--bleu-pale); text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: var(--bleu-moyen);"
                                    id="stat-groupe2">--</div>
                                <div style="font-size: 0.9rem; color: #666;">√âtudiants Groupe 9999</div>
                            </div>
                            <div
                                style="background: white; padding: 15px; border-radius: 6px; border: 1px solid var(--bleu-pale); text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: var(--risque-minimal);"
                                    id="stat-mappings">--</div>
                                <div style="font-size: 0.9rem; color: #666;">Mappings actifs</div>
                            </div>
                        </div>

                        <!-- ACTIONS -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">Actions rapides</h4>

                            <!-- Options de g√©n√©ration -->
                            <div style="margin-bottom: 15px; padding: 12px; background: #f8f9fa; border-radius: 6px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600; font-size: 0.9rem;">
                                    üìä Nombre d'√©tudiants fictifs :
                                </label>
                                <input type="number" id="input-nb-etudiants" value="10" min="5" max="50"
                                       style="width: 80px; padding: 6px 10px; border-radius: 4px; border: 1px solid #ccc; font-size: 0.95rem; margin-right: 10px;">
                                <span style="font-size: 0.85rem; color: #666;">(entre 5 et 50 √©tudiants)</span>
                            </div>

                            <div class="btn-groupe">
                                <button onclick="genererMappingAleatoire()" class="btn btn-principal">
                                    üìã Cloner depuis Groupe 1
                                </button>
                                <button onclick="genererGroupeFictifAleatoire()" class="btn btn-confirmer">
                                    üé≤ G√©n√©rer groupe al√©atoire
                                </button>
                            </div>

                            <div class="btn-groupe" style="margin-top: 10px;">
                                <button onclick="synchroniserDonnees()" class="btn btn-principal">
                                    Synchroniser maintenant
                                </button>
                                <button onclick="afficherTableauMapping()" class="btn btn-principal">
                                    Afficher le mapping
                                </button>
                            </div>
                        </div>

                        <!-- IMPORT / EXPORT -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">üì¶ Import / Export</h4>
                            <p style="font-size: 0.9rem; color: #666; margin-bottom: 10px;">
                                Partagez des groupes fictifs pour formation ou d√©monstration. Id√©al pour apprendre comment l'application fonctionne.
                            </p>
                            <div class="btn-groupe">
                                <button onclick="exporterGroupeFictif()" class="btn btn-confirmer">
                                    üì§ Exporter le Groupe 9999
                                </button>
                                <button onclick="importerGroupeFictif()" class="btn btn-modifier">
                                    üì• Importer un groupe fictif
                                </button>
                            </div>
                            <div class="btn-groupe" style="margin-top: 10px;">
                                <button onclick="supprimerGroupeFictif()" class="btn btn-annuler" style="width: 100%;">
                                    üóëÔ∏è Supprimer le Groupe 9999
                                </button>
                            </div>
                            <div style="margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 6px; font-size: 0.85rem; color: #666;">
                                <strong>üí° Astuce :</strong> Exportez votre Groupe 9999, passez en mode "Simul√©" et explorez l'application sans risque !
                            </div>
                        </div>

                        <!-- TABLEAU -->
                        <div id="tableau-mapping-groupes">
                            <div style="text-align: center; padding: 20px; color: #999;">Chargement...</div>
                        </div>

                        <!-- INFOS TECHNIQUES -->
                        <div
                            style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 6px; font-size: 0.85rem; color: #666;">
                            <details>
                                <summary style="cursor: pointer; font-weight: bold;">üìö Informations techniques
                                </summary>
                                <ul style="margin: 10px 0; padding-left: 20px;">
                                    <li><strong>Groupe 1 :</strong> √âtudiants r√©els (DA : 1234567)</li>
                                    <li><strong>Groupe 9999 :</strong> Clones fictifs (DA : 9999001, 9999002...)
                                    </li>
                                    <li><strong>Noms :</strong> 80% qu√©b√©cois, 20% africains</li>
                                    <li><strong>Synchronisation :</strong> Pr√©sences, √©valuations, portfolios</li>
                                </ul>
                            </details>
                        </div>
                        </div><!-- FIN section-clonage-anonymise -->
                    </div><!-- FIN carte clonage -->

                    <script>
                        // Fonction pour plier/d√©plier une section
                        function toggleSection(sectionId) {
                            const section = document.getElementById(sectionId);
                            const icone = document.getElementById('icone-' + sectionId);

                            if (section.style.display === 'none') {
                                section.style.display = 'block';
                                icone.textContent = '‚ñº';
                            } else {
                                section.style.display = 'none';
                                icone.textContent = '‚ñ∂';
                            }
                        }

                        // Initialisation statistiques clonage
                        document.addEventListener('DOMContentLoaded', function () {
                            setTimeout(function () {
                                if (typeof obtenirEtudiantsGroupe1 === 'function') {
                                    mettreAJourStatistiquesClonage();
                                }
                            }, 500);
                        });

                        document.addEventListener('click', function (e) {
                            if (e.target.matches('[data-sous-onglet="reglages-groupe"]')) {
                                setTimeout(function () {
                                    if (typeof obtenirEtudiantsGroupe1 === 'function') {
                                        mettreAJourStatistiquesClonage();
                                        afficherTableauMapping();
                                    }
                                }, 100);
                            }
                        });

                        function mettreAJourStatistiquesClonage() {
                            const groupe1 = obtenirEtudiantsGroupe1();
                            const groupe2 = obtenirEtudiantsGroupe2();
                            const mapping = chargerMapping();

                            document.getElementById('stat-groupe1').textContent = groupe1.length;
                            document.getElementById('stat-groupe2').textContent = groupe2.length;
                            document.getElementById('stat-mappings').textContent = Object.keys(mapping).length;
                        }
                    </script>

                </div><!-- FIN sous-section reglages-groupe -->

                <!-- Sous-section : Pratique de notation -->
                <!-- Sous-section : Pratique de notation -->
                <!-- Sous-section : Pratique de notation -->
                <div id="reglages-pratique-notation" class="sous-section">
                    <h2>Configuration de la pratique de notation</h2>
                    <p class="text-muted">Configuration du syst√®me de notation du cours</p>

                    <!-- CONFIGURATION DE LA NOTATION -->
                    <div class="carte">
                        <h3>Configuration de la notation</h3>

                        <!-- NOTE RREC -->
                        <div style="font-size: 0.85rem; color: #666; margin-bottom: 20px; padding: 12px;
             background: var(--bleu-pale); border-radius: 6px; border-left: 3px solid var(--orange-accent);">
                            <strong>Note :</strong> Le R√®glement sur le r√©gime des √©tudes coll√©giales (RREC) exige une
                            note finale chiffr√©e en %.
                            Pendant l'apprentissage, vous pouvez mettre en place une pratique alternative de notation
                            (PAN),
                            mais celle-ci doit √™tre convertie en note chiffr√©e (%) √† la fin du trimestre.
                        </div>

                        <!-- FORMULAIRES C√îTE √Ä C√îTE -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <!-- Colonne gauche -->
                            <div class="groupe-form">
                                <label>Pratique de notation</label>
                                <select id="pratiqueNotation" class="controle-form">
                                    <option value="">Choisir une pratique de notation</option>
                                    <option value="sommative">Sommative traditionnelle (en %)</option>
                                    <option value="alternative">Alternative (PAN)</option>
                                </select>
                            </div>

                            <!-- Colonne droite -->
                            <div class="groupe-form" id="colonnePAN" style="display: none;">
                                <label>Type de pratique alternative</label>
                                <select id="typePAN" class="controle-form">
                                    <option value="">Choisir un type de PAN...</option>
                                    <option value="maitrise">Notation bas√©e sur la ma√Ætrise</option>
                                    <option value="specifications">Notation par sp√©cifications</option>
                                    <option value="denotation">D√©notation (Ungrading)</option>
                                </select>
                            </div>
                        </div>

                        <!-- INFO PAN -->
                        <div id="infoPAN" style="display: none; margin-top: 15px; padding: 10px; 
             background: white; border-radius: 4px; font-size: 0.85rem; color: #666;">
                        </div>

                        <!-- ==========================================
             SECTION : OPTIONS D'AFFICHAGE DES INDICES
             ========================================== -->
                        <div id="optionsAffichageIndices" style="display: none; margin-top: 25px; padding: 15px;
             background: var(--bleu-tres-pale); border-radius: 6px; border-left: 4px solid var(--bleu-moyen);">

                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">
                                Affichage au tableau de bord
                            </h4>

                            <p style="font-size: 0.85rem; color: #666; margin-bottom: 15px;">
                                Par d√©faut, le tableau de bord affiche uniquement les indices de la pratique choisie ci-dessus.
                                Pour fins de recherche ou d'exp√©rimentation, tu peux activer le mode comparatif pour afficher
                                <strong>les deux syst√®mes simultan√©ment</strong> (SOM et PAN).
                            </p>

                            <!-- Option : Mode comparatif -->
                            <label style="display: flex; align-items: start; gap: 10px; cursor: pointer;
                   padding: 12px; background: white; border-radius: 4px;">
                                <input type="checkbox" id="modeComparatif" style="margin-top: 3px;">
                                <div>
                                    <strong>Activer le mode comparatif (exp√©rimental)</strong>
                                    <div style="font-size: 0.8rem; color: #666; margin-top: 3px;">
                                        Affiche les indices SOM et PAN c√¥te √† c√¥te pour comparer les deux approches
                                    </div>
                                </div>
                            </label>

                        </div>
                        <!-- FIN SECTION OPTIONS AFFICHAGE -->

                        <!-- STATUT + BOUTON GROUP√âS EN BAS -->
                        <div style="margin-top: 30px; padding: 15px; background: var(--bleu-tres-pale); 
                    border-radius: 6px; border-left: 4px solid var(--bleu-moyen);">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <!-- Statut √† gauche -->
                                <div>
                                    <strong style="color: var(--bleu-principal);">Statut de configuration :</strong>
                                    <span id="statutModalites" style="margin-left: 10px; font-weight: bold;">
                                        <span style="color: var(--risque-critique);">‚úó √Ä configurer</span>
                                    </span>
                                </div>

                                <!-- Bouton √† droite -->
                                <button class="btn btn-confirmer" id="btnSauvegarderPratiqueNotation">
                                    Sauvegarder la configuration
                                </button>
                            </div>
                        </div>

                    </div>
                </div><!--fin sous-section pratique-notation-->

                <!-- Sous-section : Productions -->

                <!-- Sous-section: Import/Export des donn√©es -->
                <div id="reglages-import-export" class="sous-section">
                    <h2>Gestion des donn√©es</h2>
                    <p class="text-muted">Sauvegarde et restauration des donn√©es locales</p>

                    <div class="carte">
                        <h3>Sauvegarde et restauration</h3>
                        <p class="text-muted" style="margin-bottom: 25px;">
                            G√®re tes donn√©es locales : exporte pour sauvegarder, importe pour restaurer.
                        </p>

                        <!-- Export -->
                        <div style="padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px; margin-bottom: 20px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">üì§ Exporter les donn√©es</h4>
                            <p>
                                Sauvegarde tes donn√©es dans un fichier JSON. Tu pourras choisir quelles
                                donn√©es exporter (toutes ou s√©lection personnalis√©e).
                            </p>
                            <button class="btn btn-principal" onclick="ouvrirModalExport()" style="margin-top: 10px;">
                                Ouvrir l'exportation
                            </button>
                            <p class="text-muted" style="margin-top: 10px; font-size: 0.9rem;">
                                üí° Exporte r√©guli√®rement pour √©viter toute perte de donn√©es.
                            </p>
                        </div>

                        <!-- Import -->
                        <div style="padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">üì• Importer des donn√©es</h4>
                            <p>
                                Restaure des donn√©es depuis un fichier JSON export√© pr√©c√©demment.
                            </p>
                            <button class="btn btn-principal" onclick="ouvrirModalImport()" style="margin-top: 10px;">
                                Ouvrir l'importation
                            </button>
                            <div class="badge-alerte" style="margin-top: 15px;">
                                <strong>Important :</strong> L'import √©crasera les donn√©es existantes
                                pour les cl√©s import√©es. Exporte d'abord si n√©cessaire !
                            </div>
                        </div>
                    </div>

                    <!-- Informations sur les backups -->
                    <div class="carte">
                        <h3>‚ÑπÔ∏è √Ä propos des sauvegardes</h3>
                        <div style="padding: 15px; background: #f0f8ff; border-radius: 6px; border-left: 4px solid #2196f3;">
                            <h4 style="color: #1565c0; margin-bottom: 10px;">üíæ Backup complet vs Import/Export partiel</h4>
                            <p style="margin-bottom: 15px;">
                                <strong>Les boutons ci-dessus</strong> permettent de faire un <strong>backup complet</strong>
                                de toutes tes donn√©es d'application (cours, trimestre, √©tudiants, √©valuations, pr√©sences, etc.).
                            </p>
                            <p style="margin-bottom: 15px;">
                                Pour exporter/importer uniquement du <strong>mat√©riel p√©dagogique</strong> (grilles, √©chelles, productions),
                                utilise les boutons d'import/export directement dans les sections :
                            </p>
                            <ul style="margin-left: 20px; line-height: 1.8; font-size: 0.95rem;">
                                <li><strong>Mat√©riel p√©dagogique ‚Üí Productions</strong> : Import/export des √©valuations</li>
                                <li><strong>Mat√©riel p√©dagogique ‚Üí Crit√®res d'√©valuation</strong> : Import/export des grilles</li>
                                <li><strong>Mat√©riel p√©dagogique ‚Üí Niveaux de performance</strong> : Import/export des √©chelles</li>
                            </ul>
                        </div>
                    </div>

                    <!-- R√©initialisation -->
                    <div class="carte">
                        <h4>R√©initialisation compl√®te</h4>
                        <p>
                            Efface <strong>toutes</strong> les donn√©es et revient √† l'√©tat initial.
                            <strong>Cette action est irr√©versible.</strong>
                        </p>
                        <button class="btn btn-supprimer" onclick="reinitialiserDonnees()">
                            R√©initialiser toutes les donn√©es
                        </button>
                        <p class="text-muted" style="margin-top: 10px; font-size: 0.9rem;">
                            Triple confirmation requise + mot de passe "EFFACER" pour s√©curit√©
                        </p>
                    </div>

                    <!-- Informations -->
                    <div class="carte">
                        <h4>Informations</h4>
                        <ul style="margin-left: 20px; line-height: 1.8; font-size: 0.95rem;">
                            <li><strong>Stockage :</strong> Local dans le navigateur (localStorage)</li>
                            <li><strong>Format :</strong> Fichiers JSON lisibles</li>
                            <li><strong>Compatibilit√© :</strong> Fonctionne sur tous appareils</li>
                            <li><strong>S√©curit√© :</strong> Aucune donn√©e envoy√©e sur internet</li>
                            <li><strong>Limite :</strong> ~5-10 Mo selon navigateurs</li>
                        </ul>
                    </div>

                </div>
                <!-- fin sous-section import-export -->

            </section><!-- fin section-reglages -->

            <!-- ===================================
                 SECTION: AIDE
                 =================================== -->
            <section id="section-aide" class="section">

                <!-- Champ de recherche -->
                <div id="aide-recherche-container" style="position: sticky; top: 0; z-index: 100; background: white; padding: 20px; border-bottom: 2px solid var(--bleu-principal); margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                    <div style="max-width: 800px; margin: 0 auto;">
                        <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 8px;">
                            <div style="flex: 1; position: relative;">
                                <input
                                    type="text"
                                    id="aide-recherche-input"
                                    placeholder="üîç Rechercher dans toutes les sous-sections de l'Aide..."
                                    style="width: 100%; padding: 12px 40px 12px 15px; font-size: 1rem; border: 2px solid var(--bleu-moyen); border-radius: 8px; outline: none; transition: all 0.3s;"
                                    onkeyup="rechercherDansAide()"
                                >
                                <button
                                    id="aide-recherche-clear"
                                    onclick="effacerRechercheAide()"
                                    style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: transparent; border: none; color: #999; font-size: 1.2rem; cursor: pointer; padding: 5px 10px; display: none;"
                                    title="Effacer la recherche"
                                >‚úï</button>
                            </div>
                        </div>
                        <div style="font-size: 0.85rem; color: #666; text-align: center; margin-bottom: 8px;">
                            Recherche dans : Introduction ‚Ä¢ Configuration ‚Ä¢ Formation ‚Ä¢ Utilisation ‚Ä¢ Consultation ‚Ä¢ R√©f√©rence
                        </div>
                        <div id="aide-recherche-resultats" style="font-size: 0.9rem; color: #666; text-align: center; display: none;"></div>
                    </div>
                </div>

                <!--LLM:OK_TO_EDIT -->
                <!-- ===================================
                     SOUS-SECTION 1: INTRODUCTION
                     =================================== -->
                <div id="aide-introduction" class="sous-section">
                    <h2>Introduction au syst√®me de monitorage</h2>
                    <p class="text-muted">¬´ L'objectif est de faire mentir les pr√©dictions de risque par nos interventions proactives ! ¬ª</p>

                    <!-- Carte: Qu'est-ce que le monitorage -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Qu'est-ce que le monitorage p√©dagogique ?</h3>
                        <p><strong>Le syst√®me transforme votre intuition p√©dagogique en intelligence pr√©dictive.</strong></p>

                        <p>Ce syst√®me formalise et syst√©matise ce que tout enseignant fait intuitivement : observer ses √©tudiants, d√©tecter les difficult√©s √©mergentes et ajuster ses interventions. Cette formalisation apporte :</p>

                        <ul>
                            <li><strong>Objectivit√©</strong> : Donn√©es factuelles plut√¥t qu'impressions</li>
                            <li><strong>Syst√©maticit√©</strong> : Suivi r√©gulier et exhaustif</li>
                            <li><strong>Pr√©dictivit√©</strong> : D√©tection pr√©coce des signaux faibles</li>
                        </ul>

                        <p><strong>Fondements th√©oriques :</strong></p>
                        <ul>
                            <li><strong>R√†I (R√©ponse √† l'Intervention)</strong> : Mod√®le adapt√© au coll√©gial avec 3 niveaux d'intensification</li>
                            <li><strong>Enseignement explicite</strong> : Efficacit√© et explicitation des strat√©gies</li>
                            <li><strong>Taxonomie SOLO / √âchelle IDME</strong> : √âvaluation de la profondeur de compr√©hension</li>
                        </ul>
                    </div>

                    <!-- Carte: Concepts cl√©s A-C-P -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Les trois indices primaires (A-C-P)</h3>

                        <div style="margin: 15px 0; padding: 15px; background: var(--bleu-tres-pale); border-left: 4px solid var(--bleu-moyen); border-radius: 4px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">A - Assiduit√©</h4>
                            <p><strong>Pr√©sence en classe</strong> - Mesure l'engagement cognitif</p>
                            <p style="font-size: 0.9em; color: #666;"><em>Module source : saisie-presences.js</em></p>
                            <p>Les √©tudiants assidus sont davantage expos√©s au contenu, aux explications et aux pratiques guid√©es.</p>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: var(--bleu-tres-pale); border-left: 4px solid var(--bleu-moyen); border-radius: 4px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">C - Compl√©tion</h4>
                            <p><strong>Remise des travaux</strong> - Mesure la mobilisation</p>
                            <p style="font-size: 0.9em; color: #666;"><em>Module source : portfolio.js</em></p>
                            <p>Refl√®te la constance et la pers√©v√©rance dans les efforts, la r√©gularit√© d'ex√©cution et le respect des d√©lais.</p>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: var(--bleu-tres-pale); border-left: 4px solid var(--bleu-moyen); border-radius: 4px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">P - Performance</h4>
                            <p><strong>Qualit√© des productions</strong> - Mesure la ma√Ætrise</p>
                            <p style="font-size: 0.9em; color: #666;"><em>Module source : portfolio.js</em></p>
                            <p>√âvalu√©e selon les crit√®res SRPNF et l'√©chelle IDME, indique directement les comp√©tences en lecture et √©criture.</p>
                        </div>
                    </div>

                    <!-- Carte: Crit√®res SRPNF -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Crit√®res d'√©valuation SRPNF</h3>
                        <p>Inspir√©s de l'approche ELLAC (Enseignement de la Lecture Litt√©raire Au Coll√©gial)</p>

                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>Crit√®re</th>
                                    <th style="text-align: center;">Pond√©ration</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Structure</strong></td>
                                    <td style="text-align: center;">15%</td>
                                    <td>Organisation logique des id√©es</td>
                                </tr>
                                <tr>
                                    <td><strong>Rigueur</strong></td>
                                    <td style="text-align: center;">20%</td>
                                    <td>Exhaustivit√© des observations</td>
                                </tr>
                                <tr>
                                    <td><strong>Plausibilit√©</strong></td>
                                    <td style="text-align: center;">10%</td>
                                    <td>Cr√©dibilit√© de l'interpr√©tation</td>
                                </tr>
                                <tr>
                                    <td><strong>Nuance</strong></td>
                                    <td style="text-align: center;">25%</td>
                                    <td>Qualit√© du raisonnement</td>
                                </tr>
                                <tr>
                                    <td><strong>Fran√ßais</strong></td>
                                    <td style="text-align: center;">30%</td>
                                    <td>Ma√Ætrise linguistique</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Carte: √âchelle IDME -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Taxonomie SOLO et √©chelle IDME</h3>
                        <p>L'√©chelle IDME traduit la profondeur de compr√©hension selon la taxonomie SOLO :</p>

                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>IDME</th>
                                    <th>SOLO</th>
                                    <th style="text-align: center;">Score</th>
                                    <th>Compr√©hension</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>I</strong> - Insuffisant</td>
                                    <td>Pr√©structurel / Unistructurel</td>
                                    <td style="text-align: center;">&lt; 64%</td>
                                    <td>Incompr√©hension ou superficielle</td>
                                </tr>
                                <tr>
                                    <td><strong>D</strong> - D√©veloppement</td>
                                    <td>Multistructurel</td>
                                    <td style="text-align: center;">65-74%</td>
                                    <td>Points pertinents sans liens</td>
                                </tr>
                                <tr>
                                    <td><strong>M</strong> - Ma√Ætris√©</td>
                                    <td>Relationnel</td>
                                    <td style="text-align: center;">75-84%</td>
                                    <td>Compr√©hension globale avec liens</td>
                                </tr>
                                <tr>
                                    <td><strong>E</strong> - √âtendu</td>
                                    <td>Abstrait √©tendu</td>
                                    <td style="text-align: center;">‚â• 85%</td>
                                    <td>Transfert √† autres contextes</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Carte: Architecture Single Source of Truth -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Architecture : Single Source of Truth</h3>
                        <p><strong>Principe fondamental :</strong> Chaque donn√©e a UNE source unique qui la g√©n√®re et la stocke. Les autres modules la lisent via localStorage.</p>

                        <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin-top: 15px; font-family: monospace; font-size: 0.9em;">
                            <p style="margin: 0; color: #28a745;"><strong>MODULE SOURCE</strong> (g√©n√®re/stocke)</p>
                            <p style="margin: 5px 0 5px 20px;">trimestre.js ‚Üí calendrierComplet</p>
                            <p style="margin: 5px 0 5px 20px;">saisie-presences.js ‚Üí indicesAssiduiteDetailles</p>
                            <p style="margin: 5px 0 5px 20px;">portfolio.js ‚Üí indicesCP</p>

                            <p style="margin: 15px 0 0 0; color: #007bff;"><strong>MODULE LECTEUR</strong> (lit/affiche)</p>
                            <p style="margin: 5px 0 5px 20px;">calendrier-vue.js ‚Üí lit calendrierComplet</p>
                            <p style="margin: 5px 0 5px 20px;">tableau-bord-apercu.js ‚Üí lit indices A, C, P</p>
                            <p style="margin: 5px 0 5px 20px;">profil-etudiant.js ‚Üí lit indices A, C, P</p>
                        </div>

                        <p style="margin-top: 15px;"><strong>R√®gle d'or :</strong> Les modules ne se parlent JAMAIS directement. Communication via localStorage uniquement.</p>
                    </div>
                </div>

                <!-- ===================================
                     SOUS-SECTION 2: CONFIGURATION
                     =================================== -->
                <div id="aide-configuration" class="sous-section">
                    <h2>Configuration initiale (1 ≥·µâ utilisation)</h2>
                    <p class="text-muted">Guide pas-√†-pas pour configurer votre syst√®me de monitorage</p>

                    <!-- Carte: Vue d'ensemble -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">√âtapes de configuration</h3>
                        <p>Suivez ces √©tapes dans l'ordre pour configurer correctement le syst√®me :</p>
                        <ol style="line-height: 1.8;">
                            <li><strong>Cours</strong> : Informations de base (code, titre, pond√©ration)</li>
                            <li><strong>Trimestre</strong> : Dates et calendrier complet (SOURCE)</li>
                            <li><strong>Groupe</strong> : Liste des √©tudiants</li>
                            <li><strong>Horaire</strong> : S√©ances hebdomadaires (en refonte)</li>
                            <li><strong>Pratiques PAN</strong> : Nombre d'artefacts et jetons</li>
                        </ol>
                    </div>

                    <!-- Carte: 1. Cours -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">1. Configurer le cours</h3>
                        <p><strong>Navigation :</strong> R√©glages ‚Üí Cours</p>

                        <p><strong>Informations √† saisir :</strong></p>
                        <ul>
                            <li><strong>Code du cours</strong> : Ex. 601-101-MQ</li>
                            <li><strong>Titre</strong> : Ex. √âcriture et litt√©rature</li>
                            <li><strong>Pond√©ration</strong> : Ex. 2-2-3</li>
                            <li><strong>Heures/semaine</strong> : Ex. 4 heures</li>
                            <li><strong>Format horaire</strong> : 2√ó2h, 3h ou 4h continu</li>
                        </ul>

                        <div class="alerte alerte-attention">
                            <strong>Astuce :</strong> Le format horaire est important pour le calcul correct de l'assiduit√©.
                        </div>
                    </div>

                    <!-- Carte: 2. Trimestre -->
                    <div class="carte" style="border-left: 4px solid var(--succes);">
                        <h3 class="carte-titre-bleu">2. D√©finir le trimestre - MODULE SOURCE</h3>
                        <p><strong>Navigation :</strong> R√©glages ‚Üí Trimestre</p>
                        <p style="color: var(--succes); font-weight: bold;">Ce module G√âN√àRE le calendrierComplet (source unique)</p>

                        <p><strong>Informations √† saisir :</strong></p>
                        <ul>
                            <li><strong>Date de d√©but</strong> : Premier jour de cours</li>
                            <li><strong>Date de fin</strong> : Dernier jour de cours</li>
                            <li><strong>Jours f√©ri√©s</strong> : Cong√©s pr√©vus</li>
                            <li><strong>Cong√©s impr√©vus</strong> : √Ä ajouter en cours de trimestre</li>
                            <li><strong>Reprises</strong> : Si n√©cessaire</li>
                        </ul>

                        <p><strong>G√©n√©ration automatique :</strong></p>
                        <ul>
                            <li>Calendrier complet sur 124 jours</li>
                            <li>Calcul automatique des semaines (5 jours cours = 1 semaine)</li>
                            <li>Gestion des cong√©s et reprises</li>
                        </ul>

                        <div class="alerte alerte-succes">
                            <strong>API disponibles :</strong><br>
                            <code>obtenirCalendrierComplet()</code> - R√©cup√®re le calendrier<br>
                            <code>obtenirInfosJour(date)</code> - D√©tails d'une journ√©e
                        </div>
                    </div>

                    <!-- Carte: 3. Groupe -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">3. Cr√©er le groupe</h3>
                        <p><strong>Navigation :</strong> R√©glages ‚Üí Groupe</p>

                        <p><strong>Informations √† saisir pour chaque √©tudiant :</strong></p>
                        <ul>
                            <li><strong>Num√©ro DA</strong> : Dossier administratif</li>
                            <li><strong>Nom</strong> : Nom de famille</li>
                            <li><strong>Pr√©nom</strong> : Pr√©nom</li>
                            <li><strong>Services adapt√©s (SA)</strong> : Si applicable</li>
                            <li><strong>CAF</strong> : Centre d'Aide en Fran√ßais (si inscrit)</li>
                        </ul>

                        <p><strong>Options d'import :</strong></p>
                        <ul>
                            <li>Saisie manuelle</li>
                            <li>Import depuis fichier CSV (√† venir)</li>
                        </ul>
                    </div>

                    <!-- Carte: 4. Horaire -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">4. √âtablir l'horaire</h3>
                        <p><strong>Navigation :</strong> R√©glages ‚Üí Horaire</p>
                        <div class="alerte alerte-attention">
                            <strong>Module en refonte :</strong> √Ä venir - g√©n√©ration de seancesCompletes comme source unique
                        </div>

                        <p><strong>Fonctionnalit√©s pr√©vues :</strong></p>
                        <ul>
                            <li>D√©finition des s√©ances hebdomadaires</li>
                            <li>Gestion des reprises (ex: "Horaire du lundi" le jeudi)</li>
                            <li>API : <code>obtenirSeancesCompletes()</code></li>
                        </ul>
                    </div>

                    <!-- Carte: 5. Pratiques PAN -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">5. Param√©trer les pratiques (PAN)</h3>
                        <p><strong>Navigation :</strong> R√©glages ‚Üí Pratique de notation</p>

                        <p><strong>Param√®tres √† d√©finir :</strong></p>
                        <ul>
                            <li><strong>Nombre d'artefacts</strong> : 8-14 recommand√©
                                <ul style="margin-top: 5px;">
                                    <li>8 artefacts : Pour enseignants d√©butants</li>
                                    <li>12 artefacts : Configuration standard</li>
                                    <li>14 artefacts : Pour enseignants exp√©riment√©s</li>
                                </ul>
                            </li>
                            <li><strong>Syst√®me de jetons</strong> : 3-4 jetons maximum
                                <ul style="margin-top: 5px;">
                                    <li>Jeton de d√©lai : Report d'√©ch√©ance sans p√©nalit√©</li>
                                    <li>Jeton de reprise : Possibilit√© de refaire un artefact</li>
                                </ul>
                            </li>
                            <li><strong>M√©thode de s√©lection</strong> : N meilleurs artefacts (PAN)</li>
                        </ul>

                        <div class="alerte alerte-information">
                            <strong>PAN (Pratiques Alternatives de Notation) :</strong> S√©lection automatique des N meilleurs artefacts pour l'√©valuation finale, permettant aux √©tudiants de progresser sans p√©naliser leurs erreurs initiales.
                        </div>
                    </div>

                    <!-- Carte: Checklist -->
                    <div class="carte" style="background: var(--bleu-tres-pale);">
                        <h3 class="carte-titre-bleu">Checklist de configuration</h3>
                        <p>Avant de commencer √† utiliser le syst√®me, assurez-vous d'avoir compl√©t√© :</p>
                        <ul style="list-style: none; padding-left: 0;">
                            <li style="padding: 8px 0;">[ ] Informations du cours saisies</li>
                            <li style="padding: 8px 0;">[ ] Calendrier du trimestre g√©n√©r√©</li>
                            <li style="padding: 8px 0;">[ ] Liste des √©tudiants import√©e/saisie</li>
                            <li style="padding: 8px 0;">[ ] Horaire d√©fini (si disponible)</li>
                            <li style="padding: 8px 0;">[ ] Pratiques PAN param√©tr√©es</li>
                        </ul>
                        <p style="margin-top: 15px; font-weight: bold; color: var(--bleu-principal);">‚Üí Vous √™tes pr√™t √† commencer le suivi hebdomadaire !</p>
                    </div>
                </div>

                <!-- ===================================
                     SOUS-SECTION 3: FORMATION ET D√âMONSTRATION
                     =================================== -->
                <div id="aide-formation" class="sous-section">
                    <h2>Formation et d√©monstration</h2>
                    <p class="text-muted">Modes de fonctionnement pour explorer l'application sans risque</p>

                    <!-- Carte: Modes de fonctionnement -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Les trois modes de l'application</h3>
                        <p>L'application offre trois modes de fonctionnement pour diff√©rents contextes d'utilisation :</p>

                        <div style="margin: 15px 0; padding: 15px; background: var(--bleu-tres-pale); border-left: 4px solid #28a745; border-radius: 4px;">
                            <h4 style="color: #28a745; margin-bottom: 10px;">Mode Normal</h4>
                            <p><strong>Utilisation en contexte r√©el</strong> - Donn√©es authentiques des √©tudiants</p>
                            <ul style="margin-top: 8px;">
                                <li>Toutes les modifications sont sauvegard√©es dans localStorage</li>
                                <li>Donn√©es r√©elles du cours</li>
                                <li>Mode par d√©faut de l'application</li>
                            </ul>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 4px;">
                            <h4 style="color: #856404; margin-bottom: 10px;">Mode Simul√©</h4>
                            <p><strong>Exploration et formation</strong> - Donn√©es fictives pour exp√©rimenter</p>
                            <ul style="margin-top: 8px;">
                                <li>Donn√©es sauvegard√©es avec pr√©fixe <code>simulation_*</code></li>
                                <li>Totalement isol√© des donn√©es r√©elles</li>
                                <li>Parfait pour apprendre sans risque</li>
                                <li>Permet de tester sc√©narios p√©dagogiques</li>
                            </ul>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: #d1ecf1; border-left: 4px solid #17a2b8; border-radius: 4px;">
                            <h4 style="color: #0c5460; margin-bottom: 10px;">Mode Anonymis√©</h4>
                            <p><strong>D√©monstration publique</strong> - Donn√©es r√©elles avec noms fictifs</p>
                            <ul style="margin-top: 8px;">
                                <li>Noms et pr√©noms remplac√©s par des noms fictifs</li>
                                <li>Pr√©fixe "AN." devant les num√©ros de groupe</li>
                                <li>Lecture seule (aucune modification possible)</li>
                                <li>Id√©al pour pr√©sentations et captures d'√©cran</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-information">
                            <strong>Basculer entre les modes :</strong> Utilisez le s√©lecteur de mode en haut √† droite de l'interface (‚öôÔ∏è Mode: Normal/Simul√©/Anonymis√©)
                        </div>
                    </div>

                    <!-- Carte: Groupe fictif 9999 -->
                    <div class="carte" style="border-left: 4px solid #9c27b0;">
                        <h3 class="carte-titre-bleu">Le Groupe 9999 : Votre laboratoire p√©dagogique</h3>
                        <p><strong>Navigation :</strong> R√©glages ‚Üí Groupe ‚Üí Section "Clonage de groupe"</p>

                        <p style="font-size: 1.05em; margin-top: 15px;"><strong>Qu'est-ce que le Groupe 9999 ?</strong></p>
                        <p>C'est un groupe fictif r√©serv√© pour :</p>
                        <ul>
                            <li>Formation des enseignants</li>
                            <li>D√©monstrations p√©dagogiques</li>
                            <li>Tests de sc√©narios d'intervention</li>
                            <li>Exploration de l'application sans risque</li>
                        </ul>

                        <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; margin: 15px 0;">
                            <p style="margin: 0; font-weight: 600; color: var(--bleu-principal);">
                                ‚ú® Avantage cl√© : Donn√©es r√©alistes sans impact sur vos vrais √©tudiants
                            </p>
                        </div>

                        <p style="font-size: 1.05em; margin-top: 20px;"><strong>Deux m√©thodes de cr√©ation :</strong></p>

                        <div style="margin: 15px 0; padding: 15px; background: var(--bleu-tres-pale); border-left: 4px solid var(--bleu-moyen); border-radius: 4px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">üìã Cloner depuis Groupe 1</h4>
                            <p><strong>Clone fid√®le de vos donn√©es r√©elles</strong></p>
                            <p>Le syst√®me copie :</p>
                            <ul>
                                <li>Les √©tudiants avec noms fictifs coh√©rents</li>
                                <li>Toutes les √©valuations existantes</li>
                                <li>L'historique des pr√©sences</li>
                                <li>Les indices A, C, P recalcul√©s</li>
                            </ul>
                            <p style="margin-top: 10px;"><strong>Utilisation :</strong> Parfait pour cr√©er un jumeau num√©rique de votre groupe r√©el et explorer diff√©rentes strat√©gies d'intervention.</p>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: #fff8e1; border-left: 4px solid #ff6f00; border-radius: 4px;">
                            <h4 style="color: #e65100; margin-bottom: 10px;">üé≤ G√©n√©rer groupe al√©atoire</h4>
                            <p><strong>Cr√©ation compl√®te avec donn√©es r√©alistes</strong></p>

                            <p style="margin-top: 12px; font-weight: 600;">Configuration :</p>
                            <ul>
                                <li><strong>Nombre d'√©tudiants</strong> : Choisir entre 5 et 50 √©tudiants</li>
                                <li><strong>Noms g√©n√©r√©s</strong> : 85% qu√©b√©cois, 15% diversifi√©s (africains, latinos, arabes)</li>
                                <li><strong>Programmes vari√©s</strong> : Assignation al√©atoire parmi 15 programmes coll√©giaux</li>
                            </ul>

                            <p style="margin-top: 12px; font-weight: 600;">Le syst√®me g√©n√®re automatiquement :</p>
                            <ul>
                                <li><strong>√âtudiants fictifs</strong> : DA format 9999XXX (9999001, 9999002, etc.)</li>
                                <li><strong>√âvaluations r√©alistes</strong> : 3 √† 6 par √©tudiant
                                    <ul style="margin-top: 5px;">
                                        <li>Notes suivant distribution normale (moyenne 75%, √©cart-type 10%)</li>
                                        <li>Crit√®res SRPNF coh√©rents avec variation naturelle (¬±5%)</li>
                                        <li>Conversion automatique en niveaux IDME (I/D/M/E)</li>
                                    </ul>
                                </li>
                                <li><strong>Pr√©sences vari√©es</strong> : Taux d'assiduit√© entre 75% et 95%</li>
                                <li><strong>Indices calcul√©s</strong> : A, C, P recalcul√©s automatiquement</li>
                            </ul>

                            <div class="alerte alerte-succes" style="margin-top: 15px;">
                                <strong>Avantage p√©dagogique :</strong> Aucun pr√©requis n√©cessaire ! G√©n√®re un groupe complet m√™me si vous n'avez pas encore cr√©√© de donn√©es r√©elles.
                            </div>

                            <p style="margin-top: 12px; font-weight: 600;">√âtapes de g√©n√©ration :</p>
                            <ol style="line-height: 1.8;">
                                <li>Acc√©der √† <strong>R√©glages ‚Üí Groupe</strong></li>
                                <li>Dans la section "Clonage de groupe", d√©finir le nombre d'√©tudiants (5-50)</li>
                                <li>Cliquer sur <strong>üé≤ G√©n√©rer groupe al√©atoire</strong></li>
                                <li>Patienter quelques secondes (calculs automatiques)</li>
                                <li>Confirmation : Le syst√®me affiche le nombre d'√©tudiants et d'√©valuations cr√©√©s</li>
                            </ol>

                            <p style="margin-top: 12px; font-weight: 600;">R√©alisme statistique :</p>
                            <p>Les notes g√©n√©r√©es suivent une <strong>distribution normale de Gauss</strong> :</p>
                            <ul>
                                <li>Environ 68% des notes entre 65% et 85%</li>
                                <li>Environ 95% des notes entre 55% et 95%</li>
                                <li>Pas de valeurs aberrantes ou "fafelues"</li>
                                <li>Refl√®te la distribution naturelle des r√©sultats √©tudiants</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-attention" style="margin-top: 15px;">
                            <strong>‚ö†Ô∏è Important :</strong> G√©n√©rer un nouveau groupe efface l'ancien Groupe 9999. Utilisez l'export/import si vous voulez conserver plusieurs sc√©narios.
                        </div>
                    </div>

                    <!-- Carte: Export/Import de groupes fictifs -->
                    <div class="carte" style="border-left: 4px solid #673ab7;">
                        <h3 class="carte-titre-bleu">üì¶ Partager des sc√©narios p√©dagogiques</h3>
                        <p><strong>Navigation :</strong> R√©glages ‚Üí Groupe ‚Üí Section "Import / Export"</p>

                        <p style="font-size: 1.05em; margin-top: 15px;"><strong>Pourquoi exporter/importer ?</strong></p>
                        <ul>
                            <li><strong>Formation</strong> : Partager des cas types avec coll√®gues</li>
                            <li><strong>Tutoriels</strong> : Cr√©er des sc√©narios p√©dagogiques document√©s</li>
                            <li><strong>Archivage</strong> : Conserver plusieurs versions du Groupe 9999</li>
                            <li><strong>D√©monstrations</strong> : Pr√©parer des contextes de pr√©sentation</li>
                        </ul>

                        <p style="font-size: 1.05em; margin-top: 20px;"><strong>üì§ Exporter le Groupe 9999</strong></p>
                        <ol style="line-height: 1.8;">
                            <li>Cliquer sur <strong>üì§ Exporter le Groupe 9999</strong></li>
                            <li>Un fichier JSON est t√©l√©charg√© : <code>groupe-fictif-9999_YYYY-MM-DD.json</code></li>
                            <li>Ce fichier contient :
                                <ul style="margin-top: 5px;">
                                    <li>Tous les √©tudiants du Groupe 9999</li>
                                    <li>Toutes leurs √©valuations</li>
                                    <li>Historiques de pr√©sences</li>
                                    <li>Indices A, C, P</li>
                                    <li>Mapping (si cr√©√© par clonage)</li>
                                </ul>
                            </li>
                        </ol>

                        <p style="font-size: 1.05em; margin-top: 20px;"><strong>üì• Importer un groupe fictif</strong></p>
                        <ol style="line-height: 1.8;">
                            <li>Cliquer sur <strong>üì• Importer un groupe fictif</strong></li>
                            <li>S√©lectionner un fichier <code>.json</code> export√© pr√©c√©demment</li>
                            <li>Confirmer l'importation (remplacera le Groupe 9999 actuel)</li>
                            <li>Le syst√®me charge toutes les donn√©es et recalcule les indices</li>
                        </ol>

                        <div style="background: linear-gradient(90deg, var(--bleu-pale) 0%, var(--bleu-tres-pale) 100%); padding: 20px; border-radius: 8px; margin-top: 15px;">
                            <p style="font-size: 1.1em; font-weight: bold; color: var(--bleu-principal); margin-bottom: 10px;">
                                üí° Workflow recommand√© pour formation :
                            </p>
                            <ol style="line-height: 2;">
                                <li>G√©n√©rer un Groupe 9999 r√©aliste (ou cloner Groupe 1)</li>
                                <li>Exporter le groupe : cr√©e un fichier de sauvegarde</li>
                                <li>Basculer en <strong>Mode Simul√©</strong> (s√©lecteur en haut √† droite)</li>
                                <li>Explorer librement : √©valuer, modifier, tester interventions</li>
                                <li>Si n√©cessaire, r√©-importer le fichier pour recommencer</li>
                            </ol>
                        </div>

                        <div class="alerte alerte-information" style="margin-top: 15px;">
                            <strong>Format du fichier :</strong> JSON standard, lisible et modifiable. Inclut m√©tadonn√©es (version Beta 0.79, date d'export, statistiques).
                        </div>
                    </div>

                    <!-- Carte: Cas d'usage p√©dagogiques -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">üéì Cas d'usage p√©dagogiques</h3>

                        <div style="margin: 15px 0; padding: 15px; background: #e8f5e9; border-left: 4px solid #4caf50; border-radius: 4px;">
                            <h4 style="color: #2e7d32; margin-bottom: 10px;">1. Formation des enseignants</h4>
                            <p><strong>Objectif :</strong> Apprendre √† utiliser le syst√®me sans donn√©es r√©elles</p>
                            <ul>
                                <li>G√©n√©rer un groupe al√©atoire de 15-20 √©tudiants</li>
                                <li>Basculer en mode Simul√©</li>
                                <li>Pratiquer la saisie de pr√©sences</li>
                                <li>Explorer les profils √©tudiants</li>
                                <li>Tester diff√©rentes interventions R√†I</li>
                            </ul>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: #fff3e0; border-left: 4px solid #ff9800; border-radius: 4px;">
                            <h4 style="color: #e65100; margin-bottom: 10px;">2. Test de sc√©narios d'intervention</h4>
                            <p><strong>Objectif :</strong> Planifier interventions avant d'agir sur vrais √©tudiants</p>
                            <ul>
                                <li>Cloner votre Groupe 1 r√©el ‚Üí Groupe 9999</li>
                                <li>Identifier √©tudiants √† risque dans le clone</li>
                                <li>Simuler diff√©rentes strat√©gies d'intervention</li>
                                <li>Observer impact sur indices A-C-P</li>
                                <li>Affiner approche avant intervention r√©elle</li>
                            </ul>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: #f3e5f5; border-left: 4px solid #9c27b0; border-radius: 4px;">
                            <h4 style="color: #6a1b9a; margin-bottom: 10px;">3. D√©monstrations et pr√©sentations</h4>
                            <p><strong>Objectif :</strong> Pr√©senter le syst√®me sans compromettre confidentialit√©</p>
                            <ul>
                                <li>Cr√©er Groupe 9999 avec profils vari√©s (15-25 √©tudiants)</li>
                                <li>Basculer en mode Anonymis√© pour pr√©sentation publique</li>
                                <li>Montrer tableaux de bord, profils, √©chelles de risque</li>
                                <li>Expliquer logique des indices A-C-P</li>
                                <li>Capturer √©crans pour documentation sans risque RGPD</li>
                            </ul>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: #e1f5fe; border-left: 4px solid #03a9f4; border-radius: 4px;">
                            <h4 style="color: #01579b; margin-bottom: 10px;">4. Partage de bonnes pratiques</h4>
                            <p><strong>Objectif :</strong> Cr√©er biblioth√®que de cas p√©dagogiques</p>
                            <ul>
                                <li>Cr√©er sc√©narios types (ex: "Groupe avec 5 √©tudiants √† risque √©lev√©")</li>
                                <li>Exporter en JSON avec nom descriptif</li>
                                <li>Partager avec coll√®gues ou communaut√©</li>
                                <li>Importer cas partag√©s pour apprentissage collaboratif</li>
                                <li>Documenter strat√©gies efficaces test√©es</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-succes" style="margin-top: 15px;">
                            <strong>Principe directeur :</strong> Le Groupe 9999 est votre terrain de jeu p√©dagogique. Explorez, exp√©rimentez, apprenez sans risque !
                        </div>
                    </div>
                </div>

                <!-- ===================================
                     SOUS-SECTION 4: UTILISATION HEBDOMADAIRE
                     =================================== -->
                <div id="aide-utilisation" class="sous-section">
                    <h2>Utilisation hebdomadaire</h2>
                    <p class="text-muted">Routine de saisie et flux de travail (5-15 min/semaine)</p>

                    <!-- Carte: Vue d'ensemble -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Flux de travail hebdomadaire</h3>
                        <p><strong>Temps estim√© :</strong> 5-15 minutes par semaine</p>

                        <div style="background: linear-gradient(90deg, var(--bleu-pale) 0%, var(--bleu-tres-pale) 100%); padding: 20px; border-radius: 8px; margin-top: 15px;">
                            <p style="font-size: 1.1em; font-weight: bold; color: var(--bleu-principal); margin-bottom: 15px;">√âtapes recommand√©es :</p>
                            <ol style="line-height: 2;">
                                <li><strong>Pendant/apr√®s le cours</strong> : Noter les absences/retards</li>
                                <li><strong>Fin de cours</strong> : Saisir les pr√©sences (2-5 min)</li>
                                <li><strong>V√©rification automatique</strong> : Observer les changements d'indices</li>
                                <li><strong>Action si n√©cessaire</strong> : Intervenir si seuils critiques atteints</li>
                            </ol>
                        </div>
                    </div>

                    <!-- Carte: Saisir les pr√©sences -->
                    <div class="carte" style="border-left: 4px solid var(--succes);">
                        <h3 class="carte-titre-bleu">1. Saisir les pr√©sences - MODULE SOURCE</h3>
                        <p><strong>Navigation :</strong> Pr√©sences ‚Üí Saisie</p>
                        <p style="color: var(--succes); font-weight: bold;">Ce module G√âN√àRE les indicesAssiduiteDetailles (source unique)</p>

                        <p><strong>Interface de saisie rapide :</strong></p>
                        <ul>
                            <li><strong>Format 2√ó2h</strong> : Saisir 2h par bloc (ou 1h/0h si partiel/absent)</li>
                            <li><strong>Retards</strong> : D√©compter proportionnellement
                                <ul style="margin-top: 5px;">
                                    <li>Ex: 20 min de retard sur 2h = 1.7h</li>
                                </ul>
                            </li>
                            <li><strong>D√©parts anticip√©s</strong> : D√©compter de m√™me</li>
                            <li><strong>Absences justifi√©es</strong> : M√™me traitement (le syst√®me ne distingue pas)</li>
                        </ul>

                        <p><strong>Cas particulier - Reprises :</strong></p>
                        <ul>
                            <li>Si un √©tudiant rattrape dans un autre groupe : additionner les heures</li>
                            <li>Ex: 2h cours officiel + 2h reprise = 4h dans la cellule</li>
                        </ul>

                        <div class="alerte alerte-succes">
                            <strong>Calcul automatique :</strong> Le syst√®me g√©n√®re imm√©diatement les indices d'assiduit√© (A) qui alimentent tous les diagnostics.
                        </div>

                        <p><strong>P√©riodes configurables :</strong></p>
                        <ul>
                            <li>Assiduit√© sommative : sur tout le trimestre</li>
                            <li>Assiduit√© alternative : sur les 3, 7 ou 12 derniers artefacts</li>
                        </ul>
                    </div>

                    <!-- Carte: √âvaluer les productions -->
                    <div class="carte" style="border-left: 4px solid var(--succes);">
                        <h3 class="carte-titre-bleu">2. √âvaluer les productions - MODULE SOURCE</h3>
                        <p><strong>Navigation :</strong> Portfolio ‚Üí √âvaluation</p>
                        <p style="color: var(--succes); font-weight: bold;">Ce module G√âN√àRE les indicesCP (Compl√©tion & Performance)</p>

                        <p><strong>Processus d'√©valuation :</strong></p>
                        <ol style="line-height: 1.8;">
                            <li><strong>Lecture et annotation</strong> : Lire le travail de l'√©tudiant</li>
                            <li><strong>Attribution notes SRPNF</strong> : Noter selon les 5 crit√®res (√©chelle 1-4)</li>
                            <li><strong>Comptage erreurs</strong> : Saisir le nombre d'erreurs linguistiques</li>
                            <li><strong>Confirmation mots</strong> : V√©rifier le nombre de mots</li>
                            <li><strong>Diagnostic automatique</strong> : Observer forces/d√©fis/parcours</li>
                            <li><strong>R√©troaction personnalis√©e</strong> : Bas√©e sur les diagnostics</li>
                        </ol>

                        <p><strong>Temps estim√© :</strong> 15-30 min par production (selon complexit√©)</p>

                        <div class="alerte alerte-succes">
                            <strong>G√©n√©ration automatique :</strong>
                            <ul style="margin: 10px 0 0 0;">
                                <li>Indices C (Compl√©tion) : % d'artefacts remis</li>
                                <li>Indices P (Performance) : Qualit√© moyenne des productions</li>
                                <li>Historique longitudinal : √âvolution dans le temps</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Carte: G√©rer les jetons -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">3. G√©rer les jetons</h3>
                        <p><strong>Navigation :</strong> Portfolio ‚Üí Gestion</p>

                        <p><strong>Types de jetons :</strong></p>
                        <ul>
                            <li><strong>Jeton de d√©lai</strong> : Report d'√©ch√©ance sans p√©nalit√©
                                <ul style="margin-top: 5px;">
                                    <li>√Ä utiliser pour g√©rer les impr√©vus</li>
                                    <li>Maintient l'exigence de compl√©tion</li>
                                </ul>
                            </li>
                            <li><strong>Jeton de reprise</strong> : Possibilit√© de refaire un artefact
                                <ul style="margin-top: 5px;">
                                    <li>Encourage l'am√©lioration continue</li>
                                    <li>Philosophie PAN : apprendre de ses erreurs</li>
                                </ul>
                            </li>
                        </ul>

                        <p><strong>Suivi automatique :</strong> Le syst√®me compte automatiquement les jetons utilis√©s (maximum 3-4 selon configuration).</p>

                        <div class="alerte alerte-attention">
                            <strong>Bonnes pratiques :</strong> Expliquer clairement le syst√®me de jetons aux √©tudiants d√®s le d√©but du trimestre.
                        </div>
                    </div>

                    <!-- Carte: V√©rification hebdomadaire -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">4. V√©rification hebdomadaire</h3>
                        <p><strong>Navigation :</strong> Tableau de bord ‚Üí Aper√ßu</p>

                        <p><strong>Indices √† surveiller :</strong></p>
                        <ul>
                            <li><strong>Assiduit√© (AE/AI)</strong> : Sommative et alternative (3 derniers cours)</li>
                            <li><strong>Compl√©tion (C)</strong> : % d'artefacts remis</li>
                            <li><strong>Performance (P)</strong> : Qualit√© moyenne</li>
                            <li><strong>Risque (R)</strong> : Calcul automatique 1-(A√óC√óP)</li>
                        </ul>

                        <p><strong>Seuils d'alerte critiques :</strong></p>
                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>Indice</th>
                                    <th style="text-align: center;">Seuil critique</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Assiduit√©</td>
                                    <td style="text-align: center;">&lt; 70%</td>
                                    <td>Rencontre imm√©diate</td>
                                </tr>
                                <tr>
                                    <td>Compl√©tion</td>
                                    <td style="text-align: center;">&lt; 70%</td>
                                    <td>Investigation obstacles</td>
                                </tr>
                                <tr>
                                    <td>Performance</td>
                                    <td style="text-align: center;">&lt; 60%</td>
                                    <td>Soutien p√©dagogique</td>
                                </tr>
                                <tr>
                                    <td>Risque</td>
                                    <td style="text-align: center;">&gt; 50%</td>
                                    <td>Plan d'intervention personnalis√©</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="alerte alerte-erreur">
                            <strong>D√©t√©rioration r√©cente :</strong> Comparer les indices sommatifs et alternatifs pour d√©tecter les changements r√©cents, m√™me chez des √©tudiants au bilan global acceptable.
                        </div>
                    </div>

                    <!-- Carte: Collaboration entre coll√®gues -->
                    <div class="carte" style="border-left: 4px solid #9c27b0;">
                        <h3 class="carte-titre-bleu">5. Collaboration entre coll√®gues</h3>
                        <p><strong>Partage de mat√©riel p√©dagogique via Import/Export</strong></p>

                        <p>Le syst√®me permet de partager facilement du mat√©riel p√©dagogique entre enseignant¬∑es, favorisant la collaboration d√©partementale et l'harmonisation des pratiques.</p>

                        <div style="background: #f3e5f5; padding: 15px; border-radius: 6px; margin: 15px 0;">
                            <h4 style="color: #6a1b9a; margin-bottom: 10px;">üì§ Mat√©riel partageable (JSON)</h4>
                            <p style="margin-bottom: 10px;">Chaque type de mat√©riel peut √™tre export√© et partag√© :</p>
                            <ul style="line-height: 1.8;">
                                <li><strong>Grilles de crit√®res</strong> (Mat√©riel ‚Üí Crit√®res d'√©valuation)
                                    <ul style="margin-top: 5px; font-size: 0.95em;">
                                        <li>Export : <code>grilles-criteres-YYYY-MM-DD.json</code></li>
                                        <li>Contient : crit√®res SRPNF, pond√©rations, descriptions</li>
                                    </ul>
                                </li>
                                <li><strong>√âchelles de performance</strong> (Mat√©riel ‚Üí Niveaux de performance)
                                    <ul style="margin-top: 5px; font-size: 0.95em;">
                                        <li>Export : <code>echelle-performance-YYYY-MM-DD.json</code></li>
                                        <li>Contient : niveaux IDME, seuils, descriptions</li>
                                    </ul>
                                </li>
                                <li><strong>Productions</strong> (Mat√©riel ‚Üí Productions)
                                    <ul style="margin-top: 5px; font-size: 0.95em;">
                                        <li>Export : <code>productions-YYYY-MM-DD.json</code></li>
                                        <li>Contient : artefacts, pond√©rations, liens avec grilles</li>
                                    </ul>
                                </li>
                                <li><strong>Cartouches de r√©troaction</strong> (Mat√©riel ‚Üí R√©troactions)
                                    <ul style="margin-top: 5px; font-size: 0.95em;">
                                        <li>Export : <code>cartouches-retroaction-YYYY-MM-DD.json</code></li>
                                        <li>Contient : commentaires pr√©d√©finis par crit√®re et niveau</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>

                        <div style="background: #e8f5e9; padding: 15px; border-radius: 6px; margin: 15px 0;">
                            <h4 style="color: #2e7d32; margin-bottom: 10px;">ü§ù Sc√©narios de collaboration</h4>

                            <p><strong>1. Harmonisation d√©partementale</strong></p>
                            <ul style="margin-bottom: 15px; line-height: 1.6;">
                                <li>Plusieurs enseignant¬∑es du m√™me cours collaborent</li>
                                <li>Cr√©ation de grilles et √©chelles communes</li>
                                <li>Partage de cartouches standardis√©es</li>
                                <li>Coh√©rence interd√©partementale</li>
                            </ul>

                            <p><strong>2. Mentorat et formation</strong></p>
                            <ul style="margin-bottom: 15px; line-height: 1.6;">
                                <li>Enseignant¬∑e exp√©riment√©¬∑e partage avec nouvel¬∑le coll√®gue</li>
                                <li>Exemples de bonnes pratiques</li>
                                <li>Mod√®les pr√™ts √† adapter</li>
                                <li>R√©duction du temps de pr√©paration initial</li>
                            </ul>

                            <p><strong>3. R√©utilisation entre sessions</strong></p>
                            <ul style="margin-bottom: 15px; line-height: 1.6;">
                                <li>Exporter son propre mat√©riel en fin de trimestre</li>
                                <li>R√©importer et ajuster pour la session suivante</li>
                                <li>Am√©lioration continue du mat√©riel</li>
                                <li>Conservation d'une base de d√©part √©prouv√©e</li>
                            </ul>

                            <p><strong>4. Communaut√©s de pratique</strong></p>
                            <ul style="line-height: 1.6;">
                                <li>Partage de mat√©riel entre coll√®ges</li>
                                <li>Contribution √† un r√©pertoire commun</li>
                                <li>Mutualisation des efforts de cr√©ation</li>
                            </ul>
                        </div>

                        <div style="background: #fff3e0; padding: 15px; border-radius: 6px; margin: 15px 0;">
                            <h4 style="color: #e65100; margin-bottom: 10px;">üìÑ Import sp√©cial : fichiers .txt Markdown</h4>
                            <p style="margin-bottom: 10px;">Pour les <strong>cartouches de r√©troaction</strong> uniquement, vous pouvez aussi :</p>
                            <ul style="line-height: 1.6;">
                                <li>R√©diger vos commentaires dans un document texte (Word, Google Docs, etc.)</li>
                                <li>Sauvegarder au format .txt avec structure Markdown</li>
                                <li>Importer directement dans une cartouche en √©dition</li>
                                <li>Gain de temps : r√©daction dans votre environnement pr√©f√©r√©</li>
                            </ul>
                            <p style="margin-top: 10px; font-size: 0.9em; color: #bf360c;"><strong>Format requis :</strong> Les noms de crit√®res dans le fichier doivent correspondre exactement √† ceux de la grille (ex: STRUCTURE, RIGUEUR, PLAUSIBILIT√â, NUANCE).</p>
                        </div>

                        <div class="alerte alerte-info">
                            <strong>üîí Protection de la vie priv√©e :</strong> Les exports de mat√©riel p√©dagogique ne contiennent JAMAIS de donn√©es confidentielles (noms d'√©tudiants, num√©ros DA, notes individuelles, pr√©sences). Seul le mat√©riel p√©dagogique r√©utilisable est export√©.
                        </div>

                        <div style="background: linear-gradient(90deg, var(--bleu-pale) 0%, var(--bleu-tres-pale) 100%); padding: 15px; border-radius: 6px; margin-top: 15px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">Flux typique de partage</h4>
                            <ol style="line-height: 1.8;">
                                <li><strong>Enseignant¬∑e A</strong> : Exporte son mat√©riel (boutons üì§ dans chaque section)</li>
                                <li><strong>Partage</strong> : Fichiers JSON envoy√©s par courriel, Drive, Teams, etc.</li>
                                <li><strong>Enseignant¬∑e B</strong> : Importe les fichiers (boutons üì• dans chaque section)</li>
                                <li><strong>Adaptation</strong> : Ajuste le mat√©riel selon ses besoins</li>
                                <li><strong>Utilisation</strong> : Mat√©riel pr√™t pour le trimestre</li>
                            </ol>
                        </div>
                    </div>

                    <!-- Carte: Temps estim√©s -->
                    <div class="carte" style="background: var(--bleu-tres-pale);">
                        <h3 class="carte-titre-bleu">Temps estim√©s par activit√©</h3>
                        <table style="width: 100%; border-collapse: collapse;">
                            <tr style="background: white;">
                                <td style="padding: 10px; border-bottom: 1px solid var(--bleu-leger);"><strong>Saisie pr√©sences</strong></td>
                                <td style="padding: 10px; text-align: right; border-bottom: 1px solid var(--bleu-leger);">2-5 min</td>
                            </tr>
                            <tr style="background: white;">
                                <td style="padding: 10px; border-bottom: 1px solid var(--bleu-leger);"><strong>√âvaluation production</strong></td>
                                <td style="padding: 10px; text-align: right; border-bottom: 1px solid var(--bleu-leger);">15-30 min/production</td>
                            </tr>
                            <tr style="background: white;">
                                <td style="padding: 10px; border-bottom: 1px solid var(--bleu-leger);"><strong>Gestion jetons</strong></td>
                                <td style="padding: 10px; text-align: right; border-bottom: 1px solid var(--bleu-leger);">1-2 min</td>
                            </tr>
                            <tr style="background: white;">
                                <td style="padding: 10px;"><strong>V√©rification hebdomadaire</strong></td>
                                <td style="padding: 10px; text-align: right;">3-5 min</td>
                            </tr>
                        </table>
                        <p style="margin-top: 15px; font-weight: bold; color: var(--bleu-principal);">Total hebdomadaire (hors √©valuations) : 5-15 minutes</p>
                    </div>
                </div>

                <!-- ===================================
                     SOUS-SECTION 5: CONSULTATION
                     =================================== -->
                <div id="aide-consultation" class="sous-section">
                    <h2>Consultation et interpr√©tation</h2>
                    <p class="text-muted">Prendre des d√©cisions bas√©es sur les donn√©es</p>

                    <!-- Carte: Tableau de bord Aper√ßu -->
                    <div class="carte" style="border-left: 4px solid #007bff;">
                        <h3 class="carte-titre-bleu">Tableau de bord ‚Üí Aper√ßu - LECTEUR</h3>
                        <p><strong>Navigation :</strong> Tableau de bord ‚Üí Aper√ßu</p>
                        <p style="color: #007bff; font-weight: bold;">Ce module LIT indicesAssiduiteDetailles et indicesCP</p>

                        <p><strong>Vue d'ensemble :</strong></p>
                        <ul>
                            <li>Liste compl√®te de tous les √©tudiants</li>
                            <li>Indices A-C-P en un coup d'≈ìil</li>
                            <li>Codes couleur pour identification rapide des risques</li>
                            <li>Filtres par niveau de risque (√† venir)</li>
                        </ul>

                        <p><strong>Action :</strong> Identifier rapidement qui n√©cessite une intervention.</p>

                        <div class="alerte alerte-information">
                            <strong>Rechargement automatique :</strong> Les donn√©es se mettent √† jour automatiquement apr√®s chaque saisie.
                        </div>
                    </div>

                    <!-- Carte: Profil √©tudiant -->
                    <div class="carte" style="border-left: 4px solid #007bff;">
                        <h3 class="carte-titre-bleu">Profil √©tudiant (d√©taill√©) - LECTEUR</h3>
                        <p><strong>Navigation :</strong> Tableau de bord ‚Üí Profil</p>
                        <p style="color: #007bff; font-weight: bold;">Ce module LIT toutes les sources de donn√©es</p>

                        <p><strong>Layout 2 colonnes :</strong></p>
                        <ul>
                            <li><strong>Sidebar gauche</strong> : Navigation Pr√©c√©dent/Suivant entre √©tudiants</li>
                            <li><strong>Zone principale</strong> : 3 sections structur√©es</li>
                        </ul>

                        <div style="margin-top: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                            <h4 style="color: var(--bleu-principal);">Section 1 : Suivi de l'apprentissage</h4>
                            <ul style="margin-top: 10px;">
                                <li><strong>Indices R (Risque)</strong> : Sommaire et alternatif (1-A√óC√óP)</li>
                                <li><strong>R√†I (Niveau d'intervention)</strong> : 1, 2 ou 3</li>
                                <li><strong>√âchelle de risque visuelle</strong> : Gradient 6 niveaux avec indicateur de position</li>
                                <li><strong>Recommandations</strong> : Selon niveau de risque</li>
                            </ul>
                        </div>

                        <div style="margin-top: 15px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                            <h4 style="color: var(--bleu-principal);">Section 2 : D√©veloppement des habilet√©s</h4>
                            <ul style="margin-top: 10px;">
                                <li><strong>Performance SRPNF</strong> : D√©tail par crit√®re (S, R, P, N, F)</li>
                                <li><strong>Forces identifi√©es</strong> : Crit√®res ‚â• 75%</li>
                                <li><strong>D√©fis identifi√©s</strong> : Crit√®res &lt; 75%</li>
                                <li><strong>Diagnostic pattern</strong> : Stable / D√©fi sp√©cifique / Blocage √©mergent / Blocage critique</li>
                            </ul>
                        </div>

                        <div style="margin-top: 15px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                            <h4 style="color: var(--bleu-principal);">Section 3 : Mobilisation</h4>
                            <ul style="margin-top: 10px;">
                                <li><strong>Assiduit√© (A)</strong> : Sommative et alternative avec interpr√©tation</li>
                                <li><strong>Compl√©tion (C)</strong> : % d'artefacts remis</li>
                                <li><strong>Historique artefacts</strong> : Notes et √©volution</li>
                                <li><strong>Toggles</strong> : D√©tails techniques et formules (masquables)</li>
                            </ul>
                        </div>

                        <p style="margin-top: 15px;"><strong>Navigation intuitive :</strong> Boutons centr√©s Pr√©c√©dent/Suivant pour parcourir rapidement tous les profils.</p>
                    </div>

                    <!-- Carte: Interpr√©ter les seuils -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Interpr√©ter les diagnostics</h3>
                        <p><strong>Seuils harmonis√©s A/C/M :</strong> 70%, 80%, 85%</p>

                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>Niveau</th>
                                    <th style="text-align: center;">Seuil</th>
                                    <th>Interpr√©tation</th>
                                    <th>Action R√†I</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong style="color: #28a745;">Favorable</strong></td>
                                    <td style="text-align: center;">‚â• 85%</td>
                                    <td>Excellent engagement et performance</td>
                                    <td>Niveau 1 - Enseignement universel</td>
                                </tr>
                                <tr>
                                    <td><strong style="color: #17a2b8;">Acceptable</strong></td>
                                    <td style="text-align: center;">80-84%</td>
                                    <td>Bonne progression, surveiller</td>
                                    <td>Niveau 1 - Suivi r√©gulier</td>
                                </tr>
                                <tr>
                                    <td><strong style="color: #ffc107;">Fragile</strong></td>
                                    <td style="text-align: center;">70-79%</td>
                                    <td>Situation pr√©caire, intervention cibl√©e</td>
                                    <td>Niveau 2 - Soutien cibl√©</td>
                                </tr>
                                <tr>
                                    <td><strong style="color: #dc3545;">Critique</strong></td>
                                    <td style="text-align: center;">&lt; 70%</td>
                                    <td>Situation alarmante, action urgente</td>
                                    <td>Niveau 3 - Intervention intensive</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Carte: Patterns d'apprentissage -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Patterns d'apprentissage</h3>
                        <p>Le syst√®me identifie automatiquement 4 patterns selon la performance moyenne IDME et les d√©fis identifi√©s :</p>

                        <div style="margin: 15px 0; padding: 15px; background: #d4edda; border-left: 4px solid #28a745; border-radius: 4px;">
                            <h4 style="color: #28a745; margin-bottom: 10px;">Stable</h4>
                            <p><strong>Crit√®res :</strong> Performance &gt; 3.0 OU aucun d√©fi majeur</p>
                            <p><strong>Intervention :</strong> R√†I Niveau 1 - Enseignement universel avec suivi</p>
                            <p><strong>Action :</strong> Maintenir l'engagement, possibilit√©s d'enrichissement</p>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 4px;">
                            <h4 style="color: #856404; margin-bottom: 10px;">D√©fi sp√©cifique</h4>
                            <p><strong>Crit√®res :</strong> Performance ‚â§ 3.0 avec d√©fis identifi√©s</p>
                            <p><strong>Intervention :</strong> R√†I Niveau 2 - Soutien cibl√© en petit groupe</p>
                            <p><strong>Action :</strong> Pratique guid√©e en s'appuyant sur les forces</p>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: #f8d7da; border-left: 4px solid #dc3545; border-radius: 4px;">
                            <h4 style="color: #dc3545; margin-bottom: 10px;">Blocage √©mergent</h4>
                            <p><strong>Crit√®res :</strong> Assiduit√© ‚â• 75% mais Compl√©tion ou Performance &lt; 65%</p>
                            <p><strong>Intervention :</strong> R√†I Niveau 2 - Intervention intensive personnalis√©e</p>
                            <p><strong>Action :</strong> Rem√©diation cibl√©e sur le crit√®re en difficult√©</p>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: #721c24; color: white; border-left: 4px solid #8B0000; border-radius: 4px;">
                            <h4 style="color: white; margin-bottom: 10px;">Blocage critique</h4>
                            <p><strong>Crit√®res :</strong> Risque d'√©chec &gt; 70% (formule: 1 - A√óC√óP)</p>
                            <p><strong>Intervention :</strong> R√†I Niveau 3 - Intervention tr√®s intensive ou sp√©cialis√©e</p>
                            <p><strong>Action :</strong> Rencontre individuelle + CAF + D√©pistage + Services adapt√©s si n√©cessaire</p>
                        </div>
                    </div>

                    <!-- Carte: Guide d√©taill√© du profil √©tudiant (Phase 2) -->
                    <div class="carte" style="background: #f0f8ff;">
                        <h3 class="carte-titre-bleu">Guide d√©taill√© : Profil √©tudiant</h3>

                        <p style="margin-bottom: 20px;">Le profil √©tudiant est l'outil central de diagnostic et d'intervention. Il est organis√© en 3 grandes sections, chacune fournissant des informations compl√©mentaires pour une vision compl√®te de la progression de l'√©tudiant.</p>

                        <div class="alerte alerte-info">
                            <strong>Acc√®s :</strong> Tableau de bord ‚Üí Profil OU Tableau de bord ‚Üí Liste des individus ‚Üí Cliquer sur un nom
                        </div>

                        <hr style="margin: 25px 0; border: none; border-top: 2px solid var(--bleu-pale);">

                        <h4 style="color: var(--bleu-principal); margin-top: 25px; margin-bottom: 15px;">Section 1 : Suivi de l'apprentissage</h4>

                        <p><strong>Cette section affiche :</strong></p>
                        <ul>
                            <li><strong>Indice de risque (R)</strong> avec valeur en gros caract√®res</li>
                            <li><strong>√âchelle de risque visuelle</strong> : gradient √† 6 niveaux avec indicateur de position</li>
                            <li><strong>Indice R√†I</strong> : niveau d'intervention recommand√© (Universel / Cibl√© / Intensif)</li>
                            <li><strong>Recommandations d'intervention</strong> : actions concr√®tes adapt√©es au niveau</li>
                        </ul>

                        <div style="margin: 20px 0; padding: 15px; background: white; border: 2px solid var(--bleu-moyen); border-radius: 6px;">
                            <h5 style="color: var(--bleu-principal); margin-top: 0;">Comment interpr√©ter l'√©chelle de risque ?</h5>
                            <p>L'√©chelle visuelle affiche 6 zones de couleur, du vert fonc√© (Excellent ‚â•85%) au rouge fonc√© (√âchec probable &lt;40%). Un indicateur triangulaire pointe vers la position exacte de l'√©tudiant.</p>

                            <table class="tableau" style="margin-top: 10px; font-size: 0.9em;">
                                <thead>
                                    <tr>
                                        <th>Position</th>
                                        <th>Couleur</th>
                                        <th>Interpr√©tation</th>
                                        <th>Action imm√©diate</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="font-weight: bold;">Zone verte fonc√©e</td>
                                        <td>85-100%</td>
                                        <td>Excellent, autonome</td>
                                        <td>Valoriser, offrir enrichissements</td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight: bold;">Zone verte claire</td>
                                        <td>70-84%</td>
                                        <td>Bon, progression normale</td>
                                        <td>Suivi r√©gulier, R√†I niveau 1</td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight: bold;">Zone jaune</td>
                                        <td>60-69%</td>
                                        <td>Fragile, surveiller</td>
                                        <td>Interventions cibl√©es, R√†I niveau 2</td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight: bold;">Zone orange</td>
                                        <td>50-59%</td>
                                        <td>√Ä risque s√©rieux</td>
                                        <td>Plan d'action, R√†I niveau 2</td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight: bold;">Zone rouge claire</td>
                                        <td>40-49%</td>
                                        <td>Critique, √©chec probable</td>
                                        <td>R√†I niveau 3, rencontre urgente</td>
                                    </tr>
                                    <tr>
                                        <td style="font-weight: bold;">Zone rouge fonc√©e</td>
                                        <td>&lt; 40%</td>
                                        <td>√âchec tr√®s probable</td>
                                        <td>R√©f√©rer aux services, CAF</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div style="margin: 20px 0; padding: 15px; background: #fffacd; border-left: 4px solid #ffd700; border-radius: 4px;">
                            <h5 style="color: #856404; margin-top: 0;">Astuce : Toggle ¬´D√©tails techniques¬ª</h5>
                            <p>Cliquez sur ce bouton pour afficher :</p>
                            <ul style="margin: 5px 0 0 20px;">
                                <li>La formule exacte de calcul de R : (2√óA + C + P) / 4</li>
                                <li>Les valeurs num√©riques des indices primaires A, C, P</li>
                                <li>Les seuils pr√©cis utilis√©s pour d√©terminer le niveau R√†I</li>
                            </ul>
                            <p style="margin-top: 10px;"><strong>Utilit√© :</strong> Expliquer le calcul √† un √©tudiant ou justifier une intervention aupr√®s d'un service.</p>
                        </div>

                        <hr style="margin: 25px 0; border: none; border-top: 2px solid var(--bleu-pale);">

                        <h4 style="color: var(--bleu-principal); margin-top: 25px; margin-bottom: 15px;">Section 2 : D√©veloppement des habilet√©s et comp√©tences</h4>

                        <p><strong>Cette section affiche :</strong></p>
                        <ul>
                            <li><strong>Performance IDME</strong> : niveau moyen selon l'√©chelle (I/D/M/E)</li>
                            <li><strong>Scores par crit√®re SRPNF</strong> : tableau d√©taill√© avec badges color√©s</li>
                            <li><strong>Diagnostic p√©dagogique</strong> : forces et d√©fis identifi√©s automatiquement</li>
                        </ul>

                        <div style="margin: 20px 0; padding: 15px; background: white; border: 2px solid var(--bleu-moyen); border-radius: 6px;">
                            <h5 style="color: var(--bleu-principal); margin-top: 0;">Comment lire le tableau SRPNF ?</h5>
                            <p>Le tableau pr√©sente 5 lignes (un crit√®re par ligne) avec 3 colonnes :</p>

                            <ol>
                                <li><strong>Crit√®re</strong> : Nom du crit√®re avec sa pond√©ration (ex: Structure 15%)</li>
                                <li><strong>Score pond√©r√©</strong> : Moyenne pond√©r√©e des √©valuations (ex: 0.72)</li>
                                <li><strong>Niveau IDME</strong> : Badge color√© indiquant le niveau atteint
                                    <ul style="margin-top: 5px;">
                                        <li>Badge rouge : Insuffisant (&lt; .64)</li>
                                        <li>Badge orange : D√©veloppement (.65-.74)</li>
                                        <li>Badge bleu : Ma√Ætris√© (.75-.84)</li>
                                        <li>Badge vert : √âtendu (‚â• .85)</li>
                                    </ul>
                                </li>
                            </ol>

                            <p style="margin-top: 15px;"><strong>Exemple d'interpr√©tation :</strong></p>
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 4px; margin-top: 10px; font-family: monospace; font-size: 0.85em;">
                                Structure (15%) : 0.68 [Badge orange : D√©veloppement]<br>
                                Rigueur (20%)   : 0.72 [Badge orange : D√©veloppement]<br>
                                Plausibilit√© (10%) : 0.80 [Badge bleu : Ma√Ætris√©]<br>
                                Nuance (25%)    : 0.58 [Badge rouge : Insuffisant]<br>
                                Fran√ßais (30%)  : 0.75 [Badge bleu : Ma√Ætris√©]
                            </div>

                            <p style="margin-top: 10px;"><strong>‚Üí Diagnostic :</strong> Forces en Plausibilit√© et Fran√ßais (ma√Ætris√©s). D√©fi majeur en Nuance (insuffisant). Structure et Rigueur en d√©veloppement.</p>
                        </div>

                        <div style="margin: 20px 0; padding: 15px; background: white; border: 2px solid var(--bleu-moyen); border-radius: 6px;">
                            <h5 style="color: var(--bleu-principal); margin-top: 0;">Comment utiliser le diagnostic p√©dagogique ?</h5>

                            <p>Le diagnostic automatique identifie :</p>
                            <ul>
                                <li><strong>Forces</strong> : Crit√®res ‚â• .75 (Ma√Ætris√© ou √âtendu)</li>
                                <li><strong>D√©fis</strong> : Crit√®res &lt; .75 (Insuffisant ou D√©veloppement)</li>
                            </ul>

                            <p style="margin-top: 15px;"><strong>Strat√©gies d'intervention diff√©renci√©e :</strong></p>

                            <table class="tableau" style="margin-top: 10px;">
                                <thead>
                                    <tr>
                                        <th>Situation</th>
                                        <th>Approche recommand√©e</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>D√©fi Insuffisant (&lt; .64)</strong></td>
                                        <td>
                                            ‚Ä¢ Rem√©diation intensive individuelle<br>
                                            ‚Ä¢ Enseignement explicite du crit√®re<br>
                                            ‚Ä¢ Pratique guid√©e avec r√©troaction imm√©diate<br>
                                            ‚Ä¢ R√©f√©rer aux services d'aide si blocage persistant
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>D√©fi D√©veloppement (.65-.74)</strong></td>
                                        <td>
                                            ‚Ä¢ Pratique guid√©e additionnelle<br>
                                            ‚Ä¢ S'appuyer sur les forces pour consolider<br>
                                            ‚Ä¢ Exercices cibl√©s sur le crit√®re<br>
                                            ‚Ä¢ R√©troaction formative fr√©quente
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>Force Ma√Ætris√©e (.75-.84)</strong></td>
                                        <td>
                                            ‚Ä¢ Valoriser et encourager<br>
                                            ‚Ä¢ Proposer transfert √† d'autres contextes<br>
                                            ‚Ä¢ Tutorat par les pairs (si applicable)<br>
                                            ‚Ä¢ Maintenir avec pratique autonome
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>Force √âtendue (‚â• .85)</strong></td>
                                        <td>
                                            ‚Ä¢ Enrichissement et approfondissement<br>
                                            ‚Ä¢ T√¢ches complexes et cr√©atives<br>
                                            ‚Ä¢ Mentorat des pairs<br>
                                            ‚Ä¢ Autonomie accrue
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div style="margin: 20px 0; padding: 15px; background: #fffacd; border-left: 4px solid #ffd700; border-radius: 4px;">
                            <h5 style="color: #856404; margin-top: 0;">Astuce : Toggle ¬´Voir formules¬ª</h5>
                            <p>Affiche les formules exactes de calcul pour chaque crit√®re :</p>
                            <ul style="margin: 5px 0 0 20px;">
                                <li>Score pond√©r√© = (Score1 √ó Pond1 + Score2 √ó Pond2 + ...) / Œ£ Pond√©rations</li>
                                <li>Seuils IDME pour chaque niveau (I/D/M/E)</li>
                                <li>Nombre d'√©valuations prises en compte dans la moyenne</li>
                            </ul>
                        </div>

                        <hr style="margin: 25px 0; border: none; border-top: 2px solid var(--bleu-pale);">

                        <h4 style="color: var(--bleu-principal); margin-top: 25px; margin-bottom: 15px;">Section 3 : Mobilisation (A-C-P)</h4>

                        <p><strong>Cette section affiche :</strong></p>
                        <ul>
                            <li><strong>Assiduit√© (A)</strong> : Taux de pr√©sence + interpr√©tation (Acceptable/Confortable/Ma√Ætris√©)</li>
                            <li><strong>Compl√©tion (C)</strong> : Taux de remise des travaux + interpr√©tation</li>
                            <li><strong>Liste des artefacts</strong> : Tableau d√©taill√© de toutes les productions √©valu√©es</li>
                        </ul>

                        <div style="margin: 20px 0; padding: 15px; background: white; border: 2px solid var(--bleu-moyen); border-radius: 6px;">
                            <h5 style="color: var(--bleu-principal); margin-top: 0;">Comment interpr√©ter les indices A et C ?</h5>

                            <p>Les deux indices utilisent les m√™mes seuils harmonis√©s :</p>

                            <table class="tableau" style="margin-top: 10px;">
                                <thead>
                                    <tr>
                                        <th>Seuil</th>
                                        <th>Interpr√©tation</th>
                                        <th>Badge</th>
                                        <th>Signification</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>‚â• 85%</td>
                                        <td>Ma√Ætris√©</td>
                                        <td style="color: #28a745; font-weight: bold;">Vert</td>
                                        <td>Engagement excellent, aucune inqui√©tude</td>
                                    </tr>
                                    <tr>
                                        <td>80-84%</td>
                                        <td>Confortable</td>
                                        <td style="color: #17a2b8; font-weight: bold;">Bleu</td>
                                        <td>Bon engagement, surveiller pour maintenir</td>
                                    </tr>
                                    <tr>
                                        <td>70-79%</td>
                                        <td>Acceptable</td>
                                        <td style="color: #ffc107; font-weight: bold;">Jaune</td>
                                        <td>Engagement minimal, attention requise</td>
                                    </tr>
                                    <tr>
                                        <td>&lt; 70%</td>
                                        <td>Insuffisant</td>
                                        <td style="color: #dc3545; font-weight: bold;">Rouge</td>
                                        <td>Mobilisation probl√©matique, intervention</td>
                                    </tr>
                                </tbody>
                            </table>

                            <p style="margin-top: 15px;"><strong>Exemples de profils :</strong></p>
                            <ul>
                                <li><strong>A=95%, C=90%</strong> ‚Üí √âtudiant tr√®s mobilis√©, pr√©sent et productif</li>
                                <li><strong>A=85%, C=65%</strong> ‚Üí Pr√©sent mais ne remet pas tous les travaux (procrastination ?)</li>
                                <li><strong>A=60%, C=85%</strong> ‚Üí Absent souvent mais remet les travaux (maladie ? travail ?)</li>
                                <li><strong>A=55%, C=50%</strong> ‚Üí D√©sengagement g√©n√©ralis√©, intervention urgente</li>
                            </ul>
                        </div>

                        <div style="margin: 20px 0; padding: 15px; background: white; border: 2px solid var(--bleu-moyen); border-radius: 6px;">
                            <h5 style="color: var(--bleu-principal); margin-top: 0;">Comment lire le tableau des artefacts ?</h5>

                            <p>Le tableau affiche une ligne par production √©valu√©e avec :</p>
                            <ol>
                                <li><strong>Production</strong> : Nom de l'√©valuation (ex: Dissertation 1, Examen mi-session)</li>
                                <li><strong>Statut</strong> : Compl√©t√© ‚úì (vert) ou Non compl√©t√© ‚úó (rouge)</li>
                                <li><strong>Score</strong> : Pourcentage selon l'√©chelle IDME (ex: 78%)</li>
                                <li><strong>Niveau IDME</strong> : Badge color√© (I/D/M/E)</li>
                                <li><strong>Retenu PAN</strong> : ‚òÖ si l'artefact compte dans la note finale du portfolio</li>
                            </ol>

                            <div class="alerte alerte-info" style="margin-top: 15px;">
                                <strong>‚ÑπÔ∏è Astuce :</strong> Les artefacts marqu√©s d'une √©toile ‚òÖ sont ceux s√©lectionn√©s automatiquement par les r√®gles PAN (les N meilleurs). Si un √©tudiant a 9 artefacts mais que seuls les 3 meilleurs comptent, seuls ces 3 auront l'√©toile.
                            </div>

                            <p style="margin-top: 15px;"><strong>Actions possibles depuis ce tableau :</strong></p>
                            <ul>
                                <li>Identifier rapidement les travaux non remis</li>
                                <li>Voir la progression de la performance dans le temps</li>
                                <li>V√©rifier quels artefacts comptent r√©ellement pour la note (‚òÖ)</li>
                                <li>D√©tecter des patterns (ex: toujours faible en Structure)</li>
                            </ul>
                        </div>

                        <hr style="margin: 25px 0; border: none; border-top: 2px solid var(--bleu-pale);">

                        <h4 style="color: var(--bleu-principal); margin-top: 25px; margin-bottom: 15px;">Navigation entre √©tudiants</h4>

                        <div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-left: 4px solid var(--bleu-moyen); border-radius: 4px;">
                            <p>Les boutons <strong>¬´ ‚Üê Pr√©c√©dent ¬ª</strong> et <strong>¬´ Suivant ‚Üí ¬ª</strong> en haut de la page permettent de naviguer rapidement entre les profils sans retourner √† la liste.</p>

                            <p style="margin-top: 10px;"><strong>Workflow recommand√© pour r√©vision compl√®te :</strong></p>
                            <ol>
                                <li>Aller dans Tableau de bord ‚Üí Liste des individus</li>
                                <li>Cliquer sur le premier √©tudiant</li>
                                <li>Consulter les 3 sections du profil</li>
                                <li>Prendre des notes d'intervention si n√©cessaire</li>
                                <li>Cliquer ¬´Suivant ‚Üí¬ª pour passer au prochain</li>
                                <li>R√©p√©ter jusqu'au dernier √©tudiant</li>
                            </ol>

                            <div class="alerte alerte-succes" style="margin-top: 15px;">
                                <strong>‚úì Astuce :</strong> Les boutons sont d√©sactiv√©s visuellement (gris√©s) quand vous √™tes au premier ou au dernier √©tudiant de la liste. Le curseur change pour indiquer qu'ils ne sont pas cliquables.
                            </div>
                        </div>

                        <hr style="margin: 25px 0; border: none; border-top: 2px solid var(--bleu-pale);">

                        <h4 style="color: var(--bleu-principal); margin-top: 25px; margin-bottom: 15px;">Checklist d'utilisation hebdomadaire</h4>

                        <div style="margin: 20px 0; padding: 15px; background: #e7f3ff; border: 2px solid var(--bleu-moyen); border-radius: 6px;">
                            <p><strong>Pour un suivi efficace, consultez les profils r√©guli√®rement :</strong></p>

                            <table class="tableau" style="margin-top: 15px;">
                                <thead>
                                    <tr>
                                        <th style="width: 15%;">Fr√©quence</th>
                                        <th style="width: 40%;">Action</th>
                                        <th style="width: 45%;">Objectif</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Hebdomadaire</strong></td>
                                        <td>Consulter l'Aper√ßu du Tableau de bord</td>
                                        <td>Vue d'ensemble, identifier rapidement les √©tudiants en difficult√© (zones orange/rouge)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Hebdomadaire</strong></td>
                                        <td>Profils des √©tudiants ¬´√Ä risque¬ª ou ¬´Critique¬ª</td>
                                        <td>Planifier interventions cibl√©es, v√©rifier l'√©volution</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Bi-hebdomadaire</strong></td>
                                        <td>Profils des √©tudiants ¬´Fragile¬ª</td>
                                        <td>Pr√©venir la d√©gradation, offrir soutien proactif</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Mi-session</strong></td>
                                        <td>R√©vision compl√®te de tous les profils</td>
                                        <td>Bilan global, ajustements p√©dagogiques, rencontres individuelles</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Fin session</strong></td>
                                        <td>Analyse longitudinale des profils</td>
                                        <td>√âvaluer l'efficacit√© des interventions, documenter les cas critiques</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Carte: Planifier interventions -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Planifier les interventions R√†I</h3>

                        <div style="margin: 15px 0; padding: 15px; background: var(--bleu-tres-pale); border-left: 4px solid var(--bleu-moyen); border-radius: 4px;">
                            <h4 style="color: var(--bleu-principal);">Niveau 1 : Enseignement universel avec suivi</h4>
                            <p><strong>Pour qui :</strong> √âtudiants en progression normale (‚â• 70% en A-C-P)</p>
                            <p><strong>Modalit√©s :</strong></p>
                            <ul>
                                <li>Enseignement explicite en grand groupe</li>
                                <li>Pratique guid√©e int√©gr√©e naturellement</li>
                                <li>Suivi hebdomadaire des indices</li>
                                <li>R√©troactions formatives r√©guli√®res</li>
                            </ul>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 4px;">
                            <h4 style="color: #856404;">Niveau 2 : Soutien cibl√© en petit groupe</h4>
                            <p><strong>Pour qui :</strong> √âtudiants identifi√©s comme √† risque (un ou plusieurs indices &lt; 70%)</p>
                            <p><strong>Modalit√©s :</strong></p>
                            <ul>
                                <li>Approche proactive de l'enseignant</li>
                                <li>Interventions en classe avec opportunit√©s de reprise/rattrapage</li>
                                <li>Pratique guid√©e additionnelle sur crit√®res en difficult√©</li>
                                <li>Rem√©diation cibl√©e (ex: Structure, Rigueur, Nuance)</li>
                                <li>Utilisation des forces pour d√©velopper les d√©fis</li>
                            </ul>
                            <p><strong>Exemples concrets :</strong></p>
                            <ul>
                                <li>"Rem√©diation en Structure | Exercice suppl√©mentaire"</li>
                                <li>"Pratique guid√©e en Rigueur"</li>
                                <li>"Pratique autonome ‚Üí Explorer jumelage"</li>
                            </ul>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: #f8d7da; border-left: 4px solid #dc3545; border-radius: 4px;">
                            <h4 style="color: #dc3545;">Niveau 3 : Intervention tr√®s intensive ou sp√©cialis√©e</h4>
                            <p><strong>Pour qui :</strong> Blocages critiques (performance ‚â§ 1.5 ou risque &gt; 70%)</p>
                            <p><strong>Modalit√©s :</strong></p>
                            <ul>
                                <li>Hors classe, sur rendez-vous</li>
                                <li>Accompagnement plus approfondi selon besoins sp√©cifiques</li>
                                <li>Collaboration avec services sp√©cialis√©s :
                                    <ul>
                                        <li>CAF (Centre d'Aide en Fran√ßais)</li>
                                        <li>Services adapt√©s</li>
                                        <li>Soutien psychosocial si n√©cessaire</li>
                                    </ul>
                                </li>
                                <li>Plan d'intervention personnalis√©</li>
                                <li>Suivi rapproch√© hebdomadaire</li>
                            </ul>
                            <p><strong>Exemples concrets :</strong></p>
                            <ul>
                                <li>"Rencontre individuelle | CAF | D√©pistage"</li>
                                <li>"Blocage critique | Intervention intensive | Services adapt√©s"</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- ===================================
                     SOUS-SECTION 6: R√âF√âRENCE RAPIDE
                     =================================== -->
                <div id="aide-reference" class="sous-section">
                    <h2>R√©f√©rence rapide</h2>
                    <p class="text-muted">Aide-m√©moire et seuils critiques</p>

                    <!-- Carte: Seuils critiques -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Seuils critiques d'alerte</h3>

                        <div style="background: linear-gradient(90deg, #d4edda 0%, #f8d7da 100%); padding: 20px; border-radius: 8px; margin-top: 15px;">
                            <h4 style="margin-bottom: 15px;">ASSIDUIT√â (A)</h4>
                            <table style="width: 100%; border-collapse: collapse; background: white;">
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>&lt; 70%</strong></td>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd; color: #dc3545;">Critique - Intervention imm√©diate</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>70-79%</strong></td>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd; color: #ffc107;">Fragile - Surveiller de pr√®s</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>80-89%</strong></td>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd; color: #17a2b8;">Acceptable</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px;"><strong>‚â• 90%</strong></td>
                                    <td style="padding: 10px; color: #28a745;">Favorable</td>
                                </tr>
                            </table>

                            <h4 style="margin: 20px 0 15px 0;">COMPL√âTION (C) - M√™mes seuils</h4>
                            <table style="width: 100%; border-collapse: collapse; background: white;">
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>&lt; 70%</strong></td>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd; color: #dc3545;">Critique - Investigation obstacles</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>70-79%</strong></td>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd; color: #ffc107;">Fragile - Syst√®me de rappels</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>80-89%</strong></td>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd; color: #17a2b8;">Acceptable</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px;"><strong>‚â• 90%</strong></td>
                                    <td style="padding: 10px; color: #28a745;">Favorable</td>
                                </tr>
                            </table>

                            <h4 style="margin: 20px 0 15px 0;">PERFORMANCE (P) - M√™mes seuils</h4>
                            <table style="width: 100%; border-collapse: collapse; background: white;">
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>&lt; 70%</strong></td>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd; color: #dc3545;">Critique - Soutien p√©dagogique urgent</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>70-79%</strong></td>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd; color: #ffc107;">Fragile - Rem√©diation cibl√©e</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>80-89%</strong></td>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd; color: #17a2b8;">Acceptable</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px;"><strong>‚â• 90%</strong></td>
                                    <td style="padding: 10px; color: #28a745;">Favorable</td>
                                </tr>
                            </table>

                            <h4 style="margin: 20px 0 15px 0;">RISQUE D'√âCHEC (1-A√óC√óP)</h4>
                            <table style="width: 100%; border-collapse: collapse; background: white;">
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>&gt; 70%</strong></td>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd; color: #dc3545;">Critique</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>50-70%</strong></td>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd; color: #dc3545;">Tr√®s √©lev√©</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>40-50%</strong></td>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd; color: #fd7e14;">√âlev√©</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>30-40%</strong></td>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd; color: #ffc107;">Mod√©r√©</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>20-30%</strong></td>
                                    <td style="padding: 10px; border-bottom: 1px solid #ddd; color: #17a2b8;">Faible</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px;"><strong>‚â§ 20%</strong></td>
                                    <td style="padding: 10px; color: #28a745;">Minimal</td>
                                </tr>
                            </table>
                        </div>

                        <div class="alerte alerte-erreur">
                            <strong>R√®gle d'or :</strong> Un √©tudiant avec un indice &lt; 70% n√©cessite UNE action. Un √©tudiant avec un risque &gt; 50% n√©cessite un PLAN D'INTERVENTION.
                        </div>
                    </div>

                    <!-- Carte: Architecture Single Source of Truth -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Architecture Single Source of Truth (rappel)</h3>
                        <p><strong>Les modules sources ne doivent JAMAIS √™tre contourn√©s.</strong></p>

                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>Module SOURCE</th>
                                    <th>G√©n√®re/Stocke</th>
                                    <th>Module LECTEUR</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>trimestre.js</strong></td>
                                    <td><code>calendrierComplet</code></td>
                                    <td>calendrier-vue.js</td>
                                </tr>
                                <tr>
                                    <td><strong>saisie-presences.js</strong></td>
                                    <td><code>indicesAssiduiteDetailles</code></td>
                                    <td>tableau-bord-apercu.js<br>profil-etudiant.js</td>
                                </tr>
                                <tr>
                                    <td><strong>portfolio.js</strong></td>
                                    <td><code>indicesCP</code></td>
                                    <td>tableau-bord-apercu.js<br>profil-etudiant.js</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="alerte alerte-information">
                            <strong>R√®gle d'or :</strong> Les modules ne se parlent JAMAIS directement. Toute communication passe exclusivement par localStorage.
                        </div>
                    </div>

                    <!-- Carte: R√©solution de probl√®mes -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">R√©solution de probl√®mes courants</h3>

                        <div style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-left: 4px solid var(--bleu-moyen); border-radius: 4px;">
                            <h4 style="color: var(--bleu-principal);">Calendrier vide apr√®s rechargement</h4>
                            <p><strong>Cause :</strong> calendrierComplet pas g√©n√©r√© ou corrompu</p>
                            <p><strong>Solution :</strong> Aller dans R√©glages ‚Üí Trimestre ‚Üí R√©g√©n√©rer le calendrier</p>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-left: 4px solid var(--bleu-moyen); border-radius: 4px;">
                            <h4 style="color: var(--bleu-principal);">Indices A non calcul√©s</h4>
                            <p><strong>Cause :</strong> Pr√©sences pas saisies ou module non initialis√©</p>
                            <p><strong>Solution :</strong>
                                <ol style="margin: 5px 0 0 20px;">
                                    <li>V√©rifier ordre de chargement dans index 71</li>
                                    <li>Aller dans Pr√©sences ‚Üí Saisie</li>
                                    <li>Saisir au moins une pr√©sence pour initialiser</li>
                                </ol>
                            </p>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-left: 4px solid var(--bleu-moyen); border-radius: 4px;">
                            <h4 style="color: var(--bleu-principal);">¬´ Invalid Date ¬ª dans le calendrier</h4>
                            <p><strong>Cause :</strong> Conflit de noms de fonctions entre modules</p>
                            <p><strong>Solution :</strong> V√©rifier que les fonctions sont pr√©fix√©es (ex: formaterDateTrimestreYMD au lieu de formaterDate)</p>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-left: 4px solid var(--bleu-moyen); border-radius: 4px;">
                            <h4 style="color: var(--bleu-principal);">Donn√©es perdues</h4>
                            <p><strong>Cause :</strong> localStorage effac√© (navigation priv√©e, nettoyage navigateur)</p>
                            <p><strong>Solution :</strong> Utiliser Import/Export r√©guli√®rement pour backup JSON</p>
                            <p><strong>Pr√©vention :</strong> Activer Export automatique hebdomadaire (√† venir)</p>
                        </div>
                    </div>

                    <!-- Carte: Debug localStorage -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Debug - Console navigateur</h3>
                        <p>Commandes √† ex√©cuter dans la console du navigateur (F12) :</p>

                        <div style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; font-family: 'Courier New', monospace; font-size: 0.9em; margin-top: 15px;">
                            <p style="color: #6c757d;">// V√©rifier calendrierComplet</p>
                            <p style="color: #66d9ef;">console</p><span style="color: #f8f8f2;">.log(</span><span style="color: #e6db74;">'calendrierComplet existe?'</span><span style="color: #f8f8f2;">, </span><span style="color: #f92672;">!!</span><span style="color: #66d9ef;">localStorage</span><span style="color: #f8f8f2;">.getItem(</span><span style="color: #e6db74;">'calendrierComplet'</span><span style="color: #f8f8f2;">));</span>
                            <br><br>
                            <p style="color: #6c757d;">// Voir contenu calendrier</p>
                            <p><span style="color: #66d9ef;">JSON</span><span style="color: #f8f8f2;">.parse(</span><span style="color: #66d9ef;">localStorage</span><span style="color: #f8f8f2;">.getItem(</span><span style="color: #e6db74;">'calendrierComplet'</span><span style="color: #f8f8f2;">));</span></p>
                            <br>
                            <p style="color: #6c757d;">// V√©rifier indices A</p>
                            <p><span style="color: #66d9ef;">console</span><span style="color: #f8f8f2;">.log(</span><span style="color: #e6db74;">'Indices A existent?'</span><span style="color: #f8f8f2;">, </span><span style="color: #f92672;">!!</span><span style="color: #66d9ef;">localStorage</span><span style="color: #f8f8f2;">.getItem(</span><span style="color: #e6db74;">'indicesAssiduiteDetailles'</span><span style="color: #f8f8f2;">));</span></p>
                            <br>
                            <p style="color: #6c757d;">// V√©rifier APIs disponibles</p>
                            <p><span style="color: #66d9ef;">console</span><span style="color: #f8f8f2;">.log(</span><span style="color: #e6db74;">'API calendrier:'</span><span style="color: #f8f8f2;">, </span><span style="color: #f92672;">typeof</span><span style="color: #f8f8f2;"> obtenirCalendrierComplet);</span></p>
                        </div>
                    </div>

                    <!-- Carte: FAQ (Phase 2) -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Questions fr√©quentes (FAQ)</h3>

                        <div style="margin: 20px 0;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 8px;">Questions sur le monitorage</h4>

                            <details style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                                <summary style="font-weight: bold; cursor: pointer; color: var(--bleu-principal);">Quelle est la diff√©rence entre Assiduit√© (A), Compl√©tion (C) et Performance (P) ?</summary>
                                <div style="margin-top: 10px; padding-left: 10px;">
                                    <ul>
                                        <li><strong>Assiduit√© (A) :</strong> Mesure la pr√©sence physique et cognitive en classe. Un √©tudiant assidu est engag√© dans son apprentissage.</li>
                                        <li><strong>Compl√©tion (C) :</strong> Mesure la remise des travaux demand√©s. Un taux √©lev√© indique une bonne mobilisation.</li>
                                        <li><strong>Performance (P) :</strong> Mesure la qualit√© des productions selon les crit√®res SRPNF. Refl√®te le niveau de ma√Ætrise.</li>
                                    </ul>
                                    <p style="margin-top: 10px;"><strong>Exemple concret :</strong> Un √©tudiant peut avoir A=95% (toujours pr√©sent), C=80% (remet la plupart des travaux) et P=65% (qualit√© variable). L'indice R combinera ces trois dimensions pour pr√©dire le risque.</p>
                                </div>
                            </details>

                            <details style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                                <summary style="font-weight: bold; cursor: pointer; color: var(--bleu-principal);">Comment interpr√©ter l'indice de risque R ?</summary>
                                <div style="margin-top: 10px; padding-left: 10px;">
                                    <p>L'indice R pr√©dit le risque d'√©chec selon 6 niveaux :</p>
                                    <table class="tableau" style="margin-top: 10px;">
                                        <thead>
                                            <tr>
                                                <th>Indice R</th>
                                                <th>Niveau</th>
                                                <th>Action recommand√©e</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>‚â• 85%</td>
                                                <td style="color: #28a745; font-weight: bold;">Excellent</td>
                                                <td>Valoriser et encourager l'autonomie</td>
                                            </tr>
                                            <tr>
                                                <td>70-84%</td>
                                                <td style="color: #5cb85c;">Bon</td>
                                                <td>Maintenir l'engagement, offrir d√©fis</td>
                                            </tr>
                                            <tr>
                                                <td>60-69%</td>
                                                <td style="color: #ffc107; font-weight: bold;">Fragile</td>
                                                <td>Surveiller de pr√®s, interventions cibl√©es</td>
                                            </tr>
                                            <tr>
                                                <td>50-59%</td>
                                                <td style="color: #ff9800; font-weight: bold;">√Ä risque</td>
                                                <td>Rencontre individuelle, plan d'action</td>
                                            </tr>
                                            <tr>
                                                <td>40-49%</td>
                                                <td style="color: #f44336; font-weight: bold;">Critique</td>
                                                <td>Intervention intensive, R√†I niveau 2</td>
                                            </tr>
                                            <tr>
                                                <td>&lt; 40%</td>
                                                <td style="color: #d32f2f; font-weight: bold;">√âchec probable</td>
                                                <td>R√†I niveau 3, r√©f√©rer aux services</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </details>

                            <details style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                                <summary style="font-weight: bold; cursor: pointer; color: var(--bleu-principal);">Qu'est-ce que la R√©ponse √† l'Intervention (R√†I) ?</summary>
                                <div style="margin-top: 10px; padding-left: 10px;">
                                    <p>La R√†I est un syst√®me d'intervention √† trois niveaux :</p>
                                    <ul>
                                        <li><strong>Niveau 1 - Universel :</strong> Enseignement de qualit√© pour tous (80% des √©tudiants)</li>
                                        <li><strong>Niveau 2 - Cibl√© :</strong> Interventions de groupe pour √©tudiants fragiles ou √† risque (15% des √©tudiants)</li>
                                        <li><strong>Niveau 3 - Intensif :</strong> Soutien individualis√© pour √©tudiants en situation critique (&lt; 5% des √©tudiants)</li>
                                    </ul>
                                    <p style="margin-top: 10px;"><strong>Dans l'application :</strong> Le profil √©tudiant sugg√®re automatiquement le niveau R√†I selon l'indice R et fournit des recommandations d'intervention adapt√©es.</p>
                                </div>
                            </details>
                        </div>

                        <div style="margin: 20px 0;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 8px;">Questions techniques</h4>

                            <details style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                                <summary style="font-weight: bold; cursor: pointer; color: var(--bleu-principal);">Mes donn√©es sont-elles sauvegard√©es automatiquement ?</summary>
                                <div style="margin-top: 10px; padding-left: 10px;">
                                    <p><strong>Oui,</strong> toutes les modifications sont sauvegard√©es automatiquement dans le localStorage du navigateur.</p>
                                    <div class="alerte alerte-attention" style="margin-top: 10px;">
                                        <strong>‚ö†Ô∏è Important :</strong> Le localStorage peut √™tre effac√© si vous :
                                        <ul style="margin: 10px 0 0 20px;">
                                            <li>Utilisez le mode navigation priv√©e</li>
                                            <li>Nettoyez l'historique/les donn√©es du navigateur</li>
                                            <li>Changez de navigateur ou d'appareil</li>
                                        </ul>
                                    </div>
                                    <p style="margin-top: 10px;"><strong>Recommandation :</strong> Exportez vos donn√©es r√©guli√®rement via R√©glages ‚Üí Import/Export pour cr√©er des sauvegardes JSON.</p>
                                </div>
                            </details>

                            <details style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                                <summary style="font-weight: bold; cursor: pointer; color: var(--bleu-principal);">Puis-je utiliser l'application sur plusieurs appareils ?</summary>
                                <div style="margin-top: 10px; padding-left: 10px;">
                                    <p><strong>Oui,</strong> mais avec transfert manuel :</p>
                                    <ol>
                                        <li>Sur l'appareil source : R√©glages ‚Üí Import/Export ‚Üí Exporter</li>
                                        <li>Transf√©rer le fichier JSON (email, iCloud, USB, etc.)</li>
                                        <li>Sur l'appareil cible : R√©glages ‚Üí Import/Export ‚Üí Importer</li>
                                    </ol>
                                    <p style="margin-top: 10px;"><strong>Note :</strong> Il n'y a pas de synchronisation automatique pour garantir la protection des donn√©es et le fonctionnement hors-ligne.</p>
                                </div>
                            </details>

                            <details style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                                <summary style="font-weight: bold; cursor: pointer; color: var(--bleu-principal);">L'application fonctionne-t-elle sans connexion Internet ?</summary>
                                <div style="margin-top: 10px; padding-left: 10px;">
                                    <p><strong>Oui, totalement.</strong> L'application est 100% autonome et ne n√©cessite aucune connexion Internet pour fonctionner.</p>
                                    <p style="margin-top: 10px;">Vous pouvez l'utiliser :</p>
                                    <ul>
                                        <li>En mode hors-ligne complet</li>
                                        <li>Sur un appareil sans acc√®s r√©seau</li>
                                        <li>En ouvrant simplement le fichier HTML local</li>
                                    </ul>
                                </div>
                            </details>

                            <details style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                                <summary style="font-weight: bold; cursor: pointer; color: var(--bleu-principal);">Pourquoi le calendrier affiche ¬´Invalid Date¬ª ?</summary>
                                <div style="margin-top: 10px; padding-left: 10px;">
                                    <p><strong>Cause probable :</strong> Le calendrier n'a pas √©t√© g√©n√©r√© ou a √©t√© corrompu.</p>
                                    <p style="margin-top: 10px;"><strong>Solution :</strong></p>
                                    <ol>
                                        <li>Aller dans R√©glages ‚Üí Trimestre</li>
                                        <li>Remplir les champs (date d√©but, date fin, nb semaines)</li>
                                        <li>Cliquer sur ¬´G√©n√©rer le calendrier complet¬ª</li>
                                        <li>V√©rifier que le message de succ√®s appara√Æt</li>
                                        <li>Retourner dans Pr√©sences ‚Üí Vue calendaire pour confirmer</li>
                                    </ol>
                                </div>
                            </details>
                        </div>

                        <div style="margin: 20px 0;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 8px;">Questions sur l'utilisation</h4>

                            <details style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                                <summary style="font-weight: bold; cursor: pointer; color: var(--bleu-principal);">Dans quel ordre dois-je configurer l'application ?</summary>
                                <div style="margin-top: 10px; padding-left: 10px;">
                                    <p><strong>Ordre recommand√© :</strong></p>
                                    <ol>
                                        <li><strong>R√©glages ‚Üí Cours :</strong> Informations de base (code, titre, programme)</li>
                                        <li><strong>R√©glages ‚Üí Trimestre :</strong> Dates et g√©n√©ration du calendrier complet</li>
                                        <li><strong>R√©glages ‚Üí Horaire :</strong> D√©finir les plages horaires des s√©ances</li>
                                        <li><strong>R√©glages ‚Üí Groupe :</strong> Importer ou cr√©er la liste des √©tudiants</li>
                                        <li><strong>Mat√©riel ‚Üí Grilles de crit√®res :</strong> Cr√©er vos grilles SRPNF</li>
                                        <li><strong>Mat√©riel ‚Üí √âchelle de performance :</strong> Personnaliser l'√©chelle IDME si n√©cessaire</li>
                                        <li><strong>Mat√©riel ‚Üí Productions :</strong> D√©finir toutes les √©valuations du cours</li>
                                        <li><strong>Mat√©riel ‚Üí R√©troactions :</strong> Cr√©er vos cartouches de r√©troaction</li>
                                    </ol>
                                    <div class="alerte alerte-succes" style="margin-top: 10px;">
                                        <strong>‚úì Astuce :</strong> Une fois configur√©, vous pouvez exporter tout le mat√©riel et le r√©utiliser pour les prochaines sessions !
                                    </div>
                                </div>
                            </details>

                            <details style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                                <summary style="font-weight: bold; cursor: pointer; color: var(--bleu-principal);">Comment g√©rer un √©tudiant qui abandonne en cours de session ?</summary>
                                <div style="margin-top: 10px; padding-left: 10px;">
                                    <ol>
                                        <li>Aller dans R√©glages ‚Üí Groupe</li>
                                        <li>Trouver l'√©tudiant dans la liste</li>
                                        <li>Changer son statut de ¬´Actif¬ª √† ¬´Inactif¬ª ou ¬´Abandon¬ª</li>
                                        <li>L'√©tudiant dispara√Ætra des aper√ßus actifs mais ses donn√©es seront conserv√©es</li>
                                    </ol>
                                    <p style="margin-top: 10px;"><strong>Note :</strong> Vous pouvez r√©activer l'√©tudiant en changeant √† nouveau son statut si n√©cessaire.</p>
                                </div>
                            </details>

                            <details style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                                <summary style="font-weight: bold; cursor: pointer; color: var(--bleu-principal);">Que faire si la pond√©ration totale n'est pas 100% ?</summary>
                                <div style="margin-top: 10px; padding-left: 10px;">
                                    <p>L'application affiche la pond√©ration totale dans Mat√©riel ‚Üí Productions. Si elle n'est pas √©gale √† 100% :</p>
                                    <ol>
                                        <li>V√©rifier que toutes les √©valuations sont cr√©√©es</li>
                                        <li>Ajuster les pond√©rations pour atteindre exactement 100%</li>
                                        <li>Les artefacts d'un portfolio ne comptent PAS dans le total (seul le Portfolio conteneur compte)</li>
                                    </ol>
                                    <div class="alerte alerte-attention" style="margin-top: 10px;">
                                        <strong>‚ö†Ô∏è Important :</strong> Le calcul de la note finale n√©cessite que la pond√©ration totale soit exactement 100%.
                                    </div>
                                </div>
                            </details>

                            <details style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 6px;">
                                <summary style="font-weight: bold; cursor: pointer; color: var(--bleu-principal);">Puis-je modifier les seuils des indices A, C, M ?</summary>
                                <div style="margin-top: 10px; padding-left: 10px;">
                                    <p><strong>Actuellement :</strong> Les seuils sont harmonis√©s √† 70% (Acceptable), 80% (Confortable), 85% (Ma√Ætris√©) et ne sont pas modifiables dans l'interface.</p>
                                    <p style="margin-top: 10px;"><strong>Pourquoi ?</strong> Ces seuils sont bas√©s sur la recherche p√©dagogique et garantissent la coh√©rence des pr√©dictions de risque.</p>
                                    <p style="margin-top: 10px;"><strong>Personnalisation future :</strong> Une version avanc√©e pourrait permettre de personnaliser ces seuils dans R√©glages ‚Üí Pratique de notation.</p>
                                </div>
                            </details>
                        </div>
                    </div>

                    <!-- Carte: Glossaire (Phase 2) -->
                    <div class="carte" style="background: #fff9e6;">
                        <h3 class="carte-titre-bleu">Glossaire des termes</h3>

                        <div style="margin: 15px 0;">
                            <h4 style="color: var(--bleu-principal); border-bottom: 2px solid var(--bleu-pale); padding-bottom: 5px; margin-bottom: 15px;">A</h4>

                            <dl style="margin-left: 10px;">
                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Artefact</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Production √©valu√©e d'un √©tudiant. Peut √™tre une dissertation, un examen, une pr√©sentation, etc. Dans un portfolio, plusieurs artefacts sont regroup√©s et seuls les N meilleurs sont retenus pour la note finale selon les r√®gles PAN.</dd>

                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Assiduit√© (A)</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Indice primaire mesurant la pr√©sence en classe. Calcul√© automatiquement √† partir des pr√©sences saisies. Formule : (nombre de pr√©sences / nombre de s√©ances) √ó 100. Refl√®te l'engagement cognitif de l'√©tudiant.</dd>
                            </dl>

                            <h4 style="color: var(--bleu-principal); border-bottom: 2px solid var(--bleu-pale); padding-bottom: 5px; margin: 25px 0 15px 0;">C</h4>

                            <dl style="margin-left: 10px;">
                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Calendrier complet</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Structure de donn√©es g√©n√©r√©e par le module trimestre.js. Contient 124 jours (d√©but session jusqu'√† fin + 10 jours). Chaque jour indique s'il y a cours, cong√©, reprise, etc. Source unique pour toutes les dates de l'application.</dd>

                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Cartouche de r√©troaction</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Matrice de commentaires pr√©d√©finis organis√©s par crit√®re SRPNF et niveau de performance IDME. Permet de g√©n√©rer rapidement des r√©troactions personnalis√©es et coh√©rentes. Peut √™tre verrouill√©e une fois finalis√©e.</dd>

                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Compl√©tion (C)</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Indice primaire mesurant la remise des travaux. Formule : (nombre d'artefacts compl√©t√©s / nombre d'artefacts attendus) √ó 100. Refl√®te la mobilisation de l'√©tudiant. Calcul√© par portfolio.js.</dd>

                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Cong√© impr√©vu</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Jour o√π le cours est annul√© de mani√®re non planifi√©e (temp√™te, urgence, etc.). N'affecte pas le calcul des semaines. Peut n√©cessiter une reprise pour maintenir le nombre de s√©ances requis.</dd>

                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Cong√© pr√©vu</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Jour f√©ri√© ou pause planifi√©e dans le calendrier acad√©mique (ex: semaine de lecture). Pris en compte lors de la g√©n√©ration du calendrier complet.</dd>
                            </dl>

                            <h4 style="color: var(--bleu-principal); border-bottom: 2px solid var(--bleu-pale); padding-bottom: 5px; margin: 25px 0 15px 0;">√â</h4>

                            <dl style="margin-left: 10px;">
                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">√âchelle IDME</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">√âchelle de performance √† 4 niveaux : <strong>I</strong>nsuffisant (&lt;.64), <strong>D</strong>√©veloppement (.65-.74), <strong>M</strong>a√Ætris√© (.75-.84), <strong>E</strong>tendu (‚â•.85). Bas√©e sur la taxonomie SOLO de Biggs & Collis. Utilis√©e pour interpr√©ter les scores SRPNF.</dd>
                            </dl>

                            <h4 style="color: var(--bleu-principal); border-bottom: 2px solid var(--bleu-pale); padding-bottom: 5px; margin: 25px 0 15px 0;">G</h4>

                            <dl style="margin-left: 10px;">
                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Grille de crit√®res SRPNF</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Outil d'√©valuation structur√© selon 5 crit√®res : Structure (15%), Rigueur (20%), Plausibilit√© (10%), Nuance (25%), Fran√ßais (30%). Chaque crit√®re comporte 4 descripteurs permettant d'attribuer un score pr√©cis. Peut √™tre dupliqu√©e et personnalis√©e.</dd>
                            </dl>

                            <h4 style="color: var(--bleu-principal); border-bottom: 2px solid var(--bleu-pale); padding-bottom: 5px; margin: 25px 0 15px 0;">I</h4>

                            <dl style="margin-left: 10px;">
                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Indice de risque (R)</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Indice composite pr√©disant le risque d'√©chec. Formule : R = (2√óA + C + P) / 4. Combine assiduit√©, compl√©tion et performance en un seul score. 6 niveaux d'interpr√©tation : Excellent (‚â•85%), Bon (70-84%), Fragile (60-69%), √Ä risque (50-59%), Critique (40-49%), √âchec probable (&lt;40%).</dd>

                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Indice R√†I</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Score d√©terminant le niveau d'intervention selon le cadre R√©ponse √† l'Intervention. Calcul√© √† partir de l'indice R. Trois niveaux : Universel (‚â•70%), Cibl√© (40-69%), Intensif (&lt;40%).</dd>
                            </dl>

                            <h4 style="color: var(--bleu-principal); border-bottom: 2px solid var(--bleu-pale); padding-bottom: 5px; margin: 25px 0 15px 0;">L</h4>

                            <dl style="margin-left: 10px;">
                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">localStorage</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">M√©canisme de stockage local du navigateur. Toutes les donn√©es de l'application y sont sauvegard√©es automatiquement. Permet le fonctionnement 100% hors-ligne. Limit√© √† 5-10 MB selon les navigateurs. Peut √™tre effac√© (mode priv√©, nettoyage) d'o√π l'importance des exports r√©guliers.</dd>
                            </dl>

                            <h4 style="color: var(--bleu-principal); border-bottom: 2px solid var(--bleu-pale); padding-bottom: 5px; margin: 25px 0 15px 0;">M</h4>

                            <dl style="margin-left: 10px;">
                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Mode provisoire / final (Portfolio)</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;"><strong>Provisoire :</strong> Tous les artefacts compl√©t√©s sont consid√©r√©s, m√™me si &lt; nombre total attendu. <strong>Final :</strong> Ne calcule la note que si le nombre minimum d'artefacts compl√©t√©s est atteint, sinon retourne 0. Permet de g√©rer les portfolios en cours de session.</dd>

                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Monitorage p√©dagogique</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Approche syst√©mique de suivi des apprentissages combinant observation continue (pr√©sences), √©valuation formative (artefacts) et intervention diff√©renci√©e (R√†I). Objectif : identifier pr√©cocement les √©tudiants √† risque pour intervenir avant l'√©chec.</dd>
                            </dl>

                            <h4 style="color: var(--bleu-principal); border-bottom: 2px solid var(--bleu-pale); padding-bottom: 5px; margin: 25px 0 15px 0;">P</h4>

                            <dl style="margin-left: 10px;">
                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">PAN (Pratiques d'Appr√©ciation Nuanc√©e)</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Syst√®me de notation permettant de s√©lectionner automatiquement les N meilleurs artefacts d'un portfolio. Exemple : sur 9 artefacts, retenir les 3 meilleurs. R√®gle configurable par portfolio. Respecte un minimum de compl√©tion requis.</dd>

                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Performance (P)</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Indice primaire mesurant la qualit√© des productions. Moyenne pond√©r√©e des scores SRPNF des artefacts s√©lectionn√©s (PAN). Refl√®te le niveau de ma√Ætrise des comp√©tences. Calcul√© par portfolio.js.</dd>

                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Pond√©ration</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Poids relatif d'une √©valuation dans la note finale (%). La somme de toutes les pond√©rations doit √™tre exactement 100%. Les artefacts d'un portfolio n'ont pas de pond√©ration individuelle ; seul le Portfolio conteneur en a une.</dd>

                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Portfolio</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Production composite regroupant plusieurs artefacts. D√©finit des r√®gles PAN (nombre total, nombre √† retenir, minimum requis). Le score final du portfolio est calcul√© selon les N meilleurs artefacts. Type sp√©cial dans Mat√©riel ‚Üí Productions.</dd>

                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Production</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Terme g√©n√©rique d√©signant toute √©valuation du cours : examen, travail √©crit, quiz, pr√©sentation, portfolio. Chaque production a un type, une pond√©ration, et peut √™tre li√©e √† une grille de crit√®res.</dd>
                            </dl>

                            <h4 style="color: var(--bleu-principal); border-bottom: 2px solid var(--bleu-pale); padding-bottom: 5px; margin: 25px 0 15px 0;">R</h4>

                            <dl style="margin-left: 10px;">
                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Reprise</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">S√©ance de rattrapage planifi√©e pour compenser un cong√© impr√©vu. Exemple : si le lundi est f√©ri√©, on peut reprendre le jeudi avec ¬´Horaire du lundi¬ª. G√©r√©e dans le calendrier complet pour maintenir le nombre requis de s√©ances.</dd>

                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">R√†I (R√©ponse √† l'Intervention)</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Cadre d'intervention √† trois paliers : <strong>Niveau 1</strong> (Universel, 80% des √©tudiants), <strong>Niveau 2</strong> (Cibl√©, 15%), <strong>Niveau 3</strong> (Intensif, 5%). Permet d'adapter le soutien selon l'indice de risque. L'application sugg√®re automatiquement le niveau appropri√©.</dd>
                            </dl>

                            <h4 style="color: var(--bleu-principal); border-bottom: 2px solid var(--bleu-pale); padding-bottom: 5px; margin: 25px 0 15px 0;">S</h4>

                            <dl style="margin-left: 10px;">
                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">S√©ances compl√®tes</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Structure de donn√©es g√©n√©r√©e par horaire.js. Fusionne les plages horaires (seancesHoraire) avec le calendrier complet pour cr√©er la liste exhaustive de toutes les s√©ances du trimestre avec leurs horaires pr√©cis. Source unique pour la saisie des pr√©sences.</dd>

                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Single Source of Truth</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Principe architectural : chaque donn√©e a UNE source unique qui la g√©n√®re et la stocke dans localStorage. Les autres modules la lisent uniquement. Exemples : trimestre.js g√©n√®re calendrierComplet, saisie-presences.js g√©n√®re indicesAssiduiteDetailles. √âvite les duplications et incoh√©rences.</dd>

                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">SOLO (Taxonomie)</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Structure of Observed Learning Outcomes (Biggs & Collis). Hi√©rarchie de 5 niveaux de compr√©hension : Pr√©structurel, Unistructurel, Multistructurel, Relationnel, Abstrait √©tendu. Fondement th√©orique de l'√©chelle IDME.</dd>

                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">SRPNF (Crit√®res)</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Grille d'√©valuation en 5 crit√®res : <strong>S</strong>tructure (15%), <strong>R</strong>igueur (20%), <strong>P</strong>lausibilit√© (10%), <strong>N</strong>uance (25%), <strong>F</strong>ran√ßais (30%). D√©velopp√©e sp√©cifiquement pour l'√©valuation de productions en litt√©ratie. Permet une √©valuation objective et coh√©rente.</dd>
                            </dl>

                            <h4 style="color: var(--bleu-principal); border-bottom: 2px solid var(--bleu-pale); padding-bottom: 5px; margin: 25px 0 15px 0;">T</h4>

                            <dl style="margin-left: 10px;">
                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Trimestre</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">P√©riode acad√©mique (automne, hiver, √©t√©). D√©fini par une date de d√©but, une date de fin, et un nombre de semaines de cours. Le module trimestre.js g√©n√®re automatiquement le calendrier complet de 124 jours couvrant toute la session.</dd>
                            </dl>

                            <h4 style="color: var(--bleu-principal); border-bottom: 2px solid var(--bleu-pale); padding-bottom: 5px; margin: 25px 0 15px 0;">V</h4>

                            <dl style="margin-left: 10px;">
                                <dt style="font-weight: bold; color: var(--bleu-principal); margin-top: 15px;">Verrouillage</dt>
                                <dd style="margin-left: 20px; margin-bottom: 10px;">Fonction de protection emp√™chant la modification ou suppression accidentelle. Disponible pour : productions, grilles de crit√®res, √©chelles, cartouches. Un √©l√©ment verrouill√© affiche une ic√¥ne de cadenas et ses boutons d'action sont d√©sactiv√©s. Peut √™tre d√©verrouill√© si n√©cessaire.</dd>
                            </dl>
                        </div>

                        <div class="alerte alerte-info" style="margin-top: 20px;">
                            <strong>‚ÑπÔ∏è Note :</strong> Ce glossaire est une r√©f√©rence rapide. Pour des explications d√©taill√©es avec exemples et formules, consultez le Guide complet (PDF) disponible dans les ressources ci-dessous.
                        </div>
                    </div>

                    <!-- Carte: Ressources -->
                    <div class="carte" style="background: var(--bleu-tres-pale);">
                        <h3 class="carte-titre-bleu">Ressources et documentation</h3>

                        <p><strong>R√©f√©rences bibliographiques :</strong></p>
                        <div style="font-size: 0.9rem; line-height: 1.6; padding-left: 20px; text-indent: -20px;">
                            <p style="margin: 10px 0;">Arseneault-Hubert, F., Cormier, C. et Voisard, B. (2024). Les pratiques alternatives de notation : Pour mieux soutenir les apprentissages et en t√©moigner. <em>P√©dagogie coll√©giale</em>, <em>37</em>(2), 27. <a href="https://eduq.info/xmlui/bitstream/handle/11515/39399/Voisard-et-al-37-2-24.pdf" target="_blank" style="color: var(--bleu-principal);">https://eduq.info/xmlui/bitstream/handle/11515/39399/Voisard-et-al-37-2-24.pdf</a></p>

                            <p style="margin: 10px 0;">B√©dard, G. (2024). L'enseignement explicite de la litt√©ratie. <em>P√©dagogie coll√©giale</em>, <em>37</em>(3), 85-92. <a href="https://eduq.info/xmlui/bitstream/handle/11515/39438/Bedard-37-3-24.pdf?sequence=2&isAllowed=y" target="_blank" style="color: var(--bleu-principal);">https://eduq.info/xmlui/bitstream/handle/11515/39438/Bedard-37-3-24.pdf</a></p>

                            <p style="margin: 10px 0;">B√©dard, G. (2025). Observer pour mieux accompagner. <em>P√©dagogie coll√©giale</em>, <em>38</em>(2), 38-45. <a href="https://eduq.info/xmlui/bitstream/handle/11515/39749/Bedard-38-2-25.pdf?sequence=2&isAllowed=y" target="_blank" style="color: var(--bleu-principal);">https://eduq.info/xmlui/bitstream/handle/11515/39749/Bedard-38-2-25.pdf</a></p>

                            <p style="margin: 10px 0;">B√©lec, C. et Dor√©, R. (2023). <em>Une recherche collaborative pour renouveler l'enseignement de la litt√©rature au coll√©gial dans une optique de coh√©rence disciplinaire : l'int√©r√™t d'une approche par comp√©tence de la lecture</em>. Rapport PAREA, C√©gep G√©rald-Godin. <a href="https://www.cdc.qc.ca/parea/786755-belec-dore-litterature-competence-lecture-gerald-godin-PAREA-2023.pdf" target="_blank" style="color: var(--bleu-principal);">https://www.cdc.qc.ca/parea/786755-belec-dore-litterature-competence-lecture-gerald-godin-PAREA-2023.pdf</a></p>

                            <p style="margin: 10px 0;">Biggs, J. B. et Collis, K. F. (1982). <em>Evaluating the quality of learning: The SOLO taxonomy (Structure of the Observed Learning Outcome)</em>. Elsevier Inc.</p>

                            <p style="margin: 10px 0;">Blum, S. D. (dir.) (2020). <em>Ungrading: Why rating students undermines learning (and what to do instead)</em>. West Virginia University Press.</p>

                            <p style="margin: 10px 0;">Clark, R. et Talbert, R. (2023). <em>Grading for growth: A guide to alternative grading practices that promote authentic learning and student engagement</em>. Stylus Publishing.</p>

                            <p style="margin: 10px 0;">Conseil sup√©rieur de l'√©ducation. (2018). <em>√âvaluer pour que √ßa compte vraiment : Rapport sur l'√©tat et les besoins de l'√©ducation 2016-2018</em>. Gouvernement du Qu√©bec.</p>

                            <p style="margin: 10px 0;">Gauthier, C. et Bissonnette, S. (2023). <em>Enseignement explicite et donn√©es probantes</em>. Ga√´tan Morin √âditeur.</p>

                            <p style="margin: 10px 0;">Gauthier, C., Bissonnette, S. et Richard, M. (2013). <em>Enseignement explicite et r√©ussite des √©l√®ves : La gestion des apprentissages</em>. Ga√´tan Morin √âditeur.</p>

                            <p style="margin: 10px 0;">Gauthier, C. et Tardif, M. (2017). <em>La p√©dagogie</em> (4<sup>e</sup> √©dition) : <em>Th√©ories et pratiques de l'Antiquit√© √† nos jours</em>. Ga√´tan Morin.</p>

                            <p style="margin: 10px 0;">Hollingsworth, J. et Ybarra, S. (2012). <em>L'enseignement explicite</em>. Cheneli√®re.</p>

                            <p style="margin: 10px 0;">Nilson, L. B. (2014). <em>Specifications grading: Restoring rigor, motivating students, and saving faculty time</em>. Stylus Publishing.</p>

                            <p style="margin: 10px 0;">Viau, R. (2009). <em>La motivation √† apprendre en milieu scolaire</em>. √âditions du renouveau p√©dagogique (ERPI).</p>
                        </div>

                        <p style="margin-top: 15px;"><strong>Labo Codex :</strong></p>
                        <ul>
                            <li>Site web : <a href="https://codexnumeris.org/apropos" target="_blank" style="color: var(--bleu-principal);">https://codexnumeris.org/apropos</a></li>
                            <li>Approche syst√©mique compl√®te</li>
                            <li>Ressources additionnelles et outils</li>
                        </ul>

                        <p style="margin-top: 15px;"><strong>Licence et partage :</strong></p>
                        <div style="background: var(--bleu-pale); padding: 15px; border-radius: 6px; margin-top: 10px;">
                            <p style="margin: 0 0 10px 0;"><strong>üìú Double licence :</strong></p>
                            <ul style="margin: 0;">
                                <li><strong>Code source (HTML, CSS, JavaScript) :</strong> GNU GPL v3.0
                                    <ul style="font-size: 0.9em; margin-top: 5px;">
                                        <li>Garantit que le code reste libre et open source</li>
                                        <li>Modifications doivent √™tre partag√©es sous m√™me licence</li>
                                    </ul>
                                </li>
                                <li style="margin-top: 10px;"><strong>Contenu p√©dagogique (documentation, aide, concepts) :</strong> Creative Commons BY-SA 4.0
                                    <ul style="font-size: 0.9em; margin-top: 5px;">
                                        <li>Partage et adaptation autoris√©s avec attribution</li>
                                        <li>Redistribution sous m√™me licence</li>
                                        <li>Usage non-commercial autoris√©</li>
                                    </ul>
                                </li>
                            </ul>
                            <p style="margin: 15px 0 0 0; font-size: 0.9em; color: var(--bleu-principal);"><strong>‚ÑπÔ∏è D√©tails complets :</strong> Voir LICENSE.md dans le d√©p√¥t du projet</p>
                        </div>
                    </div>

                    <!-- Carte: √Ä propos -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">√Ä propos de l'application</h3>
                        <table style="width: 100%; border-collapse: collapse;">
                            <tr>
                                <td style="padding: 10px; font-weight: bold; width: 30%; border-bottom: 1px solid var(--bleu-pale);">Version</td>
                                <td style="padding: 10px; border-bottom: 1px solid var(--bleu-pale);">Beta 0.79 (correctifs hi√©rarchie)</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; font-weight: bold; border-bottom: 1px solid var(--bleu-pale);">D√©velopp√© par</td>
                                <td style="padding: 10px; border-bottom: 1px solid var(--bleu-pale);">Gr√©goire B√©dard<br>
                                    <span style="font-size: 0.9em; color: #666;">C√©gep de Drummondville</span>
                                </td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; font-weight: bold; border-bottom: 1px solid var(--bleu-pale);">Licence</td>
                                <td style="padding: 10px; border-bottom: 1px solid var(--bleu-pale);">Double licence<br>
                                    <span style="font-size: 0.9em; color: #666;">GPL v3.0 (code) + CC BY-SA 4.0 (contenu)</span>
                                </td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; font-weight: bold; border-bottom: 1px solid var(--bleu-pale);">Technologies</td>
                                <td style="padding: 10px; border-bottom: 1px solid var(--bleu-pale);">HTML5 / CSS3 / JavaScript ES6+ pur<br>
                                    <span style="font-size: 0.9em; color: #666;">100% autonome, aucune d√©pendance externe</span>
                                </td>
                            </tr>
                            <tr>
                                <td style="padding: 10px; font-weight: bold;">Stockage</td>
                                <td style="padding: 10px;">localStorage uniquement<br>
                                    <span style="font-size: 0.9em; color: #666;">Fonctionnement hors-ligne</span>
                                </td>
                            </tr>
                        </table>

                        <p style="margin-top: 20px; text-align: center; font-style: italic; color: var(--bleu-principal);">
                            <strong>"L'objectif p√©dagogique : Faire mentir les pr√©dictions de risque par des interventions proactives !"</strong>
                        </p>
                    </div>
                </div>
                <!-- LLM:OK_TO_EDIT -->

            </section><!-- fin section-aide -->

        </main>

    </div>



    <!-- ===================================
     CHARGEMENT DES MODULES JAVASCRIPT
     ORDRE CRITIQUE - Voir: js/ordre-chargement.txt
     =================================== -->

    <!-- PRIORIT√â 1: Fondations -->
    <script src="js/config.js"></script>
    <script src="js/navigation.js?v=1761397763"></script>
    <script src="js/modes.js"></script>

    <!-- PRIORIT√â 2: Donn√©es de base -->
    <script src="js/trimestre.js?v=1761390149"></script>
    <script src="js/etudiants.js"></script>
    <script src="js/productions.js?v=1761715000"></script>
    <script src="js/grilles.js?v=1761700100"></script>
    <script src="js/echelles.js?v=1761700200"></script>
    <script src="js/cartouches.js?v=1761700300"></script>
    <script src="js/cours.js?v=1761391739"></script>

    <!-- PRIORIT√â 3: Calcul des indices (AVANT affichage) -->
    <script src="js/portfolio.js"></script>
    <script src="js/saisie-presences.js"></script>

    <!-- PRIORIT√â 4: Modules d'affichage (APR√àS calcul) -->
    <script src="js/tableau-bord-apercu.js"></script>
    <script src="js/profil-etudiant.js"></script>
    <script src="js/presences-apercu.js"></script>
    <script src="js/evaluations-apercu.js"></script>

    <!-- PRIORIT√â 5: Modules fonctionnels -->
    <script src="js/calendrier-vue.js"></script>
    <script src="js/horaire.js?v=1761391190"></script>
    <script src="js/groupe.js"></script>
    <script src="js/pratiques.js"></script>

    <!-- PRIORIT√â 6: Modules avanc√©s -->
    <script src="js/import-export.js?v=1761387764"></script>
    <script src="js/statistiques.js"></script>
    <script src="js/liste-evaluations.js?v=1761391739"></script>

    <!-- PRIORIT√â 7: Utilitaires -->
    <script src="js/evaluation.js?v=1761668100"></script>

    <!-- PRIORIT√â 8: Initialisation finale (TOUJOURS EN DERNIER) -->
    <script src="js/main.js"></script>

    <!-- Script de d√©bogage additionnel (optionnel) -->
    <script>
        // Mise √† jour de la zone de d√©bogage visuelle
        setInterval(() => {
            const debugSection = document.getElementById('debug-section');
            const debugSousSection = document.getElementById('debug-sous-section');

            if (debugSection && typeof sectionActive !== 'undefined') {
                debugSection.textContent = sectionActive || '--';
            }

            if (debugSousSection && typeof sousSectionActive !== 'undefined') {
                debugSousSection.textContent = sousSectionActive || '--';
            }
        }, 500);
    </script>

    <!-- Script pour g√©rer les toggles emoji dans les H2 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // S√©lectionner tous les emojis avec la classe emoji-toggle
            const emojiToggles = document.querySelectorAll('.emoji-toggle');

            emojiToggles.forEach(emoji => {
                emoji.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();

                    // R√©cup√©rer l'ID de la cible depuis l'attribut data-target
                    const targetId = this.getAttribute('data-target');
                    const targetElement = document.getElementById(targetId);

                    if (targetElement) {
                        // Toggle la visibilit√©
                        if (targetElement.style.display === 'none' || targetElement.style.display === '') {
                            targetElement.style.display = 'block';
                        } else {
                            targetElement.style.display = 'none';
                        }
                    }
                });
            });
        });
    </script>

    <!-- ===============================
     MODALES IMPORT/EXPORT
     √Ä placer AVANT </body>
     =============================== -->

    <!-- Modal Export -->
    <div id="modalExport" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
     background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
        <div
            style="background: white; border-radius: 12px; padding: 30px; max-width: 600px; max-height: 80vh; overflow-y: auto; width: 90%;">
            <h3 style="color: var(--bleu-principal); margin-bottom: 20px;">Exporter les donn√©es</h3>

            <div style="margin-bottom: 20px;">
                <label
                    style="display: flex; align-items: center; padding: 10px; background: var(--bleu-pale); border-radius: 6px; cursor: pointer;">
                    <input type="checkbox" id="checkToutesLes" onchange="toggleToutesLesCles()"
                        style="margin-right: 10px; transform: scale(1.3);">
                    <strong>Toutes les cl√©s</strong>
                </label>
            </div>

            <div id="listeClesExport"
                style="max-height: 300px; overflow-y: auto; border: 1px solid var(--bleu-pale); border-radius: 6px; padding: 10px;">
                <!-- Rempli dynamiquement -->
            </div>

            <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: flex-end;">
                <button class="btn btn-annuler" onclick="fermerModalExport()">Annuler</button>
                <button class="btn btn-confirmer" onclick="executerExport()">Exporter</button>
            </div>
        </div>
    </div>

    <!-- Modal Import -->
    <div id="modalImport" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
     background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
        <div style="background: white; border-radius: 12px; padding: 30px; max-width: 600px; width: 90%;">
            <h3 style="color: var(--bleu-principal); margin-bottom: 20px;">Importer les donn√©es</h3>

            <div
                style="margin-bottom: 20px; padding: 20px; background: var(--bleu-tres-pale); border-radius: 6px; border-left: 4px solid var(--orange-accent);">
                <p style="margin: 0; color: var(--bleu-principal);">
                    <strong>‚ÑπÔ∏è Attention :</strong> L'importation √©crasera les donn√©es existantes pour les cl√©s
                    import√©es.
                </p>
            </div>

            <input type="file" id="fichierImport" accept=".json"
                style="margin-bottom: 20px; padding: 10px; width: 100%; border: 2px dashed var(--bleu-leger); border-radius: 6px; cursor: pointer;">

            <div id="apercu-import"
                style="display: none; margin-bottom: 20px; padding: 15px; background: #e8f5e9; border-radius: 6px; border-left: 4px solid #4caf50;">
                <!-- Rempli apr√®s s√©lection du fichier -->
            </div>

            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button class="btn btn-annuler" onclick="fermerModalImport()">Annuler</button>
                <button class="btn btn-confirmer" id="btnExecuterImport" onclick="executerImport()" disabled>Importer</button>
            </div>
        </div>
    </div>

    <!-- ===============================
     MOTEUR DE RECHERCHE AIDE
     =============================== -->
    <script>
        /**
         * Recherche dans la section Aide en temps r√©el
         */
        function rechercherDansAide() {
            const input = document.getElementById('aide-recherche-input');
            const clearBtn = document.getElementById('aide-recherche-clear');
            const resultatsDiv = document.getElementById('aide-recherche-resultats');
            const recherche = input.value.trim().toLowerCase();

            // Afficher/masquer le bouton X
            clearBtn.style.display = recherche ? 'block' : 'none';

            // Si recherche vide, tout r√©afficher
            if (!recherche) {
                reafficherToutesLesCartes();
                resultatsDiv.style.display = 'none';
                return;
            }

            // Rechercher dans toutes les cartes
            const cartes = document.querySelectorAll('#section-aide .carte');
            let nbResultats = 0;
            let nbCartesVisibles = 0;

            cartes.forEach(carte => {
                // Retirer les surlignages pr√©c√©dents
                retirerSurlignage(carte);

                // Chercher dans le texte de la carte
                const texte = carte.textContent.toLowerCase();

                if (texte.includes(recherche)) {
                    carte.style.display = 'block';
                    nbCartesVisibles++;

                    // Surligner les occurrences
                    nbResultats += surlignerTexte(carte, recherche);
                } else {
                    carte.style.display = 'none';
                }
            });

            // Afficher/masquer les sous-sections vides
            const sousSections = document.querySelectorAll('#section-aide .sous-section');
            sousSections.forEach(section => {
                const cartesVisibles = section.querySelectorAll('.carte[style*="display: block"], .carte:not([style*="display: none"])').length;

                // Masquer le titre de la sous-section s'il n'y a pas de cartes visibles
                const titre = section.querySelector('h2');
                if (titre) {
                    titre.style.display = cartesVisibles > 0 ? 'block' : 'none';
                }
            });

            // Afficher les r√©sultats
            resultatsDiv.style.display = 'block';
            if (nbCartesVisibles === 0) {
                resultatsDiv.innerHTML = '‚ùå Aucun r√©sultat trouv√© pour ¬´ ' + recherche + ' ¬ª';
                resultatsDiv.style.color = '#dc3545';
            } else {
                resultatsDiv.innerHTML = '‚úÖ ' + nbResultats + ' occurrence(s) trouv√©e(s) dans ' + nbCartesVisibles + ' carte(s)';
                resultatsDiv.style.color = '#28a745';
            }
        }

        /**
         * Surligne le texte recherch√© dans un √©l√©ment
         */
        function surlignerTexte(element, recherche) {
            let nbOccurrences = 0;
            const regex = new RegExp('(' + recherche.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + ')', 'gi');

            // Parcourir tous les n≈ìuds de texte
            const walker = document.createTreeWalker(
                element,
                NodeFilter.SHOW_TEXT,
                null,
                false
            );

            const nodesATraiter = [];
            let node;
            while (node = walker.nextNode()) {
                if (node.textContent.toLowerCase().includes(recherche)) {
                    nodesATraiter.push(node);
                }
            }

            nodesATraiter.forEach(node => {
                const parent = node.parentNode;

                // Ne pas surligner dans les scripts ou styles
                if (parent.nodeName === 'SCRIPT' || parent.nodeName === 'STYLE') {
                    return;
                }

                const texte = node.textContent;
                const fragments = texte.split(regex);

                if (fragments.length > 1) {
                    const span = document.createElement('span');

                    fragments.forEach((fragment, index) => {
                        if (fragment.toLowerCase() === recherche.toLowerCase()) {
                            const mark = document.createElement('mark');
                            mark.textContent = fragment;
                            mark.style.backgroundColor = '#ffeb3b';
                            mark.style.padding = '2px 4px';
                            mark.style.borderRadius = '3px';
                            mark.style.fontWeight = 'bold';
                            mark.className = 'aide-surlignage';
                            span.appendChild(mark);
                            nbOccurrences++;
                        } else if (fragment) {
                            span.appendChild(document.createTextNode(fragment));
                        }
                    });

                    parent.replaceChild(span, node);
                }
            });

            return nbOccurrences;
        }

        /**
         * Retire tous les surlignages
         */
        function retirerSurlignage(element) {
            const marks = element.querySelectorAll('mark.aide-surlignage');
            marks.forEach(mark => {
                const parent = mark.parentNode;
                parent.replaceChild(document.createTextNode(mark.textContent), mark);
                parent.normalize(); // Fusionner les n≈ìuds de texte adjacents
            });
        }

        /**
         * R√©affiche toutes les cartes et sous-sections
         */
        function reafficherToutesLesCartes() {
            // R√©afficher toutes les cartes
            const cartes = document.querySelectorAll('#section-aide .carte');
            cartes.forEach(carte => {
                carte.style.display = 'block';
                retirerSurlignage(carte);
            });

            // R√©afficher tous les titres de sous-sections
            const titres = document.querySelectorAll('#section-aide .sous-section h2');
            titres.forEach(titre => {
                titre.style.display = 'block';
            });
        }

        /**
         * Efface la recherche et r√©initialise l'affichage
         */
        function effacerRechercheAide() {
            const input = document.getElementById('aide-recherche-input');
            const clearBtn = document.getElementById('aide-recherche-clear');
            const resultatsDiv = document.getElementById('aide-recherche-resultats');

            input.value = '';
            clearBtn.style.display = 'none';
            resultatsDiv.style.display = 'none';
            reafficherToutesLesCartes();

            // Remettre le focus sur le champ
            input.focus();
        }

        // Am√©lioration UX : Focus sur le champ de recherche avec Ctrl+F ou Cmd+F
        document.addEventListener('keydown', function(e) {
            // V√©rifier si on est dans la section Aide
            const sectionAide = document.getElementById('section-aide');
            if (!sectionAide || !sectionAide.classList.contains('active')) {
                return;
            }

            // Ctrl+F ou Cmd+F
            if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                e.preventDefault();
                const input = document.getElementById('aide-recherche-input');
                if (input) {
                    input.focus();
                    input.select();
                }
            }

            // ESC pour effacer
            if (e.key === 'Escape') {
                const input = document.getElementById('aide-recherche-input');
                if (input && document.activeElement === input) {
                    effacerRechercheAide();
                }
            }
        });
    </script>

    <!-- Fonctions d'import/export du mat√©riel p√©dagogique (Beta 0.78) -->
    <script>
        // ========================================
        // DEBUG: AFFICHER LE CONTENU DU LOCALSTORAGE
        // ========================================
        function debugLocalStorage() {
            console.clear();
            console.log('========================================');
            console.log('DEBUG: Contenu du localStorage');
            console.log('========================================');

            // Lister toutes les cl√©s
            console.log('\nüìã Toutes les cl√©s disponibles:');
            for (let i = 0; i < localStorage.length; i++) {
                const cle = localStorage.key(i);
                console.log(`  - ${cle}`);
            }

            // V√©rifier productions (cl√©: productions)
            console.log('\nüìù Productions (artefacts):');
            const productions = localStorage.getItem('productions');
            if (productions) {
                try {
                    const parsed = JSON.parse(productions);
                    console.log(`  Trouv√©es: ${Array.isArray(parsed) ? parsed.length : 'Structure invalide'} production(s)`);
                    console.log('  Contenu:', parsed);
                } catch (e) {
                    console.log('  ERREUR de parsing:', e);
                }
            } else {
                console.log('  ‚ùå Aucune production trouv√©e (cl√© "productions" vide)');
            }

            // V√©rifier grillesTemplates
            console.log('\nüìä Grilles de crit√®res:');
            const grilles = localStorage.getItem('grillesTemplates');
            if (grilles) {
                try {
                    const parsed = JSON.parse(grilles);
                    if (Array.isArray(parsed)) {
                        console.log(`  Grilles: ${parsed.length}`);
                        console.log('  Contenu:', parsed);
                    } else {
                        console.log('  Structure invalide (pas un tableau)');
                    }
                } catch (e) {
                    console.log('  ERREUR de parsing:', e);
                }
            } else {
                console.log('  ‚ùå Aucune grille trouv√©e (cl√© "grillesTemplates" vide)');
            }

            // V√©rifier √©chelles
            console.log('\nüìê √âchelles de performance:');
            const echellesTemplates = localStorage.getItem('echellesTemplates');
            const niveauxEchelle = localStorage.getItem('niveauxEchelle');
            const configEchelle = localStorage.getItem('configEchelle');

            if (echellesTemplates || niveauxEchelle || configEchelle) {
                console.log('  Donn√©es trouv√©es:');
                if (echellesTemplates) {
                    console.log('    ‚Ä¢ echellesTemplates:', JSON.parse(echellesTemplates));
                }
                if (niveauxEchelle) {
                    console.log('    ‚Ä¢ niveauxEchelle:', JSON.parse(niveauxEchelle));
                }
                if (configEchelle) {
                    console.log('    ‚Ä¢ configEchelle:', JSON.parse(configEchelle));
                }
            } else {
                console.log('  ‚ùå Aucune √©chelle trouv√©e');
            }

            console.log('\n========================================');
            alert('Informations affich√©es dans la console du navigateur.\n\nAppuie sur F12 pour voir les d√©tails.');
        }

        // ========================================
        // EXPORT DES GRILLES D'√âVALUATION
        // ========================================
        function exporterGrilles() {
            try {
                const grillesTemplates = JSON.parse(localStorage.getItem('grillesTemplates') || '[]');

                // Filtrer pour garder seulement les grilles (pas les √©chelles)
                const grilles = grillesTemplates.filter(g => g.type !== 'echelle');

                if (grilles.length === 0) {
                    alert('Aucune grille d\'√©valuation √† exporter.\n\nCr√©e d\'abord des grilles dans la section √âvaluations.');
                    return;
                }

                // Cr√©er le fichier JSON
                const json = JSON.stringify(grilles, null, 2);
                const blob = new Blob([json], { type: 'application/json' });
                const url = URL.createObjectURL(blob);

                // T√©l√©charger
                const a = document.createElement('a');
                a.href = url;
                const dateStr = new Date().toISOString().slice(0, 10);
                a.download = `grilles-evaluation-${dateStr}.json`;
                a.click();
                URL.revokeObjectURL(url);

                if (typeof afficherNotificationSucces === 'function') {
                    afficherNotificationSucces(`Export r√©ussi : ${grilles.length} grille(s) export√©e(s)`);
                } else {
                    alert(`Export r√©ussi : ${grilles.length} grille(s) export√©e(s)`);
                }

            } catch (err) {
                console.error('Erreur exportation grilles:', err);
                alert('Erreur lors de l\'exportation des grilles.');
            }
        }

        // ========================================
        // EXPORT DES √âCHELLES DE PERFORMANCE
        // ========================================
        function exporterEchelles() {
            try {
                const echellesTemplates = JSON.parse(localStorage.getItem('echellesTemplates') || '[]');
                const niveauxEchelle = JSON.parse(localStorage.getItem('niveauxEchelle') || '[]');
                const configEchelle = JSON.parse(localStorage.getItem('configEchelle') || '{}');

                // V√©rifier qu'il y a des donn√©es
                if (echellesTemplates.length === 0 && niveauxEchelle.length === 0 && Object.keys(configEchelle).length === 0) {
                    alert('Aucune √©chelle de performance √† exporter.\n\nConfigure d\'abord ton √©chelle dans R√©glages ‚Üí √âchelles de performance.');
                    return;
                }

                // Cr√©er un objet avec toutes les donn√©es d'√©chelles
                const exportData = {
                    echellesTemplates: echellesTemplates,
                    niveauxEchelle: niveauxEchelle,
                    configEchelle: configEchelle
                };

                // Cr√©er le fichier JSON
                const json = JSON.stringify(exportData, null, 2);
                const blob = new Blob([json], { type: 'application/json' });
                const url = URL.createObjectURL(blob);

                // T√©l√©charger
                const a = document.createElement('a');
                a.href = url;
                const dateStr = new Date().toISOString().slice(0, 10);
                a.download = `echelles-performance-${dateStr}.json`;
                a.click();
                URL.revokeObjectURL(url);

                if (typeof afficherNotificationSucces === 'function') {
                    afficherNotificationSucces(`Export r√©ussi : √©chelle(s) export√©e(s)`);
                } else {
                    alert(`Export r√©ussi : √©chelle(s) export√©e(s)`);
                }

            } catch (err) {
                console.error('Erreur exportation √©chelles:', err);
                alert('Erreur lors de l\'exportation des √©chelles.');
            }
        }

        // ========================================
        // EXPORT DES PRODUCTIONS
        // ========================================
        function exporterProductions() {
            try {
                const productions = JSON.parse(localStorage.getItem('productions') || '[]');

                if (productions.length === 0) {
                    alert('Aucune production √† exporter.\n\nCr√©e d\'abord des productions dans R√©glages ‚Üí Productions.');
                    return;
                }

                // Cr√©er le fichier JSON
                const json = JSON.stringify(productions, null, 2);
                const blob = new Blob([json], { type: 'application/json' });
                const url = URL.createObjectURL(blob);

                // T√©l√©charger
                const a = document.createElement('a');
                a.href = url;
                const dateStr = new Date().toISOString().slice(0, 10);
                a.download = `productions-${dateStr}.json`;
                a.click();
                URL.revokeObjectURL(url);

                if (typeof afficherNotificationSucces === 'function') {
                    afficherNotificationSucces(`Export r√©ussi : ${productions.length} production(s) export√©e(s)`);
                } else {
                    alert(`Export r√©ussi : ${productions.length} production(s) export√©e(s)`);
                }

            } catch (err) {
                console.error('Erreur exportation productions:', err);
                alert('Erreur lors de l\'exportation des productions.');
            }
        }

        // ========================================
        // IMPORT DES GRILLES D'√âVALUATION
        // ========================================
        function importerGrilles(event) {
            const fichier = event.target.files[0];
            if (!fichier) return;

            const lecteur = new FileReader();
            lecteur.onload = function(e) {
                try {
                    const grillesImportees = JSON.parse(e.target.result);

                    // Validation structure
                    if (!Array.isArray(grillesImportees)) {
                        alert('Format invalide : le fichier doit contenir un tableau de grilles.');
                        return;
                    }

                    // Validation contenu
                    for (let grille of grillesImportees) {
                        if (!grille.id || !grille.nom || !grille.criteres) {
                            alert('Format invalide : chaque grille doit avoir un id, un nom et des crit√®res.');
                            return;
                        }
                    }

                    // Charger les grilles existantes
                    let grillesTemplates = JSON.parse(localStorage.getItem('grillesTemplates') || '[]');

                    // Fusionner (remplacer si ID existe, ajouter sinon)
                    let nbAjoutees = 0;
                    let nbMisesAJour = 0;

                    grillesImportees.forEach(grilleImportee => {
                        const index = grillesTemplates.findIndex(g => g.id === grilleImportee.id);
                        if (index >= 0) {
                            grillesTemplates[index] = grilleImportee;
                            nbMisesAJour++;
                        } else {
                            grillesTemplates.push(grilleImportee);
                            nbAjoutees++;
                        }
                    });

                    // Sauvegarder
                    localStorage.setItem('grillesTemplates', JSON.stringify(grillesTemplates));

                    // Notification
                    let message = `Import r√©ussi :\n‚Ä¢ ${nbAjoutees} grille(s) ajout√©e(s)\n‚Ä¢ ${nbMisesAJour} grille(s) mise(s) √† jour`;

                    if (typeof afficherNotificationSucces === 'function') {
                        afficherNotificationSucces(message.replace(/\n/g, ' '));
                    } else {
                        alert(message);
                    }

                    // R√©initialiser le champ fichier
                    event.target.value = '';

                } catch (err) {
                    console.error('Erreur import grilles:', err);
                    alert('Fichier JSON invalide ou format incorrect.');
                }
            };
            lecteur.readAsText(fichier);
        }

        // ========================================
        // IMPORT DES √âCHELLES DE PERFORMANCE
        // ========================================
        function importerEchelles(event) {
            const fichier = event.target.files[0];
            if (!fichier) return;

            const lecteur = new FileReader();
            lecteur.onload = function(e) {
                try {
                    const donneesImportees = JSON.parse(e.target.result);

                    // Validation structure (doit contenir au moins une des trois cl√©s)
                    if (!donneesImportees.echellesTemplates && !donneesImportees.niveauxEchelle && !donneesImportees.configEchelle) {
                        alert('Format invalide : le fichier doit contenir echellesTemplates, niveauxEchelle ou configEchelle.');
                        return;
                    }

                    // Importer echellesTemplates
                    if (donneesImportees.echellesTemplates) {
                        localStorage.setItem('echellesTemplates', JSON.stringify(donneesImportees.echellesTemplates));
                    }

                    // Importer niveauxEchelle
                    if (donneesImportees.niveauxEchelle) {
                        localStorage.setItem('niveauxEchelle', JSON.stringify(donneesImportees.niveauxEchelle));
                    }

                    // Importer configEchelle
                    if (donneesImportees.configEchelle) {
                        localStorage.setItem('configEchelle', JSON.stringify(donneesImportees.configEchelle));
                    }

                    // Notification
                    let message = 'Import r√©ussi : √âchelle(s) de performance import√©e(s)';

                    if (typeof afficherNotificationSucces === 'function') {
                        afficherNotificationSucces(message);
                    } else {
                        alert(message);
                    }

                    // R√©initialiser le champ fichier
                    event.target.value = '';

                    // Recharger la page pour appliquer les changements
                    if (confirm('Import termin√© ! Recharger la page pour voir les √©chelles import√©es ?')) {
                        location.reload();
                    }

                } catch (err) {
                    console.error('Erreur import √©chelles:', err);
                    alert('Fichier JSON invalide ou format incorrect.');
                }
            };
            lecteur.readAsText(fichier);
        }

        // ========================================
        // IMPORT DES PRODUCTIONS
        // ========================================
        function importerProductions(event) {
            const fichier = event.target.files[0];
            if (!fichier) return;

            const lecteur = new FileReader();
            lecteur.onload = function(e) {
                try {
                    const productionsImportees = JSON.parse(e.target.result);

                    // Validation structure
                    if (!Array.isArray(productionsImportees)) {
                        alert('Format invalide : le fichier doit contenir un tableau de productions.');
                        return;
                    }

                    // Validation contenu
                    for (let prod of productionsImportees) {
                        if (!prod.id || !prod.titre || !prod.type) {
                            alert('Format invalide : chaque production doit avoir au minimum un id, un titre et un type.');
                            return;
                        }
                    }

                    // Charger les productions existantes (cl√©: productions)
                    let productions = JSON.parse(localStorage.getItem('productions') || '[]');

                    // Fusionner (remplacer si ID existe, ajouter sinon)
                    let nbAjoutees = 0;
                    let nbMisesAJour = 0;

                    productionsImportees.forEach(prodImportee => {
                        const index = productions.findIndex(p => p.id === prodImportee.id);
                        if (index >= 0) {
                            productions[index] = prodImportee;
                            nbMisesAJour++;
                        } else {
                            productions.push(prodImportee);
                            nbAjoutees++;
                        }
                    });

                    // Sauvegarder (cl√©: productions)
                    localStorage.setItem('productions', JSON.stringify(productions));

                    // Recalculer si module disponible
                    if (typeof afficherTableauProductions === 'function') {
                        afficherTableauProductions();
                    }

                    // Notification
                    let message = `Import r√©ussi :\n‚Ä¢ ${nbAjoutees} production(s) ajout√©e(s)\n‚Ä¢ ${nbMisesAJour} production(s) mise(s) √† jour`;

                    if (typeof afficherNotificationSucces === 'function') {
                        afficherNotificationSucces(message.replace(/\n/g, ' '));
                    } else {
                        alert(message);
                    }

                    // R√©initialiser le champ fichier
                    event.target.value = '';

                    // Recharger la page pour appliquer les changements
                    if (confirm('Import termin√© ! Recharger la page pour voir les productions import√©es ?')) {
                        location.reload();
                    }

                } catch (err) {
                    console.error('Erreur import productions:', err);
                    alert('Fichier JSON invalide ou format incorrect.');
                }
            };
            lecteur.readAsText(fichier);
        }
    </script>
</body>

</html>