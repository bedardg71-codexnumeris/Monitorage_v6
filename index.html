<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Système de suivi Beta 93 - Correctifs export</title>

    <!-- CSS externe requis pour styles complets -->
    <link rel="stylesheet" href="styles.css?v=2025120209">

    <style>
        /* Les styles embarqués restent ici */
        /* ===============================
           VARIABLES CSS - DESIGN SYSTÈME Beta 0.60
           Synchronisé avec styles.css
           =============================== */
        :root {
            /* === PALETTE DE COULEURS === */

            /* Bleus - Couleurs principales */
            --bleu-principal: #032e5c;
            --bleu-fonce: #0f1e3a;
            --bleu-moyen: #2a4a8a;
            --bleu-clair: #065dbb;
            --bleu-leger: #6b85b3;
            --bleu-carte: #9fc5e8;
            --bleu-pale: #e8f2fd;
            --bleu-tres-pale: #f0f8ff;
            --bleu-simulation: #1a5266;
            --bleu-anonymisation: #0f1e3a;

            /* Couleurs d'accent */
            --orange-accent: #ff6b35;
            --vert-pale: #f8fef8;
            --vert-doux: #b8d4b8;
            --vert-leger: #2a8a6a;
            --vert-succes: #28a745;

            /* Couleurs pratiques d'évaluation */
            --som-orange: #ff6f00;
            --pan-bleu: #0277bd;
            --hybride-violet: #9c27b0;

            /* Couleurs de tableau */
            --table-hover: var(--bleu-carte);    /* Couleur hover des rangées (plus foncé, texte reste lisible) */

            /* === NAVIGATION === */
            --nav-bg: #f8f9fa;
            --nav-normal: #04376f;
            --nav-hover: #3e98f9;
            --nav-actif: #054a95;
            --nav-bordure-actif: var(--orange-accent);

            /* Navigation - États actifs par mode */
            --nav-actif-normal: #2a4a8a;
            --nav-actif-simulation: #2a6a7a;
            --nav-actif-anonymisation: #2a3d5a;

            /* === SOUS-NAVIGATION === */
            --sous-nav-bg: #e8f2fd;
            --sous-nav-normal: #054a95;
            --sous-nav-hover: #3e98f9;
            --sous-nav-actif: #065dbb;

            /* Sous-navigation - Fonds par mode */
            --sous-nav-bg-normal: #e8f2fd;
            --sous-nav-bg-simulation: #e0f0f0;
            --sous-nav-bg-anonymisation: #dce8f5;

            /* === BOUTONS D'ACTION - Palette Nuit Élégante === */
            --btn-principal: #032e5c;
            --btn-principal-hover: #054a95;
            --btn-ajouter: #1e5a4a;
            --btn-ajouter-hover: #165040;
            --btn-modifier: #4a3a6a;
            --btn-modifier-hover: #3a2a5a;
            --btn-confirmer: #1e5a4a;
            --btn-confirmer-hover: #165040;
            --btn-annuler: #d97706;
            --btn-annuler-hover: #b45309;
            --btn-supprimer: #8a2a2a;
            --btn-supprimer-hover: #7a1a1a;

            /* === INDICATEURS DE RISQUE === */
            --risque-nul: #065dbb;
            --risque-minimal: #28a745;
            --risque-faible: #90EE90;
            --risque-modere: #ffc107;
            --risque-eleve: #fd7e14;
            --risque-tres-eleve: #dc3545;
            --risque-critique: #721c24;

            /* === COULEURS GRISES === */
            --gris-tres-fonce: #222222;
            --gris-fonce: #333333;
            --gris-moyen: #666666;
            --gris-clair: #999999;
            --gris-tres-clair: #cccccc;
            --gris-tres-pale: #f9f9f9;

            /* === BORDURES === */
            --bordure-claire: #dddddd;
            --bordure-moyenne: #cccccc;

            /* === ALERTES - Attention (orange/terracotta) === */
            --alerte-fond-attention: #fff8f0;
            --alerte-bordure-attention: #ff6b35;
            --alerte-texte-attention: #8a4a2a;

            /* === ALERTES - Information (bleue) === */
            --alerte-fond-information: #e8f2fd;
            --alerte-bordure-information: #032e5c;
            --alerte-texte-information: #032e5c;

            /* === ALERTES - Succès (sarcelle) === */
            --alerte-fond-succes: #e8f5f2;
            --alerte-bordure-succes: #1e5a4a;
            --alerte-texte-succes: #165040;

            /* === ALERTES - Erreur (rouge) === */
            --alerte-fond-erreur: #f8e8e8;
            --alerte-bordure-erreur: #8a2a2a;
            --alerte-texte-erreur: #7a1a1a;

            /* === ÉTATS FORMULAIRES === */
            --etat-erreur-fond: #fff8f0;
            --etat-erreur-bordure: #ff6b35;
            --etat-erreur-texte: #8a4a2a;
            --etat-valide-fond: #e8f5f2;
            --etat-valide-bordure: #1e5a4a;
            --etat-valide-texte: #165040;
            --etat-verrouille-fond: #e9ecef;
            --etat-verrouille-bordure: #6c757d;
            --etat-verrouille-texte: #495057;

            /* === BADGES - Statuts d'évaluation === */
            --badge-evalue-fond: #e8f5f2;
            --badge-evalue-texte: #165040;
            --badge-evalue-bordure: #b3d9cf;
            --badge-non-evalue-fond: #f8f9fa;
            --badge-non-evalue-texte: #6c757d;
            --badge-non-evalue-bordure: #dee2e6;

            /* === ESPACEMENT === */
            --espacement-petit: 10px;
            --espacement-moyen: 20px;
            --espacement-grand: 30px;

            /* === CALENDRIER === */
            --jour-cours-reel-bg: #e3f2fd;
            --reprise-bg: #fff3e0;
            --conge-bg: #ffebee;
            --planification-bg: #f3e5f5;
            --examens-bg: #fce4ec;
            --weekend-bg: #f5f5f5;

            /* === COMPATIBILITÉ (anciennes variables) === */
            --succes: var(--vert-succes);
        }

        /* ===============================
           MODE ASSISTÉ - CONVERSION BLEU → SARCELLE
           =============================== */
        body[data-mode="simulation"] {
            --bleu-carte: #9ac5d5;            /* Sarcelle carte (équivalent sarcelle) */
            --table-hover: #9ac5d5;           /* Hover sarcelle pour tableaux */
        }

        /* ===============================
           MODE ANONYMISÉ - BLEUS DÉSATURÉS
           =============================== */
        body[data-mode="anonymisation"] {
            --bleu-carte: #9aacba;            /* Bleu désaturé carte */
            --table-hover: #9aacba;           /* Hover bleu gris pour tableaux */
        }

        /* ===============================
           RESET ET BASE
           =============================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            width: 100%;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: white;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            width: 100%;
            overflow-x: hidden;
        }

        /* ===============================
           CONTENEUR PRINCIPAL
           =============================== */
        .conteneur {
            width: 100%;
            margin: 0;
            background: white;
            overflow: hidden;
        }

        /* ===============================
           EN-TÊTE
           =============================== */
        /* En-tête : styles définis dans styles.css */
        /* Dégradé bleu avec adaptation aux modes */

        /* ===============================
           NAVIGATION PRINCIPALE
           =============================== */
        /* Navigation principale et sous-navigation : styles définis dans styles.css */
        /* Glassmorphisme avec adaptation aux modes */

        /* OVERRIDE pour sous-navigation - Option B : effet de profondeur */
        /* Adaptation aux modes : la sous-navigation prend la couleur du mode actif */

        /* Mode Normal (par défaut) */
        body[data-mode="normal"] .sous-navigation,
        .sous-navigation {
            background:
                linear-gradient(rgba(0, 0, 0, 0.15), rgba(0, 0, 0, 0.15)),
                linear-gradient(135deg, var(--bleu-principal) 0%, var(--bleu-fonce) 100%) !important;
        }

        /* Mode Anonymisé */
        body[data-mode="anonymisation"] .sous-navigation {
            background:
                linear-gradient(rgba(0, 0, 0, 0.15), rgba(0, 0, 0, 0.15)),
                linear-gradient(135deg, var(--bleu-principal) 0%, var(--bleu-fonce) 100%) !important;
        }

        /* Mode Assisté (sarcelle - plus foncé pour compenser luminosité) */
        body[data-mode="simulation"] .sous-navigation {
            background:
                linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)),
                linear-gradient(135deg, var(--bleu-principal) 0%, var(--bleu-fonce) 100%) !important;
        }

        /* ===============================
           CONTENU PRINCIPAL
           =============================== */
        .contenu {
            padding: var(--espacement-grand);
            min-height: 500px;
        }

        /* ===============================
           SECTIONS ET SOUS-SECTIONS
           =============================== */
        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: apparition 0.3s ease;
        }

        .sous-section {
            display: none;
        }

        .sous-section.active {
            display: block;
            animation: apparition 0.3s ease;
        }

        @keyframes apparition {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===============================
           CARTES
           =============================== */
        .carte {
            background: white;
            border: 1px solid var(--bleu-pale);
            border-radius: 8px;
            padding: var(--espacement-moyen);
            margin-bottom: var(--espacement-moyen);
            box-shadow: 0 2px 8px rgba(3, 46, 92, 0.05);
        }

        .carte h3 {
            color: var(--bleu-principal);
            font-size: 1.1rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--bleu-pale);
        }

        /* ===============================
           BADGES
           =============================== */
        /* Badges définis dans styles.css */

        /* ===============================
           FORMULAIRES
           =============================== */
        .controle-form {
            width: 100%;
            padding: 8px;
            border: 1px solid var(--bordure-claire);
            border-radius: 4px;
            font-size: 0.95rem;
            transition: border-color 0.2s;
        }

        .controle-form:focus {
            outline: none;
            border-color: var(--bleu-principal);
            box-shadow: 0 0 0 3px rgba(3, 46, 92, 0.1);
        }

        .groupe-form {
            margin-bottom: 15px;
        }

        .groupe-form label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--bleu-principal);
        }

        /* ===============================
           TABLEAUX
           =============================== */
        .tableau {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .tableau th {
            background: var(--bleu-moyen);
            padding: 10px;
            text-align: left;
            border: 1px solid var(--bordure-claire);
            font-weight: 600;
            color: white;
        }

        /* Coins arrondis sur l'en-tête */
        .tableau thead tr:first-child th:first-child {
            border-top-left-radius: 6px;
        }

        .tableau thead tr:first-child th:last-child {
            border-top-right-radius: 6px;
        }

        .tableau td {
            padding: 10px;
            border: 1px solid var(--bordure-claire);
        }

        .tableau tr:hover {
            background: var(--table-hover);
        }

        /* ===============================
           UTILITAIRES
           =============================== */
        .text-muted {
            color: var(--gris-moyen);
        }

        .mt-3 {
            margin-top: 15px;
        }

        .btn-groupe {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        /* ===============================
           NOTIFICATIONS (pour module 14-utilitaires.js)
           =============================== */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(400px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .notification-succes {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--vert-succes);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 9999;
            animation: slideIn 0.3s ease;
            max-width: 400px;
        }

        .notification-details {
            margin-top: 5px;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* ===============================
           ZONE DE DEBUG
           =============================== */
        .debug-zone {
            background: var(--gris-tres-pale);
            border: 2px dashed #6c757d;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .debug-zone h4 {
            color: var(--gris-moyen);
            margin-bottom: 10px;
        }

        /* ===============================
           MOTEUR DE RECHERCHE AIDE
           =============================== */
        #aide-recherche-input:focus {
            border-color: var(--bleu-principal);
            box-shadow: 0 0 0 3px rgba(3, 46, 92, 0.1);
        }

        #aide-recherche-clear:hover {
            color: var(--risque-critique);
            transform: translateY(-50%) scale(1.2);
        }

        mark.aide-surlignage {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                background-color: #fff;
            }
            to {
                opacity: 1;
                background-color: #ffeb3b;
            }
        }

        /* Animation des cartes lors du filtrage */
        #section-aide .carte {
            transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
        }

        #section-aide .carte[style*="display: none"] {
            opacity: 0;
            transform: scale(0.98);
        }

        /* ===============================
           CLASSES UTILITAIRES POUR REMPLACER INLINE STYLES
           =============================== */

        /* Titres de cartes avec toggle */
        .carte-titre-avec-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .emoji-container {
            font-size: 1.2rem;
        }

        /* Grille de cartes métriques */
        .grille-cartes-metriques {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        /* Carte métrique individuelle */
        .carte-metrique-bleue {
            background: var(--bleu-tres-pale);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--bleu-principal);
        }

        .carte-metrique-verte {
            background: var(--alerte-fond-succes);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--btn-confirmer);
        }

        .carte-metrique-jaune {
            background: var(--alerte-fond-attention);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--risque-eleve);
        }

        .carte-metrique-orange {
            background: var(--alerte-fond-attention);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--risque-tres-eleve);
        }

        .carte-metrique-rouge {
            background: var(--alerte-fond-erreur);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--risque-critique);
        }

        /* Contenu de carte métrique */
        .carte-metrique-contenu {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .carte-metrique-label {
            font-size: 0.9rem;
            color: var(--gris-moyen);
        }

        .carte-metrique-valeur {
            font-size: 1.8rem;
            color: var(--bleu-principal);
        }

        .carte-metrique-valeur-verte {
            font-size: 1.8rem;
            color: var(--btn-confirmer);
        }

        .carte-metrique-valeur-jaune {
            font-size: 1.8rem;
            color: var(--risque-eleve);
        }

        .carte-metrique-valeur-orange {
            font-size: 1.8rem;
            color: var(--risque-tres-eleve);
        }

        .carte-metrique-valeur-rouge {
            font-size: 1.8rem;
            color: var(--risque-critique);
        }

        .carte-metrique-valeur-violette {
            font-size: 1.8rem;
            color: var(--btn-modifier);
        }

        /* Barres de progression pour patterns */
        .barre-progression-container {
            margin-top: 8px;
            background: white;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }

        .barre-progression {
            height: 100%;
            width: 0%;
        }

        .barre-progression-verte {
            background: var(--btn-confirmer);
        }

        .barre-progression-violette {
            background: var(--btn-modifier);
        }

        .barre-progression-jaune {
            background: var(--risque-modere);
        }

        .barre-progression-rouge {
            background: var(--btn-annuler);
        }

        /* Carte métrique violette pour défi spécifique */
        .carte-metrique-violette {
            background: var(--alerte-fond-information);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--btn-modifier);
        }

        /* Carte métrique jaune-pale pour blocage émergent */
        .carte-metrique-jaune-pale {
            background: var(--alerte-fond-attention);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--risque-modere);
        }

        /* Carte métrique rouge-attention pour blocage critique */
        .carte-metrique-rouge-attention {
            background: var(--alerte-fond-attention);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--btn-annuler);
        }

        /* ===== SECTION MATÉRIEL: Utilitaires de formulaire ===== */

        /* Titre avec emoji toggles */
        .titre-avec-emoji-toggles {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .titre-emoji-container {
            font-size: 1.2rem;
        }

        /* Grilles de formulaire */
        .grille-form-2col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .grille-form-3col {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .grille-form-3col-type-pond-grille {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .grille-form-2col-desc-titre {
            display: grid;
            grid-template-columns: 1.5fr 2fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .grille-form-2col-objectif-tache {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        /* Carte de configuration spéciale (portfolio, etc.) */
        .carte-config-portfolio {
            display: none;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--bleu-carte);
            border-radius: 6px;
            border: 1px solid var(--bleu-moyen);
        }

        .carte-config-portfolio h5 {
            color: var(--bleu-principal);
            margin-bottom: 15px;
        }

        /* Message info artefact */
        .msg-info-artefact {
            display: none;
            padding: 10px;
            background: var(--bleu-pale);
            border-radius: 4px;
            color: var(--bleu-principal);
            font-size: 0.85rem;
            margin-bottom: 15px;
        }

        /* Note explicative dans config */
        .note-explicative-config {
            background: var(--bleu-tres-pale);
            padding: 10px;
            border-radius: 4px;
            font-size: 0.9rem;
            margin-top: 15px;
        }

        /* Section accordéon import/export */
        .section-accordeon {
            display: none;
            margin-top: 20px;
        }

        .accordeon-btns-flex {
            display: flex;
            gap: 10px;
        }

        .accordeon-btns-flex button {
            flex: 1;
        }

        .accordeon-aide-text {
            margin-top: 10px;
        }

        /* ===== SECTION RÉGLAGES: Utilitaires ===== */

        /* Titre avec bouton action à droite */
        .titre-avec-bouton-action {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .titre-avec-bouton-action button {
            font-size: 0.9rem;
            padding: 8px 16px;
        }

        /* ========================================
           UTILITAIRES CSS - Espacement et texte
           ======================================== */

        /* Marges verticales */
        .mt-5 { margin-top: 5px; }
        .mt-8 { margin-top: 8px; }
        .mt-10 { margin-top: 10px; }
        .mt-15 { margin-top: 15px; }
        .mb-10 { margin-bottom: 10px; }
        .mb-12 { margin-bottom: 12px; }
        .mb-15 { margin-bottom: 15px; }
        .mb-20 { margin-bottom: 20px; }
        .my-10 { margin: 10px 0; }
        .my-5-mx-20 { margin: 5px 0 5px 20px; }

        /* Marges horizontales */
        .ml-4 { margin-left: 4px; }
        .ml-10 { margin-left: 10px; }
        .ml-20-mb-10 {
            margin-left: 20px;
            margin-bottom: 10px;
        }

        /* Padding */
        .p-10 { padding: 10px; }
        .py-8 { padding: 8px 0; }

        /* Combinaisons margin-padding */
        .mt-10-pl-10 {
            margin-top: 10px;
            padding-left: 10px;
        }

        /* Alignement et texte */
        .text-center { text-align: center; }
        .text-bleu-principal { color: var(--bleu-principal); }
        .text-muted {
            font-size: 0.9rem;
            color: var(--gris-moyen);
        }
        .text-muted-sm {
            font-size: 0.9em;
            color: var(--gris-moyen);
        }
        .lh-relaxed { line-height: 1.8; }

        /* Dimensions */
        .w-100 { width: 100%; }

        /* Typographie */
        .fw-bold { font-weight: bold; }

        /* Interactivité */
        .cursor-pointer { cursor: pointer; }

        /* Flexbox */
        .flex-1 { flex: 1; }
        .d-flex-gap-10 {
            display: flex;
            gap: 10px;
        }
        .d-flex-between {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        /* Styles de titres réutilisables */
        .titre-section-aide {
            font-weight: bold;
            color: var(--bleu-principal);
            margin-top: 15px;
        }

        .titre-section-principal {
            color: var(--bleu-principal);
            border-bottom: 2px solid var(--bleu-pale);
            padding-bottom: 5px;
            margin: 25px 0 15px 0;
        }

        .titre-cliquable {
            font-weight: bold;
            cursor: pointer;
            color: var(--bleu-principal);
        }

        .titre-bleu-mb10 {
            color: var(--bleu-principal);
            margin-bottom: 10px;
        }

        /* Éléments de contenu */
        .ligne-separee {
            padding: 10px;
            border-bottom: 1px solid var(--bordure-claire);
        }

        .carte-grise-info {
            margin: 15px 0;
            padding: 15px;
            background: var(--gris-tres-pale);
            border-radius: 6px;
        }

        .carte-encadree {
            margin: 20px 0;
            padding: 15px;
            background: white;
            border: 2px solid var(--bleu-moyen);
            border-radius: 6px;
        }

        .alerte-info-bleu {
            margin: 15px 0;
            padding: 15px;
            background: var(--bleu-tres-pale);
            border-left: 4px solid var(--bleu-moyen);
            border-radius: 4px;
        }

        .separateur-section {
            margin: 25px 0;
            border: none;
            border-top: 2px solid var(--bleu-pale);
        }

        .tableau-blanc {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        .titre-1-8 {
            font-size: 1.8rem;
            color: var(--bleu-principal);
        }

        .carte-bleu-encadree {
            background: var(--bleu-tres-pale);
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--bleu-principal);
        }

        .alerte-info-grise {
            margin: 15px 0;
            padding: 15px;
            background: var(--gris-tres-pale);
            border-left: 4px solid var(--bleu-moyen);
            border-radius: 4px;
        }

        .titre-section-haut {
            color: var(--bleu-principal);
            margin-top: 25px;
            margin-bottom: 15px;
        }

        .titre-sans-marge-haut {
            color: var(--bleu-principal);
            margin-top: 0;
        }

        .m-0 { margin: 0; }

        .justify-end { justify-content: flex-end; }

        .ligne-separee-danger {
            padding: 10px;
            border-bottom: 1px solid var(--bordure-claire);
            color: var(--risque-tres-eleve);
        }

        .ligne-separee-success {
            padding: 10px;
            color: var(--vert-succes);
        }

        .ligne-separee-warning {
            padding: 10px;
            border-bottom: 1px solid var(--bordure-claire);
            color: var(--risque-modere);
        }

        .ligne-separee-info {
            padding: 10px;
            border-bottom: 1px solid var(--bordure-claire);
            color: var(--risque-faible);
        }

        .ligne-separee-bleu {
            padding: 10px;
            border-bottom: 1px solid var(--bleu-pale);
        }

        /* Styles de texte additionnels */
        .text-sm-pointer {
            font-size: 0.85rem;
            cursor: pointer;
        }

        .text-sm-muted {
            font-size: 0.85rem;
            color: var(--gris-moyen);
        }

        .text-xs-normal {
            font-weight: normal;
            font-size: 0.75rem;
        }

        .text-italic { font-style: italic; }

        .text-warning-dark { color: var(--alerte-texte-attention); }
        .text-secondary { color: var(--gris-moyen); }

        /* Cellules de tableau */
        .td-left {
            padding: 12px;
            text-align: left;
        }

        .td-center-clickable {
            padding: 12px;
            text-align: center;
            width: 90px;
            cursor: pointer;
            user-select: none;
        }

        /* Combinaisons typographiques */
        .mt-5-text-95 {
            margin-top: 5px;
            font-size: 0.95em;
        }

        .mt-12-fw-600 {
            margin-top: 12px;
            font-weight: 600;
        }

        /* Backgrounds */
        .bg-white { background: white; }

        /* Dimensions supplémentaires */
        .w-100px { width: 100px; }
        .w-100-pointer {
            width: 100%;
            cursor: pointer;
        }

        /* Marges verticales supplémentaires */
        .mt-20 { margin-top: 20px; }
        .mb-25 { margin-bottom: 25px; }
        .my-20 { margin: 20px 0; }
        .my-20-mb-15 { margin: 20px 0 15px 0; }

        /* Marges horizontales supplémentaires */
        .mr-10 { margin-right: 10px; }
        .ml-10-bleu {
            color: var(--bleu-principal);
            margin-left: 10px;
        }

        /* Marges complexes */
        .m-5-0-0-20 { margin: 5px 0 0 20px; }
        .m-0-pl-20-lh {
            margin: 0;
            padding-left: 20px;
            line-height: 1.6;
        }
        .m-0-text-muted {
            margin: 0;
            font-size: 0.9rem;
            color: var(--gris-moyen);
        }
        .mb-15-lh {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        /* Padding de tableau */
        .td-right-bleu {
            padding: 10px;
            text-align: right;
            border-bottom: 1px solid var(--bleu-leger);
        }
        .td-bold-bleu {
            padding: 10px;
            font-weight: bold;
            border-bottom: 1px solid var(--bleu-pale);
        }
        .td-bleu-separee {
            padding: 10px;
            border-bottom: 1px solid var(--bleu-leger);
        }

        /* Alertes */
        .alerte-warning-jaune {
            margin: 15px 0;
            padding: 15px;
            background: var(--alerte-fond-attention);
            border-left: 4px solid #ffc107;
            border-radius: 4px;
        }

        /* Cartes */
        .carte-bleu-pale {
            margin-top: 15px;
            padding: 12px;
            background: var(--bleu-tres-pale);
            border-radius: 6px;
        }

        /* Labels et titres */
        .label-fw-600-block {
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
        }
        .label-fw-600-bleu {
            font-weight: 600;
            color: var(--bleu-principal);
            margin-bottom: 5px;
        }
        .titre-bleu-mb8 {
            color: var(--bleu-principal);
            margin-bottom: 8px;
        }
        .titre-105-mt20 {
            font-size: 1.05em;
            margin-top: 20px;
        }

        /* Flexbox spécifiques */
        .d-flex-between-sm-muted-mt5 {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--gris-moyen);
            margin-top: 5px;
        }
        .d-flex-between-center {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .d-flex-center-pointer {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        /* Couleurs de texte */
        .text-succes-bold {
            color: var(--succes);
            font-weight: bold;
        }

        /* ===============================
           BULLES FLOTTANTES EN-TÊTE
           =============================== */
        .bulles-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 0;
        }

        .bulle {
            position: absolute;
            border-radius: 50%;
            animation: floatUp 30s infinite linear;
            opacity: 0.35;
        }

        /* Tailles variées */
        .bulle.petite {
            width: 8px;
            height: 8px;
        }

        .bulle.moyenne {
            width: 12px;
            height: 12px;
        }

        .bulle.grande {
            width: 16px;
            height: 16px;
        }

        /* Couleurs des pratiques */
        .bulle.som {
            background: var(--som-orange);
        }

        .bulle.pan-maitrise {
            background: var(--pan-bleu);
        }

        .bulle.pan-spec {
            background: var(--hybride-violet);
        }

        .bulle.pan-denotation {
            background: var(--risque-modere);
        }

        /* Animation organique comme du pollen - mouvement fluide continu avec courbes */
        @keyframes floatUp {
            0% { transform: translateX(calc(0vw + var(--start-x))) translateY(calc(0vh + var(--start-y))); opacity: 0; }
            5% { transform: translateX(calc(4vw + var(--start-x))) translateY(calc(-2vh + var(--drift-y) * 0.05 + var(--start-y))); opacity: 0.3; }
            10% { transform: translateX(calc(8vw + var(--start-x))) translateY(calc(-4vh + var(--drift-y) * 0.10 + var(--start-y))); opacity: 0.4; }
            15% { transform: translateX(calc(12vw + var(--start-x))) translateY(calc(-5vh + var(--drift-y) * 0.15 + var(--start-y))); }
            20% { transform: translateX(calc(16vw + var(--start-x))) translateY(calc(-4vh + var(--drift-y) * 0.18 + var(--start-y))); }
            25% { transform: translateX(calc(20vw + var(--start-x))) translateY(calc(-2vh + var(--drift-y) * 0.17 + var(--start-y))); }
            30% { transform: translateX(calc(24vw + var(--start-x))) translateY(calc(-1vh + var(--drift-y) * 0.12 + var(--start-y))); }
            35% { transform: translateX(calc(28vw + var(--start-x))) translateY(calc(-3vh + var(--drift-y) * 0.08 + var(--start-y))); }
            40% { transform: translateX(calc(32vw + var(--start-x))) translateY(calc(-6vh + var(--drift-y) * 0.15 + var(--start-y))); }
            45% { transform: translateX(calc(36vw + var(--start-x))) translateY(calc(-8vh + var(--drift-y) * 0.25 + var(--start-y))); opacity: 0.4; }
            50% { transform: translateX(calc(40vw + var(--start-x))) translateY(calc(-9vh + var(--drift-y) * 0.35 + var(--start-y))); }
            55% { transform: translateX(calc(44vw + var(--start-x))) translateY(calc(-8vh + var(--drift-y) * 0.40 + var(--start-y))); }
            60% { transform: translateX(calc(48vw + var(--start-x))) translateY(calc(-7vh + var(--drift-y) * 0.42 + var(--start-y))); }
            65% { transform: translateX(calc(52vw + var(--start-x))) translateY(calc(-10vh + var(--drift-y) * 0.50 + var(--start-y))); }
            70% { transform: translateX(calc(56vw + var(--start-x))) translateY(calc(-14vh + var(--drift-y) * 0.62 + var(--start-y))); }
            75% { transform: translateX(calc(60vw + var(--start-x))) translateY(calc(-17vh + var(--drift-y) * 0.75 + var(--start-y))); opacity: 0.4; }
            80% { transform: translateX(calc(64vw + var(--start-x))) translateY(calc(-15vh + var(--drift-y) * 0.80 + var(--start-y))); }
            85% { transform: translateX(calc(68vw + var(--start-x))) translateY(calc(-18vh + var(--drift-y) * 0.88 + var(--start-y))); }
            90% { transform: translateX(calc(72vw + var(--start-x))) translateY(calc(-22vh + var(--drift-y) * 0.95 + var(--start-y))); }
            95% { transform: translateX(calc(76vw + var(--start-x))) translateY(calc(-24vh + var(--drift-y) * 0.98 + var(--start-y))); opacity: 0.3; }
            100% { transform: translateX(calc(80vw + var(--start-x))) translateY(calc(-25vh + var(--start-y))); opacity: 0; }
        }

        /* Les positions, délais et durées sont générés dynamiquement par JavaScript
           selon le nombre d'étudiants dans le groupe (voir main.js) */

        /* Toggles */
        .hidden-mb-20 {
            display: none;
            margin-bottom: 20px;
        }
        .hidden-mb-12 {
            display: none;
            margin-bottom: 12px;
        }

        /* Titres colorés avec marges */
        .titre-bleu-mb-15 {
            color: var(--bleu-principal);
            margin-bottom: 15px;
        }
        .titre-bleu-mb-20 {
            color: var(--bleu-principal);
            margin-bottom: 20px;
        }
        .titre-bleu-lg-mb8 {
            color: var(--bleu-principal);
            font-size: 1.5rem;
            margin-bottom: 8px;
        }
        .titre-orange-mb10 {
            color: #e65100;
            margin-bottom: 10px;
        }
        .titre-mt15-fw-bold-bleu {
            margin-top: 15px;
            font-weight: bold;
            color: var(--bleu-principal);
        }

        /* Bordures spécifiques */
        .border-left-succes {
            border-left: 4px solid var(--succes);
        }

        /* Cartes spécifiques */
        .carte-blanche-centree {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid var(--bleu-pale);
            text-align: center;
        }
        .carte-bleu-pale-mt15 {
            margin-top: 15px;
            padding: 15px;
            background: var(--bleu-tres-pale);
            border-radius: 6px;
        }

        /* Alertes spécifiques */
        .alerte-danger-rouge {
            margin: 15px 0;
            padding: 15px;
            background: var(--alerte-fond-erreur);
            border-left: 4px solid #dc3545;
            border-radius: 4px;
        }
        .alerte-warning-or {
            margin: 20px 0;
            padding: 15px;
            background: var(--alerte-fond-attention);
            border-left: 4px solid #ffd700;
            border-radius: 4px;
        }

        /* Backgrounds */
        .bg-bleu-tres-pale { background: var(--bleu-tres-pale); }

        /* Tableaux */
        .table-collapse {
            width: 100%;
            border-collapse: collapse;
        }

        /* Cellules de tableau supplémentaires */
        .td-center-80 {
            padding: 12px;
            text-align: center;
            width: 80px;
        }
        .td-center-60 {
            padding: 12px;
            text-align: center;
            width: 60px;
        }
        .td-left-clickable {
            padding: 12px;
            text-align: left;
            cursor: pointer;
            user-select: none;
        }

        /* Padding spécifiques */
        .px-8-py-15 { padding: 8px 15px; }
        .pt-20 { padding-top: 20px; }

        /* Marges supplémentaires */
        .mb-10-only { margin-bottom: 10px; }
        .mr-8 { margin-right: 8px; }
        .ml-20-lh-95 {
            margin-left: 20px;
            line-height: 1.8;
            font-size: 0.95rem;
        }
        .m-0-pl-20-gray-lh {
            margin: 0;
            padding-left: 20px;
            color: var(--gris-moyen);
            line-height: 1.8;
        }

        /* Dimensions spécifiques */
        .max-w-500-mb-20 {
            max-width: 500px;
            margin-bottom: 20px;
        }

        /* Texte spécifique */
        .mt-10-text-09 {
            margin-top: 10px;
            font-size: 0.9rem;
        }

        /* Espacements */
        .whitespace-nowrap { white-space: nowrap; }

        /* Line heights */
        .lh-2 { line-height: 2; }
        .lh-16 { line-height: 1.6; }

        /* Grid et Flexbox avancés */
        .grid-col-span { grid-column: 1 / -1; }
        .flex-shrink-0 { flex-shrink: 0; }
        .d-flex-gap-10-center {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .grid-4col-gap15-mb20 {
            display: grid;
            grid-template-columns: 1fr 2fr 1.5fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        /* Tailles de police */
        .text-12 { font-size: 1.2rem; }
        .text-11-mb10 {
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        .text-105-mt15 {
            font-size: 1.05em;
            margin-top: 15px;
        }
        .text-09 { font-size: 0.9rem; }
        .text-09-mt5 {
            font-size: 0.9em;
            margin-top: 5px;
        }
        .text-085-mb15 {
            font-size: 0.85rem;
            margin-bottom: 15px;
        }
        .text-08-fw600-danger {
            font-size: 0.8rem;
            font-weight: 600;
            color: #dc2626;
        }
        .text-08-fw600-danger-dark {
            font-size: 0.8rem;
            font-weight: 600;
            color: #991b1b;
        }

        /* Labels avec styles spécifiques */
        .label-block-fw500-mb8 {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        /* Toggles supplémentaires */
        .hidden-mt-20 {
            display: none;
            margin-top: 20px;
        }

        /* Couleurs de texte supplémentaires */
        .text-vert-leger-mb10 {
            color: var(--vert-leger);
            margin-bottom: 10px;
        }
        .text-warning-bold {
            color: var(--risque-modere);
            font-weight: bold;
        }
        .text-danger { color: #e74c3c; }
        .text-danger-bs { color: var(--risque-tres-eleve); }
        .text-warning-856-mt0 {
            color: var(--alerte-texte-attention);
            margin-top: 0;
        }
        .text-warning-856-mb10 {
            color: var(--alerte-texte-attention);
            margin-bottom: 10px;
        }
        .text-purple-mb10 {
            color: #6a1b9a;
            margin-bottom: 10px;
        }

        /* Checkboxes stylisées */
        .checkbox-danger-light {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: #fef2f2;
            border-radius: 4px;
            cursor: pointer;
            user-select: none;
        }
        .checkbox-danger-medium {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: #fee2e2;
            border-radius: 4px;
            cursor: pointer;
            user-select: none;
        }

        /* Couleurs de succès */
        .text-success-dark-mb10 {
            color: #2e7d32;
            margin-bottom: 10px;
        }
        .text-success-mb10 {
            color: var(--vert-succes);
            margin-bottom: 10px;
        }
        .text-success-bold {
            color: var(--vert-succes);
            font-weight: bold;
        }

        /* Couleurs primaires */
        .text-primary-bold {
            color: #007bff;
            font-weight: bold;
        }

        /* Bordures colorées */
        .border-left-purple {
            border-left: 4px solid #9c27b0;
        }
        .border-left-primary {
            border-left: 4px solid #007bff;
        }

        /* Cellules de tableau avec largeurs spécifiques */
        .td-center-40 {
            padding: 12px;
            text-align: center;
            width: 40px;
        }
        .td-center-50 {
            padding: 12px;
            text-align: center;
            width: 50px;
        }
        .td-center-70 {
            padding: 12px;
            text-align: center;
            width: 70px;
        }
        .td-center-90-clickable {
            padding: 12px;
            text-align: left;
            width: 90px;
            cursor: pointer;
            user-select: none;
        }
        .td-center-100-clickable {
            padding: 12px;
            text-align: center;
            width: 100px;
            cursor: pointer;
            user-select: none;
        }
        .td-center-120 {
            padding: 12px;
            text-align: center;
            width: 120px;
        }
        .td-center-120-clickable {
            padding: 12px;
            text-align: center;
            width: 120px;
            cursor: pointer;
            user-select: none;
        }
        .td-center-160 {
            padding: 12px;
            text-align: center;
            width: 160px;
        }
        .td-center-200 {
            padding: 12px;
            text-align: center;
            width: 200px;
        }
        .td-left-100 {
            padding: 12px;
            text-align: left;
            width: 100px;
        }
        .td-left-auto {
            padding: 12px;
            text-align: left;
            width: auto;
        }
        .td-left-140-clickable {
            padding: 12px;
            text-align: left;
            width: 140px;
            cursor: pointer;
            user-select: none;
        }
        .td-right {
            padding: 10px;
            text-align: right;
        }
        .td-bold {
            padding: 10px;
            font-weight: bold;
        }
        .td-bold-30-bleu {
            padding: 10px;
            font-weight: bold;
            width: 30%;
            border-bottom: 1px solid var(--bleu-pale);
        }
        .td-sm-muted-lh {
            padding: 12px;
            font-size: 0.85rem;
            color: var(--gris-moyen);
            line-height: 1.6;
        }
        .td-orange {
            padding: 10px;
            border-bottom: 1px solid var(--bordure-claire);
            color: var(--risque-eleve);
        }
        .td-nowrap-bold {
            padding: 10px 20px;
            font-size: 0.95rem;
            font-weight: 600;
            white-space: nowrap;
        }

        /* Cartes avec backgrounds spécifiques */
        .carte-gradient-bleu {
            background: linear-gradient(90deg, var(--bleu-pale) 0%, var(--bleu-tres-pale) 100%);
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
        }
        .carte-bleu-pale-p15 {
            padding: 15px;
            background: var(--bleu-tres-pale);
            border-radius: 6px;
        }
        .carte-bleu-pale-p15-mb20 {
            padding: 15px;
            background: var(--bleu-tres-pale);
            border-radius: 6px;
            margin-bottom: 20px;
        }
        .carte-bleu-fonce {
            padding: 15px;
            background: var(--bleu-pale);
            border-radius: 8px;
        }
        .carte-info-bleu-clair {
            padding: 15px;
            background: var(--bleu-tres-pale);
            border-radius: 6px;
            border-left: 4px solid #2196f3;
        }
        .carte-white-p15 {
            padding: 15px;
            background: white;
        }
        .carte-purple-header {
            width: 100%;
            background: var(--hybride-violet);
            color: white;
            padding: 10px;
            font-size: 0.9rem;
        }

        /* Zones avec overflow */
        .overflow-x-auto { overflow-x: auto; }
        .overflow-x-border {
            overflow-x: auto;
            border: 1px solid var(--bordure-claire);
            border-radius: 4px;
        }
        .overflow-xy-600 {
            max-height: 600px;
            overflow-x: auto;
            overflow-y: auto;
            border: 1px solid var(--bordure-claire);
            border-radius: 4px;
        }
        .overflow-y-500 {
            max-height: 500px;
            overflow-y: auto;
        }
        .overflow-y-300-border {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--bleu-pale);
            border-radius: 6px;
            padding: 10px;
        }

        /* Dimensions max */
        .max-w-800 {
            max-width: 800px;
            margin: 0 auto;
        }
        .max-w-500 { max-width: 500px; }
        .max-w-400-mb20 {
            max-width: 400px;
            margin-bottom: 20px;
        }
        .max-w-400-mb20-hidden {
            max-width: 400px;
            margin-bottom: 20px;
            display: none;
        }

        /* Largeurs spécifiques */
        .w-200 { width: 200px; }
        .w-120-center {
            width: 120px;
            text-align: center;
        }
        .w-80-select {
            width: 80px;
            padding: 6px 10px;
            border-radius: 4px;
            border: 1px solid var(--bordure-moyenne);
            font-size: 0.95rem;
            margin-right: 10px;
        }
        .w-45 { width: 45%; }
        .w-40 { width: 40%; }
        .w-15 { width: 15%; }

        /* Select/Input full width */
        .select-full-bleu {
            width: 100%;
            padding: 12px 40px 12px 15px;
            font-size: 1rem;
            border: 2px solid var(--bleu-moyen);
            border-radius: 8px;
            outline: none;
            transition: all 0.3s;
        }

        /* Zones de texte vides */
        .empty-state-center-30 {
            text-align: center;
            padding: 30px;
            color: var(--gris-clair);
        }
        .empty-state-center-20 {
            text-align: center;
            padding: 20px;
            color: var(--gris-clair);
        }

        /* Headers et footers spéciaux */
        .sticky-header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: white;
            padding: 20px;
            border-bottom: 2px solid var(--bleu-principal);
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .footer-border-top {
            text-align: right;
            padding-top: 15px;
            border-top: 1px solid #dee2e6;
        }

        /* Bouton clear */
        .btn-clear-input {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            border: none;
            color: var(--gris-clair);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px 10px;
            display: none;
        }

        /* Texte spécial */
        .text-center-leger {
            text-align: center;
            color: var(--bleu-leger);
        }
        .text-underline-bold {
            text-decoration: underline;
            font-weight: 600;
        }

        /* Alertes colorées variées */
        .alerte-success-green {
            margin: 15px 0;
            padding: 15px;
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            border-radius: 4px;
        }
        .alerte-success-dark {
            margin: 15px 0;
            padding: 15px;
            background: #d4edda;
            border-left: 4px solid #28a745;
            border-radius: 4px;
        }
        .alerte-success-bleu-pale {
            margin: 15px 0;
            padding: 15px;
            background: var(--bleu-tres-pale);
            border-left: 4px solid #28a745;
            border-radius: 4px;
        }
        .alerte-info-cyan {
            margin: 15px 0;
            padding: 15px;
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            border-radius: 4px;
        }
        .alerte-info-bleu-ciel {
            margin: 15px 0;
            padding: 15px;
            background: #e1f5fe;
            border-left: 4px solid #03a9f4;
            border-radius: 4px;
        }
        .alerte-warning-orange-clair {
            margin: 15px 0;
            padding: 15px;
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            border-radius: 4px;
        }
        .alerte-warning-orange-fonce {
            margin: 15px 0;
            padding: 15px;
            background: var(--alerte-fond-attention);
            border-left: 4px solid #ff6f00;
            border-radius: 4px;
        }
        .alerte-purple {
            margin: 15px 0;
            padding: 15px;
            background: #f3e5f5;
            border-left: 4px solid #9c27b0;
            border-radius: 4px;
        }
        .alerte-info-grise-my20 {
            margin: 20px 0;
            padding: 15px;
            background: var(--gris-tres-pale);
            border-left: 4px solid var(--bleu-moyen);
            border-radius: 4px;
        }

        /* Cartes encadrées variées */
        .carte-bleu-border {
            margin: 20px 0;
            padding: 15px;
            background: #e7f3ff;
            border: 2px solid var(--bleu-moyen);
            border-radius: 6px;
        }

        /* Marges spéciales */
        .my-15 { margin: 15px 0; }
        .m-8-0-pl20-lh18 {
            margin: 8px 0 0 0;
            padding-left: 20px;
            line-height: 1.8;
        }
        .m-8-0-pl20-lh16 {
            margin: 8px 0 0 0;
            padding-left: 20px;
            line-height: 1.6;
        }

        /* Textes avec marges et couleurs */
        .text-warning-856-sm-mt5 {
            margin: 5px 0 0 0;
            color: var(--alerte-texte-attention);
            font-size: 0.9rem;
        }
        .text-muted-sm-mt5 {
            margin: 5px 0 0 0;
            color: var(--gris-moyen);
            font-size: 0.9rem;
        }

        /* Alertes spéciales */
        .alerte-danger-dark {
            margin: 15px 0;
            padding: 15px;
            background: #721c24;
            color: white;
            border-left: 4px solid #8B0000;
            border-radius: 4px;
        }

        /* Marges variées */
        .mt-3 { margin-top: 3px; }
        .m-10-0-pl20 {
            margin: 10px 0;
            padding-left: 20px;
        }
        .m-10-0-0-20 { margin: 10px 0 0 20px; }
        .m-10-0-0-0 { margin: 10px 0 0 0; }
        .m-0-0-10-0 { margin: 0 0 10px 0; }
        .m-15-0-0-0-sm-bleu {
            margin: 15px 0 0 0;
            font-size: 0.9em;
            color: var(--bleu-principal);
        }
        .m-15-0-0-0-primary {
            margin: 15px 0 0 0;
            color: #007bff;
        }

        /* Textes avec margin 0 et couleurs */
        .m-0-fw600-bleu {
            margin: 0;
            font-weight: 600;
            color: var(--bleu-principal);
        }
        .m-0-bleu-principal {
            margin: 0;
            color: var(--bleu-principal);
        }
        .m-0-bleu-moyen {
            margin: 0;
            color: var(--bleu-moyen);
        }
        .m-0-bleu-moyen-sm {
            margin: 0;
            font-size: 0.95rem;
            color: var(--bleu-moyen);
        }
        .m-0-success {
            margin: 0;
            color: var(--vert-succes);
        }
        .m-0-muted-lh16 {
            margin: 0;
            color: var(--gris-moyen);
            line-height: 1.6;
        }

        /* Flexbox avec marges */
        .mt-8-flex-gap8-wrap {
            margin-top: 8px;
            font-size: 0.9rem;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        .mt-8-flex-col-gap4 {
            margin-top: 8px;
            display: flex;
            flex-direction: column;
            gap: 4px;
            align-items: center;
        }
        .mt-20-flex-gap10-end {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        .mt-20-justify-between {
            margin-top: 20px;
            justify-content: space-between;
        }
        .mt-15-justify-end {
            margin-top: 15px;
            justify-content: flex-end;
        }

        /* Cartes info avec texte */
        .carte-bleu-mt20-center-italic {
            margin-top: 20px;
            text-align: center;
            font-style: italic;
            color: var(--bleu-principal);
        }
        .carte-grise-mt20-sm-muted {
            margin-top: 20px;
            padding: 15px;
            background: var(--gris-tres-pale);
            border-radius: 6px;
            font-size: 0.85rem;
            color: var(--gris-moyen);
        }
        .carte-grise-mt10-sm-muted {
            margin-top: 10px;
            padding: 10px;
            background: var(--gris-tres-pale);
            border-radius: 6px;
            font-size: 0.85rem;
            color: var(--gris-moyen);
        }

        /* Texte taille et couleur */
        .text-09-mt10 {
            margin-top: 10px;
            font-size: 0.9em;
        }
        .text-09-mt10-deep-orange {
            margin-top: 10px;
            font-size: 0.9em;
            color: #bf360c;
        }

        /* Marges spécifiques supplémentaires */
        .mb-30 { margin-bottom: 30px; }
        .mt-0-bleu {
            margin-top: 0;
            color: var(--bleu-principal);
        }
        .mt-0-warning {
            margin-top: 0;
            color: var(--alerte-texte-attention);
        }
        .ml-10-fw-bold {
            margin-left: 10px;
            font-weight: bold;
        }
        .mr-10-icon-18 {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        .mr-10-scale-13 {
            margin-right: 10px;
            transform: scale(1.3);
        }

        /* Cartes supplémentaires */
        .carte-mb25-green {
            margin-bottom: 25px;
            padding: 15px;
            background: #f1f8e9;
            border-radius: 8px;
            border-left: 4px solid #8bc34a;
        }
        .carte-mb25-bleu-clair {
            margin-bottom: 25px;
            padding: 15px;
            background: #e3f2fd;
            border-radius: 8px;
            border-left: 4px solid #2196F3;
        }
        .carte-mb20-orange {
            margin-bottom: 20px;
            padding: 20px;
            background: var(--bleu-tres-pale);
            border-radius: 6px;
            border-left: 4px solid var(--orange-accent);
        }
        .carte-mb20-grise {
            margin-bottom: 20px;
            padding: 15px;
            background: var(--gris-tres-clair);
            border-radius: 8px;
        }
        .carte-mb15-grise {
            margin-bottom: 15px;
            padding: 12px;
            background: var(--gris-tres-pale);
            border-radius: 6px;
        }

        /* Zones de dépôt */
        .zone-depot {
            margin-bottom: 20px;
            padding: 10px;
            width: 100%;
            border: 2px dashed var(--bleu-leger);
            border-radius: 6px;
            cursor: pointer;
        }

        /* Listes */
        .list-unstyled {
            list-style: none;
            padding-left: 0;
        }

        /* Typographie avec poids et couleurs */
        .fw-600 { font-weight: 600; }
        .fw-500-bleu {
            font-weight: 500;
            color: var(--bleu-principal);
        }
        .fw-normal-bleu-moyen-sm {
            font-weight: normal;
            color: var(--bleu-moyen);
            font-size: 0.9rem;
        }

        /* Chiffres statistiques grands */
        .stat-2rem-bold-minimal {
            font-size: 2rem;
            font-weight: bold;
            color: var(--risque-minimal);
        }
        .stat-2rem-bold-bleu {
            font-size: 2rem;
            font-weight: bold;
            color: var(--bleu-principal);
        }
        .stat-2rem-bold-bleu-moyen {
            font-size: 2rem;
            font-weight: bold;
            color: var(--bleu-moyen);
        }

        /* Grilles responsive */
        .grid-auto-250 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        .grid-auto-200 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .grid-auto-200-mt15 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .grid-auto-180 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            margin-bottom: 15px;
        }

        /* Grilles fixes */
        .grid-4-gap15-mb20 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        .grid-3-gap15-mb20 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .grid-2-gap15 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .grid-2-gap15-mb20 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .grid-2-gap20 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .grid-2-gap30-mb20 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 20px;
        }
        .grid-2fr-1fr-mb20 {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .grid-1fr-3fr-mb20 {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        .grid-1fr-auto-end {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 12px;
            align-items: end;
        }

        /* Flexbox avec gaps variés */
        .d-flex-gap8-mb20 {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
        }
        .d-flex-gap8-center {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        .d-flex-gap10-mt10 {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .d-flex-gap10-mt15 {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .d-flex-gap10-mt20 {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        .d-flex-gap10-end {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        .d-flex-gap15-wrap {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        .d-flex-gap15-wrap-center {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .d-flex-gap30-mt15 {
            display: flex;
            gap: 30px;
            margin-top: 15px;
        }

        /* Flexbox between avec marges */
        .d-flex-between-mb15 {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .d-flex-between-mb20 {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .d-flex-gap10-mb20-info {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--bleu-tres-pale);
            border-radius: 6px;
            border-left: 4px solid #2196f3;
        }
        .d-flex-gap10-center-mb8 {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 8px;
        }

        /* Flex avec position */
        .flex-1-relative {
            flex: 1;
            position: relative;
        }
        .flex-1-min200-max300 {
            flex: 1;
            min-width: 200px;
            max-width: 300px;
        }

        /* Cartes avec backgrounds variés */
        .carte-white-border {
            background: white;
            border: 1px solid var(--bleu-leger);
            border-radius: 6px;
            padding: 15px;
        }
        .carte-bleu-tres-pale-mb20 {
            background: var(--bleu-tres-pale);
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        .carte-bleu-tres-pale-mb20-border {
            background: var(--bleu-tres-pale);
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            border-left: 4px solid var(--bleu-principal);
        }
        .carte-bleu-tres-pale-mt10 {
            background: var(--bleu-tres-pale);
            padding: 20px;
            border-radius: 8px;
            margin-top: 10px;
        }
        .carte-bleu-pale-mt10 {
            background: var(--bleu-pale);
            padding: 15px;
            border-radius: 6px;
            margin-top: 10px;
        }
        .carte-grise-mb20 {
            background: var(--gris-tres-pale);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .carte-grise-my15 {
            background: var(--gris-tres-pale);
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        .carte-grise-mt20 {
            background: var(--gris-tres-pale);
            padding: 20px;
            border-radius: 8px;
            margin-top: 10px;
        }
        .carte-orange-my15 {
            background: #fff3e0;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        .carte-purple-my15 {
            background: #f3e5f5;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        .carte-green-my15 {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        /* Cartes code */
        .carte-code-dark {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            margin-top: 15px;
        }
        .carte-code-light {
            background: var(--gris-tres-pale);
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
            font-family: monospace;
            font-size: 0.9em;
        }
        .carte-code-light-sm {
            background: var(--gris-tres-pale);
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-family: monospace;
            font-size: 0.85em;
        }

        /* Modales */
        .modal-content-small {
            background: white;
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
        }
        .modal-content-scroll {
            background: white;
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            width: 90%;
        }

        /* Headers sticky */
        .thead-sticky-bleu {
            background: var(--bleu-moyen);
            color: white;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        /* Coins arrondis sur l'en-tête sticky */
        .thead-sticky-bleu tr:first-child th:first-child {
            border-top-left-radius: 6px;
        }

        .thead-sticky-bleu tr:first-child th:last-child {
            border-top-right-radius: 6px;
        }
        .thead-bleu-moyen {
            background: var(--bleu-moyen);
            color: white;
        }

        /* Backgrounds simples */
        .bg-bleu-pale { background: var(--bleu-pale); }
        .bg-bleu-tres-pale-p15-mb20 {
            background: var(--bleu-tres-pale);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .bg-f0f8ff { background: var(--bleu-tres-pale); }
        .bg-fff9e6 { background: #fff9e6; }

        /* Textes avec tailles et marges */
        .text-09-mb10 {
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        .text-09-mb15 {
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        .text-085-mb15-muted {
            font-size: 0.85rem;
            color: var(--gris-moyen);
            margin-bottom: 15px;
        }
        .text-085-mb20-muted {
            font-size: 0.85rem;
            color: var(--gris-moyen);
            margin-bottom: 20px;
        }
        .text-09-muted-mb10 {
            font-size: 0.9rem;
            color: var(--gris-moyen);
            margin-bottom: 10px;
        }

        /* Titres avec font-size et couleurs */
        .titre-11-bold-bleu-mb10 {
            font-size: 1.1em;
            font-weight: bold;
            color: var(--bleu-principal);
            margin-bottom: 10px;
        }
        .titre-11-bold-bleu-mb15 {
            font-size: 1.1em;
            font-weight: bold;
            color: var(--bleu-principal);
            margin-bottom: 15px;
        }

        /* Couleurs spécifiques avec marges */
        .text-white-mb10 {
            color: white;
            margin-bottom: 10px;
        }
        .text-vert-leger-mb20 {
            color: var(--vert-leger);
            margin-bottom: 20px;
        }
        .text-orange-accent-mb10 {
            color: var(--orange-accent);
            margin-bottom: 10px;
        }
        .text-risque-critique {
            color: var(--risque-critique);
        }

        /* Autres couleurs */
        .text-warning { color: var(--risque-modere); }
        .text-orange-bold {
            color: #ff9800;
            font-weight: bold;
        }
        .text-danger-red-bold {
            color: #f44336;
            font-weight: bold;
        }
        .text-info { color: var(--risque-faible); }
        .text-info-bold {
            color: var(--risque-faible);
            font-weight: bold;
        }
        .text-success-green { color: #5cb85c; }
        .text-success-28 { color: var(--vert-succes); }

        /* Curseurs */
        .cursor-pointer-user-select {
            cursor: pointer;
            user-select: none;
        }
        .cursor-pointer-bold {
            cursor: pointer;
            font-weight: bold;
        }

        /* Checkboxes supplémentaires */
        .checkbox-warning {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            background: #fef3c7;
            border-radius: 4px;
            cursor: pointer;
            user-select: none;
        }

        /* Cartes spéciales avec gradient */
        .carte-gradient-success-danger {
            background: linear-gradient(90deg, #d4edda 0%, #f8d7da 100%);
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
        }
        .carte-gradient-bleu-mt15 {
            background: linear-gradient(90deg, var(--bleu-pale) 0%, var(--bleu-tres-pale) 100%);
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
        }

        /* Items cliquables */
        .item-bleu-pale-clickable {
            display: flex;
            align-items: center;
            padding: 10px;
            background: var(--bleu-pale);
            border-radius: 6px;
            cursor: pointer;
        }

        /* Font families */
        .font-courier {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        /* Display none spéciaux */
        .hidden-mt15 {
            display: none;
            margin-top: 15px;
        }
        .hidden-my15-warning {
            display: none;
            margin: 15px 0;
            padding: 12px 15px;
            background: var(--alerte-fond-attention);
            border-left: 4px solid #ffc107;
            border-radius: 4px;
        }
        .hidden-mb20-success {
            display: none;
            margin-bottom: 20px;
            padding: 15px;
            background: #e8f5e9;
            border-radius: 6px;
            border-left: 4px solid #4caf50;
        }

        /* Alertes avec display none */
        .alerte-error-red {
            font-size: 0.85rem;
            color: #d32f2f;
            background: #ffebee;
            padding: 8px;
            border-radius: 4px;
            margin-top: 8px;
        }

        /* Textes spéciaux avec indentation */
        .text-09-lh16-pl20-indent {
            font-size: 0.9rem;
            line-height: 1.6;
            padding-left: 20px;
            text-indent: -20px;
        }

        /* Textes petits avec marges complexes */
        .text-085-muted-m5-0-0-28 {
            font-size: 0.85rem;
            color: var(--gris-moyen);
            margin: 5px 0 0 28px;
            line-height: 1.4;
        }
        .text-085-muted-m5-0-0-0 {
            font-size: 0.85rem;
            color: var(--gris-moyen);
            margin: 5px 0 0 0;
            line-height: 1.4;
        }

        /* Labels et affichage bloc */
        .label-block-09-fw500-mb8 {
            font-size: 0.9rem;
            font-weight: 500;
            display: block;
            margin-bottom: 8px;
        }
        .label-block-085-muted-center-mb8 {
            font-size: 0.85rem;
            color: var(--gris-moyen);
            text-align: center;
            margin-bottom: 8px;
        }

        /* Textes cachés mais avec style */
        .text-09-muted-center-hidden {
            font-size: 0.9rem;
            color: var(--gris-moyen);
            text-align: center;
            display: none;
        }

        /* Flexbox wrap simple */
        .d-flex-wrap-gap10 {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        /* Display utilities */
        .d-none { display: none; }
        .d-none-important { display: none !important; }

        /* Label formulaire style */
        .label-form-reglages {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            font-size: 0.85rem;
        }

        /* Sous-titre de section */
        .sous-titre-section {
            color: var(--bleu-moyen);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--bleu-leger);
        }

        /* Section info-legales à droite du header avec boutons d'action */
        .info-legales-section {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: flex-end;
            justify-content: center;
        }

        /* Boutons d'action dans le header (Feedback + Soutenir) */
        .info-legales-section .btn-action-header {
            display: inline-block;
            padding: 4px 8px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: white;
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .info-legales-section .btn-action-header:hover {
            background: rgba(255, 255, 255, 0.18);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        /* Ajustement layout navigation principale : navigation centrée */
        .navigation-principale {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 40px 15px 40px;
        }

        /* Container pour les boutons de navigation (centrés) */
        .navigation-boutons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        /* Sélecteur de mode au centre sous le titre */
        .selecteur-mode-centre {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* ===============================
           BADGES D'INTÉGRITÉ ACADÉMIQUE
           =============================== */

        .badge-jeton {
            display: inline-block;
            padding: 2px 4px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 8px;
        }

        .badge-jeton-plagiat {
            background-color: var(--conge-bg);
            color: #c62828;
            border: 1px solid #ef5350;
        }

        .badge-jeton-soupcon {
            background-color: #fff3e0;
            color: #e65100;
            border: 1px solid #ff9800;
        }

        .badge-jeton-delai {
            background-color: #fff3e0;
            color: #e65100;
            border: 1px solid #ff9800;
        }

        .badge-jeton-reprise {
            background-color: #f3e5f5;
            color: #6a1b9a;
            border: 1px solid #9c27b0;
        }

        .badge-statut {
            display: inline-block;
            padding: 2px 4px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge-statut.non-evalue {
            background-color: #f5f5f5;
            color: #757575;
            border: 1px solid #bdbdbd;
        }
    </style>
</head>

<body>
        <!-- EN-TÊTE -->
        <header class="entete">
            <!-- Bulles flottantes animées (générées dynamiquement par JS) -->
            <div id="bulles-container" class="bulles-container">
                <!-- Les bulles seront créées dynamiquement selon le nombre d'étudiants -->
            </div>

            <div class="entete-conteneur">
                <!-- Logo et métadonnées -->
                <div class="logo-section">
                    <a href="https://codexnumeris.org" target="_blank" rel="noopener noreferrer" class="logo-link">
                        <div class="logo">
                            <img src="logo-codex-numeris.png" alt="Logo Codex Numeris">
                        </div>
                    </a>
                    <div class="logo-meta">

                        <a href="https://codexnumeris.org" target="_blank" rel="noopener noreferrer"
                            class="site-link">codexnumeris.org</a>
                        <br>
                        Réfléchir, expérimenter, partager.
                    </div>
                </div>

                <!-- Titre et description centrés -->
                <div class="titre-section">
                    <h1>Système de suivi des apprentissages</h1>
                    <p class="meta">Beta 92 par Grégoire Bédard (30 novembre 2025 - Primo Assistant)</p>

                    <!-- Sélecteur de mode au centre (sera généré par 17-modes.js) -->
                    <div id="selecteur-mode" class="selecteur-mode-centre" style="margin-top: 10px;">
                        <!-- Sera généré dynamiquement -->
                    </div>

                    <!-- Informations contextuelles au centre (cours, semaine, date) -->
                    <div id="info-contextuelles-centre" class="info-contextuelles-centre">
                        <!-- Sera rempli dynamiquement par JavaScript -->
                    </div>
                </div>

                <!-- Boutons d'action en haut à droite -->
                <div class="info-legales-section">

                <!-- Bouton Soutenir le projet (visible en mode Normal uniquement) -->
                    <a id="btn-soutenir-projet"
                       href="https://codexnumeris.org/#/portal/support"
                       target="_blank" rel="noopener noreferrer"
                       class="btn-action-header"
                       title="Soutenir financièrement le développement">
                        Soutenir le projet
                    </a>

                    <!-- Bouton Feedback testeurs (visible en mode Normal uniquement) -->
                    <a id="btn-feedback"
                       href="https://forms.office.com/Pages/ResponsePage.aspx?id=ISONVhCY_k-ORNlO_ecv4ZE_a9_snRBOtx0ASfcIqmBUNUoxMzIzQ0wySVJEQzI3R1E0VlU3MFQ1TS4u"
                       target="_blank" rel="noopener noreferrer"
                       class="btn-action-header"
                       title="Donner votre feedback sur cette version Beta">
                        Fournir un feedback
                    </a>

                    <!-- Bouton Assistance Primo rond (visible uniquement en mode Assisté) -->
                    <button id="btn-assistance-primo"
                       onclick="reafficherAccueilPrimo()"
                       style="
                           width: 80px;
                           height: 80px;
                           border-radius: 50%;
                           background: linear-gradient(135deg, #1a5266, #2d7a8c);
                           color: white;
                           border: none;
                           cursor: pointer;
                           font-size: 3rem;
                           display: none;
                           box-shadow: 0 4px 12px rgba(26, 82, 102, 0.3);
                           transition: all 0.2s;
                           animation: scintillement-primo 3s ease-in-out infinite;
                           position: relative;
                       "
                       onmouseover="this.style.transform='translateY(-2px) scale(1.05)';"
                       onmouseout="this.style.transform='translateY(0) scale(1)';"
                       title="Obtenir de l'aide avec Primo">
                        😎
                    </button>
                </div>
            </div>
        </header>

        <!-- NAVIGATION PRINCIPALE -->
        <nav class="navigation-principale">
            <!-- Boutons de navigation centrés -->
            <div class="navigation-boutons">
                <button data-onglet="tableau-bord">Tableau de bord</button>
                <button data-onglet="presences">Présences</button>
                <button data-onglet="evaluations">Évaluations</button>
                <button data-onglet="materiel">Matériel</button>
                <button data-onglet="reglages">Réglages</button>
            </div>
        </nav>

        <!-- SOUS-NAVIGATION (générée dynamiquement par 02-navigation.js) -->
        <div id="sous-navigation" class="sous-navigation"></div>

    <div class="conteneur">

        <!-- CONTENU PRINCIPAL -->
        <main class="contenu">

            <!-- ===================================
     SECTION: TABLEAU DE BORD
     =================================== -->
            <section id="section-tableau-bord" class="section active">

                <!-- Sous-section: Aperçu -->
                <div id="tableau-bord-apercu" class="sous-section">
                    <h2>Vue d'ensemble</h2>
                    <p class="text-muted">Monitorage pédagogique et priorisation des interventions</p>

                    <!-- ========== MÉTRIQUES GLOBALES DU GROUPE ========== -->
                    <div class="carte">
                        <h3 class="carte-titre-avec-toggle">
                            <span>Indicateurs globaux du groupe</span>
                            <span class="emoji-container">
                                <span class="primo-aide" data-target="note-indicateurs">😎</span>
                            </span>
                        </h3>

                        <!-- Carte Note -->
                        <div id="note-indicateurs" class="carte-info-toggle carte-info-note" style="display: none;">
                            <strong>Note :</strong> Les indices A-C-P mesurent l'engagement des étudiants dans l'apprentissage.
                            <br><br>
                            <strong>Assiduité (A)</strong> : Proportion des heures de présence parmi les heures de cours <strong>effectivement données jusqu'à maintenant</strong>. Calculé uniquement sur les séances passées, pas sur le total prévu pour la session.
                            <br><br>
                            <strong>Complétion (C)</strong> : Proportion de travaux remis parmi les travaux <strong>effectivement réalisés jusqu'à maintenant</strong>. Un artefact devient «réalisé» dès qu'une première évaluation existe pour celui-ci.
                            <br><br>
                            <strong>Performance (P)</strong> : Calculé selon la pratique de notation en vigueur (Sommative : moyenne pondérée provisoire de toutes les évaluations, ou PAN-Maîtrise : moyenne des N meilleurs artefacts selon l'échelle IDME).
                            <br><br>
                            <strong>Engagement (E)</strong> : Racine cubique du produit des trois indices, E = ∛(A × C × P). La racine cubique normalise le résultat pour préserver l'échelle d'origine : un étudiant à 70% sur les trois indices aura un engagement de 70% (au lieu de 34% avec une multiplication directe). Cette transformation compense la décroissance multiplicative tout en pénalisant les déséquilibres importants.
                            <br><br>
                            <em style="color: var(--gris-moyen); font-size: 0.9rem;">💡 Les corrélations affichées (r) mesurent la force de la relation linéaire entre deux indices. L'interprétation suit les conventions de Cohen (1988) : |r| < 0.3 = très faible, 0.3-0.5 = faible, 0.5-0.7 = modérée, 0.7-0.9 = forte, ≥ 0.9 = très forte.</em>
                        </div>

                        <!-- Le contenu des indicateurs globaux est généré dynamiquement par tableau-bord-apercu.js -->
                        <!-- Barres de distribution avec nuages de points pour A, C, P, E -->
                    </div>

                    <!-- ========== GRAPHIQUE ÉVOLUTION TEMPORELLE ========== -->
                    <div class="carte" style="margin-top: 2rem;">
                        <h3 class="carte-titre-bleu">
                            📈 Évolution temporelle des indices (moyennes de groupe)
                        </h3>
                        <p class="text-muted" style="margin-bottom: 1.5rem;">
                            Progression hebdomadaire des indices A-C-P-E depuis le début de la session
                        </p>

                        <div style="position: relative; height: 400px; width: 100%;">
                            <canvas id="graphique-groupe-moyennes"></canvas>
                        </div>

                        <p class="text-muted" style="margin-top: 1rem; font-size: 0.85rem; font-style: italic;">
                            💡 Les courbes sont légèrement décalées verticalement (+0.5-1.5%) pour éviter la superposition.
                            Les valeurs affichées dans les infobulle sont les valeurs réelles (sans décalage).
                        </p>
                    </div>

                </div>
                <!-- FIN sous-section tableau-bord-apercu -->

                <!-- Sous-section: Liste des individus -->
                <div id="tableau-bord-liste" class="sous-section">
                    <h2 id="titre-liste-etudiants">Liste des étudiant·es
                        <span class="primo-aide" data-target="conseil-liste-etudiants">😎</span>
                    </h2>
                    <p class="text-muted">Consultation de la liste complète et accès aux portfolios individuels</p>

                    <!-- Carte Note Détails Calcul (cachée par défaut) -->
                    <div id="note-calcul-indices-liste" class="carte-info-toggle carte-info-note" style="display: none; margin-bottom: 20px;">
                        <!-- Contenu généré dynamiquement par JS -->
                    </div>

                    <!-- Conseil Primo: Gestion des étudiants -->
                    <div id="conseil-liste-etudiants" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong>
                        <p>Pour ajouter, modifier ou supprimer des étudiants, allez dans <strong>Réglages › Groupe</strong>.</p>
                    </div>

                    <div class="carte">
                        <h3>Étudiant·es inscrit·es
                            <span id="compteur-tableau-bord-liste"
                                style="color: var(--gris-moyen); font-size: 0.9rem; font-weight: normal;">
                                (0 étudiant·e)
                            </span>
                        </h3>

                        <!-- FILTRAGE ET RECHERCHE -->
                        <div class="carte-grise-mb20">
                            <div class="grid-auto-180">
                                <div class="groupe-form">
                                    <label for="filtre-groupe-liste">Groupe</label>
                                    <select id="filtre-groupe-liste" class="controle-form"
                                        onchange="afficherListeEtudiantsConsultation()">
                                        <option value="">Tous les groupes</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label for="filtre-programme-liste">Programme</label>
                                    <select id="filtre-programme-liste" class="controle-form"
                                        onchange="afficherListeEtudiantsConsultation()">
                                        <option value="">Tous les programmes</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label for="filtre-rai-liste">Niveau RàI</label>
                                    <select id="filtre-rai-liste" class="controle-form"
                                        onchange="afficherListeEtudiantsConsultation()">
                                        <option value="">Tous les niveaux</option>
                                        <option value="1">Niveau 1 (Universel)</option>
                                        <option value="2">Niveau 2 (Préventif)</option>
                                        <option value="3">Niveau 3 (Intensif)</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label for="filtre-pattern-liste">Pattern d'apprentissage</label>
                                    <select id="filtre-pattern-liste" class="controle-form"
                                        onchange="afficherListeEtudiantsConsultation()">
                                        <option value="">Tous les patterns</option>
                                        <option value="defi-specifique">Défi spécifique</option>
                                        <option value="stable">Stable</option>
                                        <option value="blocage-emergent">Blocage émergent</option>
                                        <option value="blocage-critique">Blocage critique</option>
                                        <option value="progression">En progression</option>
                                    </select>
                                </div>
                            </div>
                            <div class="groupe-form">
                                <label for="recherche-nom-liste">Recherche (nom/prénom/DA)</label>
                                <input type="text" id="recherche-nom-liste" class="controle-form"
                                    placeholder="Rechercher par nom, prénom ou DA..." oninput="afficherListeEtudiantsConsultation()">
                            </div>
                        </div>

                        <!-- Bouton de réinitialisation des filtres -->
                        <div style="margin-bottom: 15px; text-align: center;">
                            <button class="btn btn-secondaire" onclick="reinitialiserFiltresListeEtudiants()" title="Réinitialiser tous les filtres">
                                Réinitialiser les filtres
                            </button>
                        </div>

                        <!-- TABLEAU DES ÉTUDIANTS -->
                        <div id="tableEtudiantsListe"
                            class="overflow-xy-600">
                            <table class="tableau">
                                <thead class="thead-sticky-bleu">
                                    <tr>
                                        <th onclick="trierTableauPar('num')" class="td-center-50" title="Cliquer pour trier">
                                            #<span id="tri-num" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('da')" class="td-center-90-clickable" title="Cliquer pour trier">
                                            DA<span id="tri-da" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('groupe')" class="td-center-70" title="Cliquer pour trier">
                                            Groupe<span id="tri-groupe" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('nom')" class="td-left-clickable" title="Cliquer pour trier">
                                            Nom<span id="tri-nom" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('prenom')" class="td-left-clickable" title="Cliquer pour trier">
                                            Prénom<span id="tri-prenom" class="ml-4">↕</span>
                                        </th>
                                        <th class="td-center-40">SA</th>
                                        <th onclick="trierTableauPar('assiduite')" class="td-center-clickable" title="Cliquer pour trier">
                                            A<br><span class="text-xs-normal">(assiduité)</span><span id="tri-assiduite" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('completion')" class="td-center-clickable" title="Cliquer pour trier">
                                            C<br><span class="text-xs-normal">(complétion)</span><span id="tri-completion" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('performance')" class="td-center-clickable" title="Cliquer pour trier">
                                            P<br><span class="text-xs-normal">(performance)</span><span id="tri-performance" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('engagement')" class="td-center-clickable" title="Cliquer pour trier">
                                            E<br><span class="text-xs-normal">(engagement)</span><span id="tri-engagement" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('pattern')" class="td-left-140-clickable" title="Cliquer pour trier">
                                            Pattern<span id="tri-pattern" class="ml-4">↕</span>
                                        </th>
                                        <th onclick="trierTableauPar('rai')" class="td-center-100-clickable" title="Cliquer pour trier">
                                            RàI<span id="tri-rai" class="ml-4">↕</span>
                                        </th>
                                        <th class="td-center-80" title="Nombre d'interventions reçues">
                                            Interv.
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="tbody-tableau-bord-liste">
                                    <!-- Généré dynamiquement par le module JS -->
                                </tbody>
                            </table>
                        </div>

                        <!-- MESSAGE SI AUCUN ÉTUDIANT -->
                        <div id="message-aucun-etudiant" style="display: none; text-align: center; padding: 40px; 
                background: var(--gris-tres-pale); border-radius: 8px; color: var(--gris-moyen);">
                            <p class="text-11-mb10">📭 Aucun·e étudiant·e trouvé·e</p>
                            <p class="text-09-mb15">
                                <span id="message-filtre-actif">
                                    Aucun résultat avec les filtres actuels.
                                </span>
                                <span id="message-liste-vide" style="display: none;">
                                    Allez dans <strong>Réglages › Groupe</strong> pour ajouter des étudiant·es
                                </span>
                            </p>
                            <button onclick="resetFiltresListe()" id="btn-reset-filtres" class="btn btn-annuler">
                                Réinitialiser les filtres
                            </button>
                        </div>

                    </div><!-- FIN carte -->
                </div><!-- FIN sous-section tableau-bord-liste -->

                <!-- Sous-section: Profil -->
                <div id="tableau-bord-profil" class="sous-section">
                    <div id="contenuProfilEtudiant">
                        <div class="carte">
                            <p class="text-muted">Sélectionnez un·e étudiant·e depuis la liste pour voir son profil.</p>
                        </div>
                    </div>
                </div><!-- FIN sous-section tableau-bord-profil -->

                <!-- Sous-section: Interventions RàI -->
                <div id="tableau-bord-interventions" class="sous-section">
                    <h2>Planification et documentation des interventions</h2>
                    <p class="text-muted">Gardez une trace des interventions de niveau 2 et 3</p>

                    <!-- Conteneur pour la liste des interventions ou le formulaire -->
                    <div id="conteneurPrincipal">
                        <div id="listeInterventions"></div>
                    </div>
                </div><!-- FIN sous-section tableau-bord-interventions -->

            </section>
            <!-- FIN section-tableau-bord -->

            <!-- ===================================
                 SECTION: PRÉSENCES
                 =================================== -->
            <section id="section-presences" class="section">

                <!-- Sous-section: Aperçu -->
                <div id="presences-apercu" class="sous-section">
                    <h2 class="carte-titre-avec-toggle">
                        <span>Aperçu des présences</span>
                        <span class="emoji-container">
                            <span class="primo-aide" data-target="note-presences-apercu">😎</span>
                        </span>
                    </h2>
                    <p class="text-muted">Vue d'ensemble des statistiques de présence du groupe</p>

                    <!-- Note explicative -->
                    <div id="note-presences-apercu" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les statistiques d'assiduité sont calculées à partir des présences saisies.
                        Le taux d'assiduité moyen reflète la proportion d'heures de présence par rapport aux heures offertes.
                        Les modes Sommatif (SOM) et Alternatif (PAN) peuvent différer selon la configuration dans Réglages › Pratique de notation.
                    </div>

                    <!-- STATISTIQUES GLOBALES -->
                    <div class="carte">
                        <h3>Statistiques du groupe</h3>

                        <div class="grille-cartes-metriques" class="mt-15">
                            <!-- Taux d'assiduité moyen du groupe -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Taux d'assiduité moyen du groupe</span>
                                    <strong id="pa-taux-moyen" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>

                            <!-- Séances données -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Séances données</span>
                                    <strong id="pa-seances-donnees" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>

                            <!-- Prochaine séance -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Prochaine séance</span>
                                    <strong id="pa-prochaine-seance" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>

                            <!-- Élèves -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Élèves</span>
                                    <strong id="stat-nb-eleves" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sous-section: Vue calendaire -->
                <div id="presences-calendrier" class="sous-section">
                    <div class="carte">
                        <h3>Vue calendaire</h3>
                        <div id="conteneur-calendrier">
                            [Le calendrier sera généré ici]
                        </div>
                    </div>
                </div>

                <!-- Sous-section: Saisie -->
                <div id="presences-saisie" class="sous-section">
                    <h2>Enregistrement quotidien</h2>
                    <p class="text-muted">Enregistrer les présences pour une séance</p>

                    <!-- Avertissement si format non configuré -->
                    <div id="alerteFormatHoraire" class="alerte alerte-attention" style="display: none;">
                        <h4>Configuration requise</h4>
                        <p>
                            Le format horaire n'est pas configuré. La durée par défaut est fixée à <strong>2h par
                                séance</strong>.
                            <br>Pour définir le format exact (2×2h ou 1×4h), veuillez configurer l'horaire dans
                            <a href="#"
                                onclick="afficherSection('reglages'); afficherSousSection('reglages-horaire'); return false;"
                                class="text-underline-bold">Réglages >
                                Horaire</a>.
                        </p>
                    </div>

                    <!-- En-tête de la séance -->
                    <div id="enteteDateSeance" style="display: none;">
                        <div id="texteDateSeance"></div>
                    </div>

                    <!-- Contrôles de saisie -->
                    <div class="carte" class="mb-20">
                        <div class="grille-saisie-presences">
                            <div class="groupe-form">
                                <label for="date-cours" class="label-formulaire">Date du cours</label>
                                <div class="d-flex-gap8-center">
                                    <button id="btn-cours-precedent" onclick="allerCoursPrecedent()"
                                        class="btn btn-principal btn-compact" class="flex-shrink-0">
                                        ← Précédent
                                    </button>
                                    <input type="date" id="date-cours" class="controle-form"
                                        onchange="initialiserSaisiePresences(); mettreAJourBoutonsNavigation();"
                                        class="flex-1">
                                    <button id="btn-cours-suivant" onclick="allerCoursSuivant()"
                                        class="btn btn-principal btn-compact" class="flex-shrink-0">
                                        Suivant →
                                    </button>
                                </div>
                            </div>
                            <div class="groupe-form">
                                <label for="selectGroupePresences" class="label-formulaire">Filtrer par groupe</label>
                                <select id="selectGroupePresences" class="controle-form"
                                    onchange="initialiserSaisiePresences()">
                                    <option value="">Tous les groupes</option>
                                </select>
                            </div>
                            <div class="groupe-form">
                                <label for="selectTriPresences" class="label-formulaire">Trier par</label>
                                <select id="selectTriPresences" class="controle-form"
                                    onchange="initialiserSaisiePresences()">
                                    <option value="nom">Ordre alphabétique (nom)</option>
                                    <option value="assiduite-croissant">Assiduité croissante (↑)</option>
                                    <option value="assiduite-decroissant">Assiduité décroissante (↓)</option>
                                </select>
                            </div>

                        </div>

                        <!-- Tableau de saisie -->
                        <div class="carte">
                            <h3>
                                Liste des étudiant·es
                                <span id="nbEtudiantsPresences"
                                    class="fw-normal-bleu-moyen-sm">
                                    (0 étudiant·e)
                                </span>
                            </h3>

                            <!-- Champ de recherche -->
                            <div class="groupe-form" class="mb-15">
                                <input type="text" id="recherche-saisie-presences" class="controle-form"
                                    placeholder="Rechercher un étudiant (nom, prénom, DA)..."
                                    oninput="filtrerTableauPresences()">
                            </div>

                            <!-- Compteur présents/absents -->
                            <div id="compteur-presences" style="background: var(--bleu-tres-pale); padding: 12px 16px; margin-bottom: 15px; display: flex; justify-content: center; gap: 30px; font-size: 0.95rem; font-weight: 500; border-left: 4px solid var(--bleu-principal); color: var(--bleu-moyen);">
                                <span>
                                    Présents : <span id="nb-presents">0</span>
                                </span>
                                <span>
                                    Absents : <span id="nb-absents">0</span>
                                </span>
                                <span>
                                    Total : <span id="nb-total">0</span>
                                </span>
                                <span>
                                    Assiduité aujourd'hui : <span id="assiduite-aujourdhui">0%</span>
                                </span>
                            </div>

                            <table class="tableau">
                                <thead>
                                    <tr>
                                        <th class="w-100px">DA</th>
                                        <th>Prénom</th>
                                        <th>Nom</th>
                                        <th id="colonneHeuresTitre" class="w-100-center">
                                            Présence
                                            <div class="mt-8-flex-col-gap4">
                                                <button class="btn btn-principal btn-tres-compact"
                                                        onclick="tousPresents()"
                                                        title="Mettre tous présents">
                                                    Tous 2h
                                                </button>
                                                <button class="btn btn-annuler btn-tres-compact"
                                                        onclick="reinitialiserSaisie()"
                                                        title="Réinitialiser">
                                                    ↻
                                                </button>
                                            </div>
                                        </th>
                                        <th class="w-200">Notes</th>
                                        <th class="w-100px">Total heures</th>
                                        <th class="w-100px">Assiduité</th>
                                    </tr>
                                </thead>
                                <tbody id="tbody-saisie-presences">
                                    <tr>
                                        <td colspan="7" class="empty-state-center-30">
                                            Sélectionnez une date pour afficher le tableau de saisie
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Boutons d'action -->
                        <div class="btn-groupe" class="mt-20">
                            <button class="btn btn-confirmer" onclick="enregistrerPresences()">
                                Enregistrer les présences
                            </button>
                            <button class="btn btn-annuler" onclick="afficherSousSection('presences-apercu')">
                                Annuler
                            </button>
                        </div>
                    </div>


            </section>

            <!-- ===============================
     SECTION: ÉVALUATIONS
     =============================== -->
            <section id="section-evaluations" class="section">

                <!-- Sous-section: Aperçu -->
                <div id="evaluations-apercu" class="sous-section">
                    <h2 class="carte-titre-avec-toggle">
                        <span>Aperçu des évaluations</span>
                        <span class="emoji-container">
                            <span class="primo-aide" data-target="note-evaluations-apercu">😎</span>
                        </span>
                    </h2>
                    <p class="text-muted">Vue d'ensemble des évaluations du groupe</p>

                    <!-- Note explicative -->
                    <div id="note-evaluations-apercu" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les statistiques d'évaluations sont calculées à partir des artefacts complétés.
                        La moyenne du groupe reflète la performance globale selon les critères d'évaluation configurés (SRPNF).
                        Le taux de complétion mesure le nombre d'artefacts remis par rapport aux artefacts attendus.
                    </div>

                    <!-- STATISTIQUES GLOBALES -->
                    <div class="carte">
                        <h3>Statistiques du groupe</h3>

                        <div class="grille-cartes-metriques" class="mt-15">
                            <!-- Taux de complétion -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Taux de complétion moyen</span>
                                    <strong id="ea-taux-completion" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>

                            <!-- Productions réalisées -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Productions réalisées</span>
                                    <strong id="ea-productions-realisees" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>

                            <!-- Productions configurées -->
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Productions configurées</span>
                                    <strong id="ea-productions-configurees" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sous-section: Liste des évaluations -->
                <div id="evaluations-liste" class="sous-section">
                <h2>Historique et filtres</h2>
                <p class="description-section">Vue d'ensemble des évaluations et calcul automatique des indices C et P</p>

                <!-- Filtres -->
                <div class="carte">
                    <h3>Filtres</h3>
                    <div class="grille-filtres">
                        <div class="groupe-form">
                            <label for="filtre-groupe-eval">Filtrer par groupe</label>
                            <select id="filtre-groupe-eval" class="controle-form" onchange="filtrerListeEvaluations()">
                                <option value="">Tous les groupes</option>
                            </select>
                        </div>
                        <div class="groupe-form">
                            <label for="filtre-production-eval">Filtrer par production</label>
                            <select id="filtre-production-eval" class="controle-form"
                                onchange="filtrerListeEvaluations()">
                                <option value="">Toutes les productions</option>
                            </select>
                        </div>
                        <div class="groupe-form">
                            <label for="filtre-statut-eval">Filtrer par statut</label>
                            <select id="filtre-statut-eval" class="controle-form" onchange="filtrerListeEvaluations()">
                                <option value="">Tous</option>
                                <option value="remis">Remis</option>
                                <option value="non-remis">Non remis</option>
                                <option value="evalue">Évalués seulement</option>
                                <option value="non-evalue">Non évalués</option>
                                <option value="jeton-delai">Jeton de délai</option>
                                <option value="jeton-reprise">Jeton de reprise</option>
                                <option value="jeton-reprise-ciblee">Jeton de reprise ciblée</option>
                                <option value="tous-jetons">Tous les jetons</option>
                                <option value="remplacees">Remplacées</option>
                            </select>
                        </div>
                        <button class="btn btn-principal btn-compact" onclick="reinitialiserFiltresEval()"
                            class="whitespace-nowrap">
                            ↻ Réinit.
                        </button>
                    </div>
                </div>

                <!-- Champ de recherche -->
                <div class="carte">
                    <input type="text"
                           id="recherche-evaluations"
                           class="controle-form"
                           placeholder="Rechercher par nom, prénom, DA, production..."
                           oninput="rechercherEvaluations()">
                </div>

                <!-- Statistiques globales -->
                <div class="carte">
                    <div id="stats-evaluations" style="display: flex; gap: 30px; flex-wrap: wrap; align-items: baseline;">
                        <div style="font-weight: 600; color: var(--bleu-principal);" id="compteur-evaluations">
                            Chargement...
                        </div>
                        <div style="color: var(--gris-moyen);" id="moyenne-evaluations"></div>
                        <div style="color: var(--gris-moyen);" id="nb-productions"></div>
                    </div>
                </div>

                <!-- Zone de chargement -->
                <div id="zone-chargement-evaluations" class="carte" style="text-align: center; padding: 40px;">
                    <p style="color: var(--gris-moyen);">Chargement des évaluations...</p>
                </div>

                <!-- Tableau des évaluations -->
                <div id="conteneur-tableau-evaluations" style="display: none;">
                    <div class="carte" style="overflow-x: auto;">
                        <table class="tableau">
                            <thead class="thead-sticky-bleu">
                                <tr>
                                    <th class="td-left-clickable" onclick="trierTableauParColonne('da')" title="Cliquer pour trier">
                                        DA <span id="tri-da" style="font-size: 0.8em; color: var(--gris-clair);">↕</span>
                                    </th>
                                    <th class="td-left-clickable" onclick="trierTableauParColonne('nom')" title="Cliquer pour trier">
                                        Nom <span id="tri-nom" style="font-size: 0.8em; color: var(--gris-clair);">↑</span>
                                    </th>
                                    <th class="td-left-clickable" onclick="trierTableauParColonne('prenom')" title="Cliquer pour trier">
                                        Prénom <span id="tri-prenom" style="font-size: 0.8em; color: var(--gris-clair);">↕</span>
                                    </th>
                                    <th class="td-left-clickable" onclick="trierTableauParColonne('production')" title="Cliquer pour trier">
                                        Production <span id="tri-production" style="font-size: 0.8em; color: var(--gris-clair);">↕</span>
                                    </th>
                                    <th class="td-center-clickable" onclick="trierTableauParColonne('jetons')" title="Cliquer pour trier">
                                        Jeton <span id="tri-jetons" style="font-size: 0.8em; color: var(--gris-clair);">↕</span>
                                    </th>
                                    <th class="td-center-clickable" onclick="trierTableauParColonne('niveau')" title="Cliquer pour trier">
                                        Niveau <span id="tri-niveau" style="font-size: 0.8em; color: var(--gris-clair);">↕</span>
                                    </th>
                                    <th class="td-center-clickable" onclick="trierTableauParColonne('note')" title="Cliquer pour trier">
                                        Note % <span id="tri-note" style="font-size: 0.8em; color: var(--gris-clair);">↕</span>
                                    </th>
                                    <th class="td-center">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="corps-tableau-evaluations">
                                <!-- Sera rempli dynamiquement par liste-evaluations.js -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Message si aucun résultat -->
                <div id="message-aucun-resultat" class="carte" style="display: none; text-align: center; padding: 40px;">
                    <p style="color: var(--gris-clair); font-style: italic;">
                        Aucune évaluation ne correspond aux filtres sélectionnés
                    </p>
                </div>
            </div>



            <!-- Sous-section: Évaluer (formulaire d'évaluation) -->
            <div id="evaluations-individuelles" class="sous-section">
                <h2>Évaluation des productions et rétroaction différenciée automatique</h2>
                <p class="text-muted">Évaluation détaillée selon les critères et les échelles de performance</p>

                <!-- Conteneur principal en Layout L modifié -->
                <div class="carte" class="mb-20">

                    <!-- PARTIE HAUTE : 2 colonnes -->
                    <div class="grille-evaluation-principale" class="mb-20">

                        <!-- COLONNE GAUCHE : PARAMÈTRES DE L'ÉVALUATION -->
                        <div class="carte-bleu-fonce">
                            <!-- Boutons de gestion des évaluations -->
                            <div class="groupe-boutons-colonne" class="mb-15">
                                <!-- Ligne 1: Nouvelle évaluation -->
                                <div class="groupe-boutons-ligne">
                                    <button class="btn btn-secondaire btn-tres-compact" onclick="nouvelleEvaluation()" style="width: 100%;"
                                        title="Commencer une nouvelle évaluation (formulaire vierge)">
                                        Nouvelle évaluation
                                    </button>
                                </div>

                                <!-- Ligne 2: Sauvegarder et Réinitialiser -->
                                <div class="groupe-boutons-ligne">
                                    <button class="btn btn-principal btn-tres-compact" onclick="sauvegarderEvaluation()" style="flex: 1;"
                                        title="Sauvegarder l'évaluation">
                                        Sauvegarder
                                    </button>

                                    <button class="btn btn-annuler btn-tres-compact" onclick="reinitialiserFormulaire()" style="flex: 1;"
                                        title="Réinitialiser le formulaire en conservant les sélections">
                                        Réinitialiser
                                    </button>
                                </div>

                                <!-- Ligne 3: Supprimer cette évaluation (visible seulement en mode modification) -->
                                <div class="groupe-boutons-ligne" id="ligneSupprimerEvaluation" style="display: none;">
                                    <button class="btn btn-supprimer btn-tres-compact" onclick="confirmerSuppressionEvaluationSidebar()" style="width: 100%;"
                                        title="Supprimer définitivement cette évaluation">
                                        Supprimer cette évaluation
                                    </button>
                                </div>
                            </div>

                            <hr class="separateur-horizontal">

                            <div class="indicateur-verrouillage" class="mb-15">
                                <h4 class="m-0">Paramètres de l'évaluation</h4>

                                <!-- Indicateur de verrouillage -->
                                <div id="indicateurVerrouillageEval" style="display: none;">
                                    <span id="iconeVerrouEval" onclick="basculerVerrouillageEvaluationCourante()"
                                        style="font-size: 1.2rem; cursor: pointer; user-select: none; color: var(--vert-succes);"
                                        title="Évaluation modifiable - Cliquez pour verrouiller">🔓</span>
                                </div>
                            </div>

                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Groupe :</label>
                                <select id="selectGroupeEval" class="controle-form"
                                    onchange="filtrerEtudiantsParGroupe()">
                                    <option value="">Tous les groupes</option>
                                </select>
                            </div>

                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Étudiant·e :</label>
                                <select id="selectEtudiantEval" class="controle-form"
                                    onchange="chargerEvaluationsEtudiant()">
                                    <option value="">-- Choisir un·e étudiant·e --</option>
                                </select>
                            </div>

                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Production étudiante :</label>
                                <select id="selectProduction1" class="controle-form" onchange="chargerProduction(1)">
                                    <option value="">-- Choisir une production --</option>
                                </select>
                            </div>

                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Grille d'évaluation :</label>
                                <select id="selectGrille1" class="controle-form" onchange="chargerGrilleSelectionnee()">
                                    <option value="">-- Choisir une grille --</option>
                                </select>
                            </div>

                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Échelle de performance :</label>
                                <select id="selectEchelle1" class="controle-form"
                                    onchange="changerEchelleEvaluation(1)">
                                    <option value="">-- Choisir une échelle --</option>
                                </select>
                            </div>

                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Cartouche de rétroaction :</label>
                                <select id="selectCartoucheEval" class="controle-form"
                                    onchange="cartoucheSelectionnee()">
                                    <option value="">-- Choisir une cartouche --</option>
                                </select>
                            </div>

                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Statut de remise :</label>
                                <select id="remiseProduction1" class="controle-form" onchange="changerStatutRemise(1)">
                                    <option value="non-remis">Non remis</option>
                                    <option value="remis">Remis</option>
                                </select>
                            </div>

                            <!-- STATUT D'INTÉGRITÉ ACADÉMIQUE -->
                            <div class="groupe-form" class="mb-12">
                                <label class="label-formulaire">Intégrité académique :</label>
                                <select id="statutIntegrite" class="controle-form" onchange="changerStatutIntegrite()">
                                    <option value="recevable">Recevable</option>
                                    <option value="soupcon">Soupçon à vérifier</option>
                                    <option value="plagiat">Non recevable - Plagiat</option>
                                    <option value="ia">Non recevable - IA non autorisée</option>
                                </select>
                                <p class="text-085-muted-m5-0-0-28">
                                    Les travaux non recevables sont exclus des calculs de moyenne.
                                </p>
                            </div>

                            <!-- NOTES SUR L'INTÉGRITÉ (optionnel) -->
                            <div id="divNotesIntegrite" class="groupe-form" style="display: none;">
                                <label class="label-formulaire">Notes (optionnel) :</label>
                                <textarea id="notesIntegrite" class="controle-form" rows="3" placeholder="Détails du cas, preuves, références..."></textarea>
                            </div>

                            <!-- OPTIONS DE JETONS -->
                            <div id="optionsJetons" class="groupe-form" style="display: none;">
                                <label class="label-formulaire">Appliquer un jeton :</label>

                                <div style="display: flex; flex-direction: column; gap: 10px;">
                                    <!-- Jetons standards (Délai, Reprise, Reprise ciblée) -->
                                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                                        <!-- Jeton de délai -->
                                        <div id="badgeJetonDelaiOption" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" id="checkboxJetonDelai" onchange="gererChangementCheckboxJetonDelai()">
                                            <span class="badge-jeton-delai-wrapper">
                                                <span class="badge-jeton-titre">Délai</span>
                                            </span>
                                        </div>

                                        <!-- Jeton de reprise -->
                                        <div id="badgeJetonRepriseOption" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" id="checkboxJetonReprise" onchange="gererChangementCheckboxJetonReprise()">
                                            <span class="badge-jeton-reprise-wrapper">
                                                <span class="badge-jeton-titre">Reprise</span>
                                            </span>
                                        </div>

                                        <!-- Jeton de reprise ciblée -->
                                        <div id="badgeJetonRepriseCibleeOption" style="display: flex; align-items: center; gap: 8px;">
                                            <input type="checkbox" id="checkboxJetonRepriseCiblee" onchange="gererChangementCheckboxJetonRepriseCiblee()">
                                            <span class="badge-jeton-reprise-ciblee-wrapper">
                                                <span class="badge-jeton-titre">Reprise ciblée</span>
                                            </span>
                                        </div>
                                    </div>

                                    <!-- Jetons personnalisés (sera rempli dynamiquement) -->
                                    <div id="jetonsPersonnalisesOptions" style="display: flex; flex-direction: column; gap: 10px;">
                                        <!-- Rempli par afficherJetonsPersonnalisesEvaluation() -->
                                    </div>
                                </div>
                            </div>

                            <!-- NOTE ET NIVEAU -->
                            <div id="noteFinale1" class="boite-note-finale">
                                <!-- Note finale et niveau sur la même ligne -->
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <div>
                                        <div class="label" style="font-size: 0.8rem; color: #888; margin-bottom: 5px;">Note finale</div>
                                        <div class="valeur" style="font-size: 2rem; font-weight: bold; color: var(--bleu-principal);">
                                            <span id="noteProduction1">0.0</span>
                                        </div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="font-size: 0.8rem; color: #888; margin-bottom: 5px;">Niveau</div>
                                        <div style="font-size: 2rem; font-weight: bold; color: var(--bleu-principal);">
                                            <span id="niveauProduction1">--</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- COLONNE DROITE : CRITÈRES AVEC RÉTROACTIONS -->
                        <div class="zone-criteres">
                            <h4>Évaluation et prévisualisation de la rétroaction</h4>

                            <div id="listeCriteresGrille1" class="conteneur-liste">
                                <p style="color: var(--gris-clair); font-style: italic; font-size: 0.85rem;">
                                    Sélectionnez une grille et une cartouche
                                </p>
                            </div>

                            <!-- RÉTROACTION FINALE (déplacée sous la prévisualisation) -->
                            <div class="zone-retroaction" style="margin-top: 20px;">
                                <div class="zone-retroaction-header" style="display: flex; justify-content: space-between; align-items: center;">
                                    <h4>Rétroaction finale</h4>
                                    <button class="btn btn-confirmer btn-compact" onclick="copierRetroaction(1)">
                                        Copier dans le presse-papier
                                    </button>
                                </div>

                                <!-- Options à inclure (TOUTES COCHÉES PAR DÉFAUT) -->
                                <div class="grille-checkboxes" class="mb-15">
                                    <label class="text-sm-pointer">
                                        <input type="checkbox" id="afficherDescription1" onchange="genererRetroaction(1)"
                                            checked>
                                        Description
                                    </label>
                                    <label class="text-sm-pointer">
                                        <input type="checkbox" id="afficherObjectif1" onchange="genererRetroaction(1)" checked>
                                        Objectif
                                    </label>
                                    <label class="text-sm-pointer">
                                        <input type="checkbox" id="afficherTache1" onchange="genererRetroaction(1)" checked>
                                        Tâche
                                    </label>
                                    <label class="text-sm-pointer">
                                        <input type="checkbox" id="afficherAdresse1" onchange="genererRetroaction(1)" checked>
                                        Adresse
                                    </label>
                                    <label class="text-sm-pointer">
                                        <input type="checkbox" id="afficherContexte1" onchange="genererRetroaction(1)" checked>
                                        Contexte
                                    </label>
                                </div>

                                <!-- Zone de texte pour la rétroaction finale -->
                                <textarea id="retroactionFinale1" class="controle-form" rows="12"
                                    placeholder="La rétroaction sera générée automatiquement ici selon vos évaluations et les options cochées. Vous pouvez modifier le texte avant de le copier."
                                    style="width: 100%; height: 200px; padding: 12px; border-radius: 5px;
        border: 1px solid var(--bordure-claire); font-family: inherit; resize: vertical;
        font-size: 0.85rem; line-height: 1.5; background: white;">
</textarea>
                            </div>
                        </div>
                    </div>

                </div><!-- fin carte du layout évaluation -->

            </div><!-- fin sous-section evaluations-individuelles -->

            <!-- Modal Réparation des évaluations -->
            <div id="modalReparationEvaluations" class="modal-overlay">
                <div class="modal-contenu modal-compact">
                    <button onclick="fermerModalReparationEvaluations()" class="modal-fermer">✕</button>

                    <h2 class="modal-titre">Réparation des évaluations</h2>

                    <div class="mb-25">
                        <h3 style="color: var(--bleu-principal); font-size: 1rem; margin-bottom: 10px;">Qu'est-ce que cette fonction ?</h3>
                        <p style="color: var(--gris-moyen); line-height: 1.6;">
                            Cette fonction permet de <strong>réparer automatiquement</strong> les évaluations dont les critères n'ont pas été correctement sauvegardés.
                            Elle extrait les niveaux (I, D, M, E) depuis la rétroaction finale et reconstruit le tableau des critères manquants.
                        </p>
                    </div>

                    <div class="alerte alerte-attention" class="mb-25">
                        <h4>Quand l'utiliser ?</h4>
                        <ul class="m-0-pl-20-gray-lh">
                            <li><strong>Après une migration de données</strong> depuis une ancienne version</li>
                            <li><strong>Si des évaluations ne se chargent pas</strong> correctement lors de la modification</li>
                            <li><strong>Si vous constatez des critères vides</strong> alors que la rétroaction contient les niveaux</li>
                            <li><strong>Après un problème technique</strong> ayant affecté la sauvegarde</li>
                        </ul>
                    </div>

                    <div class="carte-mb25-bleu-clair">
                        <h3 style="color: var(--bleu-clair); font-size: 1rem; margin-top: 0; margin-bottom: 10px;">Comment ça fonctionne ?</h3>
                        <ol class="m-0-pl-20-gray-lh">
                            <li>Analyse toutes les évaluations sauvegardées</li>
                            <li>Détecte celles avec un tableau <code>criteres</code> vide</li>
                            <li>Extrait les niveaux depuis la rétroaction (ex: "STRUCTURE (I)")</li>
                            <li>Reconstruit automatiquement les critères manquants</li>
                            <li>Sauvegarde les modifications dans le localStorage</li>
                        </ol>
                    </div>

                    <div class="carte-mb25-green">
                        <h3 style="color: #558b2f; font-size: 1rem; margin-top: 0; margin-bottom: 10px;">Résultat attendu</h3>
                        <p class="m-0-muted-lh16">
                            Après la réparation, un rapport détaillé affichera le nombre d'évaluations réparées, ignorées (déjà correctes) et échouées.
                            Les évaluations réparées pourront être modifiées normalement avec tous leurs critères restaurés.
                        </p>
                    </div>

                    <div class="footer-border-top">
                        <button class="btn btn-annuler" onclick="fermerModalReparationEvaluations()" class="mr-10">
                            Annuler
                        </button>
                        <button class="btn btn-confirmer" onclick="lancerReparationEvaluations()">
                            Lancer la réparation
                        </button>
                    </div>
                </div>
            </div>

            </section><!-- fin section-evaluations -->

            <!-- ===================================
                 SECTION: MATÉRIEL PÉDAGOGIQUE
                 =================================== -->
            <section id="section-materiel" class="section">

                <!-- Sous-section: Aperçu du matériel -->
                <div id="materiel-apercu" class="sous-section">
                    <h2 class="d-flex-between-center">
                        <span>Vue d'ensemble</span>
                        <span class="text-12">
                            <span class="primo-aide" data-target="note-apercu">😎</span>
                            <span class="primo-aide" data-target="conseil-apercu">😎</span>
                        </span>
                    </h2>
                    <p class="text-muted">Résumé du matériel pédagogique configuré</p>

                    <!-- Carte Note -->
                    <div id="note-apercu" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Cette vue d'ensemble présente un résumé du matériel pédagogique configuré pour le cours.
                        Le matériel comprend les productions (exercices formatifs et certificatifs), les grilles de critères d'évaluation,
                        les échelles de performance (IDME), et les cartouches de rétroaction. Un matériel bien configuré facilite l'évaluation
                        cohérente et permet le suivi longitudinal des apprentissages.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-apercu" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong> Commence par configurer la pratique de notation dans la section Réglages, puis crée tes grilles de critères
                        et ton échelle de performance. Enfin, définis les productions du cours en les associant aux grilles créées.
                        Cette séquence assure une configuration cohérente et facilite la gestion des évaluations.
                    </div>

                    <div class="carte">
                        <h3>Matériel configuré</h3>

                        <div class="grid-auto-200-mt15">
                            <!-- Productions -->
                            <div class="carte-bleu-encadree">
                                <div class="d-flex-between">
                                    <span class="text-muted">Productions</span>
                                    <strong id="stat-productions" class="titre-1-8">—</strong>
                                </div>
                            </div>

                            <!-- Grilles de critères -->
                            <div class="carte-bleu-encadree">
                                <div class="d-flex-between">
                                    <span class="text-muted">Grilles de critères</span>
                                    <strong id="stat-grilles" class="titre-1-8">—</strong>
                                </div>
                            </div>

                            <!-- Échelles de performance -->
                            <div class="carte-bleu-encadree">
                                <div class="d-flex-between">
                                    <span class="text-muted">Échelles de performance</span>
                                    <strong id="stat-echelles" class="titre-1-8">—</strong>
                                </div>
                            </div>

                            <!-- Cartouches de rétroaction -->
                            <div class="carte-bleu-encadree">
                                <div class="d-flex-between">
                                    <span class="text-muted">Cartouches de rétroaction</span>
                                    <strong id="stat-cartouches" class="titre-1-8">—</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sous-section: Productions -->
                <div id="materiel-productions" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Productions étudiantes</span>
                        <span class="titre-emoji-container">
                            <span class="primo-aide" data-target="note-productions">😎</span>
                            <span class="primo-aide" data-target="conseil-productions">😎</span>
                        </span>
                    </h2>
                    <p class="text-muted">Définir les évaluations du cours et leurs pondérations</p>

                    <!-- Carte Note -->
                    <div id="note-productions" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les productions représentent l'ensemble des travaux que les étudiants doivent réaliser
                        durant le cours. Elles peuvent être de type formatif (pour l'apprentissage) ou certificatif (pour l'évaluation).
                        Chaque production peut être associée à une grille de critères et possède une pondération qui contribue à la note finale.
                        Les portfolios permettent de regrouper plusieurs artefacts et de sélectionner automatiquement les N meilleurs selon
                        la pratique de notation configurée.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-productions" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong> Assure-toi que la somme des pondérations totalise 100%. Pour les portfolios, définis d'abord le nombre d'artefacts
                        à retenir (ex: les 3 meilleurs sur 9). Les artefacts individuels n'ont pas de pondération propre, c'est le portfolio
                        conteneur qui définit la pondération globale. Pense à verrouiller les productions une fois finalisées pour éviter
                        les modifications accidentelles.
                    </div>

                    <!-- LAYOUT SIDEBAR 2 COLONNES -->
                    <div class="layout-sidebar-2col">

                        <!-- SIDEBAR GAUCHE (280px, sticky) -->
                        <div class="sidebar-navigation">

                            <!-- Liste des productions -->
                            <div class="sidebar-liste" id="sidebarListeProductions">
                                <!-- Généré par afficherListeProductions() -->
                            </div>
                        </div>

                        <!-- ZONE PRINCIPALE (centrale, scroll) -->
                        <div class="zone-principale">

                            <!-- Barre d'en-tête avec boutons (toujours visible) -->
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <!-- Boutons Import/Export à gauche -->
                                <div style="display: flex; gap: 10px;">
                                    <button class="btn btn-confirmer" onclick="exporterProductions()">
                                        Exporter toutes les productions
                                    </button>
                                    <button class="btn btn-principal" onclick="document.getElementById('fichier-import-productions-local').click()">
                                        Importer des productions
                                    </button>
                                    <input type="file" id="fichier-import-productions-local" accept=".json" style="display: none;" onchange="importerProductions(event)">
                                </div>
                                <!-- Bouton Nouvelle production à droite -->
                                <button onclick="creerNouvelleProduction()" class="btn btn-principal">
                                    + Nouvelle production
                                </button>
                            </div>

                            <!-- Message d'accueil initial -->
                            <div class="zone-principale-accueil" id="accueilProductions">
                                <p>Sélectionnez une production dans la liste</p>
                            </div>

                            <!-- Formulaire d'édition -->
                            <div id="formulaireProduction" style="display: none;">

                                <!-- Champs principaux -->
                                <div id="champsStandard" style="display: grid; grid-template-columns: 1.5fr 1.5fr 1.5fr 1fr; gap: 15px; margin-bottom: 15px;">
                                    <div class="groupe-form">
                                        <label>Type</label>
                                        <select id="productionType" class="controle-form"
                                            onchange="gererChangementTypeProduction()">
                                            <option value="">Choisir...</option>
                                            <optgroup label="Évaluations sommatives (comptent dans la note)">
                                                <option value="examen">Examen</option>
                                                <option value="travail">Travail écrit</option>
                                                <option value="quiz">Quiz/Test</option>
                                                <option value="presentation">Présentation</option>
                                                <option value="autre">Autre</option>
                                            </optgroup>
                                            <optgroup label="Évaluations formatives (ne comptent PAS dans la note)">
                                                <option value="examen-formatif">Examen formatif</option>
                                                <option value="travail-formatif">Travail formatif</option>
                                                <option value="quiz-formatif">Quiz/Test formatif</option>
                                                <option value="presentation-formatif">Présentation formative</option>
                                                <option value="autre-formatif">Autre formatif</option>
                                            </optgroup>
                                            <optgroup label="Pratique Alternative de Notation (PAN)">
                                                <option value="portfolio">Portfolio (conteneur)</option>
                                                <option value="artefact-portfolio">Artefact portfolio</option>
                                            </optgroup>
                                        </select>
                                    </div>
                                    <div class="groupe-form">
                                        <label>Titre</label>
                                        <input type="text" id="productionTitre" class="controle-form"
                                            placeholder="Ex: Analyse #1">
                                    </div>
                                    <div class="groupe-form">
                                        <label>Description</label>
                                        <input type="text" id="productionDescription" class="controle-form"
                                            placeholder="Ex: Stratégies">
                                    </div>
                                    <div class="groupe-form" id="champPonderation">
                                        <label>Pondération (%)</label>
                                        <input type="number" id="productionPonderation" class="controle-form" min="0"
                                            max="100" placeholder="Ex: 20">
                                    </div>
                                    <div class="groupe-form" id="champGrilleInline" style="display: none;">
                                        <label>Grille de critères</label>
                                        <select id="productionGrilleInline" class="controle-form">
                                            <option value="">Aucune</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Grille sur sa propre ligne (pour types standards) -->
                                <div class="groupe-form" id="champGrilleSeparee" style="margin-bottom: 15px;">
                                    <label>Grille de critères</label>
                                    <select id="productionGrille" class="controle-form">
                                        <option value="">Aucune</option>
                                    </select>
                                </div>

                                <small id="msgPonderationArtefact" class="msg-info-artefact">
                                    Les artefacts individuels n'ont pas de pondération propre. C'est le Portfolio
                                    conteneur qui définit la pondération globale.
                                </small>

                                <!-- CHAMPS SPÉCIFIQUES AU PORTFOLIO -->
                                <div id="champsPortfolio" class="carte-config-portfolio">
                                    <p class="note-explicative-config" style="margin: 0;">
                                        <strong>ℹ️ Configuration des règles de notation</strong><br>
                                        Les règles de calcul du portfolio (nombre d'artefacts à retenir, minimum requis, etc.)
                                        se configurent dans <strong>Réglages → Pratique de notation → Configuration PAN</strong>.
                                    </p>
                                    <p class="note-explicative-config" style="margin-top: 10px;">
                                        Le portfolio inclura automatiquement tous les artefacts de type «Artefact portfolio» créés durant la session.
                                    </p>
                                </div>

                                <!-- Objectif et Tâche -->
                                <div class="grille-form-2col-objectif-tache">
                                    <div class="groupe-form">
                                        <label>Objectif d'apprentissage</label>
                                        <textarea id="productionObjectif" class="controle-form" rows="3"
                                            placeholder="Ex: Développer les compétences d'analyse..."></textarea>
                                    </div>
                                    <div class="groupe-form">
                                        <label>Description de la tâche</label>
                                        <textarea id="productionTache" class="controle-form" rows="3"
                                            placeholder="Ex: Rédiger un texte de 500 mots..."></textarea>
                                    </div>
                                </div>

                                <!-- Boutons du formulaire -->
                                <div class="btn-groupe" style="display: flex; justify-content: space-between; align-items: center;">
                                    <!-- Boutons gauche (actions sur la production) -->
                                    <div style="display: flex; gap: 10px;">
                                        <button id="btnExporterProduction" class="btn btn-secondaire" onclick="exporterProductionActive()" style="display: none;" title="Exporter cette production en JSON">
                                            Exporter cette production
                                        </button>
                                        <button id="btnImporterProduction" class="btn btn-secondaire" onclick="document.getElementById('fichier-import-production-individuelle').click()" style="display: none;" title="Importer pour remplacer cette production">
                                            Importer dans cette production
                                        </button>
                                        <input type="file" id="fichier-import-production-individuelle" accept=".json" style="display: none;" onchange="importerDansProductionActive(event)">
                                        <button id="btnDupliquerProduction" class="btn btn-secondaire" onclick="dupliquerProductionActive()" style="display: none;" title="Créer une copie de cette production">
                                            Dupliquer
                                        </button>
                                        <button id="btnSupprimerProduction" class="btn btn-supprimer" onclick="supprimerProductionActive()" style="display: none;" title="Supprimer cette production">
                                            Supprimer
                                        </button>
                                    </div>
                                    <!-- Boutons droite (actions principales) -->
                                    <div style="display: flex; gap: 10px;">
                                        <button class="btn btn-annuler" onclick="annulerFormProduction()">Annuler</button>
                                        <button class="btn btn-confirmer" onclick="sauvegarderProduction()">
                                            <span id="btnTexteEvaluation">Ajouter</span>
                                        </button>
                                    </div>
                                </div>

                            </div><!-- Fin du formulaireProduction -->

                            <!-- Conteneurs cachés pour compatibilité -->
                            <div style="display: none;">
                                <div id="vueProductionsParType"></div>
                                <div id="tableauEvaluationsContainer"></div>
                                <span id="nombreEvaluations">0</span>
                                <span id="ponderationTotale">0%</span>
                                <span id="statutPonderation"></span>
                                <span id="typesEvaluations"></span>
                            </div>

                        </div><!-- Fin zone-principale -->

                    </div><!-- Fin layout-sidebar-2col -->

                </div><!--fin sous-section productions-->

                <!-- Sous-section : Grilles de critères -->
                <div id="materiel-grille-criteres" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Grilles de critères</span>
                        <span class="titre-emoji-container">
                            <span class="primo-aide" data-target="note-grilles">😎</span>
                            <span class="primo-aide" data-target="conseil-grilles">😎</span>
                        </span>
                    </h2>
                    <p class="text-muted">Créer des grilles de critères réutilisables pour évaluer différents types
                        de
                        productions.</p>

                    <!-- Carte Note -->
                    <div id="note-grilles" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les grilles de critères définissent les aspects sur lesquels les productions sont évaluées.
                        Chaque critère possède une pondération relative et peut être de type holistique (jugement global), analytique
                        (points par élément) ou algorithmique (calcul automatique). Dans le modèle SRPNF, les cinq critères sont :
                        Structure (15%), Rigueur (20%), Plausibilité (10%), Nuance (25%) et Français (30%). Les grilles peuvent être
                        réutilisées pour différentes productions et verrouillées une fois finalisées.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-grilles" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong> Pour le critère Français, utilise le type algorithmique avec la formule (nb_erreurs / nb_mots) × 100.
                        Les grilles peuvent être dupliquées et modifiées pour créer des variantes adaptées à différents types
                        de productions. Pense à nommer tes grilles de façon descriptive (ex: "Grille analyse littéraire", "Grille dissertation").
                        La somme des pondérations des critères doit totaliser 100%.
                    </div>

                    <!-- LAYOUT SIDEBAR 2 COLONNES -->
                    <div class="layout-sidebar-2col">

                        <!-- SIDEBAR GAUCHE (280px, sticky) -->
                        <div class="sidebar-navigation">

                            <!-- Liste des grilles -->
                            <div class="sidebar-liste" id="sidebarListeGrilles">
                                <!-- Généré par afficherListeGrilles() -->
                            </div>
                        </div>

                        <!-- ZONE PRINCIPALE (centrale, scroll) -->
                        <div class="zone-principale">

                            <!-- Barre d'en-tête avec boutons (toujours visible) -->
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <!-- Boutons Import/Export à gauche -->
                                <div style="display: flex; gap: 10px;">
                                    <button class="btn btn-confirmer" onclick="exporterGrilles()">
                                        Exporter toutes les grilles
                                    </button>
                                    <button class="btn btn-principal" onclick="document.getElementById('fichier-import-grilles-local').click()">
                                        Importer des grilles
                                    </button>
                                    <input type="file" id="fichier-import-grilles-local" accept=".json" style="display: none;" onchange="importerGrilles(event)">
                                </div>
                                <!-- Bouton Nouvelle grille à droite -->
                                <button onclick="creerNouvelleGrille()" class="btn btn-principal">
                                    + Nouvelle grille
                                </button>
                            </div>

                            <!-- Message d'accueil initial -->
                            <div class="zone-principale-accueil" id="accueilGrilles">
                                <p>Sélectionnez une grille dans la liste</p>
                            </div>

                            <!-- Formulaire d'édition de grille -->
                            <div id="conteneurEditionGrille" style="display: none;">

                                <!-- Nom de la grille -->
                                <div class="groupe-form" class="max-w-500-mb-20">
                                    <label>Nom de la grille :</label>
                                    <input type="text" id="nomGrilleTemplate" class="controle-form"
                                        placeholder="Ex: Grille analyse littéraire" onchange="sauvegarderNomGrille()">
                                </div>

                                <!-- Liste des critères -->
                                <div id="listeCriteres" class="mb-20">
                                    <!-- Critères générés dynamiquement -->
                                </div>

                                <!-- Total pondération -->
                                <div style="margin-bottom: 15px; padding: 10px; background: var(--bleu-tres-pale); border-radius: 4px; display: flex; justify-content: space-between; align-items: center;">
                                    <span style="font-weight: 500;">Pondération totale des critères :</span>
                                    <span id="totalPonderationAffichage" style="font-size: 1.2rem; font-weight: 600; color: var(--bleu-fonce);">0%</span>
                                </div>

                                <!-- Boutons du formulaire -->
                                <div class="btn-groupe" style="display: flex; justify-content: space-between; align-items: center;">
                                    <!-- Boutons gauche (actions sur la grille) -->
                                    <div style="display: flex; gap: 10px;">
                                        <button id="btnExporterGrille" class="btn btn-secondaire" onclick="exporterGrilleActive()" style="display: none;" title="Exporter cette grille en JSON">
                                            Exporter cette grille
                                        </button>
                                        <button id="btnImporterGrille" class="btn btn-secondaire" onclick="document.getElementById('fichier-import-grille-individuelle').click()" style="display: none;" title="Importer pour remplacer cette grille">
                                            Importer dans cette grille
                                        </button>
                                        <input type="file" id="fichier-import-grille-individuelle" accept=".json" style="display: none;" onchange="importerDansGrilleActive(event)">
                                        <button id="btnDupliquerGrille" class="btn btn-secondaire" onclick="dupliquerGrilleActive()" style="display: none;" title="Créer une copie de cette grille">
                                            Dupliquer
                                        </button>
                                        <button id="btnSupprimerGrille" class="btn btn-supprimer" onclick="supprimerGrilleActive()" style="display: none;" title="Supprimer cette grille">
                                            Supprimer
                                        </button>
                                    </div>
                                    <!-- Boutons droite (actions principales) -->
                                    <div style="display: flex; gap: 10px;">
                                        <button class="btn btn-annuler" onclick="annulerFormGrille()">Annuler</button>
                                        <button class="btn btn-confirmer" onclick="sauvegarderGrilleComplete()">
                                            <span id="btnTexteGrille">Sauvegarder</span>
                                        </button>
                                    </div>
                                </div>

                            </div><!-- Fin conteneurEditionGrille -->

                            <!-- Conteneurs cachés pour compatibilité -->
                            <div style="display: none;">
                                <div id="vueGrillesCriteres"></div>
                                <div id="selectGrilleTemplate"></div>
                                <div id="nomGrilleContainer"></div>
                                <div id="aucuneEvalSelectionnee"></div>
                                <div id="criteresContainer"></div>
                                <div id="formAjoutCritere"></div>
                                <span id="totalPonderationCriteres">0%</span>
                                <span id="statutPonderationCriteres"></span>
                            </div>

                        </div><!-- Fin zone-principale -->

                    </div><!-- Fin layout-sidebar-2col -->

                </div><!--fin sous-section grille-criteres-->

                <!-- Sous-section : Échelle de performance -->
                <div id="materiel-echelle-performance" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Échelles de performance</span>
                        <span class="titre-emoji-container">
                            <span class="primo-aide" data-target="note-echelle">😎</span>
                        </span>
                    </h2>
                    <p class="text-muted">Configuration de l'échelle de notation pour les PAN/SBG</p>

                    <!-- Carte Note (pas de Conseil pour Échelle) -->
                    <div id="note-echelle" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> L'échelle de performance définit les niveaux de maîtrise utilisés pour évaluer les critères.
                        L'échelle IDME (Insuffisant, en Développement, Maîtrisé, Étendu) basée sur la taxonomie SOLO est utilisée dans la pratique PAN-Maîtrise.
                        Chaque niveau correspond à un seuil de performance : Insuffisant (&lt; 64%), Développement (65-74%), Maîtrisé (75-84%),
                        Étendu (≥ 85%). Cette échelle peut être personnalisée selon les besoins pédagogiques et permet un suivi longitudinal
                        de la progression des étudiants. Vous pouvez créer vos propres échelles de notation adaptées à votre pratique.
                    </div>

                    <!-- LAYOUT SIDEBAR 2 COLONNES -->
                    <div class="layout-sidebar-2col">

                        <!-- SIDEBAR GAUCHE (280px, sticky) -->
                        <div class="sidebar-navigation">

                            <!-- Liste des échelles -->
                            <div class="sidebar-liste" id="sidebarListeEchelles">
                                <!-- Généré par afficherListeEchelles() -->
                            </div>
                        </div>

                        <!-- ZONE PRINCIPALE (centrale, scroll) -->
                        <div class="zone-principale">

                            <!-- Barre d'en-tête avec boutons (toujours visible) -->
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <!-- Boutons Import/Export à gauche -->
                                <div style="display: flex; gap: 10px;">
                                    <button class="btn btn-confirmer" onclick="exporterEchelles()">
                                        Exporter toutes les échelles
                                    </button>
                                    <button class="btn btn-principal" onclick="document.getElementById('fichier-import-echelles-local').click()">
                                        Importer des échelles
                                    </button>
                                    <input type="file" id="fichier-import-echelles-local" accept=".json" style="display: none;" onchange="importerEchelles(event)">
                                </div>
                                <!-- Bouton Nouvelle échelle à droite -->
                                <button onclick="creerNouvelleEchelle()" class="btn btn-principal">
                                    + Nouvelle échelle
                                </button>
                            </div>

                            <!-- Message d'accueil initial -->
                            <div class="zone-principale-accueil" id="accueilEchelles">
                                <p>Sélectionnez une échelle dans la liste</p>
                            </div>

                            <!-- Formulaire d'édition -->
                            <div id="conteneurEditionEchelle" style="display: none;">

                                <!-- Nom de l'échelle -->
                                <div class="groupe-form" class="max-w-500-mb-20">
                                    <label>Nom de l'échelle :</label>
                                    <input type="text" id="nomEchelleTemplate" class="controle-form"
                                        placeholder="Ex: Échelle standard A-F" onchange="sauvegarderNomEchelle()">
                                </div>

                                <!-- Tableau des niveaux -->
                                <div id="tableauNiveauxEchelle" class="mb-20">
                                    <!-- Niveaux générés dynamiquement -->
                                </div>

                                <!-- Aperçu visuel -->
                                <div id="apercuEchelleNiveaux" style="display: flex; gap: 10px; flex-wrap: wrap;
                     align-items: center; padding: 10px; background: white; border-radius: 4px; margin-bottom: 20px;">
                                    <!-- Généré par afficherApercuEchelle() -->
                                </div>

                                <!-- Boutons du formulaire -->
                                <div class="btn-groupe" style="display: flex; justify-content: space-between; align-items: center;">
                                    <!-- Boutons gauche (actions sur l'échelle) -->
                                    <div style="display: flex; gap: 10px;">
                                        <button id="btnExporterEchelle" class="btn btn-secondaire" onclick="exporterEchelleActive()" style="display: none;" title="Exporter cette échelle en JSON">
                                            Exporter cette échelle
                                        </button>
                                        <button id="btnImporterEchelle" class="btn btn-secondaire" onclick="document.getElementById('fichier-import-echelle-individuelle').click()" style="display: none;" title="Importer pour remplacer cette échelle">
                                            Importer dans cette échelle
                                        </button>
                                        <input type="file" id="fichier-import-echelle-individuelle" accept=".json" style="display: none;" onchange="importerDansEchelleActive(event)">
                                        <button id="btnDupliquerEchelle" class="btn btn-secondaire" onclick="dupliquerEchelleActive()" style="display: none;" title="Créer une copie de cette échelle">
                                            Dupliquer
                                        </button>
                                        <button id="btnSupprimerEchelle" class="btn btn-supprimer" onclick="supprimerEchelleActive()" style="display: none;" title="Supprimer cette échelle">
                                            Supprimer
                                        </button>
                                    </div>
                                    <!-- Boutons droite (actions principales) -->
                                    <div style="display: flex; gap: 10px;">
                                        <button class="btn btn-annuler" onclick="annulerFormEchelle()">Annuler</button>
                                        <button class="btn btn-confirmer" onclick="sauvegarderEchelleComplete()">
                                            <span id="btnTexteEchelle">Sauvegarder</span>
                                        </button>
                                    </div>
                                </div>

                            </div><!-- Fin conteneurEditionEchelle -->

                            <!-- Conteneurs cachés pour compatibilité -->
                            <div style="display: none;">
                                <div id="vueEchellesNiveaux"></div>
                                <div id="selectEchelleTemplate"></div>
                                <div id="nomEchelleContainer"></div>
                                <div id="typeEchelle"></div>
                                <div id="seuilReussite"></div>
                                <div id="champAutreEchelle"></div>
                                <div id="tableauNiveaux"></div>
                                <div id="apercuEchelle"></div>
                            </div>

                        </div><!-- Fin zone-principale -->

                    </div><!-- Fin layout-sidebar-2col -->

                        <!-- ANCIEN SYSTÈME (Caché par défaut, gardé pour compatibilité) -->
                        <div style="display: none;">

                        <!-- Sélecteur d'échelle -->
                        <div class="groupe-form" class="max-w-400-mb20">
                            <label>Créer ou modifier une échelle de performance :</label>
                            <select id="selectEchelleTemplate" class="controle-form"
                                onchange="chargerEchelleTemplate()">
                                <option value="">-- Nouvelle échelle --</option>
                                <option value="new"> Créer une nouvelle échelle</option>
                            </select>
                        </div>

                        <!-- Nom de l'échelle (visible uniquement en création/édition) -->
                        <div id="nomEchelleContainer" class="groupe-form"
                            class="max-w-400-mb20-hidden">
                            <label>Nom de l'échelle :</label>
                            <input type="text" id="nomEchelleTemplate" class="controle-form"
                                placeholder="Ex: Échelle standard A-F" onchange="sauvegarderNomEchelle()">
                        </div>

                        <!-- IMPORT/EXPORT ÉCHELLES -->
                        <div class="d-flex-gap10-mb20-info">
                            <button class="btn btn-principal" onclick="exporterEchelles()" class="flex-1">
                                Exporter l'échelle
                            </button>
                            <button class="btn btn-principal" onclick="document.getElementById('fichier-import-echelles-local').click()" class="flex-1">
                                Importer une échelle
                            </button>
                            <input type="file" id="fichier-import-echelles-local" accept=".json" style="display: none;" onchange="importerEchelles(event)">
                        </div>

                        <!-- Note explicative -->
                        <div style="font-size: 0.85rem; color: var(--gris-moyen); margin-bottom: 20px; padding: 12px;
             background: var(--bleu-pale); border-radius: 6px; border-left: 3px solid var(--bleu-moyen);">
                            <strong>Note :</strong> Cette échelle s'applique uniquement aux pratiques alternatives
                            de
                            notation
                            (PAN).
                            La note finale sera convertie en pourcentage pour respecter le RREC. C'est à cette fin
                            que
                            servent les plages de notes et les valeurs ponctuelles.
                        </div>

                        <!-- CONFIGURATION GLOBALE -->
                        <div
                            class="carte-bleu-tres-pale-mb20">
                            <h4 class="titre-bleu-mb-15">Configuration globale
                            </h4>

                            <div class="grid-2-gap15">
                                <div class="groupe-form">
                                    <label>Type d'échelle</label>
                                    <select id="typeEchelle" class="controle-form" onchange="changerTypeEchelle()">
                                        <option value="lettres">Lettres (A, B, C...)</option>
                                        <option value="pourcentage">Pourcentage (%)</option>
                                        <option value="autre">Autre (personnalisé)</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Seuil de réussite (%)</label>
                                    <input type="number" id="seuilReussite" class="controle-form" value="60" min="0"
                                        max="100" onchange="sauvegarderConfigEchelle()">
                                </div>
                            </div>

                            <!-- Champ conditionnel pour type "autre" -->
                            <div id="champAutreEchelle" class="hidden-mt15">
                                <div class="groupe-form">
                                    <label>Note de passage personnalisée :</label>
                                    <div id="notePassageContainer">
                                        <!-- Input sera inséré ici par changerTypeEchelle() -->
                                    </div>
                                </div>
                            </div>

                            <!-- Génération de niveaux personnalisés -->
                            <div class="groupe-form" class="mt-15">
                                <label>Générer des niveaux personnalisés (codes séparés par virgules) :</label>
                                <div class="d-flex-gap-10">
                                    <input type="text" id="codesPersonnalises" class="controle-form"
                                        placeholder="Ex: Excellent, Bon, Moyen, Faible"
                                        onchange="sauvegarderConfigEchelle()">
                                    <button class="btn btn-principal" onclick="genererNiveauxPersonnalises()">Générer</button>
                                </div>
                                <small
                                    style="color: var(--bleu-leger); font-size: 0.8rem; display: block; margin-top: 5px;">
                                    Les niveaux seront créés automatiquement avec répartition uniforme des
                                    pourcentages
                                </small>
                            </div>
                        </div>

                        <!-- TABLEAU DES NIVEAUX -->
                        <div
                            class="carte-white-border">
                            <h4 class="titre-bleu-mb-15">Niveaux de performance
                            </h4>

                            <div id="tableauNiveaux">
                                <!-- Le tableau sera généré ici par afficherTableauNiveaux() -->
                            </div>

                            <!-- Boutons d'actions -->
                            <div class="btn-groupe" class="mt-20-justify-between">
                                <div class="d-flex-gap-10">
                                    <button class="btn btn-principal" onclick="sauvegarderNiveaux()">
                                        Sauvegarder les niveaux
                                    </button>
                                    <button class="btn btn-annuler" onclick="reinitialiserNiveauxDefaut()">
                                        Réinitialiser par défaut
                                    </button>
                                </div>
                                <div class="d-flex-gap-10">
                                    <button id="btnDupliquerEchelle" class="btn btn-modifier"
                                        onclick="dupliquerEchelleActuelle()" style="display: none;">
                                        Dupliquer
                                    </button>
                                    <button class="btn btn-confirmer" onclick="enregistrerCommeEchelle()">
                                        Enregistrer comme échelle
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Visualisation de l'échelle -->
                        <div style="margin-top: 20px; padding: 15px; background: var(--vert-pale); 
             border-radius: 6px; border: 1px solid var(--vert-leger);">
                            <h5 class="text-vert-leger-mb10">Aperçu de l'échelle</h5>
                            <div id="apercuEchelle" style="display: flex; justify-content: space-between; 
                 align-items: center; padding: 10px; background: white; border-radius: 4px;">
                                <!-- L'aperçu sera généré ici par afficherApercuEchelle() -->
                            </div>
                        </div>

                        <!-- Toggle Conseil pratique -->
                        <details class="mb-20">
                            <summary style="cursor: pointer; padding: 12px; background: var(--bleu-tres-pale);
                                border-radius: 6px; border-left: 3px solid var(--bleu-moyen);
                                color: var(--bleu-principal); user-select: none; display: flex;
                                justify-content: space-between; align-items: center;">
                                <span></span>
                                <span class="text-12">💡</span>
                            </summary>
                            <div class="td-sm-muted-lh">
                                <strong>Conseil pratique - Aide à la configuration :</strong>
                                <ul class="m-8-0-pl20-lh16">
                                    <li><strong>Code</strong> : 1 à 3 caractères (ex: I, D, M, E)</li>
                                    <li><strong>Nom</strong> : Titre du niveau (ex: Maîtrisé)</li>
                                    <li><strong>Description</strong> : Contexte pédagogique (optionnel)</li>
                                    <li><strong>Min/Max</strong> : Plage de % (0-100%)</li>
                                    <li><strong>Valeur ponctuelle</strong> : Note utilisée pour les calculs (ex: 75%)</li>
                                    <li><strong>Couleur</strong> : Choisir dans la palette</li>
                                </ul>
                            </div>
                        </details>

                        </div><!-- Fin ANCIEN SYSTÈME -->

                </div><!--fin sous-section echelle-performance-->


                <!-- Sous-section : Rétroactions -->
                <div id="materiel-retroactions" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Cartouches de rétroaction</span>
                        <span class="titre-emoji-container">
                            <span class="primo-aide" data-target="note-retroactions">😎</span>
                            <span class="primo-aide" data-target="conseil-retroactions">😎</span>
                        </span>
                    </h2>
                    <p class="text-muted">Créer des cartouches de rétroaction basées sur les critères et l'échelle
                        de
                        performance</p>

                    <!-- Carte Note -->
                    <div id="note-retroactions" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les rétroactions seront générées automatiquement en assemblant les commentaires prérédigés
                        par l'enseignant·e selon les critères d'évaluation et le niveau de performance atteint pour
                        chaque critère. Un ensemble complet de commentaires porte ici le nom de <strong>cartouche</strong>.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-retroactions" class="carte-info-toggle carte-info-conseil" style="display: none;">
                            <strong>Conseil pratique :</strong> Les commentaires peuvent avoir entre 50 et 75 mots environ. Rédige-les de façon personnelle
                            et constructive. Chaque cellule de la matrice correspond à un commentaire pour un niveau de
                            performance donné sur un critère spécifique. Utilise les codes de ta grille (I, D, M, E) et
                            le format proposé pour structurer tes commentaires. Les cartouches peuvent être verrouillées
                            une fois finalisées.
                        </div>

<!-- CARTE : CARTOUCHES DE RÉTROACTION -->
                    <div class="carte">

                        <!-- LAYOUT SIDEBAR 2 COLONNES -->
                        <div class="layout-sidebar-2col">

                            <!-- SIDEBAR GAUCHE (280px, sticky) -->
                            <div class="sidebar-navigation">

                                <!-- Liste des cartouches -->
                                <div class="sidebar-liste" id="listeCartouchesBanque">
                                    <p class="banque-vide">Chargement...</p>
                                </div>
                            </div>

                            <!-- ZONE PRINCIPALE (centrale, scroll) -->
                            <div class="zone-principale">

                                <!-- Barre d'en-tête avec boutons (toujours visible) -->
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                    <!-- Boutons Import/Export à gauche -->
                                    <div style="display: flex; gap: 10px;">
                                        <button id="btnExporterToutesCartouches" class="btn btn-confirmer">
                                            Exporter toutes les cartouches
                                        </button>
                                        <button class="btn btn-principal" onclick="document.getElementById('fichier-import-cartouches-all').click()">
                                            Importer des cartouches
                                        </button>
                                        <input type="file" id="fichier-import-cartouches-all" accept=".json" style="display: none;" onchange="importerCartouches(event)">
                                    </div>
                                    <!-- Bouton Nouvelle cartouche à droite -->
                                    <button onclick="creerNouvelleCartouche()" class="btn btn-principal">
                                        + Nouvelle cartouche
                                    </button>
                                </div>

                                <!-- Message d'accueil initial -->
                                <div class="zone-principale-accueil" id="messageAccueilCartouche">
                                    <p>Sélectionnez une cartouche dans la liste</p>
                                </div>

                                <!-- ANCIEN SYSTÈME (Caché, gardé pour compatibilité interne) -->
                                <div style="display: none;">
                                    <select id="selectGrilleRetroaction"></select>
                                    <select id="selectCartouche"></select>
                                    <div id="aucuneEvalRetroaction"></div>
                                </div>

                                <!-- Informations de la cartouche -->
                                <div id="infoCartouche" class="hidden-mb-20">

                                    <!-- Message de verrouillage -->
                                    <div id="alerteVerrouillage" class="hidden-my15-warning">
                                        <div class="d-flex-between-center">
                                            <div>
                                                <strong class="text-warning-dark">🔒 Cartouche verrouillée</strong>
                                                <p class="text-warning-856-sm-mt5">Cette cartouche est en lecture seule. Déverrouillez-la pour pouvoir la modifier.</p>
                                            </div>
                                            <button class="btn btn-principal" id="btnDeverrouillerCartouche" class="whitespace-nowrap">
                                                Déverrouiller
                                            </button>
                                        </div>
                                    </div>

                            <div class="groupe-form" class="max-w-500">
                                <label>Nom de la cartouche :</label>
                                <input type="text" id="nomCartouche" class="controle-form"
                                    placeholder="Ex: Dissertation argumentative - Session Automne 2025">
                            </div>

                            <div class="groupe-form" class="mt-15">
                                <label>Contexte de la rétroaction (optionnel) :</label>
                                <textarea id="contexteCartouche" class="controle-form" rows="3"
                                    placeholder="Ex: Cette production porte sur l'analyse d'un texte argumentatif. L'étudiant·e devait démontrer sa capacité à..."></textarea>
                                <small style="color: var(--gris-moyen); font-size: 0.85rem;">Ce texte apparaîtra au début de la
                                    rétroaction si
                                    l'option est cochée lors de la génération.</small>
                            </div>

                            <!-- Liste des cartouches existantes (DÉSACTIVÉ - remplacé par sidebar) -->
                            <div id="listeCartouchesExistants" class="d-none-important">
                                <div id="listeCartouchesContainer"></div>
                            </div>
                                </div>

                                <!-- MATRICE DE RÉTROACTION -->
                                <div id="matriceRetroaction" style="display: none;">
                            <h4 class="titre-bleu-mb-15">
                                Matrice des commentaires de rétroaction
                            </h4>

                            <div id="matriceContainer" class="overflow-x-auto">
                                <!-- La matrice sera générée dynamiquement ici par afficherMatriceRetroaction() -->
                            </div>
                                </div>

                                <!-- APERÇU DE RÉTROACTION -->
                                <div id="apercuRetroaction" style="display: none; margin-top: 20px; padding: 15px;
             background: var(--vert-pale); border-radius: 6px; border: 1px solid var(--vert-leger);">
                                    <h5 class="text-vert-leger-mb10">
                                        Aperçu d'une rétroaction générée
                                    </h5>
                                    <div id="exempleRetroaction" style="padding: 15px; background: white;
                 border-radius: 4px; font-size: 0.9rem; line-height: 1.6;">
                                        <!-- L'aperçu sera généré ici par genererApercuAleatoire() -->
                                    </div>
                                    <button class="btn btn-principal mt-2" onclick="genererApercuAleatoire()">
                                        Générer un aperçu aléatoire
                                    </button>
                                </div>

                                <!-- Boutons du formulaire -->
                                <div class="btn-groupe" style="display: flex; justify-content: space-between; align-items: center; margin-top: 30px;">
                                    <!-- Boutons gauche (actions sur la cartouche) -->
                                    <div style="display: flex; gap: 10px;">
                                        <button id="btnExporterCartouche" class="btn btn-secondaire" style="display: none;" title="Exporter cette cartouche en JSON">
                                            Exporter cette cartouche
                                        </button>
                                        <button id="btnImporterCartouche" class="btn btn-secondaire" onclick="document.getElementById('fichier-import-cartouche-individuelle').click()" style="display: none;" title="Importer pour remplacer cette cartouche">
                                            Importer dans cette cartouche
                                        </button>
                                        <input type="file" id="fichier-import-cartouche-individuelle" accept=".json" style="display: none;" onchange="importerDansCartoucheActive(event)">
                                        <button id="btnImporterCartoucheTxt" class="btn btn-secondaire" onclick="document.getElementById('fichier-import-cartouche-txt').click()" style="display: none;" title="Importer commentaires depuis fichier .txt">
                                            Importer depuis fichier .txt
                                        </button>
                                        <input type="file" id="fichier-import-cartouche-txt" accept=".txt" style="display: none;" onchange="importerCartoucheDepuisTxt(event)">
                                        <button id="btnDupliquerCartouche" class="btn btn-secondaire" onclick="dupliquerCartoucheActive()" style="display: none;" title="Créer une copie de cette cartouche">
                                            Dupliquer
                                        </button>
                                        <button id="btnSupprimerCartouche" class="btn btn-supprimer" onclick="supprimerCartoucheActive()" style="display: none;" title="Supprimer cette cartouche">
                                            Supprimer
                                        </button>
                                    </div>
                                    <!-- Boutons droite (actions principales) -->
                                    <div style="display: flex; gap: 10px;">
                                        <button class="btn btn-annuler" onclick="annulerFormCartouche()">Annuler</button>
                                        <button class="btn btn-confirmer" onclick="sauvegarderCartoucheComplete()">
                                            Sauvegarder
                                        </button>
                                    </div>
                                </div>

                            </div><!-- fin zone-principale -->

                        </div><!-- fin layout-sidebar-2col -->

                    </div><!-- fin carte -->

                </div><!--fin sous-section retroactions-->

                <!-- Sous-section: Objectifs d'apprentissage -->
                <div id="materiel-objectifs" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Ensembles d'objectifs</span>
                        <span class="titre-emoji-container">
                            <span class="primo-aide" data-target="conseil-objectifs">😎</span>
                        </span>
                    </h2>
                    <p class="text-muted">
                        Définissez des ensembles d'objectifs réutilisables pour vos pratiques d'évaluation multi-objectifs.
                        Chaque ensemble regroupe plusieurs objectifs avec leurs pondérations et types. Les ensembles peuvent
                        être exportés et partagés avec vos collègues.
                    </p>

                    <div id="conseil-objectifs" class="carte-info-toggle carte-info-conseil">
                        <strong>Conseil pratique :</strong> Les ensembles d'objectifs sont utilisés dans les pratiques de type
                        «Multi-objectifs pondérés». Créez vos objectifs ici une fois, puis référencez-les dans le wizard
                        de création de pratique. Les modifications apportées à un ensemble se répercutent automatiquement
                        sur toutes les pratiques qui l'utilisent.
                    </div>

<!-- CARTE : OBJECTIFS D'APPRENTISSAGE -->
                    <div class="carte">

                        <!-- LAYOUT SIDEBAR 2 COLONNES -->
                        <div class="layout-sidebar-2col">

                            <!-- SIDEBAR GAUCHE (280px, sticky) -->
                            <div class="sidebar-navigation">

                                <!-- Liste des ensembles -->
                                <div class="sidebar-liste" id="listeEnsemblesObjectifs">
                                    <p class="banque-vide">Aucun ensemble d'objectifs</p>
                                </div>
                            </div>

                            <!-- ZONE PRINCIPALE (centrale, scroll) -->
                            <div class="zone-principale">

                                <!-- Barre d'en-tête avec boutons (toujours visible) -->
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                    <!-- Boutons Import/Export à gauche -->
                                    <div style="display: flex; gap: 10px;">
                                        <button class="btn btn-confirmer" onclick="exporterTousObjectifs()">
                                            Exporter tous les ensembles
                                        </button>
                                        <button class="btn btn-principal" onclick="document.getElementById('importObjectifsInput').click()">
                                            Importer des ensembles
                                        </button>
                                        <input type="file" id="importObjectifsInput" accept=".json" style="display: none;" onchange="traiterImportObjectifs(event)">
                                    </div>
                                    <!-- Bouton Nouvel ensemble à droite -->
                                    <button onclick="creerNouvelEnsembleObjectifs()" class="btn btn-principal">
                                        + Nouvel ensemble
                                    </button>
                                </div>

                                <!-- Message d'accueil initial -->
                                <div class="zone-principale-accueil" id="messageAccueilObjectifs">
                                    <p>Sélectionnez un ensemble dans la liste</p>
                                </div>

                                <!-- Zone d'édition d'un ensemble -->
                                <div id="editionEnsembleObjectifs" class="hidden">
                                    <!-- Le contenu sera généré dynamiquement -->
                                </div>

                            </div><!-- fin zone-principale -->

                        </div><!-- fin layout-sidebar-2col -->

                    </div><!-- fin carte -->

                </div><!--fin sous-section objectifs-->

            </section><!-- fin section-materiel -->

            <!-- ===================================
                 SECTION: RÉGLAGES
                 =================================== -->
            <section id="section-reglages" class="section">

                <!-- Sous-section: Aperçu des réglages -->
                <div id="reglages-apercu" class="sous-section">
                    <h2>Aperçu de la configuration</h2>
                    <p class="text-muted">
                        Résumé de la configuration actuelle du système. Les statistiques sont calculées en temps réel depuis les données stockées localement.
                    </p>

                    <!-- Grille de cartes métriques bleues harmonisées -->
                    <div class="grille-cartes-metriques">

                        <!-- Informations du cours (4 cartes) -->
                        <div class="carte-metrique-bleue">
                            <div class="carte-metrique-contenu">
                                <span class="carte-metrique-label">Trimestre</span>
                                <strong id="stat-trimestre" class="carte-metrique-valeur">—</strong>
                            </div>
                        </div>

                        <!-- Informations système (2 cartes) -->
                        <div class="carte-metrique-bleue">
                            <div class="carte-metrique-contenu">
                                <span class="carte-metrique-label">Version</span>
                                <strong id="stat-version" class="carte-metrique-valeur">—</strong>
                            </div>
                        </div>

                        <div class="carte-metrique-bleue">
                            <div class="carte-metrique-contenu">
                                <span class="carte-metrique-label">Poids des données</span>
                                <strong id="stat-poids" class="carte-metrique-valeur">—</strong>
                            </div>
                        </div>

                        <div class="carte-metrique-bleue">
                            <div class="carte-metrique-contenu">
                                <span class="carte-metrique-label">Développement</span>
                                <strong id="stat-beta-date" class="carte-metrique-valeur">—</strong>
                            </div>
                        </div>

                    </div>
                    <!-- fin grille cartes métriques -->

                    <!-- Carte informations légales -->
                    <div class="carte" style="margin-top: 25px;">
                        <h3>Informations légales et crédits</h3>
                        <div style="line-height: 1.8; color: #555;">
                            <p><strong>Auteur :</strong> Grégoire Bédard</p>
                            <p><strong>Codé avec :</strong> Claude Code (Anthropic)</p>
                            <p><strong>Licences :</strong></p>
                            <ul style="margin-left: 20px; margin-top: 5px;">
                                <li>Code source : AGPL v3.0 (<a href="https://www.gnu.org/licenses/agpl-3.0.html" target="_blank" rel="noopener noreferrer">voir licence</a>)</li>
                                <li>Contenu pédagogique : CC BY-NC-SA 4.0 (<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreferrer">voir licence</a>)</li>
                            </ul>
                            <p style="margin-top: 15px; font-size: 0.9rem; color: #777;">
                                La licence non-commerciale (NC) protège le travail des enseignants tout en favorisant le partage
                                et le bien commun en éducation. Pour plus de détails, consultez le fichier LICENSE.md.
                            </p>
                        </div>
                    </div>

                </div>
                <!-- fin sous-section reglages-apercu -->

                <!-- Sous-section : Cours -->
                <div id="reglages-cours" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Configuration du cours</span>
                        <span class="titre-emoji-container">
                            <span class="primo-aide" data-target="conseil-cours">😎</span>
                        </span>
                    </h2>
                    <p class="text-muted">Informations techniques du cours : code, nom, compétences, enseignant·e,
                        trimestre,
                        format horaire</p>

                    <!-- Carte Conseil pratique (masquée par défaut) -->
                    <div id="conseil-cours" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong>
                        <ul class="m-0-pl-20-lh">
                            <li><strong>Cours actif :</strong> Un seul cours peut être actif à la fois. Le cours
                                actif est utilisé comme référence dans toute l'application</li>
                            <li><strong>Verrouillage :</strong> Verrouillez un cours terminé pour éviter les
                                modifications accidentelles</li>
                            <li><strong>Duplication :</strong> Dupliquez un cours pour créer rapidement une
                                nouvelle session en modifiant seulement l'année</li>
                            <li><strong>Code de cours :</strong> Format habituel : XXX-XXX-XX
                                (département-numéro-pondération)</li>
                            <li><strong>Format horaire :</strong> Définit comment les heures sont réparties dans
                                la semaine (utilisé pour le calendrier)</li>
                        </ul>
                    </div>

                    <div class="carte">
                        <h3>Cours configurés</h3>

                        <!-- TABLEAU/CONTENEUR DES COURS -->
                        <div id="tableauCoursContainer" class="mb-20">
                            <p class="text-muted" class="text-italic">
                                Aucun cours configuré.
                            </p>
                        </div>

                        <!-- BOUTON AJOUTER UN COURS -->
                        <button id="btnAjouterCours" class="btn btn-confirmer" onclick="afficherFormCours()"
                            class="mb-20">
                            + Ajouter un cours
                        </button>

                        <!-- FORMULAIRE D'AJOUT/MODIFICATION (caché par défaut) -->
                        <div id="formulaireCours" class="form-cache-mt"
                             style="padding: 20px; background: var(--bleu-pale); border: 1px solid var(--bleu-leger); border-radius: 8px;">

                            <h4 id="titreFormCours" class="titre-bleu-mb-20">
                                Nouvelle configuration de cours
                            </h4>

                            <!-- Informations générales -->
                            <h5 class="sous-titre-section">
                                Informations générales
                            </h5>
                            <div class="grille-4col-form" style="margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>Code du cours</label>
                                    <input type="text" id="codeCours" class="controle-form controle-form-compact"
                                        placeholder="Ex: 601-101-MQ">
                                </div>
                                <div class="groupe-form">
                                    <label>Nom du cours</label>
                                    <input type="text" id="nomCours" class="controle-form controle-form-compact"
                                        placeholder="Ex: Écriture et littérature">
                                </div>
                                <div class="groupe-form">
                                    <label>N° de la compétence</label>
                                    <input type="text" id="numeroCompetence" class="controle-form controle-form-compact"
                                        placeholder="Ex: 4EF0">
                                </div>
                                <div class="groupe-form">
                                    <label>Compétence</label>
                                    <input type="text" id="competence" class="controle-form controle-form-compact"
                                        placeholder="Ex: Analyser des textes littéraires">
                                </div>
                            </div>

                            <div class="groupe-form" class="mb-20">
                                <label>Éléments de compétence</label>
                                <textarea id="elementsCompetence" class="controle-form controle-form-compact" rows="4"
                                    placeholder="• Reconnaître le propos du texte&#10;• Repérer et classer des thèmes et procédés stylistiques&#10;• Choisir les éléments de l'analyse"></textarea>
                            </div>

                            <!-- Enseignant·e -->
                            <h5 class="sous-titre-section" style="margin-top: 25px;">
                                Enseignant·e
                            </h5>
                            <!-- Ligne 1: Prénom, Nom, Courriel -->
                            <div class="grille-3col-form" style="margin-bottom: 15px;">
                                <div class="groupe-form">
                                    <label>Prénom</label>
                                    <input type="text" id="prenomEnseignant" class="controle-form controle-form-compact"
                                        placeholder="Ex: Grégoire">
                                </div>
                                <div class="groupe-form">
                                    <label>Nom</label>
                                    <input type="text" id="nomEnseignant" class="controle-form controle-form-compact"
                                        placeholder="Ex: Bédard">
                                </div>
                                <div class="groupe-form">
                                    <label>Courriel <span style="color: var(--gris-leger); font-weight: normal;">(optionnel)</span></label>
                                    <input type="email" id="courrielEnseignant" class="controle-form controle-form-compact"
                                        placeholder="Ex: prenom.nom@cegep.qc.ca">
                                </div>
                            </div>

                            <!-- Ligne 2: Discipline, Département, Local -->
                            <div class="grille-3col-form" style="margin-bottom: 15px;">
                                <div class="groupe-form">
                                    <label>Discipline <span style="color: var(--gris-leger); font-weight: normal;">(optionnel)</span></label>
                                    <input type="text" id="disciplineEnseignant" class="controle-form controle-form-compact"
                                        placeholder="Ex: Littérature, Philosophie">
                                </div>
                                <div class="groupe-form">
                                    <label>Département</label>
                                    <input type="text" id="departement" class="controle-form controle-form-compact"
                                        placeholder="Ex: Littérature et communication">
                                </div>
                                <div class="groupe-form">
                                    <label>Local</label>
                                    <input type="text" id="local" class="controle-form controle-form-compact" placeholder="Ex: 2314">
                                </div>
                            </div>

                            <!-- Ligne 3: Institution, Site web -->
                            <div class="grille-3col-form" style="margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>Institution <span style="color: var(--gris-leger); font-weight: normal;">(optionnel)</span></label>
                                    <input type="text" id="institutionEnseignant" class="controle-form controle-form-compact"
                                        placeholder="Ex: Cégep de Drummondville">
                                </div>
                                <div class="groupe-form">
                                    <label>Site web <span style="color: var(--gris-leger); font-weight: normal;">(optionnel)</span></label>
                                    <input type="url" id="siteWebEnseignant" class="controle-form controle-form-compact"
                                        placeholder="Ex: https://monsite.com">
                                </div>
                                <div class="groupe-form">
                                    <!-- Colonne vide pour garder l'alignement -->
                                </div>
                            </div>

                            <!-- Session et horaire -->
                            <h5 class="sous-titre-section" style="margin-top: 25px;">
                                Session et horaire
                            </h5>
                            <div
                                class="grid-4-gap15-mb20">
                                <div class="groupe-form">
                                    <label>Session</label>
                                    <select id="session" class="controle-form controle-form-compact">
                                        <option value="H">Hiver</option>
                                        <option value="A">Automne</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Année</label>
                                    <input type="number" id="annee" class="controle-form controle-form-compact" value="2025" min="2020"
                                        max="2030">
                                </div>
                                <div class="groupe-form">
                                    <label>Heures/semaine</label>
                                    <input type="number" id="heuresParSemaine" class="controle-form controle-form-compact" value="4" min="1"
                                        max="10">
                                </div>
                                <div class="groupe-form">
                                    <label>Format horaire</label>
                                    <select id="formatHoraire" class="controle-form controle-form-compact">
                                        <option value="1x4">1 période de 4h</option>
                                        <option value="2x2" selected>2 périodes de 2h</option>
                                        <option value="4x1">4 périodes de 1h</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Pratique de notation -->
                            <h5 class="sous-titre-section" style="margin-top: 25px;">
                                Pratique de notation
                            </h5>
                            <div class="groupe-form" style="margin-bottom: 20px;">
                                <label>
                                    Pratique de notation mise en place pour ce cours
                                    <small style="display: block; color: var(--gris-moyen); font-weight: normal; margin-top: 3px;">
                                        La pratique par défaut est présélectionnée. Vous pouvez en choisir une autre.
                                    </small>
                                </label>
                                <select id="pratiqueCours" class="controle-form controle-form-compact">
                                    <!-- Options chargées dynamiquement par JavaScript -->
                                </select>
                            </div>

                            <!-- Boutons d'action -->
                            <div class="btn-groupe btn-groupe-droite"
                                 style="margin-top: 25px; padding-top: 20px; border-top: 2px solid var(--bleu-leger);">
                                <button class="btn btn-annuler" onclick="annulerFormCours()">
                                    Annuler
                                </button>
                                <button class="btn btn-confirmer" onclick="sauvegarderCours()">
                                    <span id="btnTexteCours">Ajouter</span>
                                </button>
                            </div>
                        </div>
                    </div>

                </div><!--fin sous-section cours-->

                <!-- SECTION TRIMESTRE (Réglages > Trimestre) -->
                <!-- Cette section gère les DONNÉES ADMINISTRATIVES du trimestre -->
                <!-- Module associé: trimestre.js -->

                <div id="reglages-trimestre" class="sous-section">
                    <h2>Configuration du trimestre</h2>
                    <p class="text-muted">
                        Définissez les paramètres administratifs du trimestre : dates de début et de fin,
                        semaines spéciales, congés prévus et imprévus avec leurs reprises éventuelles.
                    </p>

                    <!-- CARTE: CADRE RÉGULIER -->
                    <div class="carte">
                        <h3>Cadre régulier</h3>

                        <!-- Grille 2 colonnes : Bornes et Semaines spéciales -->
                        <div class="grille-2col">

                            <!-- COLONNE GAUCHE: Bornes du trimestre -->
                            <div>
                                <h5 class="sous-titre-section">
                                    Bornes du trimestre
                                </h5>
                                <div class="grille-2col-gap15">
                                    <div class="groupe-form">
                                        <label>Début du trimestre :</label>
                                        <input type="date" class="controle-form" id="debutTrimestre"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                    <div class="groupe-form">
                                        <label>Fin des cours réguliers :</label>
                                        <input type="date" class="controle-form" id="finCours"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                    <div class="groupe-form">
                                        <label>Fin du trimestre :</label>
                                        <input type="date" class="controle-form" id="finTrimestre"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                    <div class="groupe-form">
                                        <label>Remise des notes :</label>
                                        <input type="date" class="controle-form" id="remiseNotes"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                </div>
                            </div>

                            <!-- COLONNE DROITE: Semaines spéciales -->
                            <div>
                                <h5 class="sous-titre-section">
                                    Semaines spéciales
                                </h5>

                                <div class="grille-2col-gap15">
                                    <!-- Semaine de planification -->
                                    <div>
                                        <h6>Semaine de planification et de mise à jour</h6>
                                        <div class="d-flex-gap-10-center">
                                            <div class="groupe-form" class="flex-1">
                                                <label>Du :</label>
                                                <input type="date" class="controle-form" id="semainePlanificationDebut"
                                                    onchange="sauvegarderCadreCalendrier()">
                                            </div>
                                            <span class="pt-20">au</span>
                                            <div class="groupe-form" class="flex-1">
                                                <label>&nbsp;</label>
                                                <input type="date" class="controle-form" id="semainePlanificationFin"
                                                    onchange="sauvegarderCadreCalendrier()">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Semaine d'examens -->
                                    <div>
                                        <h6>Semaine d'examens</h6>
                                        <div class="d-flex-gap-10-center">
                                            <div class="groupe-form" class="flex-1">
                                                <label>Du :</label>
                                                <input type="date" class="controle-form" id="semaineExamensDebut"
                                                    onchange="sauvegarderCadreCalendrier()">
                                            </div>
                                            <span class="pt-20">au</span>
                                            <div class="groupe-form" class="flex-1">
                                                <label>&nbsp;</label>
                                                <input type="date" class="controle-form" id="semaineExamensFin"
                                                    onchange="sauvegarderCadreCalendrier()">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Statistiques calculées (texte simple) -->
                                <div class="info-box">
                                    <p>
                                        <strong>Trimestre :</strong>
                                        <span id="nombreSemaines">0</span> semaines •
                                        <span id="nombreJoursCours">0</span> jours de cours •
                                        <span id="totalConges">0</span> congés
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Bouton de sauvegarde -->
                        <div class="btn-groupe" class="justify-end">
                            <button class="btn btn-confirmer" onclick="sauvegarderCadreCalendrier()">
                                Sauvegarder le cadre
                            </button>
                        </div>
                    </div><!-- FIN carte Cadre régulier -->

                    <!-- CARTE: AMÉNAGEMENTS -->
                    <div class="carte mt-3">
                        <h3>Aménagements</h3>

                        <!-- Grille 2 colonnes : Événements prévus et Événements imprévus -->
                        <div class="grille-2col">

                            <!-- COLONNE GAUCHE: Congés prévus -->
                            <div>
                                <h5 class="sous-titre-section">
                                    Congés fériés et activités institutionnelles
                                </h5>
                                <p class="text-muted texte-desc">
                                    Congés fériés, journées pédagogiques, journée Carrière, etc. avec leurs reprises
                                    éventuelles
                                </p>

                                <!-- Container des événements prévus (généré par trimestre.js) -->
                                <div id="congesPrevusContainer" class="mb-20">
                                    <p class="text-muted" class="text-italic">Aucun événement prévu déclaré.</p>
                                </div>

                                <!-- Bouton pour afficher le formulaire d'ajout -->
                                <button id="btnAjouterPrevu" class="btn btn-confirmer mb-30" onclick="afficherFormEvenement()">
                                    + Ajouter un événement prévu
                                </button>

                                <!-- FORMULAIRE D'AJOUT ÉVÉNEMENT PRÉVU (caché par défaut) -->
                                <div id="formEvenementPrevu" class="item-carte form-cache">
                                    <div class="item-carte-header">
                                        <strong class="item-carte-titre titre-vert">
                                            <span id="texteFormPrevu">Nouvel événement prévu</span>
                                        </strong>
                                    </div>
                                    <div class="grille-4col-form">
                                        <div class="groupe-form">
                                            <label>Date événement</label>
                                            <input type="date" class="controle-form controle-form-compact" id="dateEvenementPrevu">
                                        </div>
                                        <div class="groupe-form">
                                            <label>Description</label>
                                            <select class="controle-form controle-form-compact" id="descriptionEvenementPrevu">
                                                <option value="">Choisir...</option>
                                                <option>Fête du travail (férié)</option>
                                                <option>Action de grâce (férié)</option>
                                                <option>Journée carrière</option>
                                                <option>Vendredi saint (férié)</option>
                                                <option>Lundi de Pâques (férié)</option>
                                            </select>
                                        </div>
                                        <div class="groupe-form">
                                            <label>Reprise prévue</label>
                                            <select class="controle-form controle-form-compact" id="horaireReprisePrevu">
                                                <option value="">Pas de reprise</option>
                                                <option value="Horaire du lundi">Horaire du lundi</option>
                                                <option value="Horaire du mardi">Horaire du mardi</option>
                                                <option value="Horaire du mercredi">Horaire du mercredi</option>
                                                <option value="Horaire du jeudi">Horaire du jeudi</option>
                                                <option value="Horaire du vendredi">Horaire du vendredi</option>
                                            </select>
                                        </div>
                                        <div class="groupe-form">
                                            <label>Date reprise</label>
                                            <input type="date" class="controle-form controle-form-compact" id="dateReprisePrevu">
                                        </div>
                                    </div>
                                    <div class="btn-groupe btn-groupe-droite">
                                        <button class="btn btn-annuler btn-sm" onclick="annulerFormEvenement()">Annuler</button>
                                        <button id="btnConfirmerPrevu" class="btn btn-confirmer btn-sm" onclick="confirmerAjoutEvenement()">Ajouter</button>
                                    </div>
                                </div><!-- FIN formulaire ajout prévu -->
                            </div>

                            <!-- COLONNE DROITE: Événements imprévus -->
                            <div>
                                <h5 class="sous-titre-section">
                                    Événements imprévus
                                </h5>
                                <p class="text-muted texte-desc">
                                    Pour les événements imprévus (maladie, conditions météorologiques, urgence, autre, etc.), la reprise peut être planifiée après coup selon les circonstances.
                                </p>

                                <!-- Container des événements imprévus (généré par trimestre.js) -->
                                <div id="congesImprevusContainer" class="mb-20">
                                    <p class="text-muted" class="text-italic">Aucun événement imprévu déclaré.</p>
                                </div>

                                <!-- Bouton pour afficher le formulaire d'ajout -->
                                <button id="btnAjouterEvenementImprevu" class="btn btn-confirmer"
                                    onclick="afficherFormEvenementImprevu()">
                                    + Ajouter un événement imprévu
                                </button>

                                <!-- FORMULAIRE D'AJOUT ÉVÉNEMENT IMPRÉVU (caché par défaut) -->
                                <div id="formEvenementImprevu" class="item-carte form-cache-mt">
                                    <div class="item-carte-header">
                                        <strong class="item-carte-titre titre-orange">
                                            <span id="texteFormImprevu">Nouvel événement imprévu</span>
                                        </strong>
                                    </div>
                                    <div class="grille-4col-form">
                                        <div class="groupe-form">
                                            <label>Date événement</label>
                                            <input type="date" class="controle-form controle-form-compact" id="dateEvenementImprevu">
                                        </div>
                                        <div class="groupe-form">
                                            <label>Description</label>
                                            <select class="controle-form controle-form-compact" id="descriptionEvenementImprevu">
                                                <option value="">Choisir...</option>
                                                <option>Maladie</option>
                                                <option>Météo</option>
                                                <option>Urgence</option>
                                                <option>Autre</option>
                                            </select>
                                        </div>
                                        <div class="groupe-form">
                                            <label>Reprise optionnelle</label>
                                            <select class="controle-form controle-form-compact" id="horaireRepriseImprevu">
                                                <option value="">Pas de reprise</option>
                                                <option value="Horaire du lundi">Horaire du lundi</option>
                                                <option value="Horaire du mardi">Horaire du mardi</option>
                                                <option value="Horaire du mercredi">Horaire du mercredi</option>
                                                <option value="Horaire du jeudi">Horaire du jeudi</option>
                                                <option value="Horaire du vendredi">Horaire du vendredi</option>
                                            </select>
                                        </div>
                                        <div class="groupe-form">
                                            <label>Date reprise</label>
                                            <input type="date" class="controle-form controle-form-compact" id="dateRepriseImprevu">
                                        </div>
                                    </div>
                                    <div class="btn-groupe btn-groupe-droite">
                                        <button class="btn btn-annuler btn-sm" onclick="annulerFormEvenementImprevu()">Annuler</button>
                                        <button id="btnConfirmerImprevu" class="btn btn-confirmer btn-sm"
                                            onclick="confirmerAjoutEvenementImprevu()">Ajouter</button>
                                    </div>
                                </div><!-- FIN formulaire ajout imprévu -->
                            </div>

                        </div><!-- FIN grille 2 colonnes -->

                    </div><!-- FIN carte Aménagements -->

                </div><!-- FIN sous-section reglages-trimestre -->


                <!-- Sous-section: Horaire -->
                <div id="reglages-horaire" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Configuration de l'horaire</span>
                        <span class="titre-emoji-container">
                            <span class="primo-aide" data-target="conseil-horaire">😎</span>
                        </span>
                    </h2>
                    <p class="text-muted">Définissez le format horaire hebdomadaire de vos séances de cours</p>

                    <!-- Carte Conseil pratique (masquée par défaut) -->
                    <div id="conseil-horaire" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong>
                        <ul class="m-0-pl-20-lh">
                            <li><strong>Format 2×2h :</strong> Idéal pour deux périodes de cours séparées dans
                                la semaine (ex: lundi et jeudi)</li>
                            <li><strong>Format 1×4h :</strong> Convient aux cours intensifs d'une seule période
                                continue</li>
                            <li><strong>Heure de début/fin :</strong> Respecte le format 24h (ex: 13:00, pas
                                1:00 PM)</li>
                            <li><strong>Reprises :</strong> Les séances de reprise seront automatiquement
                                ajoutées lors de la configuration des congés imprévus dans la section
                                Trimestre</li>
                            <li><strong>Modification :</strong> Vous pouvez modifier le format horaire en tout
                                temps. Les séances existantes seront supprimées et devront être recréées</li>
                        </ul>
                    </div>

                    <!-- Sélecteur de format horaire -->
                    <!-- Configuration des séances -->
                    <div class="carte">
                        <h3>Horaire des séances</h3>
                        <p class="text-muted" style="margin-bottom: 15px;">
                            Configure tes séances de cours de la semaine (de 1 à 6 séances). Chaque séance peut avoir une durée différente (de 1h à 6h).
                        </p>

                        <!-- Conteneur pour les séances existantes -->
                        <div id="seancesContainer" class="mb-20">
                            <p class="text-muted" class="text-italic">Aucune séance configurée.</p>
                        </div>

                        <!-- Bouton pour afficher le formulaire -->
                        <button id="btnAjouterSeance" class="btn btn-confirmer mb-30" onclick="afficherFormAjoutSeance()">
                            + Ajouter une séance
                        </button>

                        <!-- Bouton utilitaire pour nettoyer les doublons -->
                        <button class="btn btn-modifier mb-30" onclick="nettoyerDoublons()" style="margin-left: 10px;">
                            🧹 Nettoyer les doublons
                        </button>

                        <!-- FORMULAIRE D'AJOUT SÉANCE (caché par défaut) -->
                        <div id="formAjoutSeance" class="item-carte form-cache">
                            <div class="item-carte-header">
                                <strong class="item-carte-titre titre-vert">
                                    Nouvelle séance
                                </strong>
                            </div>
                            <div class="grille-4col-form">
                                <div class="groupe-form">
                                    <label>Jour</label>
                                    <select class="controle-form controle-form-compact" id="jourSeance">
                                        <option value="">Choisir...</option>
                                        <option value="Lundi">Lundi</option>
                                        <option value="Mardi">Mardi</option>
                                        <option value="Mercredi">Mercredi</option>
                                        <option value="Jeudi">Jeudi</option>
                                        <option value="Vendredi">Vendredi</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Heure début</label>
                                    <select class="controle-form controle-form-compact" id="debutSeance">
                                        <option value="">Choisir...</option>
                                        <option value="08:00">8h00</option>
                                        <option value="09:00">9h00</option>
                                        <option value="10:00">10h00</option>
                                        <option value="11:00">11h00</option>
                                        <option value="12:00">12h00</option>
                                        <option value="13:00">13h00</option>
                                        <option value="14:00">14h00</option>
                                        <option value="15:00">15h00</option>
                                        <option value="16:00">16h00</option>
                                        <option value="17:00">17h00</option>
                                        <option value="18:00">18h00</option>
                                        <option value="19:00">19h00</option>
                                        <option value="20:00">20h00</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Durée</label>
                                    <select class="controle-form controle-form-compact" id="dureeSeance">
                                        <option value="">Choisir...</option>
                                        <option value="1.0">1h</option>
                                        <option value="1.5">1h30</option>
                                        <option value="2.0">2h</option>
                                        <option value="2.5">2h30</option>
                                        <option value="3.0">3h</option>
                                        <option value="3.5">3h30</option>
                                        <option value="4.0">4h</option>
                                        <option value="4.5">4h30</option>
                                        <option value="5.0">5h</option>
                                        <option value="5.5">5h30</option>
                                        <option value="6.0">6h</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Local</label>
                                    <input type="text" class="controle-form controle-form-compact" id="localSeance"
                                           placeholder="Ex: 1709">
                                </div>
                            </div>
                            <div class="btn-groupe btn-groupe-droite">
                                <button class="btn btn-annuler btn-sm" onclick="annulerFormAjoutSeance()">Annuler</button>
                                <button id="btnConfirmerSeance" class="btn btn-confirmer btn-sm" onclick="confirmerAjoutSeance()">Ajouter</button>
                            </div>
                        </div><!-- FIN formulaire ajout séance -->
                    </div><!-- FIN carte horaire -->

                </div><!-- FIN sous-section reglages-horaire -->

                <!-- Sous-section : Groupe -->
                <div id="reglages-groupe" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Configuration du groupe d'étudiants</span>
                        <span class="titre-emoji-container">
                            <span class="primo-aide" data-target="conseil-groupe">😎</span>
                        </span>
                    </h2>
                    <p class="text-muted">Liste complète des étudiants inscrits : ajout, import, modification,
                        export
                    </p>

                    <!-- Carte Conseil pratique (masquée par défaut) -->
                    <div id="conseil-groupe" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong>
                        <ul class="m-0-pl-20-lh">
                            <li><strong>Champ Groupe :</strong> Permet d'organiser tes étudiants si tu as
                                plusieurs groupes (ex: Groupe 1, Groupe 2). Utilise le filtre en haut pour afficher un groupe
                                spécifique.</li>
                            <li><strong>Import CSV/TSV :</strong> Format attendu avec 7 colonnes : DA, Groupe,
                                Nom, Prénom, Programme, Nom du programme, SA. Les colonnes peuvent être séparées par des virgules ou des
                                tabulations. La colonne CAF peut être ajoutée manuellement après l'import.</li>
                            <li><strong>Copier-coller :</strong> Tu peux copier directement depuis Excel ou
                                Google Sheets. La prévisualisation te permet de vérifier avant d'importer.</li>
                            <li><strong>Modification :</strong> Utilise l'icône pour modifier un·e
                                étudiant·e, ou pour le·la supprimer.</li>
                            <li><strong>Export :</strong> Exporte ta liste au format CSV pour backup ou partage.
                                Le fichier peut ensuite être réimporté.</li>
                            <li><strong>Réinitialisation :</strong> Attention ! Le bouton « Réinitialiser »
                                supprime <strong>tous les étudiants</strong>. Cette action est irréversible.</li>
                            <li><strong>Lien avec les autres sections :</strong> La liste configurée ici est
                                automatiquement disponible dans l'onglet « Étudiants › Liste des individus » pour la gestion des
                                portfolios.</li>
                        </ul>
                    </div>

                    <div class="carte">
                        <h3>Groupe d'étudiants</h3>

                        <!-- VUE D'ENSEMBLE -->
                        <div class="grille-cartes-metriques mb-20">
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Étudiant·es au total</span>
                                    <strong id="nbEtudiantsTotal" class="carte-metrique-valeur">0</strong>
                                </div>
                            </div>
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Groupes</span>
                                    <strong id="nbGroupes" class="carte-metrique-valeur">0</strong>
                                </div>
                            </div>
                            <div class="carte-metrique-bleue" class="grid-col-span">
                                <div id="detailGroupes" class="carte-metrique-label" class="text-center">
                                    <em>Aucun groupe configuré</em>
                                </div>
                            </div>
                        </div>

                        <!-- FILTRAGE PAR GROUPE -->
                        <div
                            class="bg-bleu-tres-pale-p15-mb20">
                            <div class="d-flex-gap15-wrap-center">
                                <label class="fw-500-bleu">
                                    Filtrer par groupe :
                                </label>
                                <select id="filtreGroupe" onchange="filtrerParGroupe()" class="controle-form"
                                    class="flex-1-min200-max300">
                                    <option value="">Tous les groupes</option>
                                    <!-- Options générées dynamiquement -->
                                </select>
                                <button onclick="resetFiltreGroupe()" class="btn btn-annuler">
                                    Réinitialiser
                                </button>
                            </div>
                        </div>

                        <!-- FORMULAIRE D'AJOUT MANUEL -->
                        <details class="mb-20">
                            <summary style="cursor: pointer; font-weight: 600; color: var(--bleu-principal); 
       padding: 12px; background: var(--bleu-tres-pale); border-radius: 6px; user-select: none;">
                                Ajouter un·e étudiant·e manuellement
                            </summary>

                            <div
                                class="carte-bleu-tres-pale-mt10">
                                <!-- CHANGEMENT ICI ↓ -->
                                <div class="formulaire-ajout-grid">
                                    <div>
                                        <label
                                            class="label-form-reglages">
                                            DA
                                        </label>
                                        <input type="text" id="etudiantDA" class="controle-form" placeholder="1234567"
                                            class="w-100">
                                    </div>
                                    <div>
                                        <label
                                            class="label-form-reglages">
                                            Groupe
                                        </label>
                                        <input type="text" id="etudiantGroupe" class="controle-form" placeholder="1"
                                            class="w-100">
                                    </div>
                                    <div>
                                        <label
                                            class="label-form-reglages">
                                            Nom <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" id="etudiantNom" class="controle-form" required
                                            placeholder="Nom" class="w-100">
                                    </div>
                                    <div>
                                        <label
                                            class="label-form-reglages">
                                            Prénom <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" id="etudiantPrenom" class="controle-form" required
                                            placeholder="Prénom" class="w-100">
                                    </div>
                                    <div>
                                        <label
                                            class="label-form-reglages">
                                            Programme
                                        </label>
                                        <input type="text" id="etudiantProgramme" class="controle-form"
                                            placeholder="200.B1" class="w-100">
                                    </div>
                                    <div>
                                        <label
                                            class="label-form-reglages">SA</label>
                                        <select id="etudiantSA" class="controle-form" class="w-100">
                                            <option value="">---</option>
                                            <option value="Oui">✓</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label
                                            class="label-form-reglages">CAF</label>
                                        <select id="etudiantCAF" class="controle-form" class="w-100">
                                            <option value="">---</option>
                                            <option value="Oui">✓</option>
                                        </select>
                                    </div>
                                    <div>
                                        <button onclick="addStudent()" class="btn btn-principal"
                                            class="td-nowrap-bold">
                                            Ajouter
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </details>

                        <!-- ZONE D'IMPORT -->
                        <details class="mb-20">
                            <summary style="cursor: pointer; font-weight: 600; color: var(--bleu-principal); 
                           padding: 12px; background: var(--gris-tres-pale); border-radius: 6px; 
                           user-select: none;">
                                Importer des étudiants (CSV/TSV ou copier-coller)
                            </summary>

                            <div class="carte-grise-mt20">
                                <div class="mb-15">
                                    <label class="label-block-fw500-mb8">
                                        Option 1 : Importer un fichier CSV/TSV
                                    </label>
                                    <input type="file" id="fichierCsvEntree" accept=".csv,.tsv,.txt"
                                        onchange="handleFileImport(event)" class="controle-form">
                                    <small style="color: var(--gris-moyen); display: block; margin-top: 5px;">
                                        Format attendu : DA, Groupe, Nom, Prénom, Programme, Nom du programme, SA
                                    </small>
                                </div>

                                <div>
                                    <label class="label-block-fw500-mb8">
                                        Option 2 : Copier-coller des données
                                    </label>
                                    <textarea id="donneesCollees" class="controle-form" placeholder="Collez vos données ici (colonnes séparées par des tabulations ou virgules)
Exemple :
1234567	1	Tremblay	Marie	582.A1	Oui	
1234568	1	Gagnon	Pierre	582.A1		Oui" rows="6"
                                        class="font-courier"></textarea>
                                    <button onclick="previewPastedData()" class="btn btn-principal"
                                        class="mt-10">
                                        Prévisualiser les données
                                    </button>
                                </div>
                            </div>
                        </details>

                        <!-- ZONE DE PRÉVISUALISATION (cachée par défaut) -->
                        <div id="previewZone" style="display: none; margin-bottom: 20px; background: var(--alerte-fond-attention); 
                                     padding: 15px; border-radius: 8px; border: 2px solid #ffc107;">
                            <h4 class="mt-0-warning">😎 Prévisualisation de l'import</h4>
                            <p style="color: var(--alerte-texte-attention); margin-bottom: 15px;">
                                Vérifiez les données avant de les importer définitivement.
                            </p>
                            <div id="previewTable" style="overflow-x: auto; max-height: 300px; 
                                          border: 1px solid var(--bordure-claire); border-radius: 4px; background: white;">
                                <!-- Le tableau sera généré ici -->
                            </div>
                            <div class="d-flex-gap10-mt15">
                                <button onclick="confirmImport()" class="btn btn-confirmer">
                                    Confirmer l'import
                                </button>
                                <button onclick="cancelImport()" class="btn btn-annuler">
                                    Annuler
                                </button>
                            </div>
                        </div>

                        <!-- LISTE DES ÉTUDIANTS -->
                        <div id="students-list-container" class="hidden-mb-20">
                            <div
                                class="d-flex-between-mb15">
                                <h4 style="color: var(--bleu-principal); margin: 0;">
                                    Liste des étudiants <span id="compteurFiltres"></span>
                                </h4>
                                <div class="d-flex-gap-10">
                                    <button onclick="exportStudentsData()" class="btn btn-principal"
                                        class="px-8-py-15">
                                        Exporter (CSV)
                                    </button>
                                    <button onclick="resetStudentsData()" class="btn btn-annuler"
                                        class="px-8-py-15">
                                        Réinitialiser
                                    </button>
                                </div>
                            </div>

                            <div class="overflow-x-border">
                                <table id="students-table" class="tableau-blanc" style="width: 100%;">
                                    <thead class="thead-bleu-moyen">
                                        <tr>
                                            <th class="td-left-100">DA</th>
                                            <th class="td-center-80">Groupe</th>
                                            <th class="td-left-auto">Nom</th>
                                            <th class="td-left-auto">Prénom</th>
                                            <th class="td-left-100">Programme</th>
                                            <th class="td-center-60">SA</th>
                                            <th class="td-center-60">CAF</th>
                                            <th class="td-center-200">Actions
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody id="students-tbody">
                                        <!-- Les lignes seront générées par afficherListeEtudiants() -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- MESSAGE SI AUCUN ÉTUDIANT -->
                        <div id="no-students-msg" style="display: block; text-align: center; padding: 40px;
                                         background: var(--gris-tres-pale); border-radius: 8px; color: var(--gris-moyen);">
                            <p class="text-11-mb10">📭 Aucun·e étudiant·e dans le groupe
                            </p>
                            <p class="text-09">
                                Utilisez le formulaire ci-dessus ou l'import pour ajouter des étudiant·es
                            </p>
                        </div>
                    </div><!-- FIN carte -->

                    <!-- ↓↓↓ AJOUTER LA NOUVELLE CARTE ICI ↓↓↓ -->

                    <script>
                        // Fonction pour plier/déplier une section
                        function toggleSection(sectionId) {
                            const section = document.getElementById(sectionId);
                            const icone = document.getElementById('icone-' + sectionId);

                            if (section.style.display === 'none') {
                                section.style.display = 'block';
                                icone.textContent = '▼';
                            } else {
                                section.style.display = 'none';
                                icone.textContent = '▶';
                            }
                        }

                        // Initialisation statistiques clonage
                        document.addEventListener('DOMContentLoaded', function () {
                            setTimeout(function () {
                                if (typeof obtenirEtudiantsGroupe1 === 'function') {
                                    mettreAJourStatistiquesClonage();
                                }
                            }, 500);
                        });

                        document.addEventListener('click', function (e) {
                            if (e.target.matches('[data-sous-onglet="reglages-groupe"]')) {
                                setTimeout(function () {
                                    // Note: initialiserModuleGroupe() est maintenant appelé automatiquement par navigation.js

                                    // Clonage anonymisé (section avancée)
                                    if (typeof obtenirEtudiantsGroupe1 === 'function') {
                                        mettreAJourStatistiquesClonage();
                                        afficherTableauMapping();
                                    }
                                }, 100);
                            }
                        });

                        function mettreAJourStatistiquesClonage() {
                            const groupe1 = obtenirEtudiantsGroupe1();
                            const groupe2 = obtenirEtudiantsGroupe2();
                            const mapping = chargerMapping();

                            document.getElementById('stat-groupe1').textContent = groupe1.length;
                            document.getElementById('stat-groupe2').textContent = groupe2.length;
                            document.getElementById('stat-mappings').textContent = Object.keys(mapping).length;
                        }
                    </script>

                </div><!-- FIN sous-section reglages-groupe -->

                <!-- Sous-section : Pratique de notation -->
                <!-- Sous-section : Pratique de notation -->
                <!-- Sous-section : Pratique de notation -->
                <div id="reglages-pratique-notation" class="sous-section">
                    <h2>Configuration de la pratique de notation</h2>
                    <p class="text-muted">Configuration du système de notation du cours</p>

                    <!-- Configuration de la notation (colonne unique) -->
                    <div style="margin-bottom: 20px;">

                        <h3>Configuration de la notation</h3>

                        <!-- NOTE RREC -->
                            <div style="margin-bottom: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                <p class="text-muted" style="margin: 0; font-size: 0.85rem; line-height: 1.5;">
                                    Pendant l'apprentissage, vous pouvez mettre en place une pratique alternative de notation (PAN) qui favorise un parcours formatif. Cependant, le Règlement sur le régime des études collégiales (RREC) exige une note finale chiffrée en pourcentage à la fin du trimestre. Votre évaluation non chiffrée doit être convertie en note chiffrée (%) à la fin du parcours.
                                </p>
                            </div>

                            <!-- ========================================= -->
                            <!-- GESTION DES PRATIQUES CONFIGURABLES (Beta 92) -->
                            <!-- ========================================= -->

                            <div style="margin-bottom: 25px;">
                                <h3 style="font-size: 1.1rem; margin-bottom: 15px; color: var(--bleu-principal);">
                                    Pratiques d'évaluation disponibles
                                </h3>

                                <!-- Actions globales -->
                                <div class="btn-groupe">
                                    <button class="btn btn-confirmer" onclick="creerNouvellePratique()">
                                        Créer une pratique
                                    </button>
                                    <button class="btn btn-secondaire" onclick="importerPratiqueJSON()">
                                        Importer JSON
                                    </button>
                                    <button class="btn btn-ajouter" onclick="afficherPratiquesPredefines()">
                                        Exemples de pratiques
                                    </button>
                                </div>

                                <!-- Liste des pratiques (sera remplie dynamiquement) -->
                                <div id="listePratiques">
                                    <!-- Les cartes de pratiques seront insérées ici en 2 colonnes -->
                                    <p style="color: var(--gris-moyen); font-style: italic;">
                                        Chargement des pratiques...
                                    </p>
                                </div>
                            </div>

                            <!-- ========================================= -->
                            <!-- OPTIONS D'AFFICHAGE ET CONFIGURATION -->
                            <!-- ========================================= -->

                            <div class="carte" style="margin-bottom: 25px;">
                                <h3>Options d'affichage</h3>

                                <!-- Option : Mode comparatif -->
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label style="cursor: pointer; display: flex; align-items: center;">
                                        <input type="checkbox" id="modeComparatif">
                                        <strong style="margin-left: 8px;">Activer le mode comparatif (expérimental)</strong>
                                    </label>
                                    <small style="display: block; color: var(--gris-moyen); margin-top: 5px; margin-left: 28px; font-size: 0.8rem;">
                                        Affiche les indices SOM et PAN côte à côte pour comparer les deux approches
                                    </small>
                                </div>

                                <!-- Option : Analyse SOLO des acquis -->
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label style="cursor: pointer; display: flex; align-items: center;">
                                        <input type="checkbox" id="afficherDescriptionsSOLO" checked>
                                        <strong style="margin-left: 8px;">Afficher l'observation de la structure des résultats d'apprentissage (SOLO)</strong>
                                    </label>
                                    <small style="display: block; color: var(--gris-moyen); margin-top: 5px; margin-left: 28px; font-size: 0.8rem; line-height: 1.5;">
                                        Affiche une 3<sup>e</sup> carte dans Accompagnement avec les descriptions détaillées basées sur la taxonomie SOLO de Biggs & Collis (unistructurel, multistructurel, relationnel, abstrait étendu). Désactivez cette option si votre pratique ne s'appuie pas sur la taxonomie SOLO.
                                    </small>
                                </div>

                                <!-- Option : Modèle RàI et détection des patterns -->
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label style="cursor: pointer; display: flex; align-items: center;">
                                        <input type="checkbox" id="activerRai" checked>
                                        <strong style="margin-left: 8px;">Activer le modèle de la Réponse à l'intervention (RàI) et la détection des patterns</strong>
                                    </label>
                                    <small style="display: block; color: var(--gris-moyen); margin-top: 5px; margin-left: 28px; font-size: 0.8rem; line-height: 1.5;">
                                        <strong>Prérequis :</strong> Le modèle RàI et la détection des patterns nécessitent l'utilisation de la <strong>même grille de critères</strong>
                                        et de la <strong>même échelle de performance</strong> pour tous les artefacts du trimestre.
                                        Cette cohérence méthodologique permet de suivre l'évolution des apprentissages et d'identifier les besoins d'intervention.<br>
                                        <strong>Si désactivé :</strong> Les sections RàI et Patterns seront masquées dans l'Aperçu, le Profil étudiant et la Liste des étudiants.
                                    </small>
                                </div>

                                <!-- Grille de référence pour le dépistage -->
                                <div class="form-group" id="groupeGrilleReference">
                                    <label for="grilleReferenceDepistage" style="font-weight: 600; display: block; margin-bottom: 8px;">
                                        Grille de critères pour le dépistage
                                    </label>
                                    <select id="grilleReferenceDepistage" class="controle-form">
                                        <option value="">-- Sélectionner une grille --</option>
                                    </select>
                                    <small style="display: block; color: var(--gris-moyen); margin-top: 5px; font-size: 0.8rem; line-height: 1.5;">
                                        Cette grille définit les critères utilisés pour identifier les <strong>forces et défis</strong> des étudiant·es.
                                        Les pondérations de la grille sont prises en compte dans le diagnostic.
                                        Tu dois utiliser cette même grille pour toutes les évaluations afin que le dépistage soit efficace.
                                    </small>
                                </div>
                            </div>

                            <!-- Input caché pour import JSON -->
                            <input type="file" id="inputImportPratique" accept=".json" style="display: none;" onchange="traiterImportPratique(event)">

                            <!-- ========================================= -->
                            <!-- MODAL WIZARD CRÉATION PRATIQUE -->
                            <!-- ========================================= -->
                            <div id="modalWizardPratique" class="modal-overlay" style="display: none;">
                                <div class="modal-contenu" style="max-width: 500px; max-height: 85vh; overflow-y: auto;">
                                    <button onclick="fermerWizardPratique()" class="modal-fermer">✕</button>

                                    <!-- En-tête Primo simplifié -->
                                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                                        <div style="
                                            width: 50px;
                                            height: 50px;
                                            background: linear-gradient(135deg, #1a5266, #2d7a8c);
                                            border-radius: 50%;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            font-size: 1.8rem;
                                            box-shadow: 0 4px 15px rgba(26, 82, 102, 0.3);
                                            flex-shrink: 0;
                                        ">
                                            😎
                                        </div>
                                        <div style="flex: 1;">
                                            <h2 class="modal-titre" style="margin: 0 0 5px 0;">Créons ensemble ta pratique !</h2>
                                            <p style="margin: 0; color: var(--gris-moyen); font-size: 0.9rem;">
                                                <strong style="color: var(--bleu-principal);">Étape <span id="wizard-etape-actuelle">1</span>/8</strong> :
                                                <span id="wizard-etape-titre">Informations de base</span>
                                            </p>
                                        </div>
                                    </div>

                                    <!-- Conteneur des étapes -->
                                    <div id="wizard-steps-container">
                                        <!-- ÉTAPE 1: Informations de base -->
                                        <div class="wizard-step" data-step="1">
                                            <div class="groupe-form">
                                                <label>Nom de la pratique *</label>
                                                <input type="text" id="wizard-nom" class="controle-form" placeholder="Ex: PAN-Spécifications personnalisé" required>
                                            </div>
                                            <div class="groupe-form">
                                                <label>Auteur</label>
                                                <input type="text" id="wizard-auteur" class="controle-form" placeholder="Ton nom">
                                            </div>
                                            <div class="groupe-form">
                                                <label>Établissement</label>
                                                <input type="text" id="wizard-etablissement" class="controle-form" placeholder="Ex: Cégep de Drummondville">
                                            </div>
                                            <div class="groupe-form">
                                                <label>Description</label>
                                                <textarea id="wizard-description" class="controle-form" rows="3" placeholder="Brève description de cette pratique d'évaluation"></textarea>
                                            </div>
                                            <div class="groupe-form">
                                                <label>Discipline</label>
                                                <input type="text" id="wizard-discipline" class="controle-form" placeholder="Ex: Chimie, Littérature, Philosophie">
                                            </div>
                                        </div>

                                        <!-- ÉTAPE 2: Échelle d'évaluation -->
                                        <div class="wizard-step" data-step="2" style="display: none;">
                                            <div class="groupe-form">
                                                <label>Échelle à utiliser *</label>
                                                <select id="wizard-echelle-id" class="controle-form" onchange="afficherPreviewEchelleWizard()">
                                                    <option value="">Choisir une échelle...</option>
                                                    <!-- Options chargées dynamiquement depuis echellesTemplates -->
                                                </select>
                                                <p style="color: var(--gris-moyen); font-size: 0.85rem; margin-top: 6px;">
                                                    Tu peux créer ou modifier tes échelles dans
                                                    <strong>Réglages → Matériel pédagogique → Niveaux de performance</strong>
                                                </p>
                                            </div>

                                            <!-- Message explicatif -->
                                            <div style="margin-bottom: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                <p class="text-muted" style="margin: 0 0 10px 0; font-size: 0.85rem; line-height: 1.5;">
                                                    <strong>À quoi servent ces valeurs ?</strong>
                                                </p>
                                                <ul class="text-muted" style="margin: 0; padding-left: 20px; line-height: 1.5; font-size: 0.85rem;">
                                                    <li style="margin-bottom: 8px;">
                                                        <strong>Plage (min-max)</strong> : Détermine à quel niveau appartient un pourcentage.
                                                        Par exemple, un étudiant avec 72% obtient le niveau «D» (plage 65-74%).
                                                    </li>
                                                    <li>
                                                        <strong>Valeur de calcul</strong> : Valeur ponctuelle utilisée dans les moyennes.
                                                        Quand un étudiant obtient «D», on compte 70% (pas toute la plage) dans sa moyenne.
                                                    </li>
                                                </ul>
                                                <p class="text-muted" style="margin: 12px 0 0 0; font-size: 0.8rem; font-style: italic; line-height: 1.5;">
                                                    Ces valeurs par défaut sont ajustables dans
                                                    <strong>Réglages → Matériel pédagogique → Niveaux de performance</strong>.
                                                </p>
                                            </div>

                                            <!-- Prévisualisation de l'échelle sélectionnée -->
                                            <div id="wizard-preview-echelle" style="display: none; margin-top: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                <p class="text-muted" style="margin: 0 0 12px 0; font-size: 0.85rem; line-height: 1.5;">
                                                    <strong>Aperçu de l'échelle</strong>
                                                </p>
                                                <div id="wizard-preview-echelle-contenu" class="text-muted">
                                                    <!-- Niveaux affichés ici -->
                                                </div>
                                            </div>
                                        </div>

                                        <!-- ÉTAPE 3: Structure des évaluations -->
                                        <div class="wizard-step" data-step="3" style="display: none;">
                                            <!-- Message contextuel Primo -->
                                            <div class="alerte alerte-succes">
                                                Le choix de ta structure détermine comment tes étudiants seront évalués.
                                            </div>

                                            <div class="groupe-form">
                                                <label>Type de structure *</label>
                                                <select id="wizard-structure-type" class="controle-form" onchange="afficherConfigStructure()">
                                                    <option value="">Choisir un type...</option>
                                                    <option value="portfolio">Portfolio (artefacts sans pondération individuelle)</option>
                                                    <option value="standards">Notation par maîtrise – SBG (standards numérotés)</option>
                                                    <option value="evaluations_discretes">Évaluations traditionnelles (examens, travaux avec pondération)</option>
                                                    <option value="specifications">Notation par contrat – Spec Grading (objectifs à atteindre)</option>
                                                    <option value="multi_objectifs">Multi-objectifs pondérés (évaluation par compétences)</option>
                                                </select>
                                            </div>

                                            <!-- Configuration Standards -->
                                            <div id="wizard-config-standards" style="display: none;">
                                                <div style="margin-bottom: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                    <p class="text-muted" style="margin: 0; font-size: 0.85rem; line-height: 1.5;">
                                                        <strong>Notation par maîtrise (Standards-Based Grading)</strong> :
                                                        Les étudiants progressent à travers des standards numérotés qui représentent
                                                        des compétences spécifiques. Les standards terminaux sont ceux qui doivent
                                                        obligatoirement être maîtrisés pour réussir le cours.
                                                    </p>
                                                </div>

                                                <div class="groupe-form">
                                                    <label>Nombre de standards</label>
                                                    <input type="number" id="wizard-nb-standards" class="controle-form" min="1" max="20" value="10">
                                                </div>
                                                <div class="groupe-form">
                                                    <label>Standards terminaux (séparés par virgules)</label>
                                                    <input type="text" id="wizard-standards-terminaux" class="controle-form" placeholder="Ex: 7, 8, 9, 10">
                                                </div>
                                            </div>

                                            <!-- Configuration Portfolio -->
                                            <div id="wizard-config-portfolio" style="display: none;">
                                                <div style="margin-bottom: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                    <p class="text-muted" style="margin: 0; font-size: 0.85rem; line-height: 1.5;">
                                                        <strong>Portfolio</strong> :
                                                        Approche fréquente en littérature avec ELLAC (Enseignement de la lecture littéraire au collégial).
                                                        Chaque artefact qui compose le portfolio n'a pas de pondération propre.
                                                        C'est le portfolio conteneur qui a une pondération dans la note finale.
                                                    </p>
                                                </div>

                                                <div class="groupe-form">
                                                    <label>Mode de sélection</label>
                                                    <select id="wizard-portfolio-selection" class="controle-form">
                                                        <option value="n_meilleurs">N meilleurs artefacts</option>
                                                        <option value="tous">Tous les artefacts</option>
                                                        <option value="derniers">N derniers artefacts</option>
                                                    </select>
                                                </div>
                                                <div class="groupe-form">
                                                    <label>Nombre d'artefacts à évaluer</label>
                                                    <input type="number" id="wizard-portfolio-nombre" class="controle-form" min="1" max="20" value="7">
                                                    <small style="color: var(--gris-moyen); font-size: 0.85rem; margin-top: 6px; display: block;">
                                                        Indique combien d'artefacts seront retenus pour le calcul de la note
                                                    </small>
                                                </div>
                                            </div>

                                            <!-- Configuration Évaluations discrètes -->
                                            <div id="wizard-config-evaluations" style="display: none;">
                                                <div style="margin-bottom: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                    <p class="text-muted" style="margin: 0; font-size: 0.85rem; line-height: 1.5;">
                                                        <strong>Évaluations traditionnelles</strong> :
                                                        Approche traditionnelle avec examens, travaux, présentations, etc.
                                                        Chaque évaluation a sa propre pondération (qui doit totaliser 100%).
                                                        La note finale est la moyenne pondérée de toutes les évaluations.
                                                    </p>
                                                </div>

                                                <p style="color: var(--gris-moyen); font-size: 0.9rem; margin-bottom: 15px;">
                                                    Définis tes évaluations avec leur pondération
                                                </p>
                                                <div id="wizard-evaluations-liste"></div>
                                                <button type="button" class="btn btn-tres-compact" onclick="ajouterEvaluationWizard()">+ Ajouter une évaluation</button>

                                                <h4 style="margin-top: 25px; margin-bottom: 15px; color: var(--bleu-principal);">Options d'affichage (pratique sommative)</h4>

                                                <div class="groupe-form">
                                                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                                        <input type="checkbox" id="wizard-afficher-rang">
                                                        Afficher le rang de l'étudiant
                                                    </label>
                                                </div>

                                                <div class="groupe-form">
                                                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                                        <input type="checkbox" id="wizard-afficher-moyenne">
                                                        Afficher la moyenne du groupe
                                                    </label>
                                                </div>
                                            </div>

                                            <!-- Configuration Spécifications -->
                                            <div id="wizard-config-specifications" style="display: none;">
                                                <div style="margin-bottom: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                    <p class="text-muted" style="margin: 0 0 10px 0; font-size: 0.85rem; line-height: 1.5;">
                                                        <strong>Notation par contrat (Specification Grading)</strong> :
                                                        Les étudiants atteignent des paliers de notes fixes (ex: 60%, 80%, 100%) en réussissant
                                                        des ensembles d'objectifs mesurables. Chaque objectif est évalué réussite/échec selon des
                                                        critères clairs communiqués à l'avance.
                                                    </p>
                                                    <p class="text-muted" style="margin: 10px 0 0 0; font-size: 0.85rem; line-height: 1.5;">
                                                        Cette approche clarifie les attentes, responsabilise les étudiants, réduit le stress
                                                        et encourage l'orientation vers l'apprentissage plutôt que vers la note. Les étudiants
                                                        peuvent réviser leur travail via le système de jetons pour atteindre les paliers supérieurs.
                                                    </p>
                                                </div>

                                                <div style="margin-bottom: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                    <p class="text-muted" style="margin: 0; font-size: 0.85rem; line-height: 1.5;">
                                                        <strong>Recommandation de Primo</strong> :
                                                        Cette pratique nécessite une configuration avancée après la création initiale.
                                                        Tu devras définir tes objectifs, les regrouper par palier de note, et les relier
                                                        à tes évaluations. Un exemple complet basé sur une pratique réelle (Chimie 202) est
                                                        disponible dans la documentation.
                                                    </p>
                                                </div>

                                                <p style="color: var(--gris-moyen); font-size: 0.9rem; margin: 0;">
                                                    La structure de base sera créée automatiquement. Consulte la documentation pour configurer
                                                    tes objectifs et paliers de notes.
                                                </p>
                                            </div>

                                            <!-- Configuration Multi-objectifs -->
                                            <div id="wizard-config-multi-objectifs" class="hidden">
                                                <div class="alerte alerte-information">
                                                    <p>
                                                        <strong>Multi-objectifs pondérés (évaluation par compétences)</strong> :
                                                        Cette approche permet d'évaluer plusieurs objectifs ou compétences avec des pondérations différentes
                                                        selon leur importance. Chaque objectif peut regrouper plusieurs artefacts, et tu peux choisir
                                                        de retenir les N meilleurs artefacts pour chaque objectif (mode PAN par objectif).
                                                    </p>
                                                    <p>
                                                        Cas d'usage typique : Un cours de mathématiques avec 13 objectifs (Limites, Dérivées, Intégration, etc.)
                                                        où chaque objectif a un poids différent selon son importance dans le cours. Les objectifs
                                                        intégrateurs (ex: Optimisation) peuvent avoir un poids plus élevé que les objectifs fondamentaux.
                                                    </p>
                                                </div>

                                                <div class="alerte alerte-conseil">
                                                    <p>
                                                        <strong>Recommandation</strong> :
                                                        Crée d'abord tes ensembles d'objectifs dans <em>Matériel → Objectifs d'apprentissage</em>,
                                                        puis sélectionne l'ensemble approprié ci-dessous. Tu pourras ensuite associer tes artefacts
                                                        à un ou plusieurs objectifs lors de la création des évaluations.
                                                    </p>
                                                </div>

                                                <div class="groupe-form">
                                                    <label>Nombre d'artefacts retenus par objectif</label>
                                                    <input type="number" id="wizard-multi-objectifs-nombre" class="controle-form" min="1" max="20" value="3">
                                                    <small class="form-text">
                                                        Pour chaque objectif, les N meilleurs artefacts seront retenus pour le calcul
                                                    </small>
                                                </div>

                                                <div class="groupe-form">
                                                    <label>Ensemble d'objectifs</label>
                                                    <select id="wizard-ensemble-objectifs" class="controle-form" onchange="chargerEnsembleWizard()">
                                                        <option value="">-- Sélectionner un ensemble existant --</option>
                                                    </select>
                                                    <small class="form-text">
                                                        Sélectionnez un ensemble créé dans Matériel → Objectifs d'apprentissage, ou créez-en un nouveau
                                                    </small>
                                                </div>

                                                <div class="wizard-objectifs-container">
                                                    <div class="section-header">
                                                        <label>Objectifs (compétences)</label>
                                                        <button type="button" class="btn btn-tres-compact" onclick="ajouterObjectifWizard()">
                                                            + Ajouter manuellement
                                                        </button>
                                                    </div>

                                                    <div id="wizard-objectifs-liste" class="wizard-objectifs-liste">
                                                        <!-- Les objectifs seront ajoutés dynamiquement ici -->
                                                    </div>

                                                    <!-- Indicateur du total des poids -->
                                                    <div class="total-poids-container">
                                                        <div class="total-poids-header">
                                                            <span class="total-poids-label">Total des pondérations :</span>
                                                            <span id="wizard-total-poids" class="total-poids-valeur">
                                                                0%
                                                            </span>
                                                        </div>
                                                        <p id="wizard-validation-poids" class="total-poids-message">
                                                            Le total doit atteindre 100% pour continuer
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- ÉTAPE 4: Calcul de la note -->
                                        <div class="wizard-step" data-step="4" style="display: none;">
                                            <!-- Message contextuel Primo: TECHNIQUE -->
                                            <div class="alerte alerte-attention">
                                                La méthode de calcul définit comment la note finale sera construite à partir de tes évaluations, afin de répondre aux exigences du Règlement sur le régime des études collégiales (RREC).
                                            </div>

                                            <div class="groupe-form">
                                                <label>Méthode de calcul *</label>
                                                <select id="wizard-calcul-methode" class="controle-form" onchange="afficherConfigCalcul()">
                                                    <option value="">Choisir une méthode...</option>
                                                    <option value="conversion_niveaux">Conversion niveaux → pourcentage</option>
                                                    <option value="moyenne_ponderee">Moyenne pondérée</option>
                                                    <option value="specifications">Spécifications (notes fixes)</option>
                                                </select>
                                            </div>

                                            <div id="wizard-info-calcul" style="margin-top: 15px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px; display: none;">
                                                <p id="wizard-info-calcul-texte" style="margin: 0; color: var(--gris-fonce); font-size: 0.9rem;"></p>
                                            </div>

                                            <div class="groupe-form" style="margin-top: 20px;">
                                                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                                    <input type="checkbox" id="wizard-conditions-speciales">
                                                    Ajouter des conditions spéciales (double verrou, plafonnement, etc.)
                                                </label>
                                                <p style="color: var(--gris-moyen); font-size: 0.85rem; margin: 8px 0 0 0;">
                                                    Les conditions spéciales peuvent être configurées manuellement dans le JSON après création.
                                                </p>
                                            </div>
                                        </div>

                                        <!-- ÉTAPE 5: Système de reprises -->
                                        <div class="wizard-step" data-step="5" style="display: none;">
                                            <!-- Message contextuel Primo: PÉDAGOGIQUE -->
                                            <div class="alerte alerte-succes">
                                                Les reprises permettent à tes étudiants de réviser leur travail et de progresser. Elles peuvent être régulées de plusieurs façons.
                                            </div>

                                            <div class="groupe-form">
                                                <label>Type de reprises *</label>
                                                <select id="wizard-reprises-type" class="controle-form" onchange="afficherConfigReprises()">
                                                    <option value="">Choisir un type...</option>
                                                    <option value="aucune">Aucune reprise</option>
                                                    <option value="illimitees">Reprises illimitées</option>
                                                    <option value="occasions_ponctuelles">Occasions ponctuelles (ex: semaine 8, 14, 16)</option>
                                                    <option value="limitees">Nombre limité de reprises</option>
                                                </select>
                                            </div>

                                            <div id="wizard-config-reprises" style="display: none;">
                                                <div class="groupe-form">
                                                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                                        <input type="checkbox" id="wizard-reprises-bureau">
                                                        Reprises individuelles possibles (bureau)
                                                    </label>
                                                </div>
                                                <div class="groupe-form">
                                                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                                        <input type="checkbox" id="wizard-niveau-retrogradable">
                                                        Le niveau peut être rétrogradé lors d'une reprise
                                                    </label>
                                                </div>
                                            </div>

                                            <div id="wizard-info-reprises" style="margin-top: 15px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px; display: none;">
                                                <p style="margin: 0; color: var(--gris-fonce); font-size: 0.9rem;">
                                                    Les occasions formelles de reprise peuvent être configurées manuellement dans le JSON.
                                                </p>
                                            </div>

                                            <!-- Système de jetons -->
                                            <div style="margin-top: 25px; padding-top: 20px; border-top: 1px solid var(--gris-leger);">
                                                <div class="groupe-form">
                                                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                                        <input type="checkbox" id="wizard-utiliser-jetons" onchange="toggleResumeJetonsWizard()">
                                                        <strong>Utiliser le système de jetons</strong>
                                                    </label>
                                                    <small style="color: var(--gris-moyen); margin-top: 6px; display: block;">
                                                        Les jetons permettent aux étudiants d'obtenir des délais ou des reprises
                                                    </small>
                                                </div>

                                                <!-- Résumé de la configuration des jetons -->
                                                <div id="wizard-resume-jetons" style="display: none; margin-top: 15px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                    <p class="text-muted" style="margin: 0 0 10px 0; font-size: 0.85rem; line-height: 1.5;">
                                                        <strong>Configuration actuelle des jetons</strong>
                                                    </p>
                                                    <div id="wizard-resume-jetons-contenu" class="text-muted">
                                                        <!-- Chargé dynamiquement -->
                                                    </div>
                                                    <p class="text-muted" style="font-size: 0.85rem; margin: 12px 0 0 0; line-height: 1.5;">
                                                        💡 Tu peux modifier cette configuration dans
                                                        <strong>Réglages → Pratique de notation → Système de jetons</strong>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- ÉTAPE 6: Gestion des critères -->
                                        <div class="wizard-step" data-step="6" style="display: none;">
                                            <!-- Message important sur les patterns -->
                                            <div style="margin-bottom: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                <p class="text-muted" style="margin: 0; font-size: 0.85rem; line-height: 1.5;">
                                                    Pour que le système puisse détecter les <strong>patterns</strong> (tendances récurrentes)
                                                    et calculer les <strong>niveaux RàI</strong> (Réponse à l'Intervention), le système doit utiliser
                                                    <strong>les mêmes critères dans tous les travaux, durant toute la session</strong>.
                                                </p>
                                            </div>

                                            <div class="groupe-form">
                                                <label>Type de gestion des critères *</label>
                                                <select id="wizard-criteres-type" class="controle-form" onchange="afficherConfigCriteres()">
                                                    <option value="">Choisir un type...</option>
                                                    <option value="fixes">Critères fixes pour toutes les évaluations</option>
                                                    <option value="par_standard">Critères par standard (SBG)</option>
                                                    <option value="par_evaluation">Critères par évaluation</option>
                                                </select>
                                            </div>

                                            <!-- Configuration critères fixes -->
                                            <div id="wizard-config-criteres-fixes" style="display: none;">
                                                <p style="color: var(--gris-moyen); font-size: 0.9rem; margin: 15px 0; line-height: 1.5;">
                                                    Choisissez une grille de critères existante (ex: SRPNF holistique inspirée de ELLAC).
                                                </p>

                                                <div class="groupe-form">
                                                    <label>Grille de critères à utiliser *</label>
                                                    <select id="wizard-grille-id" class="controle-form" onchange="afficherPreviewGrilleWizard()">
                                                        <option value="">Choisir une grille...</option>
                                                        <!-- Options chargées dynamiquement depuis grillesTemplates -->
                                                    </select>
                                                    <p style="color: var(--gris-moyen); font-size: 0.85rem; margin-top: 6px;">
                                                        Tu peux créer ou modifier tes grilles dans
                                                        <strong>Réglages → Matériel pédagogique → Critères d'évaluation</strong>
                                                    </p>
                                                </div>

                                                <!-- Prévisualisation de la grille -->
                                                <div id="wizard-preview-grille" style="display: none; margin-top: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                    <p class="text-muted" style="margin: 0 0 12px 0; font-size: 0.85rem; line-height: 1.5;">
                                                        <strong>Aperçu de la grille</strong>
                                                    </p>
                                                    <div id="wizard-preview-grille-contenu" class="text-muted">
                                                        <!-- Critères + pondérations affichés ici -->
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Configuration par standard -->
                                            <div id="wizard-config-criteres-standard" style="display: none;">
                                                <p style="color: var(--gris-moyen); font-size: 0.9rem; margin-top: 15px;">
                                                    Les critères seront définis individuellement pour chaque standard.
                                                </p>
                                            </div>

                                            <!-- Configuration par évaluation -->
                                            <div id="wizard-config-criteres-evaluation" style="display: none;">
                                                <p style="color: var(--gris-moyen); font-size: 0.9rem; margin-top: 15px;">
                                                    Les critères seront définis individuellement pour chaque évaluation.
                                                </p>
                                            </div>
                                        </div>

                                        <!-- ÉTAPE 7: Seuils d'interprétation -->
                                        <div class="wizard-step" data-step="7" style="display: none;">
                                            <!-- Message contextuel Primo: TECHNIQUE -->
                                            <div class="alerte alerte-attention">
                                                Afin de traduire les données quantitatives en interprétations plus concrètes, les seuils déterminent comment sont traduits les indices A-C-P de tes étudiants.
                                            </div>

                                            <!-- Affichage des seuils configurés -->
                                            <div style="margin-top: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                <p class="text-muted" style="margin: 0 0 12px 0; font-size: 0.85rem; line-height: 1.5;">
                                                    <strong>Seuils configurés</strong>
                                                </p>
                                                <div id="wizard-seuils-actuels" class="text-muted">
                                                    <!-- Chargé dynamiquement -->
                                                </div>
                                                <p class="text-muted" style="font-size: 0.85rem; margin: 12px 0 0 0; line-height: 1.5;">
                                                    💡 Tu peux modifier ces seuils dans
                                                    <strong>Réglages → Pratique de notation → Seuils d'interprétation</strong>
                                                </p>
                                            </div>

                                            <!-- Note explicative -->
                                            <div style="margin-top: 20px; padding: 12px; background: #f8f9fa; border-radius: 4px;">
                                                <p style="margin: 0; font-size: 0.85rem; color: var(--gris-fonce); line-height: 1.5;">
                                                    <strong>Important :</strong> Ces seuils sont utilisés pour la détection des patterns et des niveaux RàI.
                                                    Pour que le système fonctionne correctement, garde les mêmes seuils durant toute la session.
                                                </p>
                                            </div>
                                        </div>

                                        <!-- ÉTAPE 8: Interface et terminologie -->
                                        <div class="wizard-step" data-step="8" style="display: none;">
                                            <!-- Message contextuel Primo: TECHNIQUE -->
                                            <div class="alerte alerte-attention">
                                                Ces paramètres d'affichage te permettent de personnaliser la terminologie utilisée dans l'application selon ta discipline et tes préférences. Tu peux toujours les modifier plus tard dans les Réglages.
                                            </div>

                                            <div class="groupe-form">
                                                <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                                    <input type="checkbox" id="wizard-afficher-notes" checked>
                                                    Afficher les notes chiffrées
                                                </label>
                                            </div>

                                            <h4 style="margin-top: 25px; margin-bottom: 15px; color: var(--bleu-principal);">Terminologie</h4>

                                            <div class="groupe-form">
                                                <label>Terme pour «Évaluation»</label>
                                                <input type="text" id="wizard-terme-evaluation" class="controle-form" placeholder="Standard, Artefact, Évaluation..." value="Évaluation">
                                            </div>

                                            <div class="groupe-form">
                                                <label>Terme pour «Critère»</label>
                                                <input type="text" id="wizard-terme-critere" class="controle-form" placeholder="Critère, Objectif..." value="Critère">
                                            </div>

                                            <div class="groupe-form">
                                                <label>Terme pour «Note finale»</label>
                                                <input type="text" id="wizard-terme-note" class="controle-form" placeholder="Note finale, Performance..." value="Note finale">
                                            </div>

                                            <div class="groupe-form">
                                                <label>Terme pour «Reprise»</label>
                                                <input type="text" id="wizard-terme-reprise" class="controle-form" placeholder="Reprise, Tentative..." value="Reprise">
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Boutons navigation -->
                                    <div class="footer-border-top" style="display: flex; justify-content: space-between;">
                                        <button class="btn btn-compact btn-annuler" onclick="fermerWizardPratique()">
                                            Annuler
                                        </button>
                                        <div style="display: flex; gap: 10px;">
                                            <button id="wizard-btn-precedent" class="btn btn-compact" onclick="precedentEtapeWizard()" style="display: none;">
                                                ← Précédent
                                            </button>
                                            <button id="wizard-btn-suivant" class="btn btn-compact btn-principal" onclick="suivantEtapeWizard()">
                                                Suivant →
                                            </button>
                                            <button id="wizard-btn-creer" class="btn btn-compact btn-confirmer" onclick="creerPratiqueDepuisWizard()" style="display: none;">
                                                Créer la pratique
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ========================================= -->
                            <!-- FIN GESTION PRATIQUES CONFIGURABLES -->
                            <!-- ========================================= -->

                            <!-- Type de PAN -->
                            <div class="groupe-form" id="colonnePAN" style="display: none;">
                                <label>Type de pratique alternative</label>
                                <select id="typePAN" class="controle-form">
                                    <option value="">Choisir un type de PAN...</option>
                                    <option value="maitrise">Notation basée sur la maîtrise de standards</option>
                                    <option value="specifications">Notation par spécifications</option>
                                    <option value="denotation">Dénotation (Ungrading)</option>
                                    <option value="denotation">Système hybride</option>
                                </select>
                            </div>

                            <!-- INFO PAN -->
                            <div id="infoPAN" style="display: none; margin-top: 15px; padding: 10px;
                 background: white; border-radius: 4px; font-size: 0.85rem; color: var(--gris-moyen);">
                            </div>

                            <!-- Activation portfolio et jetons -->
                            <div id="activationsExtras" style="display: none; margin-top: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                <h4 style="font-size: 0.95rem; margin-bottom: 12px; color: var(--bleu-principal);">Options de configuration</h4>

                                <!-- Grille 2 colonnes pour les checkboxes -->
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                                    <!-- Checkbox Portfolio -->
                                    <div class="form-group">
                                        <label style="cursor: pointer; display: flex; align-items: center;">
                                            <input type="checkbox" id="portfolioActif" checked>
                                            <strong style="margin-left: 8px;">Activer le portfolio d'artefacts</strong>
                                        </label>
                                    </div>

                                    <!-- Checkbox Jetons -->
                                    <div class="form-group">
                                        <label style="cursor: pointer; display: flex; align-items: center;">
                                            <input type="checkbox" id="jetonsActif" checked>
                                            <strong style="margin-left: 8px;">Activer le système de jetons</strong>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Affichage au tableau de bord -->
                            <div id="sectionAffichageTableauBord" style="display: none; margin-top: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                <h4 style="font-size: 0.95rem; margin-bottom: 10px; color: var(--bleu-principal);">Affichage au tableau de bord</h4>

                                <p class="text-muted" style="margin-bottom: 12px; font-size: 0.8rem; line-height: 1.5;">
                                    Par défaut, le tableau de bord affiche uniquement les indices de la pratique choisie ci-dessus.
                                    Pour fins de recherche ou d'expérimentation, tu peux activer le mode comparatif pour afficher
                                    <strong>les deux systèmes simultanément</strong> (SOM et PAN). Ceci peut être utile pour comparer l'historique et le contexte ponctuel de certains indices.
                                </p>

                                <!-- Option : Mode comparatif -->
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label style="cursor: pointer; display: flex; align-items: center;">
                                        <input type="checkbox" id="modeComparatif">
                                        <strong style="margin-left: 8px;">Activer le mode comparatif (expérimental)</strong>
                                    </label>
                                    <small style="display: block; color: var(--gris-moyen); margin-top: 5px; margin-left: 28px; font-size: 0.8rem;">
                                        Affiche les indices SOM et PAN côte à côte pour comparer les deux approches
                                    </small>
                                </div>

                                <!-- Option : Analyse SOLO des acquis -->
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label style="cursor: pointer; display: flex; align-items: center;">
                                        <input type="checkbox" id="afficherDescriptionsSOLO" checked>
                                        <strong style="margin-left: 8px;">Afficher l'observation de la structure des résultats d'apprentissage (SOLO)</strong>
                                    </label>
                                    <small style="display: block; color: var(--gris-moyen); margin-top: 5px; margin-left: 28px; font-size: 0.8rem; line-height: 1.5;">
                                        Affiche une 3<sup>e</sup> carte dans Accompagnement avec les descriptions détaillées basées sur la taxonomie SOLO de Biggs & Collis (unistructurel, multistructurel, relationnel, abstrait étendu). Désactivez cette option si votre pratique ne s'appuie pas sur la taxonomie SOLO.
                                    </small>
                                </div>

                                <!-- Option : Modèle RàI et détection des patterns -->
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label style="cursor: pointer; display: flex; align-items: center;">
                                        <input type="checkbox" id="activerRai" checked>
                                        <strong style="margin-left: 8px;">Activer le modèle de la Réponse à l'intervention (RàI) et la détection des patterns</strong>
                                    </label>
                                    <small style="display: block; color: var(--gris-moyen); margin-top: 5px; margin-left: 28px; font-size: 0.8rem; line-height: 1.5;">
                                        <strong>Prérequis :</strong> Le modèle RàI et la détection des patterns nécessitent l'utilisation de la <strong>même grille de critères</strong>
                                        et de la <strong>même échelle de performance</strong> pour tous les artefacts du trimestre.
                                        Cette cohérence méthodologique permet de suivre l'évolution des apprentissages et d'identifier les besoins d'intervention.<br>
                                        <strong>Si désactivé :</strong> Les sections RàI et Patterns seront masquées dans l'Aperçu, le Profil étudiant et la Liste des étudiants.
                                    </small>
                                </div>

                                <!-- Grille de référence pour le dépistage -->
                                <div class="form-group" id="groupeGrilleReference">
                                    <label for="grilleReferenceDepistage" style="font-weight: 600; display: block; margin-bottom: 8px;">
                                        Grille de critères pour le dépistage
                                    </label>
                                    <select id="grilleReferenceDepistage" class="controle-form">
                                        <option value="">-- Sélectionner une grille --</option>
                                    </select>
                                    <small style="display: block; color: var(--gris-moyen); margin-top: 5px; font-size: 0.8rem; line-height: 1.5;">
                                        Cette grille définit les critères utilisés pour identifier les <strong>forces et défis</strong> des étudiant·es.
                                        Les pondérations de la grille sont prises en compte dans le diagnostic.
                                        Tu dois utiliser cette même grille pour toutes les évaluations afin que le dépistage soit efficace.
                                    </small>
                                </div>
                            </div>

                            <!-- Évaluation du français -->
                            <div style="margin-top: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                <h4 style="font-size: 0.95rem; margin-bottom: 10px; color: var(--bleu-principal);">Évaluation du français</h4>

                                <p class="text-muted" style="margin-bottom: 12px; font-size: 0.8rem; line-height: 1.5;">
                                    Ces options s'appliquent aux critères de type <strong>Algorithmique</strong> (calcul automatique basé sur le nombre d'erreurs et de mots).
                                </p>

                                <!-- Option : Catégorisation des erreurs -->
                                <div class="form-group">
                                    <label style="cursor: pointer; display: flex; align-items: center;">
                                        <input type="checkbox" id="activerCategorisationErreurs">
                                        <strong style="margin-left: 8px;">Activer la catégorisation des erreurs de français</strong>
                                    </label>
                                    <small style="display: block; color: var(--gris-moyen); margin-top: 5px; margin-left: 28px; font-size: 0.8rem; line-height: 1.5;">
                                        Permet de catégoriser les erreurs selon 11 codes (0-10) et de fournir une rétroaction différenciée selon le type d'erreur dominant.
                                        <strong>Si désactivé :</strong> L'enseignant saisit simplement le nombre total d'erreurs sans les catégoriser, et reçoit une rétroaction générique.
                                    </small>
                                </div>
                            </div>

                            <!-- ========================================= -->
                            <!-- CARTES PAN (Portfolio + Jetons) -->
                            <!-- ========================================= -->
                            <div id="colonneCartesExtras" style="margin-top: 20px;">
                                <!-- Les cartes Portfolio et Jetons seront affichées ici dynamiquement -->
                            </div>

                            <!-- Bouton Sauvegarder -->
                            <div style="margin-top: 20px;">
                                <button class="btn btn-confirmer" id="btnSauvegarderPratiqueNotation" style="width: 100%;">
                                    Sauvegarder toutes les configurations
                                </button>
                                <span id="statutModalites" style="display: none;"></span>
                            </div>

                    </div>

                        <!-- ==========================================
             SECTION : CONFIGURATION PAN
             ========================================== -->
                        <div id="configurationPAN" style="display: none; margin-top: 20px;">

                            <!-- Grille 2 colonnes pour optimisation espace -->
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px;">

                                <!-- Colonne gauche -->
                                <div style="display: flex; flex-direction: column; gap: 20px;">

                                    <!-- Configuration du portfolio d'artefacts -->
                                    <div class="carte" id="cartePortfolio" style="margin-bottom: 0; display: none;">
                                        <h3>Configuration du portfolio d'artefacts</h3>

                                        <!-- Description du portfolio -->
                                        <div style="margin-bottom: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                            <p class="text-muted" style="margin: 0; font-size: 0.85rem; line-height: 1.5;">
                                                Un portfolio est un dossier d'apprentissage que l'apprenant·e monte tout au long du trimestre et qui a sa pondération propre dans la construction de la note finale. Si tu utilises un portfolio (ex: ELLAC en littérature), coche cette case. Sinon, les productions des apprenant·es demeurent indépendantes et ont leur propre pondération.
                                            </p>
                                        </div>

                                        <!-- Configuration détaillée du portfolio -->
                                        <div id="detailsConfigPortfolio">

                                            <!-- Modalité de sélection -->
                                            <div class="groupe-form" style="margin-bottom: 10px;">
                                                <label for="configMethodeSelection" style="font-weight: 600; display: block; margin-bottom: 8px;">
                                                    Modalité de sélection des artefacts
                                                </label>
                                                <select id="configMethodeSelection" class="controle-form" style="max-width: 100%;">
                                                    <option value="meilleurs" selected>N meilleurs artefacts (note maximale atteinte)</option>
                                                    <option value="recents">N récents artefacts (niveau terminal actuel)</option>
                                                    <option value="recents-meilleurs">N récents parmi les meilleurs (hybride)</option>
                                                    <option value="tous">Tous les artefacts (moyenne complète)</option>
                                                </select>
                                            </div>

                                            <!-- Description dynamique -->
                                            <div id="descriptionModalite" class="text-muted" style="margin-bottom: 20px; padding: 12px; background: var(--gris-tres-pale); border-radius: 4px; font-size: 0.9rem; line-height: 1.6;">
                                                Dans ma pratique de notation basée sur la maîtrise de standards, le portfolio contient les N meilleures productions de l'apprenant·e.
                                            </div>

                                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                                            <div class="groupe-form" id="groupeNombreARetenir">
                                                <label for="configNombreARetenir" style="font-weight: 500; display: block; margin-bottom: 5px;">
                                                    Artefacts à retenir
                                                </label>
                                                <input type="number" id="configNombreARetenir" class="controle-form"
                                                       value="5" min="1" max="20">
                                                <small id="labelNombreARetenir" style="display: block; color: var(--gris-moyen); margin-top: 3px; font-size: 0.8rem;">
                                                    N meilleurs
                                                </small>
                                            </div>

                                            <div class="groupe-form">
                                                <label for="configMinimumCompletion" style="font-weight: 500; display: block; margin-bottom: 5px;">
                                                    Minimum requis
                                                </label>
                                                <input type="number" id="configMinimumCompletion" class="controle-form"
                                                       value="7" min="1" max="20">
                                                <small style="display: block; color: var(--gris-moyen); margin-top: 3px; font-size: 0.8rem;">
                                                    Seuil complétion
                                                </small>
                                            </div>

                                            <div class="groupe-form">
                                                <label for="configNombreTotal" style="font-weight: 500; display: block; margin-bottom: 5px;">
                                                    Total prévus
                                                </label>
                                                <input type="number" id="configNombreTotal" class="controle-form"
                                                       value="10" min="1" max="50">
                                                <small style="display: block; color: var(--gris-moyen); margin-top: 3px; font-size: 0.8rem;">
                                                    Nombre artefacts
                                                </small>
                                            </div>
                                        </div>
                                        </div>
                                        <!-- FIN détailsConfigPortfolio -->

                                    </div>

                                </div>

                                <!-- Colonne droite -->
                                <div style="display: flex; flex-direction: column; gap: 20px;">

                                    <!-- Système de jetons -->
                                    <div class="carte" id="carteJetons" style="margin-bottom: 0; display: none;">
                                        <h3>Système de jetons</h3>

                                        <!-- Description des jetons -->
                                        <div style="margin-bottom: 20px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                            <p class="text-muted" style="margin: 0; font-size: 0.85rem; line-height: 1.5;">
                                                Les jetons sont des ressources limitées que l'apprenant·e peut utiliser pour adapter son parcours d'apprentissage. Chaque élève reçoit un nombre fixe de jetons par trimestre qu'il peut choisir d'utiliser selon ses besoins (prolonger une échéance, refaire une évaluation, etc.).
                                            </p>
                                        </div>

                                        <!-- Grille 2 colonnes : Nombre de jetons et Types personnalisés -->
                                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">

                                            <!-- Colonne gauche : Nombre de jetons par élève -->
                                            <div class="groupe-form">
                                                <label for="nombreJetonsParEleve" style="font-weight: 500; display: block; margin-bottom: 5px;">
                                                    Nombre de jetons alloués par élève
                                                </label>
                                                <input type="number" id="nombreJetonsParEleve" class="controle-form"
                                                       min="0" max="20" value="4">
                                                <small style="display: block; color: var(--gris-moyen); margin-top: 3px; font-size: 0.8rem;">
                                                    Chaque élève peut utiliser ses jetons comme il le souhaite (délai, reprise, ou autres types que vous créez)
                                                </small>
                                            </div>

                                            <!-- Colonne droite : Types de jetons personnalisés -->
                                            <div>
                                                <h4 style="font-size: 0.95rem; margin-bottom: 10px; color: var(--bleu-principal); font-weight: 500;">
                                                    Types de jetons personnalisés
                                                </h4>

                                                <!-- Bouton pour ajouter un nouveau type -->
                                                <button type="button" id="btnAjouterTypeJeton" class="btn btn-secondaire" style="width: 100%;">
                                                    Ajouter un type de jeton
                                                </button>

                                                <p class="text-muted" style="margin-top: 8px; margin-bottom: 0; font-size: 0.8rem;">
                                                    Créez vos propres types de jetons adaptés à votre pratique pédagogique
                                                </p>
                                            </div>

                                        </div>

                                        <!-- Grille 3 colonnes : Délai, Reprise, Reprise ciblée -->
                                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">

                                            <!-- Colonne 1 : Jetons de délai -->
                                            <div id="configJetonsDelai" style="padding: 12px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                <div class="form-group" style="margin-bottom: 8px;">
                                                    <label style="cursor: pointer;">
                                                        <input type="checkbox" id="jetonDelaiActif" checked>
                                                        <strong style="margin-left: 8px;">Jetons de délai</strong>
                                                    </label>
                                                </div>
                                                <p class="text-muted" style="font-size: 0.85rem; margin-bottom: 12px;">
                                                    Permettent de prolonger l'échéance d'une évaluation
                                                </p>
                                                <div class="groupe-form">
                                                    <label for="dureeDelai" style="font-weight: 500; font-size: 0.9rem; display: block; margin-bottom: 6px;">
                                                        Durée du délai :
                                                    </label>
                                                    <div style="display: flex; align-items: center; gap: 8px;">
                                                        <input type="number" id="dureeDelai" class="controle-form"
                                                               min="1" max="30" value="7" style="width: 70px;">
                                                        <span style="font-size: 0.9rem;">jours</span>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Colonne 2 : Jetons de reprise -->
                                            <div id="configJetonsReprise" style="padding: 12px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                <div class="form-group" style="margin-bottom: 8px;">
                                                    <label style="cursor: pointer;">
                                                        <input type="checkbox" id="jetonRepriseActif" checked>
                                                        <strong style="margin-left: 8px;">Jetons de reprise</strong>
                                                    </label>
                                                </div>
                                                <p class="text-muted" style="font-size: 0.85rem; margin-bottom: 12px;">
                                                    Permettent de refaire une évaluation pour améliorer la maîtrise
                                                </p>
                                                <div class="groupe-form">
                                                    <label style="font-weight: 500; font-size: 0.9rem; display: block; margin-bottom: 8px;">
                                                        Que fait-on avec l'évaluation originale?
                                                    </label>
                                                    <div style="display: flex; flex-direction: column; gap: 6px;">
                                                        <label style="display: inline-flex; align-items: center; cursor: pointer; font-size: 0.85rem;">
                                                            <input type="radio" id="archiverOriginale" name="gestionOriginale" value="archiver" checked>
                                                            <span style="margin-left: 6px;">On la garde en archive</span>
                                                        </label>
                                                        <label style="display: inline-flex; align-items: center; cursor: pointer; font-size: 0.85rem;">
                                                            <input type="radio" id="supprimerOriginale" name="gestionOriginale" value="supprimer">
                                                            <span style="margin-left: 6px;">On la supprime</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Colonne 3 : Jetons de reprise ciblée -->
                                            <div id="configJetonsRepriseCiblee" style="padding: 12px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                                <div class="form-group" style="margin-bottom: 8px;">
                                                    <label style="cursor: pointer;">
                                                        <input type="checkbox" id="jetonRepriseCibleeActif" checked>
                                                        <strong style="margin-left: 8px;">Jetons de reprise ciblée</strong>
                                                    </label>
                                                </div>
                                                <p class="text-muted" style="font-size: 0.85rem; margin-bottom: 12px;">
                                                    Permettent de refaire une évaluation en ciblant <strong>UN SEUL critère spécifique</strong> (ex: Français, Rigueur, Structure). La correction apportée doit être justifiée.
                                                </p>
                                                <div class="groupe-form" style="margin-bottom: 12px;">
                                                    <label for="plafondNoteCiblee" style="font-weight: 500; font-size: 0.9rem; display: block; margin-bottom: 6px;">
                                                        Note maximale du critère ciblé :
                                                    </label>
                                                    <select id="plafondNoteCiblee" class="controle-form" style="width: 100%; font-size: 0.85rem;">
                                                        <option value="M" selected>M (Maîtrisé) - 75-84%</option>
                                                        <option value="D">D (Développement) - 65-74%</option>
                                                        <option value="aucun">Aucun plafond (selon pratique)</option>
                                                    </select>
                                                </div>
                                                <div class="groupe-form">
                                                    <label style="font-weight: 500; font-size: 0.9rem; display: block; margin-bottom: 8px;">
                                                        Que fait-on avec l'évaluation originale?
                                                    </label>
                                                    <div style="display: flex; flex-direction: column; gap: 6px;">
                                                        <label style="display: inline-flex; align-items: center; cursor: pointer; font-size: 0.85rem;">
                                                            <input type="radio" id="archiverOriginaleCiblee" name="gestionOriginaleCiblee" value="archiver" checked>
                                                            <span style="margin-left: 6px;">On la garde en archive</span>
                                                        </label>
                                                        <label style="display: inline-flex; align-items: center; cursor: pointer; font-size: 0.85rem;">
                                                            <input type="radio" id="supprimerOriginaleCiblee" name="gestionOriginaleCiblee" value="supprimer">
                                                            <span style="margin-left: 6px;">On la supprime</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                        <!-- Liste des types de jetons personnalisés créés -->
                                        <div id="listeJetonsPersonnalises" style="margin-top: 15px; display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                                            <!-- Les types personnalisés seront ajoutés ici dynamiquement -->
                                        </div>

                                    </div>

                                </div>

                            </div>

                            <!-- Reste du contenu (jeton personnalisé si nécessaire) -->
                        </div>
                        <!-- FIN SECTION CONFIGURATION PAN -->

                </div><!--fin sous-section pratique-notation-->

                <!-- Sous-section : Interprétation des données -->
                <div id="reglages-interpretation" class="sous-section">
                    <h2 class="titre-avec-emoji-toggles">
                        <span>Configuration des seuils d'interprétation</span>
                        <span class="titre-emoji-container">
                            <span class="primo-aide" data-target="note-interpretation">😎</span>
                            <span class="primo-aide" data-target="conseil-interpretation">😎</span>
                        </span>
                    </h2>
                    <p class="text-muted">
                        Ajuste les seuils utilisés pour interpréter les données pédagogiques et détecter les patterns d'apprentissage
                    </p>

                    <!-- RAPPEL PATTERNS -->
                    <div style="margin-bottom: 20px; padding: 15px; background: var(--alerte-fond-attention); border-left: 4px solid #ffc107;">
                        <p style="margin: 0 0 8px 0; font-size: 0.9rem; font-weight: 600; color: #333;">
                            💡 Rappel : Conditions pour la détection des patterns
                        </p>
                        <p style="margin: 0; font-size: 0.85rem; line-height: 1.5; color: var(--gris-moyen);">
                            Les <strong>patterns d'apprentissage</strong> (progression stable, défi spécifique, blocages) sont identifiés en analysant l'évolution des performances sur chaque critère d'évaluation au fil du temps. Cette analyse longitudinale n'est possible que si vous utilisez <strong>les mêmes critères et la même échelle de performance</strong> pour tous les artefacts évalués durant le trimestre.
                        </p>
                        <p style="margin: 8px 0 0 0; font-size: 0.85rem; line-height: 1.5; color: var(--gris-moyen);">
                            Si vous variez les critères ou les échelles entre les productions, le système ne pourra pas établir de comparaisons valides et les patterns ne seront pas détectables. Dans ce cas, concentrez-vous sur les indices A-C-P et les niveaux RàI pour le dépistage.
                        </p>
                    </div>

                    <!-- Option avancée : Découplage P et R -->
                    <div class="form-group" style="margin-bottom: 20px; padding: 12px; background: var(--alerte-fond-attention); border-left: 3px solid #ffc107; border-radius: 4px;">
                        <label style="cursor: pointer; display: flex; align-items: center;">
                            <input type="checkbox" id="decouplerPR">
                            <strong style="margin-left: 8px;">Découpler Performance (P) et Risque (R)</strong>
                        </label>
                        <small style="display: block; color: var(--gris-moyen); margin-top: 8px; margin-left: 28px; font-size: 0.85rem; line-height: 1.5;">
                            <strong>P (notation)</strong> : Utilise la modalité choisie ci-dessus pour calculer la note finale.<br>
                            <strong>R (dépistage)</strong> : Toujours basé sur les N dernières productions pour détecter les tendances et intervenir au bon moment.<br>
                            <em>Recommandé avec modalité "N meilleurs" pour valoriser le progrès tout en détectant les décrochages.</em>
                        </small>
                    </div>

                    <!-- Carte Note -->
                    <div id="note-interpretation" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Ces seuils déterminent la sensibilité des algorithmes de détection de progression, de risque et de patterns d'apprentissage. Les valeurs par défaut ont été établies après expérimentation, mais tu peux les ajuster selon ton contexte pédagogique. Les modifications prennent effet immédiatement et sont sauvegardées automatiquement dans le navigateur.
                    </div>

                    <!-- Conseil pratique : Informations techniques -->
                    <div id="conseil-interpretation" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong>
                        <ul class="m-8-0-pl20-lh18">
                            <li><strong>Stockage :</strong> Les seuils sont sauvegardés dans localStorage</li>
                            <li><strong>Portée :</strong> Les modifications affectent tous les calculs immédiatement</li>
                            <li><strong>Valeurs par défaut :</strong>
                                <ul class="mt-8">
                                    <li>Progression : 10 points (%)</li>
                                    <li>Direction risque : 5 points (%)</li>
                                    <li>Défi SRPNF : 71.25%</li>
                                </ul>
                            </li>
                            <li><strong>Impact :</strong> Les seuils influencent les diagnostics RàI, patterns et recommandations</li>
                        </ul>
                    </div>

                    <!-- Grille 2 colonnes pour optimisation espace -->
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px;">

                        <!-- Colonne gauche -->
                        <div style="display: flex; flex-direction: column; gap: 20px;">

                            <!-- Fenêtre d'analyse pour les patterns -->
                            <div class="carte" style="margin-bottom: 0;">
                                <h3>Fenêtre d'analyse des patterns</h3>
                                <p class="text-muted" style="margin-bottom: 15px; font-size: 0.9rem;">
                                    Nombre de productions récentes à analyser pour détecter les patterns d'apprentissage
                                    (progression, stagnation, difficulté croissante).
                                </p>

                                <div class="groupe-form">
                                    <label for="nombreProductionsAnalyse" class="label-fw-600-block" style="margin-bottom: 8px;">
                                        Nombre de productions à analyser
                                    </label>
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <input type="number" id="nombreProductionsAnalyse" class="controle-form"
                                               min="3" max="20" value="3" style="width: 100px;"
                                               onchange="sauvegarderSeuil('nombreProductionsAnalyse', parseInt(this.value))">
                                        <span style="color: var(--gris-moyen); font-size: 0.9rem;">dernières productions</span>
                                    </div>
                                    <small style="display: block; color: var(--gris-moyen); margin-top: 8px; font-size: 0.85rem;">
                                        <strong>Compromis réactivité vs fiabilité :</strong>
                                        Valeur basse = détection précoce (temps d'intervenir) •
                                        Valeur élevée = détection tardive (plus de recul)
                                    </small>
                                </div>

                                <div class="carte-bleu-pale" style="margin-top: 15px;">
                                    <p style="margin: 0 0 10px 0; font-size: 0.85rem; color: var(--gris-moyen);">
                                        <strong>Artefacts nécessaires avant détection :</strong>
                                    </p>
                                    <ul style="margin: 0; padding-left: 20px; font-size: 0.85rem; color: var(--gris-moyen); line-height: 1.6;">
                                        <li><strong>3 productions</strong> → Détection dès 4 artefacts (recommandé)</li>
                                        <li><strong>5 productions</strong> → Détection dès 6 artefacts</li>
                                        <li><strong>7 productions</strong> → Détection dès 8 artefacts</li>
                                    </ul>
                                    <p style="margin: 10px 0 0 0; font-size: 0.85rem; color: var(--gris-moyen);">
                                        <strong>Exemple :</strong> Avec 9 artefacts dans la session et une fenêtre de 3,
                                        les patterns seront détectables dès le 4<sup>e</sup> artefact (semaine 6 environ),
                                        laissant le temps d'intervenir avant la fin de la session.
                                    </p>
                                </div>
                            </div>

                            <!-- Progression des artefacts -->
                            <div class="carte" style="margin-bottom: 0;">
                                <h3>Détection de la progression</h3>
                                <p class="text-muted" style="margin-bottom: 15px; font-size: 0.9rem;">
                                    Différence minimale entre moyennes pour considérer qu'il y a progression (↗) ou régression (↘).
                                </p>

                                <div class="groupe-form">
                                    <label for="seuil-progression" class="label-fw-600-block">
                                        Progression des artefacts
                                        <span id="valeur-progression" class="ml-10-bleu">10 points (%)</span>
                                    </label>
                                    <input type="range" id="seuil-progression" class="controle-form"
                                           min="0.05" max="0.20" step="0.01" value="0.10"
                                           oninput="mettreAJourAffichageSeuil('progression', this.value)"
                                           onchange="sauvegarderSeuil('progressionArtefacts', parseFloat(this.value))"
                                           class="w-100-pointer">
                                    <div class="d-flex-between-sm-muted-mt5">
                                        <span>5 points (très sensible)</span>
                                        <span>20 points (moins sensible)</span>
                                    </div>
                                </div>

                                <div class="carte-bleu-pale" style="margin-top: 15px;">
                                    <p class="m-0-text-muted" style="font-size: 0.85rem;">
                                        <strong>Exemple :</strong> Avec un seuil de <span id="exemple-progression">10</span> points,
                                        si un étudiant passe de 70% à 81%, cela sera considéré comme une progression (↗).
                                        De 70% à 78%, ce sera stable (→).
                                    </p>
                                </div>
                            </div>

                        </div>

                        <!-- Colonne droite -->
                        <div style="display: flex; flex-direction: column; gap: 20px;">

                            <!-- Direction du risque -->
                            <div class="carte" style="margin-bottom: 0;">
                                <h3>Évolution du risque</h3>
                                <p class="text-muted" style="margin-bottom: 15px; font-size: 0.9rem;">
                                    Variation minimale du risque pour afficher une flèche (→ ou ←). En dessous, un tiret (—) indique un plateau.
                                </p>

                                <div class="groupe-form">
                                    <label for="seuil-risque" class="label-fw-600-block">
                                        Direction du risque
                                        <span id="valeur-risque" class="ml-10-bleu">5 points (%)</span>
                                    </label>
                                    <input type="range" id="seuil-risque" class="controle-form"
                                           min="0.03" max="0.15" step="0.01" value="0.05"
                                           oninput="mettreAJourAffichageSeuil('risque', this.value)"
                                           onchange="sauvegarderSeuil('directionRisque', parseFloat(this.value))"
                                           class="w-100-pointer">
                                    <div class="d-flex-between-sm-muted-mt5">
                                        <span>3 points (très sensible)</span>
                                        <span>15 points (moins sensible)</span>
                                    </div>
                                </div>

                                <div class="carte-bleu-pale" style="margin-top: 15px;">
                                    <p class="m-0-text-muted" style="font-size: 0.85rem;">
                                        <strong>Exemple :</strong> Avec un seuil de <span id="exemple-risque">5</span> points,
                                        si le risque passe de 0.40 à 0.46, cela affichera (→). De 0.40 à 0.44, ce sera (—).
                                    </p>
                                </div>
                            </div>

                            <!-- Défi spécifique -->
                            <div class="carte" style="margin-bottom: 0;">
                                <h3>Identification des défis SRPNF</h3>
                                <p class="text-muted" style="margin-bottom: 15px; font-size: 0.9rem;">
                                    Score en dessous duquel un critère SRPNF est considéré comme un défi spécifique nécessitant une attention particulière.
                                </p>

                                <div class="groupe-form">
                                    <label for="seuil-defi" class="label-fw-600-block">
                                        Défi spécifique (SRPNF)
                                        <span id="valeur-defi" class="ml-10-bleu">71.25%</span>
                                    </label>
                                    <input type="range" id="seuil-defi" class="controle-form"
                                           min="0.60" max="0.80" step="0.0125" value="0.7125"
                                           oninput="mettreAJourAffichageSeuil('defi', this.value)"
                                           onchange="sauvegarderSeuil('defiSpecifique', parseFloat(this.value))"
                                           class="w-100-pointer">
                                    <div class="d-flex-between-sm-muted-mt5">
                                        <span>60% (plus exigeant)</span>
                                        <span>80% (moins exigeant)</span>
                                    </div>
                                </div>

                                <div class="carte-bleu-pale" style="margin-top: 15px;">
                                    <p class="m-0-text-muted" style="font-size: 0.85rem;">
                                        <strong>Exemple :</strong> Avec un seuil de <span id="exemple-defi">71.25</span>%,
                                        un critère à 70% sera identifié comme défi, mais un critère à 72% ne le sera pas.
                                    </p>
                                </div>
                            </div>

                        </div>

                    </div>
                    <!-- Fin grille 2 colonnes -->

                    <!-- Actions -->
                    <div class="carte">
                        <h3>Actions</h3>
                        <div class="d-flex-gap15-wrap">
                            <button class="btn btn-principal" onclick="chargerSeuilsInterpretationUI()">
                                Actualiser
                            </button>
                            <button class="btn btn-secondaire" onclick="restaurerValeursParDefaut()">
                                Restaurer les valeurs par défaut
                            </button>
                        </div>
                    </div>

                </div><!--fin sous-section reglages-interpretation-->

                <!-- Sous-section: Captures de progression -->
                <div id="reglages-snapshots" class="sous-section">
                    <h2>Captures de progression</h2>
                    <p class="text-muted">
                        Gestion des captures automatiques et manuelles des données de progression longitudinale
                    </p>

                    <!-- Carte d'explication -->
                    <div class="carte-info-toggle carte-info-conseil" style="display: block; margin-bottom: 20px;">
                        <strong>Système de captures :</strong>
                        <p style="margin-top: 10px; line-height: 1.6;">
                            Les captures enregistrent automatiquement l'état des indices A-C-P-E à des moments clés :
                        </p>
                        <ul style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
                            <li><strong>Hebdomadaires :</strong> Chaque semaine, une capture est créée avec les indices actuels de tous les étudiants</li>
                            <li><strong>Interventions :</strong> Lors de la complétion d'une intervention RàI, une capture "après" est enregistrée pour mesurer l'impact</li>
                            <li><strong>Reconstruction rétroactive :</strong> Recalcule les captures historiques à partir des données existantes</li>
                        </ul>
                    </div>

                    <!-- Statut actuel -->
                    <div class="carte">
                        <h3>Statut actuel du système</h3>
                        <div class="grille-cartes-metriques" style="grid-template-columns: repeat(3, 1fr); margin-bottom: 20px;">
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Captures hebdomadaires</span>
                                    <strong id="stat-snapshots-hebdo" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Captures interventions</span>
                                    <strong id="stat-snapshots-interventions" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>
                            <div class="carte-metrique-bleue">
                                <div class="carte-metrique-contenu">
                                    <span class="carte-metrique-label">Dernière capture</span>
                                    <strong id="stat-derniere-capture" class="carte-metrique-valeur">—</strong>
                                </div>
                            </div>
                        </div>

                        <div id="info-snapshots-status" class="text-muted" style="font-size: 0.9rem;">
                            Chargement des informations...
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="carte">
                        <h3>Actions disponibles</h3>

                        <!-- Capture manuelle -->
                        <div class="carte-bleu-pale-p15-mb20">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">Capture manuelle</h4>
                            <p>
                                Capture immédiate de tous les étudiants avec les indices actuels.
                                Utile pour marquer un moment important dans la session.
                            </p>
                            <button class="btn btn-principal" onclick="capturerSnapshotManuel()" style="margin-top: 10px;">
                                Capturer maintenant
                            </button>
                        </div>

                        <!-- Reconstruction rétroactive -->
                        <div class="carte-bleu-pale-p15-mb20">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">Reconstruction rétroactive</h4>
                            <p>
                                Recalcule toutes les captures hebdomadaires depuis le début du trimestre en utilisant
                                les données d'évaluations et de présences existantes. Cette opération peut prendre quelques secondes.
                            </p>
                            <p class="text-muted" style="font-size: 0.85rem; margin-top: 10px;">
                                ⚠️ Attention : Cette action va recalculer et remplacer les captures hebdomadaires existantes.
                            </p>
                            <button class="btn btn-secondaire" onclick="lancerReconstructionRetroactive()" style="margin-top: 10px;">
                                Lancer la reconstruction
                            </button>
                        </div>

                        <!-- Nettoyage -->
                        <div class="carte-bleu-pale-p15-mb20" style="background: #fff3e0;">
                            <h4 style="color: #ff6f00; margin-bottom: 10px;">Nettoyage des données</h4>
                            <p>
                                Supprime toutes les captures enregistrées. Cette action est irréversible.
                            </p>
                            <p class="text-muted" style="font-size: 0.85rem; margin-top: 10px;">
                                ⚠️ Les graphiques de progression seront vides après cette opération.
                            </p>
                            <button class="btn btn-secondaire" onclick="confirmerNettoyageSnapshots()" style="margin-top: 10px; border-color: #ff6f00; color: #ff6f00;">
                                Supprimer toutes les captures
                            </button>
                        </div>
                    </div>

                </div><!--fin sous-section reglages-snapshots-->

                <!-- Sous-section: Import/Export des données -->
                <div id="reglages-import-export" class="sous-section">
                    <h2>Gestion des données</h2>
                    <p class="text-muted">Sauvegarde et restauration des données locales</p>

                    <div class="carte">
                        <h3>Sauvegarde et restauration</h3>
                        <p class="text-muted" class="mb-25">
                            Gère tes données locales : exporte pour sauvegarder, importe pour restaurer.
                        </p>

                        <!-- Export -->
                        <div class="carte-bleu-pale-p15-mb20">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px"> Exporter les données</h4>
                            <p>
                                Sauvegarde tes données dans un fichier JSON. Tu pourras choisir quelles
                                données exporter (toutes ou sélection personnalisée).
                            </p>
                            <button class="btn btn-principal" onclick="ouvrirModalExport()" class="mt-10">
                                Ouvrir l'exportation
                            </button>
                            <p class="text-muted" class="mt-10-text-09">
                                💡 Exporte régulièrement pour éviter toute perte de données.
                            </p>
                        </div>

                        <!-- Import -->
                        <div class="carte-bleu-pale-p15">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px"> Importer des données</h4>
                            <p>
                                Restaure des données depuis un fichier JSON exporté précédemment.
                            </p>
                            <button class="btn btn-principal" onclick="ouvrirModalImport()" class="mt-10">
                                Ouvrir l'importation
                            </button>
                            <div class="badge-alerte" class="mt-15">
                                <strong>Important :</strong> L'import écrasera les données existantes
                                pour les clés importées. Exporte d'abord si nécessaire !
                            </div>
                        </div>
                    </div>

                    <!-- Configuration pédagogique complète -->
                    <div class="carte">
                        <h3>Configuration pédagogique complète (Beta 91)</h3>
                        <p class="text-muted" class="mb-25">
                            Exporte ou importe une pratique pédagogique complète avec tous ses outils :
                            échelles, grilles, productions, cartouches et paramètres du cours.
                        </p>

                        <!-- Export configuration complète -->
                        <div class="carte-bleu-pale-p15-mb20">
                            <h4 style="color: var(--bleu-moyen); margin-bottom: 10px;">📦 Exporter une configuration complète</h4>
                            <p>
                                Rassemble <strong>toutes les ressources</strong> de ton cours dans un package pédagogique
                                partageable : échelles, grilles, productions, cartouches et paramètres.
                            </p>
                            <p class="mb-15">
                                L'export génère automatiquement un fichier JSON + un fichier LISEZMOI.txt avec les métadonnées
                                et les instructions d'utilisation.
                            </p>
                            <button class="btn btn-principal" onclick="exporterConfigurationComplete()" class="mt-10">
                                Exporter ma configuration complète
                            </button>
                            <p class="text-muted" class="mt-10-text-09">
                                💡 Idéal pour partager une pratique pédagogique avec des collègues ou conserver une configuration de cours.
                            </p>
                        </div>

                        <!-- Import configuration complète -->
                        <div class="carte-bleu-pale-p15">
                            <h4 style="color: var(--bleu-moyen); margin-bottom: 10px;">📥 Importer une configuration complète</h4>
                            <p>
                                Importe une configuration pédagogique exportée précédemment.
                                Le système détectera automatiquement le type de fichier et affichera un aperçu avant l'import.
                            </p>
                            <button class="btn btn-principal" onclick="ouvrirImportConfigComplete()" class="mt-10">
                                Importer une configuration
                            </button>
                            <div class="badge-alerte" class="mt-15">
                                <strong>Attention :</strong> L'import écrasera les ressources existantes avec les mêmes identifiants.
                                Exporte ta configuration actuelle d'abord si tu souhaites la conserver !
                            </div>
                        </div>
                    </div>

                    <!-- Informations sur les backups -->
                    <div class="carte">
                        <h3>À propos des sauvegardes</h3>
                        <div class="carte-info-bleu-clair">
                            <h4 style="color: var(--bleu-clair); margin-bottom: 10px;"> Backup complet vs Configuration pédagogique vs Import/Export partiel</h4>
                            <p class="mb-15">
                                <strong>Backup complet</strong> (boutons "Exporter/Importer les données" ci-dessus) :
                                Sauvegarde <strong>toutes</strong> tes données d'application (cours, trimestre, étudiants, évaluations, présences, etc.).
                            </p>
                            <p class="mb-15">
                                <strong>Configuration pédagogique complète</strong> (nouveau - Beta 91) :
                                Exporte uniquement le <strong>matériel pédagogique réutilisable</strong> (échelles, grilles, productions, cartouches, paramètres)
                                dans un package partageable avec métadonnées CC BY-NC-SA 4.0.
                            </p>
                            <p class="mb-15">
                                <strong>Import/Export partiel</strong> : Importe/exporte des ressources individuelles via les boutons
                                dans les sections :
                            </p>
                            <ul class="ml-20-lh-95">
                                <li><strong>Matériel pédagogique → Productions</strong> : Import/export des évaluations</li>
                                <li><strong>Matériel pédagogique → Critères d'évaluation</strong> : Import/export des grilles</li>
                                <li><strong>Matériel pédagogique → Niveaux de performance</strong> : Import/export des échelles</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Réinitialisation -->
                    <div class="carte">
                        <h4>Réinitialisation complète</h4>
                        <p>
                            Efface <strong>toutes</strong> les données et revient à l'état initial.
                            <strong>Cette action est irréversible.</strong>
                        </p>
                        <button class="btn btn-supprimer" onclick="reinitialiserDonnees()">
                            Réinitialiser toutes les données
                        </button>
                        <p class="text-muted" class="mt-10-text-09">
                            Triple confirmation requise + mot de passe "EFFACER" pour sécurité
                        </p>
                    </div>

                    <!-- Informations -->
                    <div class="carte">
                        <h4>Informations</h4>
                        <ul class="ml-20-lh-95">
                            <li><strong>Stockage :</strong> Local dans le navigateur (localStorage)</li>
                            <li><strong>Format :</strong> Fichiers JSON lisibles</li>
                            <li><strong>Compatibilité :</strong> Fonctionne sur tous appareils</li>
                            <li><strong>Sécurité :</strong> Aucune donnée envoyée sur internet</li>
                            <li><strong>Limite :</strong> ~5-10 Mo selon navigateurs</li>
                        </ul>
                    </div>

                </div>
                <!-- fin sous-section import-export -->

            </section><!-- fin section-reglages -->

            <!-- ===================================
                 SECTION: AIDE
                 =================================== -->
            <section id="section-aide" class="section">

                <!-- Champ de recherche -->
                <div id="aide-recherche-container" class="sticky-header">
                    <div class="max-w-800">
                        <div class="d-flex-gap10-center-mb8">
                            <div class="flex-1-relative">
                                <input
                                    type="text"
                                    id="aide-recherche-input"
                                    placeholder="Rechercher dans toutes les sous-sections de l'Aide..."
                                    class="select-full-bleu"
                                    onkeyup="rechercherDansAide()"
                                >
                                <button
                                    id="aide-recherche-clear"
                                    onclick="effacerRechercheAide()"
                                    class="btn-clear-input"
                                    title="Effacer la recherche"
                                >✕</button>
                            </div>
                        </div>
                        <div class="alerte alerte-attention" style="margin: 10px 0; padding: 10px; font-size: 0.9rem;">
                            ⚠️ <strong>Avertissement :</strong> La section Aide a été générée par une intelligence artificielle et peut contenir des inexactitudes.
                        </div>
                        <div class="label-block-085-muted-center-mb8">
                            Recherche dans : Introduction • Configuration • Formation • Utilisation • Consultation • Référence
                        </div>
                        <div id="aide-recherche-resultats" class="text-09-muted-center-hidden"></div>
                    </div>
                </div>

                <!--LLM:OK_TO_EDIT -->
                <!-- ===================================
                     SOUS-SECTION 1: INTRODUCTION
                     =================================== -->
                <div id="aide-introduction" class="sous-section">
                    <h2>Introduction au système de monitorage</h2>
                    <p class="text-muted">« L'objectif est de faire mentir les prédictions de risque par nos interventions proactives ! »</p>

                    <!-- Carte: Qu'est-ce que le monitorage -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Qu'est-ce que le monitorage pédagogique ?</h3>
                        <p><strong>Le système transforme votre intuition pédagogique en intelligence prédictive.</strong></p>

                        <p>Ce système formalise et systématise ce que tout enseignant fait intuitivement : observer ses étudiants, détecter les difficultés émergentes et ajuster ses interventions. Cette formalisation apporte :</p>

                        <ul>
                            <li><strong>Objectivité</strong> : Données factuelles plutôt qu'impressions</li>
                            <li><strong>Systématicité</strong> : Suivi régulier et exhaustif</li>
                            <li><strong>Prédictivité</strong> : Détection précoce des signaux faibles</li>
                        </ul>

                        <p><strong>Architecture modulaire et flexible :</strong></p>
                        <p>Le système s'adapte à <strong>votre pratique de notation</strong> existante. Vous pouvez configurer :</p>
                        <ul>
                            <li><strong>Vos grilles d'évaluation</strong> : Créez vos propres critères selon votre discipline</li>
                            <li><strong>Votre échelle de notation</strong> : Échelle qualitative (IDME) ou notes chiffrées (0-100%)</li>
                            <li><strong>Votre pratique pédagogique</strong> : Évaluation par compétences (PAN) ou sommative traditionnelle</li>
                        </ul>

                        <div class="alerte alerte-information">
                            <p><strong>📝 Exemple : Pratique PAN-Maîtrise</strong></p>
                            <p>La pratique PAN-Maîtrise développée par Grégoire utilise :</p>
                            <ul class="mt-5">
                                <li><strong>Critères SRPNF</strong> : Structure, Rigueur, Plausibilité, Nuance, Français</li>
                                <li><strong>Échelle IDME</strong> : Basée sur la taxonomie SOLO (Insuffisant, Développement, Maîtrisé, Étendu)</li>
                                <li><strong>RàI (Réponse à l'Intervention)</strong> : Détection patterns et niveaux d'intervention</li>
                            </ul>
                            <p class="text-muted" style="margin-top: 10px; font-size: 0.9rem"><em>Cette pratique est un exemple parmi d'autres possibilités.</em></p>
                        </div>
                    </div>

                    <!-- Carte: Concepts clés A-C-P -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Les trois indices primaires (A-C-P)</h3>

                        <div class="alerte alerte-information">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px">A - Assiduité</h4>
                            <p><strong>Présence en classe</strong> - Mesure l'engagement cognitif</p>
                            <p class="text-muted" style="font-size: 0.9rem"><em>Module source : saisie-presences.js</em></p>
                            <p>Les étudiants assidus sont davantage exposés au contenu, aux explications et aux pratiques guidées.</p>
                        </div>

                        <div class="alerte alerte-information">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px">C - Complétion</h4>
                            <p><strong>Remise des travaux</strong> - Mesure la mobilisation</p>
                            <p class="text-muted" style="font-size: 0.9rem"><em>Module source : portfolio.js</em></p>
                            <p>Reflète la constance et la persévérance dans les efforts, la régularité d'exécution et le respect des délais.</p>
                        </div>

                        <div class="alerte alerte-information">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px">P - Performance</h4>
                            <p><strong>Qualité des productions</strong> - Mesure la maîtrise</p>
                            <p class="text-muted" style="font-size: 0.9rem"><em>Module source : portfolio.js</em></p>
                            <p>Évalue la qualité des travaux selon vos critères et votre échelle de notation.</p>
                            <p class="text-muted" style="margin-top: 10px; font-size: 0.9rem"><em>Le calcul dépend de votre pratique : en PAN-Maîtrise, P = moyenne des N meilleurs artefacts (IDME). En Sommative, P = moyenne pondérée de toutes les évaluations (0-100%).</em></p>
                        </div>
                    </div>

                    <!-- Carte: Critères SRPNF -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Exemple de grille : SRPNF (pratique PAN-Maîtrise)</h3>
                        <p>Inspirés de l'approche ELLAC (Enseignement de la Lecture Littéraire Au Collégial)</p>

                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>Critère</th>
                                    <th class="text-center">Pondération</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Structure</strong></td>
                                    <td class="text-center">15%</td>
                                    <td>Organisation logique des idées</td>
                                </tr>
                                <tr>
                                    <td><strong>Rigueur</strong></td>
                                    <td class="text-center">20%</td>
                                    <td>Exhaustivité des observations</td>
                                </tr>
                                <tr>
                                    <td><strong>Plausibilité</strong></td>
                                    <td class="text-center">10%</td>
                                    <td>Crédibilité de l'interprétation</td>
                                </tr>
                                <tr>
                                    <td><strong>Nuance</strong></td>
                                    <td class="text-center">25%</td>
                                    <td>Qualité du raisonnement</td>
                                </tr>
                                <tr>
                                    <td><strong>Français</strong></td>
                                    <td class="text-center">30%</td>
                                    <td>Maîtrise linguistique</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="alerte alerte-info">
                            <p><strong>💡 Créez vos propres grilles</strong></p>
                            <p>Ces critères sont un exemple spécifique à l'enseignement de la littérature. Vous pouvez créer vos propres grilles adaptées à votre discipline dans <strong>Matériel → Critères d'évaluation</strong>.</p>
                        </div>
                    </div>

                    <!-- Carte: Échelle IDME -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Exemple d'échelle : IDME (pratique PAN-Maîtrise)</h3>
                        <p>L'échelle IDME traduit la profondeur de compréhension selon la taxonomie SOLO de Biggs & Collis :</p>

                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>IDME</th>
                                    <th>SOLO</th>
                                    <th class="text-center">Score</th>
                                    <th>Compréhension</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>I</strong> - Insuffisant</td>
                                    <td>Préstructurel / Unistructurel</td>
                                    <td class="text-center">&lt; 64%</td>
                                    <td>Incompréhension ou superficielle</td>
                                </tr>
                                <tr>
                                    <td><strong>D</strong> - Développement</td>
                                    <td>Multistructurel</td>
                                    <td class="text-center">65-74%</td>
                                    <td>Points pertinents sans liens</td>
                                </tr>
                                <tr>
                                    <td><strong>M</strong> - Maîtrisé</td>
                                    <td>Relationnel</td>
                                    <td class="text-center">75-84%</td>
                                    <td>Compréhension globale avec liens</td>
                                </tr>
                                <tr>
                                    <td><strong>E</strong> - Étendu</td>
                                    <td>Abstrait étendu</td>
                                    <td class="text-center">≥ 85%</td>
                                    <td>Transfert à autres contextes</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="alerte alerte-info">
                            <p><strong>📌 Autres échelles possibles</strong></p>
                            <p>L'échelle IDME est utilisée en pratique PAN-Maîtrise pour évaluer la profondeur de compréhension. D'autres pratiques utilisent des <strong>moyennes pondérées traditionnelles (0-100%)</strong> ou des échelles personnalisées. Configurez votre échelle dans <strong>Matériel → Niveaux de performance</strong>.</p>
                        </div>
                    </div>

                    <!-- Carte: Architecture Single Source of Truth -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Architecture : Single Source of Truth</h3>
                        <p><strong>Principe fondamental :</strong> Chaque donnée a UNE source unique qui la génère et la stocke. Les autres modules la lisent via localStorage.</p>

                        <div class="carte-code-light">
                            <p class="m-0-success"><strong>MODULE SOURCE</strong> (génère/stocke)</p>
                            <p class="my-5-mx-20">trimestre.js → calendrierComplet</p>
                            <p class="my-5-mx-20">saisie-presences.js → indicesAssiduiteDetailles</p>
                            <p class="my-5-mx-20">portfolio.js → indicesCP</p>

                            <p class="m-15-0-0-0-primary"><strong>MODULE LECTEUR</strong> (lit/affiche)</p>
                            <p class="my-5-mx-20">calendrier-vue.js → lit calendrierComplet</p>
                            <p class="my-5-mx-20">tableau-bord-apercu.js → lit indices A, C, P</p>
                            <p class="my-5-mx-20">profil-etudiant.js → lit indices A, C, P</p>
                        </div>

                        <p class="mt-15"><strong>Règle d'or :</strong> Les modules ne se parlent JAMAIS directement. Communication via localStorage uniquement.</p>
                    </div>
                </div>

                <!-- ===================================
                     SOUS-SECTION 2: CONFIGURATION
                     =================================== -->
                <div id="aide-configuration" class="sous-section">
                    <h2>Configuration initiale (1ʳᵉ utilisation)</h2>
                    <p class="text-muted">Guide pas-à-pas pour configurer votre système de monitorage</p>

                    <!-- Carte: Vue d'ensemble -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Étapes de configuration</h3>
                        <p>Suivez ces étapes dans l'ordre pour configurer correctement le système :</p>
                        <ol class="lh-relaxed">
                            <li><strong>Cours</strong> : Informations de base (code, titre, pondération)</li>
                            <li><strong>Trimestre</strong> : Dates et calendrier complet (SOURCE)</li>
                            <li><strong>Groupe</strong> : Liste des étudiants</li>
                            <li><strong>Horaire</strong> : Séances hebdomadaires ✅</li>
                            <li><strong>Pratique de notation</strong> : Choisir votre approche (PAN-Maîtrise, Sommative, etc.)</li>
                        </ol>
                    </div>

                    <!-- Carte: 1. Cours -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">1. Configurer le cours</h3>
                        <p><strong>Navigation :</strong> Réglages → Cours</p>

                        <p><strong>Informations à saisir :</strong></p>
                        <ul>
                            <li><strong>Code du cours</strong> : Ex. 601-101-MQ</li>
                            <li><strong>Titre</strong> : Ex. Écriture et littérature</li>
                            <li><strong>Pondération</strong> : Ex. 2-2-3</li>
                            <li><strong>Heures/semaine</strong> : Ex. 4 heures</li>
                            <li><strong>Format horaire</strong> : 2×2h, 3h ou 4h continu</li>
                        </ul>

                        <div class="alerte alerte-attention">
                            <strong>Astuce :</strong> Le format horaire est important pour le calcul correct de l'assiduité.
                        </div>
                    </div>

                    <!-- Carte: 2. Trimestre -->
                    <div class="carte" class="border-left-succes">
                        <h3 class="carte-titre-bleu">2. Définir le trimestre - MODULE SOURCE</h3>
                        <p><strong>Navigation :</strong> Réglages → Trimestre</p>
                        <p class="text-succes-bold">Ce module GÉNÈRE le calendrierComplet (source unique)</p>

                        <p><strong>Informations à saisir :</strong></p>
                        <ul>
                            <li><strong>Date de début</strong> : Premier jour de cours</li>
                            <li><strong>Date de fin</strong> : Dernier jour de cours</li>
                            <li><strong>Jours fériés</strong> : Congés prévus</li>
                            <li><strong>Congés imprévus</strong> : À ajouter en cours de trimestre</li>
                            <li><strong>Reprises</strong> : Si nécessaire</li>
                        </ul>

                        <p><strong>Génération automatique :</strong></p>
                        <ul>
                            <li>Calendrier complet sur 124 jours</li>
                            <li>Calcul automatique des semaines (5 jours cours = 1 semaine)</li>
                            <li>Gestion des congés et reprises</li>
                        </ul>

                        <div class="alerte alerte-succes">
                            <strong>API disponibles :</strong><br>
                            <code>obtenirCalendrierComplet()</code> - Récupère le calendrier<br>
                            <code>obtenirInfosJour(date)</code> - Détails d'une journée
                        </div>
                    </div>

                    <!-- Carte: 3. Groupe -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">3. Créer le groupe</h3>
                        <p><strong>Navigation :</strong> Réglages → Groupe</p>

                        <p><strong>Informations à saisir pour chaque étudiant :</strong></p>
                        <ul>
                            <li><strong>Numéro DA</strong> : Dossier administratif</li>
                            <li><strong>Nom</strong> : Nom de famille</li>
                            <li><strong>Prénom</strong> : Prénom</li>
                            <li><strong>Services adaptés (SA)</strong> : Si applicable</li>
                            <li><strong>CAF</strong> : Centre d'Aide en Français (si inscrit)</li>
                        </ul>

                        <p><strong>Options d'import :</strong></p>
                        <ul>
                            <li>Saisie manuelle</li>
                            <li>Import depuis fichier CSV (à venir)</li>
                        </ul>
                    </div>

                    <!-- Carte: 4. Horaire -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">4. Établir l'horaire - MODULE SOURCE</h3>
                        <p><strong>Navigation :</strong> Réglages → Horaire</p>
                        <p class="text-succes-bold">Ce module GÉNÈRE les seancesCompletes (source unique)</p>

                        <div class="alerte alerte-succes">
                            <strong>✅ Module complété (octobre 2025)</strong> : Génération automatique des séances avec synchronisation au calendrier. Les séances s'adaptent automatiquement aux congés et reprises.
                        </div>

                        <p><strong>Fonctionnalités :</strong></p>
                        <ul>
                            <li><strong>Définition des séances hebdomadaires</strong> : Jours et heures de cours</li>
                            <li><strong>Gestion automatique des reprises</strong> : Ex: "Horaire du lundi" se déplace au jeudi si lundi est congé</li>
                            <li><strong>API</strong> : <code>genererSeancesCompletes()</code> et <code>obtenirSeancesCompletes()</code></li>
                        </ul>
                    </div>

                    <!-- Carte: 5. Pratique de notation -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">5. Choisir votre pratique de notation</h3>
                        <p><strong>Navigation :</strong> Réglages → Pratique de notation</p>

                        <p>Le système supporte différentes pratiques pédagogiques. Choisissez celle qui correspond à votre approche :</p>

                        <div class="alerte alerte-information">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px">📝 PAN-Maîtrise (Évaluation par compétences)</h4>
                            <p><strong>Principes :</strong> Sélection des N meilleurs artefacts, échelle IDME, système de jetons</p>
                            <p><strong>Paramètres à définir :</strong></p>
                            <ul class="mt-5">
                                <li><strong>Nombre d'artefacts</strong> : 8-14 recommandé (configuration standard : 12)</li>
                                <li><strong>Système de jetons</strong> : 3-4 jetons maximum
                                    <ul class="mt-5">
                                        <li>Jeton de délai : Report d'échéance sans pénalité</li>
                                        <li>Jeton de reprise : Possibilité de refaire un artefact</li>
                                    </ul>
                                </li>
                                <li><strong>Méthode de sélection</strong> : N meilleurs artefacts (permet progression sans pénaliser erreurs initiales)</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-information">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px">📊 Sommative (Évaluation traditionnelle)</h4>
                            <p><strong>Principes :</strong> Moyenne pondérée de toutes les évaluations, notation 0-100%</p>
                            <p><strong>Fonctionnement :</strong> Toutes les évaluations comptent selon leur pondération. Approche traditionnelle utilisée dans la plupart des disciplines.</p>
                        </div>

                        <div class="alerte alerte-info">
                            <p><strong>💡 À venir :</strong> PAN-Spécifications (Pass/Fail par objectifs) et Dénotation (Ungrading sans notes chiffrées)</p>
                        </div>
                    </div>

                    <!-- Carte: 5b. Grille de référence pour dépistage -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">5b. Configurer la grille de critères pour le dépistage</h3>
                        <p><strong>Navigation :</strong> Réglages → Pratique de notation (section «Grille de critères pour le dépistage»)</p>

                        <p><strong>Pourquoi configurer une grille de référence ?</strong></p>
                        <p>Le système de dépistage identifie automatiquement les <strong>forces et défis</strong> de chaque étudiant en analysant leurs performances sur vos critères d'évaluation. Pour fonctionner, il doit savoir quels critères vous utilisez dans votre discipline.</p>

                        <p><strong>Étape 1 : Créer votre grille de critères</strong></p>
                        <ol>
                            <li>Aller dans <strong>Matériel → Critères d'évaluation</strong></li>
                            <li>Cliquer sur «➕ Créer une nouvelle grille»</li>
                            <li>Nommer votre grille (ex: «Grille SRPNF Littérature», «Rapport de labo - Chimie»)</li>
                            <li>Ajouter vos critères d'évaluation :
                                <ul class="mt-5">
                                    <li><strong>Nom</strong> : Nom du critère (ex: Structure, Hypothèse, Analyse)</li>
                                    <li><strong>Pondération</strong> : Importance relative (ex: 20%, 30%)</li>
                                    <li><strong>Description</strong> : Définition du critère (optionnel)</li>
                                </ul>
                            </li>
                            <li>Vérifier que la pondération totale = 100%</li>
                            <li>Sauvegarder la grille</li>
                        </ol>

                        <p><strong>Étape 2 : Définir la grille comme référence</strong></p>
                        <ol>
                            <li>Retourner dans <strong>Réglages → Pratique de notation</strong></li>
                            <li>Section «Grille de critères pour le dépistage»</li>
                            <li>Sélectionner votre grille dans le menu déroulant</li>
                            <li>Cliquer sur «Sauvegarder les réglages»</li>
                        </ol>

                        <div class="alerte alerte-attention">
                            <strong>Important :</strong> Tu dois utiliser cette même grille pour toutes tes évaluations. Le dépistage fonctionne en analysant tes rétroactions écrites (ex: «STRUCTURE (M) RIGUEUR (D)»).
                        </div>

                        <p><strong>Exemples de grilles par discipline :</strong></p>
                        <ul>
                            <li><strong>Littérature</strong> : Structure, Rigueur, Plausibilité, Nuance, Français</li>
                            <li><strong>Chimie</strong> : Hypothèse, Protocole, Analyse, Conclusion</li>
                            <li><strong>Anthropologie</strong> : Contextualisation, Méthodologie, Analyse comparative, Réflexivité</li>
                            <li><strong>Mathématiques</strong> : Compréhension, Démarche, Calculs, Communication</li>
                            <li><strong>Histoire</strong> : Contextualisation, Analyse de sources, Argumentation, Synthèse</li>
                        </ul>

                        <p><strong>Comment le système utilise la grille :</strong></p>
                        <ul>
                            <li><strong>Diagnostic forces/défis</strong> : Identifie automatiquement les critères maîtrisés (≥70%) et les défis (&lt;70%)</li>
                            <li><strong>Patterns d'apprentissage</strong> : Détecte progression, blocages émergents, blocages critiques</li>
                            <li><strong>Priorisation</strong> : Les critères avec pondération élevée sont priorisés dans les recommandations</li>
                            <li><strong>Suivi longitudinal</strong> : Calcule l'évolution de chaque critère au fil du temps</li>
                        </ul>

                        <div class="alerte alerte-succes">
                            <strong>Validation rapide :</strong> Après configuration, ouvrez le profil d'un étudiant évalué et vérifiez que la section «Développement des habiletés et compétences» affiche les forces/défis basés sur vos critères.
                        </div>
                    </div>

                    <!-- Carte: 5c. Sous-critères avec pondération différenciée -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">5c. Sous-critères avec pondération différenciée (Critères algorithmiques)</h3>
                        <p><strong>Navigation :</strong> Matériel → Critères d'évaluation</p>

                        <p><strong>Qu'est-ce qu'un critère algorithmique ?</strong></p>
                        <p>Un critère <strong>algorithmique</strong> est un type spécial de critère qui calcule automatiquement une note basée sur une formule mathématique. Le cas d'usage principal est l'<strong>évaluation du français écrit</strong> selon la formule :</p>

                        <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 6px; margin: 15px 0;">
                            <code style="font-size: 0.95rem;">Note = Pondération − (Erreurs pondérées ÷ Mots × Facteur de normalisation)</code>
                        </div>

                        <p><strong>Pourquoi des sous-critères ?</strong></p>
                        <p>Les sous-critères permettent de <strong>catégoriser les erreurs</strong> avec des <strong>pondérations différentes</strong>. Par exemple, dans certains cégeps, les erreurs de ponctuation comptent pour un demi-point (0.5) au lieu d'un point complet (1.0).</p>

                        <div class="alerte alerte-information">
                            <strong>Exemple concret :</strong><br>
                            Un étudiant commet 4 erreurs : 2× ponctuation (0.5 pt chacune) + 1× syntaxe (1.0 pt) + 1× orthographe (1.0 pt)<br>
                            = 0.5 + 0.5 + 1.0 + 1.0 = <strong>3.0 points d'erreur</strong> (au lieu de 4.0)<br>
                            Pour 500 mots et facteur 500 : Note = 30 − (3.0 ÷ 500 × 500) = 30 − 3.0 = <strong>27/30</strong>
                        </div>

                        <p><strong>Étape 1 : Créer un critère algorithmique</strong></p>
                        <ol>
                            <li>Dans votre grille de critères, ajouter un nouveau critère</li>
                            <li>Sélectionner le type <strong>«Algorithmique»</strong></li>
                            <li>Définir la pondération (ex: 30%)</li>
                            <li>Définir le facteur de normalisation (défaut: 500 mots)</li>
                        </ol>

                        <p><strong>Étape 2 : Ajouter des sous-critères</strong></p>
                        <p>Vous avez deux options :</p>

                        <p><strong>Option A : Utiliser les 11 sous-critères par défaut</strong></p>
                        <ul>
                            <li>Cliquer sur le bouton <strong>«📋 Utiliser sous-critères par défaut (0-10)»</strong></li>
                            <li>Le système crée automatiquement 11 sous-critères avec rétroactions complètes :
                                <ul class="mt-5" style="font-size: 0.85rem;">
                                    <li><strong>Code 0</strong> : Aucune erreur</li>
                                    <li><strong>Code 1</strong> : Syntaxe (construction de phrases, accord du verbe)</li>
                                    <li><strong>Code 2</strong> : Subordination (subordonnées mal construites)</li>
                                    <li><strong>Code 3</strong> : Ponctuation (virgules, points)</li>
                                    <li><strong>Code 4</strong> : Orthographe d'usage</li>
                                    <li><strong>Code 5</strong> : Homophones (ce/se, a/à, son/sont)</li>
                                    <li><strong>Code 6</strong> : Accords dans le GN (groupe nominal)</li>
                                    <li><strong>Code 7</strong> : Participes passés</li>
                                    <li><strong>Code 8</strong> : Mots inappropriés (anglicismes, registre)</li>
                                    <li><strong>Code 9</strong> : Répétitions et pléonasmes</li>
                                    <li><strong>Code 10</strong> : Autres erreurs variées</li>
                                </ul>
                            </li>
                            <li>Tous les sous-critères ont une pondération initiale de <strong>1.0</strong></li>
                        </ul>

                        <p><strong>Option B : Créer vos propres sous-critères</strong></p>
                        <ul>
                            <li>Cliquer sur <strong>«+ Ajouter un sous-critère»</strong></li>
                            <li>Remplir les champs :
                                <ul class="mt-5">
                                    <li><strong>Code</strong> : Identifiant court (ex: "1", "A", "syn", "pct")</li>
                                    <li><strong>Nom</strong> : Nom descriptif (ex: "Syntaxe", "Ponctuation")</li>
                                    <li><strong>Pondération</strong> : Poids de l'erreur (défaut: 1.0, ajustable par paliers de 0.1)</li>
                                    <li><strong>Description/Rétroaction</strong> : Texte à afficher quand c'est le type d'erreur dominant</li>
                                </ul>
                            </li>
                            <li>Répéter pour chaque catégorie d'erreurs</li>
                            <li>Nombre de sous-critères : <strong>illimité</strong></li>
                        </ul>

                        <p><strong>Étape 3 : Personnaliser les pondérations (optionnel)</strong></p>
                        <p>Pour adapter à la politique de votre département :</p>
                        <ul>
                            <li>Ponctuation = 0.5 point (demi-point)</li>
                            <li>Erreurs graves de syntaxe = 2.0 points (doublement pénalisé)</li>
                            <li>Erreurs mineures = 0.5 point</li>
                            <li>Ou toute autre combinaison selon vos besoins</li>
                        </ul>

                        <p><strong>Comment utiliser lors de l'évaluation</strong></p>
                        <ol>
                            <li>Lors de la correction, noter le code de chaque erreur rencontrée</li>
                            <li>Dans le formulaire d'évaluation, saisir les codes séparés par des points-virgules :
                                <div style="background: #f5f5f5; padding: 10px; border-radius: 4px; margin: 10px 0; font-family: monospace;">
                                    3;3;1;4;4;6;1
                                </div>
                            </li>
                            <li>Saisir le nombre de mots de la rédaction</li>
                            <li>Le système calcule automatiquement :
                                <ul class="mt-5">
                                    <li>Le nombre total d'erreurs (7)</li>
                                    <li>La somme pondérée (ex: 6.0 si ponctuation=0.5)</li>
                                    <li>La note finale selon la formule</li>
                                    <li>Le sous-critère dominant (MODE statistique)</li>
                                    <li>La rétroaction personnalisée selon le type d'erreur dominant</li>
                                </ul>
                            </li>
                        </ol>

                        <div class="alerte alerte-attention">
                            <strong>Mode simple disponible :</strong> Si vous ne souhaitez pas catégoriser les erreurs, désactivez l'option «Activer la catégorisation des erreurs de français» dans <strong>Réglages → Pratique de notation</strong>. Vous pourrez alors simplement saisir le nombre total d'erreurs sans codes.
                        </div>

                        <p><strong>Avantages pédagogiques</strong></p>
                        <ul>
                            <li><strong>Rétroaction ciblée</strong> : L'étudiant sait exactement quel type d'erreur dominer</li>
                            <li><strong>Justice évaluative</strong> : Erreurs mineures pénalisent moins que graves</li>
                            <li><strong>Gain de temps</strong> : Codes rapides à noter pendant la correction</li>
                            <li><strong>Suivi longitudinal</strong> : Analyse des types d'erreurs au fil du temps</li>
                            <li><strong>Flexibilité disciplinaire</strong> : Adaptation aux normes de chaque département</li>
                        </ul>

                        <div class="alerte alerte-succes">
                            <strong>Astuce professionnelle :</strong> Imprimez une feuille de codes plastifiée pour référence rapide pendant la correction. Exemple : «1=Syntaxe, 2=Subord., 3=Ponct., 4=Ortho., 5=Hom., 6=GN, 7=PP, 8=Mots, 9=Rép., 10=Autre»
                        </div>
                    </div>

                    <!-- Carte: Checklist -->
                    <div class="carte" class="bg-bleu-tres-pale">
                        <h3 class="carte-titre-bleu">Checklist de configuration</h3>
                        <p>Avant de commencer à utiliser le système, assurez-vous d'avoir complété :</p>
                        <ul class="list-unstyled">
                            <li class="py-8">[ ] Informations du cours saisies</li>
                            <li class="py-8">[ ] Calendrier du trimestre généré</li>
                            <li class="py-8">[ ] Liste des étudiants importée/saisie</li>
                            <li class="py-8">[ ] Horaire défini (si disponible)</li>
                            <li class="py-8">[ ] Pratiques PAN paramétrées</li>
                            <li class="py-8">[ ] Grille de critères créée et définie comme référence</li>
                        </ul>
                        <p class="titre-mt15-fw-bold-bleu">→ Vous êtes prêt à commencer le suivi hebdomadaire !</p>
                    </div>
                </div>

                <!-- ===================================
                     SOUS-SECTION 3: FORMATION ET DÉMONSTRATION
                     =================================== -->
                <div id="aide-formation" class="sous-section">
                    <h2>Formation et démonstration</h2>
                    <p class="text-muted">Modes de fonctionnement pour explorer l'application sans risque</p>

                    <!-- Carte: Modes de fonctionnement -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Les trois modes de l'application</h3>
                        <p>L'application offre trois modes de fonctionnement pour différents contextes d'utilisation :</p>

                        <div class="alerte-success-bleu-pale">
                            <h4 class="text-success-mb10">Mode Normal</h4>
                            <p><strong>Utilisation en contexte réel</strong> - Données authentiques des étudiants</p>
                            <ul class="mt-8">
                                <li>Toutes les modifications sont sauvegardées dans localStorage</li>
                                <li>Données réelles du cours</li>
                                <li>Mode par défaut de l'application</li>
                            </ul>
                        </div>

                        <div class="alerte-warning-jaune">
                            <h4 class="text-warning-856-mb10">Mode Simulé</h4>
                            <p><strong>Exploration et formation</strong> - Données fictives pour expérimenter</p>
                            <ul class="mt-8">
                                <li>Données sauvegardées avec préfixe <code>simulation_*</code></li>
                                <li>Totalement isolé des données réelles</li>
                                <li>Parfait pour apprendre sans risque</li>
                                <li>Permet de tester scénarios pédagogiques</li>
                            </ul>
                        </div>

                        <div class="alerte-info-cyan">
                            <h4 style="color: #0c5460; margin-bottom: 10px;">Mode Anonymisé</h4>
                            <p><strong>Démonstration publique</strong> - Données réelles avec noms fictifs</p>
                            <ul class="mt-8">
                                <li>Noms et prénoms remplacés par des noms fictifs</li>
                                <li>Préfixe "AN." devant les numéros de groupe</li>
                                <li>Lecture seule (aucune modification possible)</li>
                                <li>Idéal pour présentations et captures d'écran</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-information">
                            <strong>Basculer entre les modes :</strong> Utilisez le sélecteur de mode en haut à droite de l'interface (⚙️ Mode: Normal/Simulé/Anonymisé)
                        </div>
                    </div>

                    <!-- Carte: Groupe fictif 9999 -->
                    <div class="carte" class="border-left-purple">
                        <h3 class="carte-titre-bleu">Le Groupe 9999 : Votre laboratoire pédagogique</h3>
                        <p><strong>Navigation :</strong> Réglages → Groupe → Section "Clonage de groupe"</p>

                        <p class="text-105-mt15"><strong>Qu'est-ce que le Groupe 9999 ?</strong></p>
                        <p>C'est un groupe fictif réservé pour :</p>
                        <ul>
                            <li>Formation des enseignants</li>
                            <li>Démonstrations pédagogiques</li>
                            <li>Tests de scénarios d'intervention</li>
                            <li>Exploration de l'application sans risque</li>
                        </ul>

                        <div class="carte-grise-my15">
                            <p class="m-0-fw600-bleu">
                                ✨ Avantage clé : Données réalistes sans impact sur vos vrais étudiants
                            </p>
                        </div>

                        <p class="titre-105-mt20"><strong>Deux méthodes de création :</strong></p>

                        <div class="alerte alerte-information">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px">Cloner depuis Groupe 1</h4>
                            <p><strong>Clone fidèle de vos données réelles</strong></p>
                            <p>Le système copie :</p>
                            <ul>
                                <li>Les étudiants avec noms fictifs cohérents</li>
                                <li>Toutes les évaluations existantes</li>
                                <li>L'historique des présences</li>
                                <li>Les indices A, C, P recalculés</li>
                            </ul>
                            <p class="mt-10"><strong>Utilisation :</strong> Parfait pour créer un jumeau numérique de votre groupe réel et explorer différentes stratégies d'intervention.</p>
                        </div>

                        <div class="alerte-warning-orange-fonce">
                            <h4 class="titre-orange-mb10">🎲 Générer groupe aléatoire</h4>
                            <p><strong>Création complète avec données réalistes</strong></p>

                            <p class="mt-12-fw-600">Configuration :</p>
                            <ul>
                                <li><strong>Nombre d'étudiants</strong> : Choisir entre 5 et 50 étudiants</li>
                                <li><strong>Noms générés</strong> : 85% québécois, 15% diversifiés (africains, latinos, arabes)</li>
                                <li><strong>Programmes variés</strong> : Assignation aléatoire parmi 15 programmes collégiaux</li>
                            </ul>

                            <p class="mt-12-fw-600">Le système génère automatiquement :</p>
                            <ul>
                                <li><strong>Étudiants fictifs</strong> : DA format 9999XXX (9999001, 9999002, etc.)</li>
                                <li><strong>Évaluations réalistes</strong> : 3 à 6 par étudiant
                                    <ul class="mt-5">
                                        <li>Notes suivant distribution normale (moyenne 75%, écart-type 10%)</li>
                                        <li>Critères SRPNF cohérents avec variation naturelle (±5%)</li>
                                        <li>Conversion automatique en niveaux IDME (I/D/M/E)</li>
                                    </ul>
                                </li>
                                <li><strong>Présences variées</strong> : Taux d'assiduité entre 75% et 95%</li>
                                <li><strong>Indices calculés</strong> : A, C, P recalculés automatiquement</li>
                            </ul>

                            <div class="alerte alerte-succes" class="mt-15">
                                <strong>Avantage pédagogique :</strong> Aucun prérequis nécessaire ! Génère un groupe complet même si vous n'avez pas encore créé de données réelles.
                            </div>

                            <p class="mt-12-fw-600">Étapes de génération :</p>
                            <ol class="lh-relaxed">
                                <li>Accéder à <strong>Réglages → Groupe</strong></li>
                                <li>Dans la section "Clonage de groupe", définir le nombre d'étudiants (5-50)</li>
                                <li>Cliquer sur <strong>🎲 Générer groupe aléatoire</strong></li>
                                <li>Patienter quelques secondes (calculs automatiques)</li>
                                <li>Confirmation : Le système affiche le nombre d'étudiants et d'évaluations créés</li>
                            </ol>

                            <p class="mt-12-fw-600">Réalisme statistique :</p>
                            <p>Les notes générées suivent une <strong>distribution normale de Gauss</strong> :</p>
                            <ul>
                                <li>Environ 68% des notes entre 65% et 85%</li>
                                <li>Environ 95% des notes entre 55% et 95%</li>
                                <li>Pas de valeurs aberrantes ou "fafelues"</li>
                                <li>Reflète la distribution naturelle des résultats étudiants</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-attention" class="mt-15">
                            <strong>⚠️ Important :</strong> Générer un nouveau groupe efface l'ancien Groupe 9999. Utilisez l'export/import si vous voulez conserver plusieurs scénarios.
                        </div>
                    </div>

                    <!-- Carte: Export/Import de groupes fictifs -->
                    <div class="carte" style="border-left: 4px solid #673ab7;">
                        <h3 class="carte-titre-bleu">📦 Partager des scénarios pédagogiques</h3>
                        <p><strong>Navigation :</strong> Réglages → Groupe → Section "Import / Export"</p>

                        <p class="text-105-mt15"><strong>Pourquoi exporter/importer ?</strong></p>
                        <ul>
                            <li><strong>Formation</strong> : Partager des cas types avec collègues</li>
                            <li><strong>Tutoriels</strong> : Créer des scénarios pédagogiques documentés</li>
                            <li><strong>Archivage</strong> : Conserver plusieurs versions du Groupe 9999</li>
                            <li><strong>Démonstrations</strong> : Préparer des contextes de présentation</li>
                        </ul>

                        <p class="titre-105-mt20"><strong> Exporter le Groupe 9999</strong></p>
                        <ol class="lh-relaxed">
                            <li>Cliquer sur <strong> Exporter le Groupe 9999</strong></li>
                            <li>Un fichier JSON est téléchargé : <code>groupe-fictif-9999_YYYY-MM-DD.json</code></li>
                            <li>Ce fichier contient :
                                <ul class="mt-5">
                                    <li>Tous les étudiants du Groupe 9999</li>
                                    <li>Toutes leurs évaluations</li>
                                    <li>Historiques de présences</li>
                                    <li>Indices A, C, P</li>
                                    <li>Mapping (si créé par clonage)</li>
                                </ul>
                            </li>
                        </ol>

                        <p class="titre-105-mt20"><strong> Importer un groupe fictif</strong></p>
                        <ol class="lh-relaxed">
                            <li>Cliquer sur <strong> Importer un groupe fictif</strong></li>
                            <li>Sélectionner un fichier <code>.json</code> exporté précédemment</li>
                            <li>Confirmer l'importation (remplacera le Groupe 9999 actuel)</li>
                            <li>Le système charge toutes les données et recalcule les indices</li>
                        </ol>

                        <div class="carte-gradient-bleu">
                            <p class="titre-11-bold-bleu-mb10">
                                💡 Workflow recommandé pour formation :
                            </p>
                            <ol class="lh-2">
                                <li>Générer un Groupe 9999 réaliste (ou cloner Groupe 1)</li>
                                <li>Exporter le groupe : crée un fichier de sauvegarde</li>
                                <li>Basculer en <strong>Mode Simulé</strong> (sélecteur en haut à droite)</li>
                                <li>Explorer librement : évaluer, modifier, tester interventions</li>
                                <li>Si nécessaire, ré-importer le fichier pour recommencer</li>
                            </ol>
                        </div>

                        <div class="alerte alerte-information" class="mt-15">
                            <strong>Format du fichier :</strong> JSON standard, lisible et modifiable. Inclut métadonnées (version Beta 84, date d'export, statistiques).
                        </div>
                    </div>

                    <!-- Carte: Cas d'usage pédagogiques -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">🎓 Cas d'usage pédagogiques</h3>

                        <div class="alerte-success-green">
                            <h4 class="text-success-dark-mb10">1. Formation des enseignants</h4>
                            <p><strong>Objectif :</strong> Apprendre à utiliser le système sans données réelles</p>
                            <ul>
                                <li>Générer un groupe aléatoire de 15-20 étudiants</li>
                                <li>Basculer en mode Simulé</li>
                                <li>Pratiquer la saisie de présences</li>
                                <li>Explorer les profils étudiants</li>
                                <li>Tester différentes interventions RàI</li>
                            </ul>
                        </div>

                        <div class="alerte-warning-orange-clair">
                            <h4 class="titre-orange-mb10">2. Test de scénarios d'intervention</h4>
                            <p><strong>Objectif :</strong> Planifier interventions avant d'agir sur vrais étudiants</p>
                            <ul>
                                <li>Cloner votre Groupe 1 réel → Groupe 9999</li>
                                <li>Identifier étudiants à risque dans le clone</li>
                                <li>Simuler différentes stratégies d'intervention</li>
                                <li>Observer impact sur indices A-C-P</li>
                                <li>Affiner approche avant intervention réelle</li>
                            </ul>
                        </div>

                        <div class="alerte-purple">
                            <h4 class="text-purple-mb10">3. Démonstrations et présentations</h4>
                            <p><strong>Objectif :</strong> Présenter le système sans compromettre confidentialité</p>
                            <ul>
                                <li>Créer Groupe 9999 avec profils variés (15-25 étudiants)</li>
                                <li>Basculer en mode Anonymisé pour présentation publique</li>
                                <li>Montrer tableaux de bord, profils, échelles de risque</li>
                                <li>Expliquer logique des indices A-C-P</li>
                                <li>Capturer écrans pour documentation sans risque RGPD</li>
                            </ul>
                        </div>

                        <div class="alerte-info-bleu-ciel">
                            <h4 style="color: #01579b; margin-bottom: 10px;">4. Partage de bonnes pratiques</h4>
                            <p><strong>Objectif :</strong> Créer bibliothèque de cas pédagogiques</p>
                            <ul>
                                <li>Créer scénarios types (ex: "Groupe avec 5 étudiants à risque élevé")</li>
                                <li>Exporter en JSON avec nom descriptif</li>
                                <li>Partager avec collègues ou communauté</li>
                                <li>Importer cas partagés pour apprentissage collaboratif</li>
                                <li>Documenter stratégies efficaces testées</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-succes" class="mt-15">
                            <strong>Principe directeur :</strong> Le Groupe 9999 est votre terrain de jeu pédagogique. Explorez, expérimentez, apprenez sans risque !
                        </div>
                    </div>

                    <!-- Carte: Validation configuration grille de référence -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">✅ Valider votre configuration : Tests de la grille de référence</h3>
                        <p><strong>Objectif :</strong> S'assurer que votre grille de critères fonctionne correctement avec le système de dépistage</p>

                        <p class="text-105-mt15"><strong>Pourquoi tester ?</strong></p>
                        <p>Le système de dépistage analyse vos rétroactions pour identifier automatiquement les forces et défis de chaque étudiant. Il est important de valider que :</p>
                        <ul>
                            <li>Votre grille est correctement configurée</li>
                            <li>Le système reconnaît vos critères dans les rétroactions</li>
                            <li>Les diagnostics sont pertinents pour votre discipline</li>
                        </ul>

                        <div class="alerte-success-green">
                            <h4 class="text-success-dark-mb10">Test 1 : Vérifier l'interface</h4>
                            <p><strong>Étapes :</strong></p>
                            <ol class="lh-relaxed">
                                <li>Aller dans <strong>Réglages → Pratique de notation</strong></li>
                                <li>Localiser la section «Grille de critères pour le dépistage»</li>
                                <li>Vérifier que le menu déroulant affiche vos grilles créées</li>
                                <li>Vérifier que le message d'aide s'affiche correctement</li>
                            </ol>
                            <p><strong>✅ Résultat attendu :</strong> Le select contient au minimum l'option «-- Sélectionner une grille --» et vos grilles personnalisées.</p>
                        </div>

                        <div class="alerte alerte-information">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px">Test 2 : Créer une grille pour votre discipline</h4>
                            <p><strong>Étapes :</strong></p>
                            <ol class="lh-relaxed">
                                <li>Aller dans <strong>Matériel → Critères d'évaluation</strong></li>
                                <li>Cliquer sur «➕ Créer une nouvelle grille»</li>
                                <li>Nommer votre grille (ex: «Grille SRPNF Littérature», «Rapport de labo - Chimie»)</li>
                                <li>Ajouter vos critères avec pondérations :
                                    <ul class="mt-5">
                                        <li><strong>Littérature :</strong> Structure (15%), Rigueur (20%), Plausibilité (10%), Nuance (25%), Français (30%)</li>
                                        <li><strong>Chimie :</strong> Hypothèse (20%), Protocole (30%), Analyse (30%), Conclusion (20%)</li>
                                        <li><strong>Anthropologie :</strong> Contextualisation (25%), Méthodologie (25%), Analyse comparative (30%), Réflexivité (20%)</li>
                                    </ul>
                                </li>
                                <li>Vérifier que la pondération totale = 100%</li>
                                <li>Sauvegarder la grille</li>
                            </ol>
                            <p><strong>✅ Résultat attendu :</strong> Grille créée avec succès, message de confirmation affiché.</p>
                        </div>

                        <div class="alerte-warning-orange-clair">
                            <h4 class="titre-orange-mb10">Test 3 : Définir comme grille de référence</h4>
                            <p><strong>Étapes :</strong></p>
                            <ol class="lh-relaxed">
                                <li>Retourner dans <strong>Réglages → Pratique de notation</strong></li>
                                <li>Section «Grille de critères pour le dépistage»</li>
                                <li>Sélectionner votre grille dans le menu déroulant</li>
                                <li>Cliquer sur «Sauvegarder les réglages»</li>
                                <li>Ouvrir la <strong>console du navigateur</strong> (Safari: Cmd+Alt+C, Chrome: Cmd+Alt+J)</li>
                                <li>Recharger la page (Cmd+R)</li>
                                <li>Observer les messages dans la console</li>
                            </ol>
                            <p><strong>✅ Messages attendus dans la console :</strong></p>
                            <pre style="background: #f5f5f5; padding: 10px; border-radius: 4px; font-size: 0.85rem;">✅ Module Interprétation initialisé
✅ 1 grille(s) chargée(s) dans le sélecteur de référence
✅ Grille de référence: "Grille SRPNF Littérature" (5 critères)</pre>
                        </div>

                        <div class="alerte-purple">
                            <h4 class="text-purple-mb10">Test 4 : Diagnostic forces/défis (avec données)</h4>
                            <p><strong>Prérequis :</strong> Avoir des étudiants avec au moins une évaluation</p>
                            <p><strong>Étapes :</strong></p>
                            <ol class="lh-relaxed">
                                <li>Aller dans <strong>Consultation → Profils individuels</strong></li>
                                <li>Ouvrir le profil d'un étudiant évalué</li>
                                <li>Section «Développement des habiletés et compétences»</li>
                                <li>Vérifier l'affichage des forces et défis</li>
                                <li>Ouvrir la console et observer les logs</li>
                            </ol>
                            <p><strong>✅ Résultat attendu :</strong></p>
                            <ul>
                                <li>Forces affichées avec pourcentages (ex: Nuance 82%, Rigueur 78%)</li>
                                <li>Défis affichés avec pourcentages (ex: Structure 65%, Plausibilité 68%)</li>
                                <li>Console : <code>✅ Grille de référence: "Votre grille" (X critères)</code></li>
                                <li>Console : <code>✅ Regex dynamique pour X critères: /(...)/gi</code></li>
                            </ul>
                        </div>

                        <div class="alerte-info-cyan">
                            <h4 style="color: #0c5460; margin-bottom: 10px;">Test 5 : Tester avec grille alternative (optionnel)</h4>
                            <p><strong>Objectif :</strong> Valider que le changement de grille fonctionne sans erreur</p>
                            <p><strong>Étapes :</strong></p>
                            <ol class="lh-relaxed">
                                <li>Créer une seconde grille pour une autre discipline (ex: Chimie si vous aviez créé Littérature)</li>
                                <li>Dans <strong>Réglages → Pratique de notation</strong>, basculer vers la nouvelle grille</li>
                                <li>Sauvegarder</li>
                                <li>Ouvrir un profil étudiant et observer la console</li>
                                <li>Vérifier que les nouveaux critères apparaissent</li>
                            </ol>
                            <p><strong>✅ Résultat attendu :</strong></p>
                            <ul>
                                <li>Console : Confirmation de la nouvelle grille (ex: «4 critères» au lieu de «5 critères»)</li>
                                <li>Si l'étudiant n'a pas d'évaluations avec ces critères : affichage «Aucune donnée disponible» (normal)</li>
                                <li><strong>Aucune erreur JavaScript</strong> dans la console</li>
                            </ul>
                        </div>

                        <div class="carte-gradient-bleu">
                            <p class="titre-11-bold-bleu-mb10">
                                🔍 Messages de la console à surveiller :
                            </p>
                            <p><strong>Messages normaux (OK) :</strong></p>
                            <pre style="background: rgba(255,255,255,0.3); padding: 8px; border-radius: 4px; font-size: 0.8rem;">✅ Module Interprétation initialisé
✅ Grille de référence: "Nom grille" (X critères)
✅ Regex dynamique pour X critères: /(CRITÈRE1|CRITÈRE2...)/gi
⚠️ Pas de grille de référence (si non configurée - normal au 1er démarrage)</pre>

                            <p class="mt-12"><strong>Erreurs interdites (PROBLÈME) :</strong></p>
                            <pre style="background: rgba(255,0,0,0.1); padding: 8px; border-radius: 4px; font-size: 0.8rem; color: #d32f2f;">❌ TypeError: Cannot read property 'criteres' of null
❌ ReferenceError: obtenirGrilleReferenceDepistage is not defined
❌ Grille de référence "xxx" introuvable</pre>
                            <p style="margin-top: 8px;"><strong>→ Si vous voyez ces erreurs</strong> : Vérifier que la grille existe bien et qu'elle est correctement sélectionnée dans les réglages.</p>
                        </div>

                        <div class="alerte alerte-succes" class="mt-15">
                            <strong>💡 Conseil :</strong> Gardez la console ouverte lors des premiers tests. Elle affiche des informations précieuses sur le fonctionnement du système et aide à diagnostiquer rapidement tout problème de configuration.
                        </div>
                    </div>
                </div>

                <!-- ===================================
                     SOUS-SECTION 4: UTILISATION HEBDOMADAIRE
                     =================================== -->
                <div id="aide-utilisation" class="sous-section">
                    <h2>Utilisation hebdomadaire</h2>
                    <p class="text-muted">Routine de saisie et flux de travail (5-15 min/semaine)</p>

                    <!-- Carte: Vue d'ensemble -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Flux de travail hebdomadaire</h3>
                        <p><strong>Temps estimé :</strong> 5-15 minutes par semaine</p>

                        <div class="carte-gradient-bleu">
                            <p class="titre-11-bold-bleu-mb15">Étapes recommandées :</p>
                            <ol class="lh-2">
                                <li><strong>Pendant/après le cours</strong> : Noter les absences/retards</li>
                                <li><strong>Fin de cours</strong> : Saisir les présences (2-5 min)</li>
                                <li><strong>Vérification automatique</strong> : Observer les changements d'indices</li>
                                <li><strong>Action si nécessaire</strong> : Intervenir si seuils critiques atteints</li>
                            </ol>
                        </div>
                    </div>

                    <!-- Carte: Saisir les présences -->
                    <div class="carte" class="border-left-succes">
                        <h3 class="carte-titre-bleu">1. Saisir les présences - MODULE SOURCE</h3>
                        <p><strong>Navigation :</strong> Présences → Saisie</p>
                        <p class="text-succes-bold">Ce module GÉNÈRE les indicesAssiduiteDetailles (source unique)</p>

                        <p><strong>Interface de saisie rapide :</strong></p>
                        <ul>
                            <li><strong>Format 2×2h</strong> : Saisir 2h par bloc (ou 1h/0h si partiel/absent)</li>
                            <li><strong>Retards</strong> : Décompter proportionnellement
                                <ul class="mt-5">
                                    <li>Ex: 20 min de retard sur 2h = 1.7h</li>
                                </ul>
                            </li>
                            <li><strong>Départs anticipés</strong> : Décompter de même</li>
                            <li><strong>Absences justifiées</strong> : Même traitement (le système ne distingue pas)</li>
                        </ul>

                        <p><strong>Cas particulier - Reprises :</strong></p>
                        <ul>
                            <li>Si un étudiant rattrape dans un autre groupe : additionner les heures</li>
                            <li>Ex: 2h cours officiel + 2h reprise = 4h dans la cellule</li>
                        </ul>

                        <div class="alerte alerte-succes">
                            <strong>Calcul automatique :</strong> Le système génère immédiatement les indices d'assiduité (A) qui alimentent tous les diagnostics.
                        </div>

                        <p><strong>Périodes configurables :</strong></p>
                        <ul>
                            <li>Assiduité sommative : sur tout le trimestre</li>
                            <li>Assiduité alternative : sur les 3, 7 ou 12 derniers artefacts</li>
                        </ul>
                    </div>

                    <!-- Carte: Évaluer les productions -->
                    <div class="carte" class="border-left-succes">
                        <h3 class="carte-titre-bleu">2. Évaluer les productions - MODULE SOURCE</h3>
                        <p><strong>Navigation :</strong> Portfolio → Évaluation</p>
                        <p class="text-succes-bold">Ce module GÉNÈRE les indicesCP (Complétion & Performance)</p>

                        <p><strong>Processus d'évaluation :</strong></p>
                        <ol class="lh-relaxed">
                            <li><strong>Lecture et annotation</strong> : Lire le travail de l'étudiant</li>
                            <li><strong>Attribution notes SRPNF</strong> : Noter selon les 5 critères (échelle 1-4)</li>
                            <li><strong>Comptage erreurs</strong> : Saisir le nombre d'erreurs linguistiques</li>
                            <li><strong>Confirmation mots</strong> : Vérifier le nombre de mots</li>
                            <li><strong>Diagnostic automatique</strong> : Observer forces/défis/parcours</li>
                            <li><strong>Rétroaction personnalisée</strong> : Basée sur les diagnostics</li>
                        </ol>

                        <p><strong>Temps estimé :</strong> 15-30 min par production (selon complexité)</p>

                        <div class="alerte alerte-succes">
                            <strong>Génération automatique :</strong>
                            <ul class="m-10-0-0-0">
                                <li>Indices C (Complétion) : % d'artefacts remis</li>
                                <li>Indices P (Performance) : Qualité moyenne des productions</li>
                                <li>Historique longitudinal : Évolution dans le temps</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Carte: Gérer les jetons -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">3. Gérer les jetons</h3>
                        <p><strong>Navigation :</strong> Portfolio → Gestion</p>

                        <p><strong>Types de jetons :</strong></p>
                        <ul>
                            <li><strong>Jeton de délai</strong> : Report d'échéance sans pénalité
                                <ul class="mt-5">
                                    <li>À utiliser pour gérer les imprévus</li>
                                    <li>Maintient l'exigence de complétion</li>
                                </ul>
                            </li>
                            <li><strong>Jeton de reprise</strong> : Possibilité de refaire un artefact
                                <ul class="mt-5">
                                    <li>Encourage l'amélioration continue</li>
                                    <li>Philosophie PAN : apprendre de ses erreurs</li>
                                </ul>
                            </li>
                        </ul>

                        <p><strong>Suivi automatique :</strong> Le système compte automatiquement les jetons utilisés (maximum 3-4 selon configuration).</p>

                        <div class="alerte alerte-attention">
                            <strong>Bonnes pratiques :</strong> Expliquer clairement le système de jetons aux étudiants dès le début du trimestre.
                        </div>
                    </div>

                    <!-- Carte: Gestion des travaux irrecevables et non-remis -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">4. Gestion des travaux irrecevables et non-remis</h3>
                        <p><strong>Navigation :</strong> Portfolio → Évaluation</p>

                        <p>Le système distingue clairement deux situations différentes qui affectent les calculs de manière distincte :</p>

                        <div class="alerte alerte-information">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px">Travail NON REMIS</h4>
                            <p><strong>Définition :</strong> L'étudiant n'a pas soumis de travail.</p>
                            <p><strong>Affichage :</strong> Badge «Non remis» dans le tableau des évaluations.</p>
                            <p><strong>Impact sur les calculs :</strong></p>
                            <ul class="m-10-0-0-0">
                                <li><strong>Complétion (C)</strong> : Compte dans le dénominateur mais pas dans le numérateur</li>
                                <li><strong>Performance (P)</strong> : Exclu du calcul de la moyenne</li>
                                <li><strong>Moyenne</strong> : Exclu du calcul</li>
                            </ul>
                            <p><strong>Exemple :</strong> Si un étudiant a 7 productions remises sur 9 attendues, son indice C = 78%</p>
                        </div>

                        <div class="alerte alerte-attention">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px">Travail NON RECEVABLE (Plagiat ou IA)</h4>
                            <p><strong>Définition :</strong> Le travail existe mais ne peut être évalué pour des raisons d'intégrité académique.</p>
                            <p><strong>Affichage :</strong></p>
                            <ul class="m-10-0-0-0">
                                <li>Badge rouge «Non recevable (Plagiat)» ou «Non recevable (IA)»</li>
                                <li>Niveau : 0</li>
                                <li>Note : -- (deux tirets)</li>
                            </ul>
                            <p><strong>Impact sur les calculs :</strong></p>
                            <ul class="m-10-0-0-0">
                                <li><strong>Complétion (C)</strong> : Exclu du total attendu (comme si la production n'existait pas)</li>
                                <li><strong>Performance (P)</strong> : Exclu du calcul de la moyenne</li>
                                <li><strong>Moyenne</strong> : Complètement exclu</li>
                            </ul>
                            <p><strong>Exemple :</strong> Si un étudiant a 7 productions recevables + 1 plagiat sur 9 attendues, son indice C = 7/8 = 88% (le plagiat n'est pas compté dans le total)</p>
                        </div>

                        <div class="alerte alerte-information">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px">Travail SOUPÇONNÉ (À vérifier)</h4>
                            <p><strong>Définition :</strong> Cas en investigation, pas encore confirmé.</p>
                            <p><strong>Affichage :</strong> Badge orange «À vérifier»</p>
                            <p><strong>Impact sur les calculs :</strong> Aucun - le travail est évalué normalement en attendant la décision finale.</p>
                            <p><strong>Usage :</strong> Permet de documenter un doute avant de prendre une décision définitive.</p>
                        </div>

                        <p><strong>Procédure d'application :</strong></p>
                        <ol class="lh-relaxed">
                            <li>Charger l'évaluation (existante ou nouvelle)</li>
                            <li>Dans le champ «Intégrité académique», sélectionner :
                                <ul class="mt-5">
                                    <li><strong>Recevable</strong> : Travail normal (par défaut)</li>
                                    <li><strong>Soupçon à vérifier</strong> : En investigation</li>
                                    <li><strong>Non recevable - Plagiat</strong> : Copie confirmée</li>
                                    <li><strong>Non recevable - IA non autorisée</strong> : Utilisation d'IA détectée</li>
                                </ul>
                            </li>
                            <li>Optionnel : Ajouter des notes (preuves, références, contexte)</li>
                            <li>Si non recevable : tous les critères passent automatiquement à «0 - Aucun»</li>
                            <li>Sauvegarder l'évaluation</li>
                        </ol>

                        <div class="alerte alerte-succes">
                            <strong>Jetons de reprise pour les non recevables :</strong> Un travail non recevable peut recevoir un jeton de reprise pour permettre à l'étudiant de soumettre un nouveau travail original. La nouvelle évaluation remplacera l'ancienne dans tous les calculs.
                        </div>

                        <p><strong>Exemple concret (Étudiant avec 9 artefacts) :</strong></p>
                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>Production</th>
                                    <th>Statut</th>
                                    <th class="text-center">Note</th>
                                    <th>Compte dans C ?</th>
                                    <th>Compte dans P ?</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Artefact 1</td>
                                    <td>Recevable</td>
                                    <td class="text-center">68.5%</td>
                                    <td>Oui (remis)</td>
                                    <td>Oui</td>
                                </tr>
                                <tr>
                                    <td>Artefact 2</td>
                                    <td>Non remis</td>
                                    <td class="text-center">-</td>
                                    <td>Non (manquant)</td>
                                    <td>Non</td>
                                </tr>
                                <tr>
                                    <td>Artefact 3</td>
                                    <td>Non remis</td>
                                    <td class="text-center">-</td>
                                    <td>Non (manquant)</td>
                                    <td>Non</td>
                                </tr>
                                <tr style="background-color: var(--conge-bg);">
                                    <td>Artefact 4</td>
                                    <td>Non recevable (Plagiat)</td>
                                    <td class="text-center">--</td>
                                    <td>N/A (exclu du total)</td>
                                    <td>Non</td>
                                </tr>
                                <tr>
                                    <td>Artefact 5</td>
                                    <td>Recevable</td>
                                    <td class="text-center">78%</td>
                                    <td>Oui (remis)</td>
                                    <td>Oui</td>
                                </tr>
                                <tr>
                                    <td>Artefacts 6-9</td>
                                    <td>Non remis</td>
                                    <td class="text-center">-</td>
                                    <td>Non (manquant)</td>
                                    <td>Non</td>
                                </tr>
                            </tbody>
                        </table>

                        <p><strong>Résultats des calculs :</strong></p>
                        <ul>
                            <li><strong>Évaluations comptées :</strong> 2 (Artefacts 1 et 5 seulement)</li>
                            <li><strong>Moyenne affichée :</strong> (68.5 + 78) / 2 = 73.3%</li>
                            <li><strong>Indice C :</strong> 2 remis / 8 attendus = 25% (Artefact 4 exclu du dénominateur)</li>
                            <li><strong>Indice P :</strong> 73.3%</li>
                        </ul>

                        <div class="alerte alerte-info">
                            <strong>Principe clé :</strong> Un travail non recevable n'est pas une note de 0%, c'est une absence d'évaluation. Le système fait comme si cette production n'avait jamais existé dans les attentes du cours.
                        </div>
                    </div>

                    <!-- Carte: Vérification hebdomadaire -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">5. Vérification hebdomadaire</h3>
                        <p><strong>Navigation :</strong> Tableau de bord → Aperçu</p>

                        <p><strong>Indices à surveiller :</strong></p>
                        <ul>
                            <li><strong>Assiduité (AE/AI)</strong> : Sommative et alternative (3 derniers cours)</li>
                            <li><strong>Complétion (C)</strong> : % d'artefacts remis</li>
                            <li><strong>Performance (P)</strong> : Qualité moyenne</li>
                            <li><strong>Risque (R)</strong> : Calcul automatique 1-(A×C×P)</li>
                        </ul>

                        <p><strong>Seuils d'alerte critiques :</strong></p>
                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>Indice</th>
                                    <th class="text-center">Seuil critique</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Assiduité</td>
                                    <td class="text-center">&lt; 70%</td>
                                    <td>Rencontre immédiate</td>
                                </tr>
                                <tr>
                                    <td>Complétion</td>
                                    <td class="text-center">&lt; 70%</td>
                                    <td>Investigation obstacles</td>
                                </tr>
                                <tr>
                                    <td>Performance</td>
                                    <td class="text-center">&lt; 60%</td>
                                    <td>Soutien pédagogique</td>
                                </tr>
                                <tr>
                                    <td>Risque</td>
                                    <td class="text-center">&gt; 50%</td>
                                    <td>Plan d'intervention personnalisé</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="alerte alerte-erreur">
                            <strong>Détérioration récente :</strong> Comparer les indices sommatifs et alternatifs pour détecter les changements récents, même chez des étudiants au bilan global acceptable.
                        </div>
                    </div>

                    <!-- Carte: Collaboration entre collègues -->
                    <div class="carte" class="border-left-purple">
                        <h3 class="carte-titre-bleu">6. Collaboration entre collègues</h3>
                        <p><strong>Partage de matériel pédagogique via Import/Export</strong></p>

                        <p>Le système permet de partager facilement du matériel pédagogique entre enseignant·es, favorisant la collaboration départementale et l'harmonisation des pratiques.</p>

                        <div class="carte-purple-my15">
                            <h4 class="text-purple-mb10">Matériel partageable (JSON)</h4>
                            <p class="mb-10-only">Chaque type de matériel peut être exporté et partagé :</p>
                            <ul class="lh-relaxed">
                                <li><strong>Grilles de critères</strong> (Matériel → Critères d'évaluation)
                                    <ul class="mt-5-text-95">
                                        <li>Export : <code>grilles-criteres-YYYY-MM-DD.json</code></li>
                                        <li>Contient : critères SRPNF, pondérations, descriptions</li>
                                    </ul>
                                </li>
                                <li><strong>Échelles de performance</strong> (Matériel → Niveaux de performance)
                                    <ul class="mt-5-text-95">
                                        <li>Export : <code>echelle-performance-YYYY-MM-DD.json</code></li>
                                        <li>Contient : niveaux IDME, seuils, descriptions</li>
                                    </ul>
                                </li>
                                <li><strong>Productions</strong> (Matériel → Productions)
                                    <ul class="mt-5-text-95">
                                        <li>Export : <code>productions-YYYY-MM-DD.json</code></li>
                                        <li>Contient : artefacts, pondérations, liens avec grilles</li>
                                    </ul>
                                </li>
                                <li><strong>Cartouches de rétroaction</strong> (Matériel → Rétroactions)
                                    <ul class="mt-5-text-95">
                                        <li>Export : <code>cartouches-retroaction-YYYY-MM-DD.json</code></li>
                                        <li>Contient : commentaires prédéfinis par critère et niveau</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>

                        <div class="carte-green-my15">
                            <h4 class="text-success-dark-mb10">🤝 Scénarios de collaboration</h4>

                            <p><strong>1. Harmonisation départementale</strong></p>
                            <ul class="mb-15-lh">
                                <li>Plusieurs enseignant·es du même cours collaborent</li>
                                <li>Création de grilles et échelles communes</li>
                                <li>Partage de cartouches standardisées</li>
                                <li>Cohérence interdépartementale</li>
                            </ul>

                            <p><strong>2. Mentorat et formation</strong></p>
                            <ul class="mb-15-lh">
                                <li>Enseignant·e expérimenté·e partage avec nouvel·le collègue</li>
                                <li>Exemples de bonnes pratiques</li>
                                <li>Modèles prêts à adapter</li>
                                <li>Réduction du temps de préparation initial</li>
                            </ul>

                            <p><strong>3. Réutilisation entre sessions</strong></p>
                            <ul class="mb-15-lh">
                                <li>Exporter son propre matériel en fin de trimestre</li>
                                <li>Réimporter et ajuster pour la session suivante</li>
                                <li>Amélioration continue du matériel</li>
                                <li>Conservation d'une base de départ éprouvée</li>
                            </ul>

                            <p><strong>4. Communautés de pratique</strong></p>
                            <ul class="lh-16">
                                <li>Partage de matériel entre collèges</li>
                                <li>Contribution à un répertoire commun</li>
                                <li>Mutualisation des efforts de création</li>
                            </ul>
                        </div>

                        <div class="carte-orange-my15">
                            <h4 class="titre-orange-mb10">📄 Import spécial : fichiers .txt Markdown</h4>
                            <p class="mb-10-only">Pour les <strong>cartouches de rétroaction</strong> uniquement, vous pouvez aussi :</p>
                            <ul class="lh-16">
                                <li>Rédiger vos commentaires dans un document texte (Word, Google Docs, etc.)</li>
                                <li>Sauvegarder au format .txt avec structure Markdown</li>
                                <li>Importer directement dans une cartouche en édition</li>
                                <li>Gain de temps : rédaction dans votre environnement préféré</li>
                            </ul>
                            <p class="text-09-mt10-deep-orange"><strong>Format requis :</strong> Les noms de critères dans le fichier doivent correspondre exactement à ceux de la grille (ex: STRUCTURE, RIGUEUR, PLAUSIBILITÉ, NUANCE).</p>
                        </div>

                        <div class="alerte alerte-info">
                            <strong>🔒 Protection de la vie privée :</strong> Les exports de matériel pédagogique ne contiennent JAMAIS de données confidentielles (noms d'étudiants, numéros DA, notes individuelles, présences). Seul le matériel pédagogique réutilisable est exporté.
                        </div>

                        <div class="carte-gradient-bleu-mt15">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px">Flux typique de partage</h4>
                            <ol class="lh-relaxed">
                                <li><strong>Enseignant·e A</strong> : Exporte son matériel (boutons d'export dans chaque section)</li>
                                <li><strong>Partage</strong> : Fichiers JSON envoyés par courriel, Drive, Teams, etc.</li>
                                <li><strong>Enseignant·e B</strong> : Importe les fichiers (boutons d'import dans chaque section)</li>
                                <li><strong>Adaptation</strong> : Ajuste le matériel selon ses besoins</li>
                                <li><strong>Utilisation</strong> : Matériel prêt pour le trimestre</li>
                            </ol>
                        </div>

                        <div class="alerte alerte-succes" style="margin-top: 20px;">
                            <h4 style="color: #2e7d32; margin-bottom: 10px;">📜 Licence Creative Commons BY-NC-SA 4.0</h4>
                            <p><strong>Tout le matériel exporté est automatiquement sous licence CC BY-NC-SA 4.0</strong></p>

                            <p style="margin: 10px 0;"><strong>Cette licence permet :</strong></p>
                            <ul style="margin-bottom: 15px;">
                                <li>✅ <strong>Partager</strong> : Copier et redistribuer le matériel</li>
                                <li>✅ <strong>Adapter</strong> : Modifier et transformer le matériel</li>
                                <li>✅ <strong>Utiliser</strong> : Pour votre enseignement</li>
                            </ul>

                            <p style="margin: 10px 0;"><strong>Avec ces conditions :</strong></p>
                            <ul style="margin-bottom: 15px;">
                                <li>📝 <strong>Attribution (BY)</strong> : Créditer l'auteur original</li>
                                <li>🚫 <strong>Non-commercial (NC)</strong> : Pas d'usage commercial</li>
                                <li>🔄 <strong>Partage dans les mêmes conditions (SA)</strong> : Partager sous la même licence</li>
                            </ul>

                            <div style="background: #f1f8e9; padding: 12px; border-radius: 6px; margin-top: 15px;">
                                <p style="margin: 0 0 10px 0; font-weight: bold; color: #558b2f;">🤝 Système automatique d'attribution des contributeurs</p>

                                <p style="margin: 10px 0;"><strong>Comment ça fonctionne :</strong></p>

                                <p style="margin: 5px 0; padding-left: 15px;"><strong>1. Import</strong> : Quand vous importez du matériel, vous voyez :</p>
                                <ul style="margin: 5px 0 10px 20px;">
                                    <li>Licence CC BY-NC-SA 4.0</li>
                                    <li>Auteur original du matériel</li>
                                    <li>Date de création initiale</li>
                                    <li>Liste des contributeurs (si applicable)</li>
                                </ul>

                                <p style="margin: 5px 0; padding-left: 15px;"><strong>2. Modification</strong> : Vous adaptez le matériel à vos besoins</p>
                                <ul style="margin: 5px 0 10px 20px;">
                                    <li>Ajout/suppression d'éléments</li>
                                    <li>Modification de pondérations</li>
                                    <li>Personnalisation selon votre contexte</li>
                                </ul>

                                <p style="margin: 5px 0; padding-left: 15px;"><strong>3. Export</strong> : Quand vous exportez du matériel modifié :</p>
                                <ul style="margin: 5px 0 10px 20px;">
                                    <li>Le système détecte qu'il s'agit de matériel importé</li>
                                    <li>Vous invite à entrer votre nom comme contributeur</li>
                                    <li><strong>L'auteur original est préservé</strong></li>
                                    <li>Votre nom est ajouté à la liste des contributeurs avec la date</li>
                                </ul>

                                <p style="margin: 5px 0; padding-left: 15px;"><strong>4. Partage</strong> : Le fichier exporté contient :</p>
                                <ul style="margin: 5px 0 0 20px;">
                                    <li>📋 Toutes les métadonnées de licence</li>
                                    <li>👤 Auteur original : <em>préservé</em></li>
                                    <li>👥 Contributeurs : <em>liste complète avec dates</em></li>
                                    <li>📅 Dates de création et modification</li>
                                </ul>
                            </div>

                            <p style="margin-top: 15px; font-style: italic; color: #555;">
                                <strong>Exemple :</strong> Grégoire Bédard crée un ensemble d'objectifs et l'exporte.
                                Marie Tremblay l'importe, l'adapte pour son cours, et l'exporte.
                                Le fichier crédite Grégoire comme auteur original ET Marie comme contributrice.
                                Si Jean Leblanc importe ensuite la version de Marie et y contribue,
                                le fichier créditera les trois personnes dans l'ordre chronologique.
                            </p>

                            <p style="margin-top: 15px; padding: 10px; background: #fff3e0; border-left: 4px solid #f57c00; border-radius: 4px;">
                                💡 <strong>Conseil :</strong> Même si vous n'avez fait que de petites modifications,
                                entrez votre nom lors de l'export. Cela permet de tracer l'évolution du matériel
                                et de reconnaître le travail de chacun·e dans la communauté pédagogique.
                            </p>
                        </div>
                    </div>

                    <!-- Carte: Interventions RàI avec présences facultatives -->
                    <div class="carte" class="border-left-primary">
                        <h3 class="carte-titre-bleu">6. Interventions RàI avec absences motivées</h3>
                        <p><strong>Navigation :</strong> Tableau de bord → Interventions</p>

                        <p>Le système permet de documenter des interventions de Réponse à l'Intervention (RàI) de niveau 2 ou 3 tout en justifiant les absences des étudiants non participants, sans pénaliser leur assiduité.</p>

                        <div class="carte-gradient-bleu">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px">📋 Contexte pédagogique</h4>
                            <p>Lorsque vous planifiez une intervention RàI ciblée :</p>
                            <ul class="lh-16">
                                <li>Certains étudiants ont besoin de soutien spécifique (niveau 2 ou 3)</li>
                                <li>Les autres étudiants reçoivent un congé ou travaillent de façon autonome</li>
                                <li>Les absents ne devraient PAS être pénalisés dans leur calcul d'assiduité</li>
                                <li><strong>Important :</strong> Les séances restent obligatoires, mais les absences sont justifiées</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-info">
                            <h4 class="titre-11-mb10">🎯 Objectif du système</h4>
                            <p class="mb-0-only">Permettre de <strong>documenter les présences</strong> aux interventions tout en <strong>marquant les absences comme motivées</strong>, afin qu'elles ne pénalisent pas l'indice d'assiduité.</p>
                        </div>

                        <div class="carte-gradient-bleu">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px">🔍 Distinction entre niveaux 2 et 3</h4>
                            <p class="mb-10"><strong>Le système traite différemment les interventions selon leur nature :</strong></p>

                            <div style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 12px;">
                                <p class="mb-5"><strong style="color: var(--orange-accent);">Niveau 2 (Préventif - en classe ou en période de disponibilité)</strong></p>
                                <ul class="lh-16">
                                    <li><strong>Contexte :</strong> Intervention en classe pendant le cours régulier</li>
                                    <li><strong>Participants</strong> (niveaux 2-3 qui ont besoin de soutien) :
                                        <ul class="mt-5-text-95">
                                            <li>2 heures enregistrées</li>
                                            <li>Compte au numérateur ET au dénominateur de l'assiduité</li>
                                        </ul>
                                    </li>
                                    <li><strong>Non-participants</strong> (niveau 1 qui n'ont pas besoin de soutien) :
                                        <ul class="mt-5-text-95">
                                            <li>0 heures enregistrées (absence motivée)</li>
                                            <li>Affichage en couleur ambre</li>
                                            <li>Ne compte NI au numérateur NI au dénominateur</li>
                                            <li><strong>Résultat :</strong> L'assiduité n'est pas pénalisée</li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>

                            <div style="background: white; padding: 12px; border-radius: 6px;">
                                <p class="mb-5"><strong style="color: var(--bleu-moyen);">Niveau 3 (Intensif - hors classe, au bureau)</strong></p>
                                <ul class="lh-16">
                                    <li><strong>Contexte :</strong> Rencontre individuelle ou petit groupe à votre bureau</li>
                                    <li><strong>Participants uniquement</strong> (étudiants convoqués) :
                                        <ul class="mt-5-text-95">
                                            <li>2 heures enregistrées</li>
                                            <li>Compte au numérateur ET au dénominateur de l'assiduité</li>
                                            <li><strong>Résultat :</strong> L'assiduité augmente (heures supplémentaires)</li>
                                        </ul>
                                    </li>
                                    <li><strong>Non-participants</strong> (autres étudiants) :
                                        <ul class="mt-5-text-95">
                                            <li>Aucune entrée créée (pas concernés par l'intervention)</li>
                                            <li>Aucun impact sur leur assiduité</li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="carte-orange-my15">
                            <h4 class="titre-orange-mb10">📝 Processus en 3 étapes</h4>

                            <p class="mb-5"><strong>ÉTAPE 1 : Planifier l'intervention</strong></p>
                            <ol class="lh-relaxed-mb15">
                                <li>Aller dans <strong>Tableau de bord → Interventions</strong></li>
                                <li>Cliquer sur « Planifier une intervention »</li>
                                <li>Remplir le formulaire :
                                    <ul class="mt-5-text-95">
                                        <li>Titre (ex: « Intervention Rigueur et Nuance »)</li>
                                        <li>Date et heure</li>
                                        <li>Type : Groupe (niveau 2) ou Individuel (niveau 3)</li>
                                        <li>Description optionnelle</li>
                                    </ul>
                                </li>
                                <li>Cliquer sur « Planifier l'intervention »</li>
                            </ol>

                            <p class="mb-5"><strong>ÉTAPE 2 : Marquer les présences pendant l'intervention</strong></p>
                            <ol class="lh-relaxed-mb15">
                                <li>Cliquer sur « Ouvrir » sur l'intervention créée</li>
                                <li>Cocher les étudiants présents à l'intervention</li>
                                <li>Ajouter des observations générales et notes individuelles (optionnel)</li>
                                <li>Cliquer sur « Marquer comme complétée »</li>
                            </ol>

                            <p class="mb-5"><strong>ÉTAPE 3 : Transfert automatique des présences</strong></p>
                            <p class="text-095-lh-16">Dès que vous marquez l'intervention comme complétée, le système transfère automatiquement les données vers le module de saisie des présences :</p>

                            <p class="mb-5-mt-10"><strong>Pour intervention niveau 2 (en classe) :</strong></p>
                            <ul class="lh-16">
                                <li><strong>Participants</strong> :
                                    <ul class="mt-5-text-95">
                                        <li>2 heures enregistrées</li>
                                        <li>Note : « Intervention RàI : [titre de l'intervention] »</li>
                                        <li>Compte au numérateur ET au dénominateur de l'assiduité</li>
                                    </ul>
                                </li>
                                <li><strong>Non-participants</strong> :
                                    <ul class="mt-5-text-95">
                                        <li>0 heures enregistrées (affichage en couleur ambre)</li>
                                        <li>Note : « Absence motivée RàI »</li>
                                        <li>Ne compte NI au numérateur NI au dénominateur (absence justifiée)</li>
                                    </ul>
                                </li>
                            </ul>

                            <p class="mb-5-mt-10"><strong>Pour intervention niveau 3 (hors classe) :</strong></p>
                            <ul class="lh-16">
                                <li><strong>Participants uniquement</strong> :
                                    <ul class="mt-5-text-95">
                                        <li>2 heures enregistrées</li>
                                        <li>Note : « Intervention RàI : [titre de l'intervention] »</li>
                                        <li>Compte au numérateur ET au dénominateur (augmente l'assiduité)</li>
                                    </ul>
                                </li>
                                <li><strong>Non-participants</strong> : Aucune entrée créée (pas concernés)</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-succes">
                            <h4 class="titre-11-mb10">✅ Résultat : Assiduité préservée</h4>
                            <p class="mb-10-only">Les étudiants qui n'ont pas participé à l'intervention (absence motivée) ne voient <strong>pas leur indice d'assiduité diminuer</strong>.</p>
                            <p class="text-095"><strong>Exemple :</strong> Un étudiant avec 85% d'assiduité qui a une absence motivée RàI conservera son 85%. Sans ce système, son assiduité chuterait automatiquement.</p>
                        </div>

                        <div class="carte-green-my15">
                            <h4 class="text-success-dark-mb10">🔍 Vérification du transfert</h4>
                            <p class="mb-10">Pour vérifier que le transfert a fonctionné correctement :</p>
                            <ol class="lh-relaxed">
                                <li>Aller dans <strong>Présences → Saisie</strong></li>
                                <li>Sélectionner la date de l'intervention</li>
                                <li>Vérifier dans le tableau :
                                    <ul class="mt-5-text-95">
                                        <li><strong>Pour niveau 2 (en classe) :</strong>
                                            <ul style="margin-top: 5px;">
                                                <li>Participants : 2h (vert) avec la note d'intervention</li>
                                                <li>Non-participants : 0h (ambre) avec « Absence motivée RàI »</li>
                                            </ul>
                                        </li>
                                        <li><strong>Pour niveau 3 (hors classe) :</strong>
                                            <ul style="margin-top: 5px;">
                                                <li>Participants : 2h (vert) avec la note d'intervention</li>
                                                <li>Non-participants : 2h par défaut (affichage normal, pas concernés)</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li>Pour niveau 2, consulter un profil étudiant non-participant pour confirmer que l'assiduité n'a pas baissé</li>
                            </ol>
                        </div>

                        <div class="alerte alerte-attention">
                            <h4 class="titre-11-mb10">⚠️ Important</h4>
                            <ul class="m-10-0-0-0-lh">
                                <li>Le transfert automatique se déclenche quand vous cliquez sur « Marquer comme complétée »</li>
                                <li>Si vous modifiez l'intervention (ajouter/retirer des étudiants), les changements se propagent automatiquement aux présences</li>
                                <li>Le tableau de présences se recharge automatiquement quand vous revenez sur la section</li>
                                <li>Si vous sauvegardez sans compléter, les données restent dans le module Interventions seulement</li>
                                <li>Le recalcul des indices d'assiduité se fait automatiquement après chaque modification</li>
                            </ul>
                        </div>

                        <p class="titre-mt15-fw-bold-bleu">Temps estimé : 5-10 minutes par intervention (planification + saisie présences)</p>
                    </div>

                    <!-- Carte: Temps estimés -->
                    <div class="carte" class="bg-bleu-tres-pale">
                        <h3 class="carte-titre-bleu">Temps estimés par activité</h3>
                        <table class="table-collapse">
                            <tr class="bg-white">
                                <td class="td-bleu-separee"><strong>Saisie présences</strong></td>
                                <td class="td-right-bleu">2-5 min</td>
                            </tr>
                            <tr class="bg-white">
                                <td class="td-bleu-separee"><strong>Évaluation production</strong></td>
                                <td class="td-right-bleu">15-30 min/production</td>
                            </tr>
                            <tr class="bg-white">
                                <td class="td-bleu-separee"><strong>Gestion jetons</strong></td>
                                <td class="td-right-bleu">1-2 min</td>
                            </tr>
                            <tr class="bg-white">
                                <td class="p-10"><strong>Vérification hebdomadaire</strong></td>
                                <td class="td-right">3-5 min</td>
                            </tr>
                        </table>
                        <p class="titre-mt15-fw-bold-bleu">Total hebdomadaire (hors évaluations) : 5-15 minutes</p>
                    </div>
                </div>

                <!-- ===================================
                     SOUS-SECTION 5: CONSULTATION
                     =================================== -->
                <div id="aide-consultation" class="sous-section">
                    <h2>Consultation et interprétation</h2>
                    <p class="text-muted">Prendre des décisions basées sur les données</p>

                    <!-- Carte: Tableau de bord Aperçu -->
                    <div class="carte" class="border-left-primary">
                        <h3 class="carte-titre-bleu">Tableau de bord → Aperçu - LECTEUR</h3>
                        <p><strong>Navigation :</strong> Tableau de bord → Aperçu</p>
                        <p class="text-primary-bold">Ce module LIT indicesAssiduiteDetailles et indicesCP</p>

                        <p><strong>Vue d'ensemble :</strong></p>
                        <ul>
                            <li>Liste complète de tous les étudiants</li>
                            <li>Indices A-C-P en un coup d'œil</li>
                            <li>Codes couleur pour identification rapide des risques</li>
                            <li>Filtres par niveau de risque (à venir)</li>
                        </ul>

                        <p><strong>Action :</strong> Identifier rapidement qui nécessite une intervention.</p>

                        <div class="alerte alerte-information">
                            <strong>Rechargement automatique :</strong> Les données se mettent à jour automatiquement après chaque saisie.
                        </div>
                    </div>

                    <!-- Carte: Profil étudiant -->
                    <div class="carte" class="border-left-primary">
                        <h3 class="carte-titre-bleu">Profil étudiant (détaillé) - LECTEUR</h3>
                        <p><strong>Navigation :</strong> Tableau de bord → Profil</p>
                        <p class="text-primary-bold">Ce module LIT toutes les sources de données</p>

                        <p><strong>Layout 2 colonnes :</strong></p>
                        <ul>
                            <li><strong>Sidebar gauche</strong> : Navigation Précédent/Suivant entre étudiants</li>
                            <li><strong>Zone principale</strong> : 3 sections structurées</li>
                        </ul>

                        <div class="carte-bleu-pale">
                            <h4 style="color: var(--bleu-principal)">Section 1 : Suivi de l'apprentissage</h4>
                            <ul class="mt-10">
                                <li><strong>Indices R (Risque)</strong> : Sommaire et alternatif (1-A×C×P)</li>
                                <li><strong>RàI (Niveau d'intervention)</strong> : 1, 2 ou 3</li>
                                <li><strong>Échelle de risque visuelle</strong> : Gradient 6 niveaux avec indicateur de position</li>
                                <li><strong>Recommandations</strong> : Selon niveau de risque</li>
                            </ul>
                        </div>

                        <div class="carte-bleu-pale-mt15">
                            <h4 style="color: var(--bleu-principal)">Section 2 : Développement des habiletés</h4>
                            <ul class="mt-10">
                                <li><strong>Performance SRPNF</strong> : Détail par critère (S, R, P, N, F)</li>
                                <li><strong>Forces identifiées</strong> : Critères ≥ 75%</li>
                                <li><strong>Défis identifiés</strong> : Critères &lt; 75%</li>
                                <li><strong>Diagnostic pattern</strong> : Stable / Défi spécifique / Blocage émergent / Blocage critique</li>
                            </ul>
                        </div>

                        <div class="carte-bleu-pale-mt15">
                            <h4 style="color: var(--bleu-principal)">Section 3 : Mobilisation</h4>
                            <ul class="mt-10">
                                <li><strong>Assiduité (A)</strong> : Sommative et alternative avec interprétation</li>
                                <li><strong>Complétion (C)</strong> : % d'artefacts remis</li>
                                <li><strong>Historique artefacts</strong> : Notes et évolution</li>
                                <li><strong>Toggles</strong> : Détails techniques et formules (masquables)</li>
                            </ul>
                        </div>

                        <p class="mt-15"><strong>Navigation intuitive :</strong> Boutons centrés Précédent/Suivant pour parcourir rapidement tous les profils.</p>
                    </div>

                    <!-- Carte: Interpréter les seuils -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Interpréter les diagnostics</h3>
                        <p><strong>Seuils harmonisés A/C/M :</strong> 70%, 80%, 85%</p>

                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>Niveau</th>
                                    <th class="text-center">Seuil</th>
                                    <th>Interprétation</th>
                                    <th>Action RàI</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong class="text-success-28">Favorable</strong></td>
                                    <td class="text-center">≥ 85%</td>
                                    <td>Excellent engagement et performance</td>
                                    <td>Niveau 1 - Enseignement universel</td>
                                </tr>
                                <tr>
                                    <td><strong class="text-info">Acceptable</strong></td>
                                    <td class="text-center">80-84%</td>
                                    <td>Bonne progression, surveiller</td>
                                    <td>Niveau 1 - Suivi régulier</td>
                                </tr>
                                <tr>
                                    <td><strong class="text-warning">Fragile</strong></td>
                                    <td class="text-center">70-79%</td>
                                    <td>Situation précaire, intervention ciblée</td>
                                    <td>Niveau 2 - Soutien ciblé</td>
                                </tr>
                                <tr>
                                    <td><strong class="text-danger-bs">Critique</strong></td>
                                    <td class="text-center">&lt; 70%</td>
                                    <td>Situation alarmante, action urgente</td>
                                    <td>Niveau 3 - Intervention intensive</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Carte: Options configurables RàI et SOLO -->
                    <div class="carte" style="background: #fff3e0; border-left: 4px solid var(--orange-accent);">
                        <h3 class="carte-titre-bleu">⚙️ Options configurables : RàI et SOLO</h3>

                        <p><strong>Le système offre deux fonctionnalités optionnelles</strong> que vous pouvez activer/désactiver selon votre pratique de notation :</p>

                        <div class="alerte alerte-info" style="margin-top: 15px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">Option 1 : Détection des patterns et RàI</h4>
                            <p><strong>Activation :</strong> Réglages → Pratique de notation → Cocher «Activer RàI et détection des patterns»</p>
                            <p><strong>Fonction :</strong> Identifie automatiquement 4 patterns d'apprentissage (Stable, Défi spécifique, Blocage émergent, Blocage critique) et recommande des niveaux d'intervention selon le cadre Réponse à l'Intervention (RàI).</p>
                            <p><strong>Utilisation recommandée :</strong></p>
                            <ul style="margin-top: 5px;">
                                <li><strong>✅ Activer si :</strong> Vous utilisez une grille de critères cohérente pour toutes les évaluations (ex: SRPNF, compétences disciplinaires)</li>
                                <li><strong>❌ Désactiver si :</strong> Évaluations hétérogènes sans grille commune, ou système d'intervention non applicable dans votre contexte</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-info" style="margin-top: 15px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">Option 2 : Observation de la structure SOLO</h4>
                            <p><strong>Activation :</strong> Réglages → Pratique de notation → Cocher «Afficher l'observation de la structure des résultats d'apprentissage (SOLO)»</p>
                            <p><strong>Fonction :</strong> Affiche une carte dans le profil étudiant (section Accompagnement) avec les forces et défis identifiés selon les 4 niveaux IDME (Insuffisant, Développement, Maîtrisé, Étendu) basés sur la taxonomie SOLO de Biggs & Collis.</p>
                            <p><strong>Utilisation recommandée :</strong></p>
                            <ul style="margin-top: 5px;">
                                <li><strong>✅ Activer si :</strong> Votre pratique s'appuie sur la taxonomie SOLO et l'échelle IDME (ex: PAN-Maîtrise)</li>
                                <li><strong>❌ Désactiver si :</strong> Vous utilisez une échelle chiffrée traditionnelle (0-100%) sans référence à la taxonomie SOLO</li>
                            </ul>
                        </div>

                        <div class="alerte alerte-warning" style="margin-top: 15px;">
                            <h4 style="color: #856404; margin-bottom: 10px;">⚠️ Distinction importante : Défis vs Défi spécifique</h4>
                            <p><strong>Ces deux concepts sont différents</strong> (quand les deux options sont activées) :</p>
                            <ul style="margin-top: 5px;">
                                <li><strong>Défis (I/D)</strong> : Niveaux IDME <strong>individuels par critère</strong> dans «Observation de la structure SOLO»
                                    <br><em style="font-size: 0.85rem; color: #856404;">→ Exemple : L'étudiant a un défi D (Développement 65-74%) en Structure mais une force M (Maîtrisé 75-84%) en Français</em>
                                </li>
                                <li><strong>Défi spécifique</strong> : <strong>Pattern global</strong> dans le tableau de bord (nécessite Performance ≥ 75% avec au moins un défi sur un critère)
                                    <br><em style="font-size: 0.85rem; color: #856404;">→ Exemple : Performance moyenne 78% mais Structure à 68% = Pattern «Défi spécifique» (bon globalement, faiblesse ciblée)</em>
                                </li>
                            </ul>
                        </div>

                        <p class="text-muted" style="margin-top: 15px; font-size: 0.9rem;"><em><strong>Note :</strong> Ces options ont été développées dans le cadre de la pratique PAN-Maîtrise de Grégoire Bédard mais peuvent être adaptées à d'autres pratiques pédagogiques. Elles ne sont pas obligatoires pour utiliser le système de monitorage A-C-P.</em></p>
                    </div>

                    <!-- Carte: Patterns d'apprentissage (optionnel) -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Patterns d'apprentissage (optionnel - si activé)</h3>
                        <p>Lorsque l'option RàI est activée, le système identifie automatiquement 4 patterns selon la performance moyenne et les défis identifiés :</p>

                        <div class="alerte-success-dark">
                            <h4 class="text-success-mb10">Progression stable</h4>
                            <p><strong>Critères :</strong> Performance ≥ 75% OU aucun défi détecté</p>
                            <p><strong>Intervention :</strong> RàI Niveau 1 - Enseignement universel avec suivi</p>
                            <p><strong>Action :</strong> Maintenir l'engagement, possibilités d'enrichissement</p>
                        </div>

                        <div class="alerte-warning-jaune">
                            <h4 class="text-warning-856-mb10">Défi spécifique</h4>
                            <p><strong>Critères :</strong> Performance ≥ 75% avec au moins un défi identifié sur un critère</p>
                            <p><strong>Intervention :</strong> RàI Niveau 2 - Soutien ciblé en petit groupe</p>
                            <p><strong>Action :</strong> Pratique guidée en s'appuyant sur les forces</p>
                        </div>

                        <div class="alerte-danger-rouge">
                            <h4 style="color: var(--risque-tres-eleve); margin-bottom: 10px;">Blocage émergent</h4>
                            <p><strong>Critères :</strong> Assiduité ≥ 75% mais Complétion ou Performance &lt; 65%</p>
                            <p><strong>Intervention :</strong> RàI Niveau 2 - Intervention intensive personnalisée</p>
                            <p><strong>Action :</strong> Remédiation ciblée sur le critère en difficulté</p>
                        </div>

                        <div class="alerte-danger-dark">
                            <h4 class="text-white-mb10">Blocage critique</h4>
                            <p><strong>Critères :</strong> Engagement insuffisant (E &lt; 30%, formule: E = (A×C×P)^(1/3))</p>
                            <p><strong>Intervention :</strong> RàI Niveau 3 - Intervention très intensive ou spécialisée</p>
                            <p><strong>Action :</strong> Rencontre individuelle + CAF + Dépistage + Services adaptés si nécessaire</p>
                        </div>
                    </div>

                    <!-- Carte: Guide détaillé du profil étudiant (Phase 2) -->
                    <div class="carte" class="bg-f0f8ff">
                        <h3 class="carte-titre-bleu">Guide détaillé : Profil étudiant</h3>

                        <p class="mb-20">Le profil étudiant est l'outil central de diagnostic et d'intervention. Il est organisé en 3 grandes sections, chacune fournissant des informations complémentaires pour une vision complète de la progression de l'étudiant.</p>

                        <div class="alerte alerte-info">
                            <strong>Accès :</strong> Tableau de bord → Profil OU Tableau de bord → Liste des individus → Cliquer sur un nom
                        </div>

                        <hr class="separateur-section">

                        <h4 class="titre-section-haut">Section 1 : Suivi de l'apprentissage</h4>

                        <p><strong>Cette section affiche :</strong></p>
                        <ul>
                            <li><strong>Indice de risque (R)</strong> avec valeur en gros caractères</li>
                            <li><strong>Échelle de risque visuelle</strong> : gradient à 6 niveaux avec indicateur de position</li>
                            <li><strong>Indice RàI</strong> : niveau d'intervention recommandé (Universel / Ciblé / Intensif)</li>
                            <li><strong>Recommandations d'intervention</strong> : actions concrètes adaptées au niveau</li>
                        </ul>

                        <div class="carte-encadree">
                            <h5 class="titre-sans-marge-haut">Comment interpréter l'échelle de risque ?</h5>
                            <p>L'échelle visuelle affiche 6 zones de couleur, du vert foncé (Excellent ≥85%) au rouge foncé (Échec probable &lt;40%). Un indicateur triangulaire pointe vers la position exacte de l'étudiant.</p>

                            <table class="tableau" class="text-09-mt10">
                                <thead>
                                    <tr>
                                        <th>Position</th>
                                        <th>Couleur</th>
                                        <th>Interprétation</th>
                                        <th>Action immédiate</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="fw-bold">Zone verte foncée</td>
                                        <td>85-100%</td>
                                        <td>Excellent, autonome</td>
                                        <td>Valoriser, offrir enrichissements</td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold">Zone verte claire</td>
                                        <td>70-84%</td>
                                        <td>Bon, progression normale</td>
                                        <td>Suivi régulier, RàI niveau 1</td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold">Zone jaune</td>
                                        <td>60-69%</td>
                                        <td>Fragile, surveiller</td>
                                        <td>Interventions ciblées préventives en classe, RàI niveau 2</td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold">Zone orange</td>
                                        <td>50-59%</td>
                                        <td>À risque sérieux</td>
                                        <td>Plan d'action, RàI niveau 2</td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold">Zone rouge claire</td>
                                        <td>40-49%</td>
                                        <td>Critique, échec probable</td>
                                        <td>RàI niveau 3, rencontre urgente</td>
                                    </tr>
                                    <tr>
                                        <td class="fw-bold">Zone rouge foncée</td>
                                        <td>&lt; 40%</td>
                                        <td>Échec très probable</td>
                                        <td>Référer aux services, CAF</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="alerte-warning-or">
                            <h5 class="text-warning-856-mt0">Astuce : Toggle «Détails techniques»</h5>
                            <p>Cliquez sur ce bouton pour afficher :</p>
                            <ul class="m-5-0-0-20">
                                <li>La formule exacte de calcul de R : (2×A + C + P) / 4</li>
                                <li>Les valeurs numériques des indices primaires A, C, P</li>
                                <li>Les seuils précis utilisés pour déterminer le niveau RàI</li>
                            </ul>
                            <p class="mt-10"><strong>Utilité :</strong> Expliquer le calcul à un étudiant ou justifier une intervention auprès d'un service.</p>
                        </div>

                        <hr class="separateur-section">

                        <h4 class="titre-section-haut">Section 2 : Développement des habiletés et compétences</h4>

                        <p><strong>Cette section affiche :</strong></p>
                        <ul>
                            <li><strong>Performance IDME</strong> : niveau moyen selon l'échelle (I/D/M/E)</li>
                            <li><strong>Scores par critère SRPNF</strong> : tableau détaillé avec badges colorés</li>
                            <li><strong>Diagnostic pédagogique</strong> : forces et défis identifiés automatiquement</li>
                        </ul>

                        <div class="carte-encadree">
                            <h5 class="titre-sans-marge-haut">Comment lire le tableau SRPNF ?</h5>
                            <p>Le tableau présente 5 lignes (un critère par ligne) avec 3 colonnes :</p>

                            <ol>
                                <li><strong>Critère</strong> : Nom du critère avec sa pondération (ex: Structure 15%)</li>
                                <li><strong>Score pondéré</strong> : Moyenne pondérée des évaluations (ex: 0.72)</li>
                                <li><strong>Niveau IDME</strong> : Badge coloré indiquant le niveau atteint
                                    <ul class="mt-5">
                                        <li>Badge rouge : Insuffisant (&lt; .64)</li>
                                        <li>Badge orange : Développement (.65-.74)</li>
                                        <li>Badge bleu : Maîtrisé (.75-.84)</li>
                                        <li>Badge vert : Étendu (≥ .85)</li>
                                    </ul>
                                </li>
                            </ol>

                            <p class="mt-15"><strong>Exemple d'interprétation :</strong></p>
                            <div class="carte-code-light-sm">
                                Structure (15%) : 0.68 [Badge orange : Développement]<br>
                                Rigueur (20%)   : 0.72 [Badge orange : Développement]<br>
                                Plausibilité (10%) : 0.80 [Badge bleu : Maîtrisé]<br>
                                Nuance (25%)    : 0.58 [Badge rouge : Insuffisant]<br>
                                Français (30%)  : 0.75 [Badge bleu : Maîtrisé]
                            </div>

                            <p class="mt-10"><strong>→ Diagnostic :</strong> Forces en Plausibilité et Français (maîtrisés). Défi majeur en Nuance (insuffisant). Structure et Rigueur en développement.</p>
                        </div>

                        <div class="carte-encadree">
                            <h5 class="titre-sans-marge-haut">Comment utiliser le diagnostic pédagogique ?</h5>

                            <p>Le diagnostic automatique identifie :</p>
                            <ul>
                                <li><strong>Forces</strong> : Critères ≥ .75 (Maîtrisé ou Étendu)</li>
                                <li><strong>Défis</strong> : Critères &lt; .75 (Insuffisant ou Développement)</li>
                            </ul>

                            <p class="mt-15"><strong>Stratégies d'intervention différenciée :</strong></p>

                            <table class="tableau" class="mt-10">
                                <thead>
                                    <tr>
                                        <th>Situation</th>
                                        <th>Approche recommandée</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Défi Insuffisant (&lt; .64)</strong></td>
                                        <td>
                                            • Remédiation intensive individuelle<br>
                                            • Enseignement explicite du critère<br>
                                            • Pratique guidée avec rétroaction immédiate<br>
                                            • Référer aux services d'aide si blocage persistant
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>Défi Développement (.65-.74)</strong></td>
                                        <td>
                                            • Pratique guidée additionnelle<br>
                                            • S'appuyer sur les forces pour consolider<br>
                                            • Exercices ciblés sur le critère<br>
                                            • Rétroaction formative fréquente
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>Force Maîtrisée (.75-.84)</strong></td>
                                        <td>
                                            • Valoriser et encourager<br>
                                            • Proposer transfert à d'autres contextes<br>
                                            • Tutorat par les pairs (si applicable)<br>
                                            • Maintenir avec pratique autonome
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>Force Étendue (≥ .85)</strong></td>
                                        <td>
                                            • Enrichissement et approfondissement<br>
                                            • Tâches complexes et créatives<br>
                                            • Mentorat des pairs<br>
                                            • Autonomie accrue
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="alerte-warning-or">
                            <h5 class="text-warning-856-mt0">Astuce : Toggle «Voir formules»</h5>
                            <p>Affiche les formules exactes de calcul pour chaque critère :</p>
                            <ul class="m-5-0-0-20">
                                <li>Score pondéré = (Score1 × Pond1 + Score2 × Pond2 + ...) / Σ Pondérations</li>
                                <li>Seuils IDME pour chaque niveau (I/D/M/E)</li>
                                <li>Nombre d'évaluations prises en compte dans la moyenne</li>
                            </ul>
                        </div>

                        <hr class="separateur-section">

                        <h4 class="titre-section-haut">Section 3 : Mobilisation (A-C-P)</h4>

                        <p><strong>Cette section affiche :</strong></p>
                        <ul>
                            <li><strong>Assiduité (A)</strong> : Taux de présence + interprétation (Acceptable/Confortable/Maîtrisé)</li>
                            <li><strong>Complétion (C)</strong> : Taux de remise des travaux + interprétation</li>
                            <li><strong>Liste des artefacts</strong> : Tableau détaillé de toutes les productions évaluées</li>
                        </ul>

                        <div class="carte-encadree">
                            <h5 class="titre-sans-marge-haut">Comment interpréter les indices A et C ?</h5>

                            <p>Les deux indices utilisent les mêmes seuils harmonisés :</p>

                            <table class="tableau" class="mt-10">
                                <thead>
                                    <tr>
                                        <th>Seuil</th>
                                        <th>Interprétation</th>
                                        <th>Badge</th>
                                        <th>Signification</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>≥ 85%</td>
                                        <td>Maîtrisé</td>
                                        <td class="text-success-bold">Vert</td>
                                        <td>Engagement excellent, aucune inquiétude</td>
                                    </tr>
                                    <tr>
                                        <td>80-84%</td>
                                        <td>Confortable</td>
                                        <td class="text-info-bold">Bleu</td>
                                        <td>Bon engagement, surveiller pour maintenir</td>
                                    </tr>
                                    <tr>
                                        <td>70-79%</td>
                                        <td>Acceptable</td>
                                        <td class="text-warning-bold">Jaune</td>
                                        <td>Engagement minimal, attention requise</td>
                                    </tr>
                                    <tr>
                                        <td>&lt; 70%</td>
                                        <td>Insuffisant</td>
                                        <td style="color: var(--risque-tres-eleve); font-weight: bold;">Rouge</td>
                                        <td>Mobilisation problématique, intervention</td>
                                    </tr>
                                </tbody>
                            </table>

                            <p class="mt-15"><strong>Exemples de profils :</strong></p>
                            <ul>
                                <li><strong>A=95%, C=90%</strong> → Étudiant très mobilisé, présent et productif</li>
                                <li><strong>A=85%, C=65%</strong> → Présent mais ne remet pas tous les travaux (procrastination ?)</li>
                                <li><strong>A=60%, C=85%</strong> → Absent souvent mais remet les travaux (maladie ? travail ?)</li>
                                <li><strong>A=55%, C=50%</strong> → Désengagement généralisé, intervention urgente</li>
                            </ul>
                        </div>

                        <div class="carte-encadree">
                            <h5 class="titre-sans-marge-haut">Comment lire le tableau des artefacts ?</h5>

                            <p>Le tableau affiche une ligne par production évaluée avec :</p>
                            <ol>
                                <li><strong>Production</strong> : Nom de l'évaluation (ex: Dissertation 1, Examen mi-session)</li>
                                <li><strong>Statut</strong> : Complété ✓ (vert) ou Non complété ✗ (rouge)</li>
                                <li><strong>Score</strong> : Pourcentage selon l'échelle IDME (ex: 78%)</li>
                                <li><strong>Niveau IDME</strong> : Badge coloré (I/D/M/E)</li>
                                <li><strong>Retenu PAN</strong> : ★ si l'artefact compte dans la note finale du portfolio</li>
                            </ol>

                            <div class="alerte alerte-info" class="mt-15">
                                <strong>😎 Astuce :</strong> Les artefacts marqués d'une étoile ★ sont ceux sélectionnés automatiquement par les règles PAN (les N meilleurs). Si un étudiant a 9 artefacts mais que seuls les 3 meilleurs comptent, seuls ces 3 auront l'étoile.
                            </div>

                            <p class="mt-15"><strong>Actions possibles depuis ce tableau :</strong></p>
                            <ul>
                                <li>Identifier rapidement les travaux non remis</li>
                                <li>Voir la progression de la performance dans le temps</li>
                                <li>Vérifier quels artefacts comptent réellement pour la note (★)</li>
                                <li>Détecter des patterns (ex: toujours faible en Structure)</li>
                            </ul>
                        </div>

                        <hr class="separateur-section">

                        <h4 class="titre-section-haut">Navigation entre étudiants</h4>

                        <div class="alerte-info-grise-my20">
                            <p>Les boutons <strong>« ← Précédent »</strong> et <strong>« Suivant → »</strong> en haut de la page permettent de naviguer rapidement entre les profils sans retourner à la liste.</p>

                            <p class="mt-10"><strong>Workflow recommandé pour révision complète :</strong></p>
                            <ol>
                                <li>Aller dans Tableau de bord → Liste des individus</li>
                                <li>Cliquer sur le premier étudiant</li>
                                <li>Consulter les 3 sections du profil</li>
                                <li>Prendre des notes d'intervention si nécessaire</li>
                                <li>Cliquer «Suivant →» pour passer au prochain</li>
                                <li>Répéter jusqu'au dernier étudiant</li>
                            </ol>

                            <div class="alerte alerte-succes" class="mt-15">
                                <strong>✓ Astuce :</strong> Les boutons sont désactivés visuellement (grisés) quand vous êtes au premier ou au dernier étudiant de la liste. Le curseur change pour indiquer qu'ils ne sont pas cliquables.
                            </div>
                        </div>

                        <hr class="separateur-section">

                        <h4 class="titre-section-haut">Checklist d'utilisation hebdomadaire</h4>

                        <div class="carte-bleu-border">
                            <p><strong>Pour un suivi efficace, consultez les profils régulièrement :</strong></p>

                            <table class="tableau" class="mt-15">
                                <thead>
                                    <tr>
                                        <th class="w-15">Fréquence</th>
                                        <th class="w-40">Action</th>
                                        <th class="w-45">Objectif</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Hebdomadaire</strong></td>
                                        <td>Consulter l'Aperçu du Tableau de bord</td>
                                        <td>Vue d'ensemble, identifier rapidement les étudiants en difficulté (zones orange/rouge)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Hebdomadaire</strong></td>
                                        <td>Profils des étudiants «À risque» ou «Critique»</td>
                                        <td>Planifier interventions ciblées, vérifier l'évolution</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Bi-hebdomadaire</strong></td>
                                        <td>Profils des étudiants «Fragile»</td>
                                        <td>Prévenir la dégradation, offrir soutien proactif</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Mi-session</strong></td>
                                        <td>Révision complète de tous les profils</td>
                                        <td>Bilan global, ajustements pédagogiques, rencontres individuelles</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Fin session</strong></td>
                                        <td>Analyse longitudinale des profils</td>
                                        <td>Évaluer l'efficacité des interventions, documenter les cas critiques</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Carte: Planifier interventions -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Planifier les interventions RàI</h3>

                        <div class="alerte alerte-information">
                            <h4 style="color: var(--bleu-principal)">Niveau 1 : Enseignement universel avec suivi</h4>
                            <p><strong>Pour qui :</strong> Étudiants en progression normale (≥ 70% en A-C-P)</p>
                            <p><strong>Modalités :</strong></p>
                            <ul>
                                <li>Enseignement explicite en grand groupe</li>
                                <li>Pratique guidée intégrée naturellement</li>
                                <li>Suivi hebdomadaire des indices</li>
                                <li>Rétroactions formatives régulières</li>
                            </ul>
                        </div>

                        <div class="alerte-warning-jaune">
                            <h4 class="text-warning-dark">Niveau 2 : Soutien ciblé en petit groupe</h4>
                            <p><strong>Pour qui :</strong> Étudiants identifiés comme à risque (un ou plusieurs indices &lt; 70%)</p>
                            <p><strong>Modalités :</strong></p>
                            <ul>
                                <li>Approche proactive de l'enseignant</li>
                                <li>Interventions en classe avec opportunités de reprise/rattrapage</li>
                                <li>Pratique guidée additionnelle sur critères en difficulté</li>
                                <li>Remédiation ciblée (ex: Structure, Rigueur, Nuance)</li>
                                <li>Utilisation des forces pour développer les défis</li>
                            </ul>
                            <p><strong>Exemples concrets :</strong></p>
                            <ul>
                                <li>"Remédiation en Structure | Exercice supplémentaire"</li>
                                <li>"Pratique guidée en Rigueur"</li>
                                <li>"Pratique autonome → Explorer jumelage"</li>
                            </ul>
                        </div>

                        <div class="alerte-danger-rouge">
                            <h4 class="text-danger-bs">Niveau 3 : Intervention très intensive ou spécialisée</h4>
                            <p><strong>Pour qui :</strong> Blocages critiques (performance ≤ 1.5 ou risque &gt; 70%)</p>
                            <p><strong>Modalités :</strong></p>
                            <ul>
                                <li>Hors classe, sur rendez-vous</li>
                                <li>Accompagnement plus approfondi selon besoins spécifiques</li>
                                <li>Collaboration avec services spécialisés :
                                    <ul>
                                        <li>CAF (Centre d'Aide en Français)</li>
                                        <li>Services adaptés</li>
                                        <li>Soutien psychosocial si nécessaire</li>
                                    </ul>
                                </li>
                                <li>Plan d'intervention personnalisé</li>
                                <li>Suivi rapproché hebdomadaire</li>
                            </ul>
                            <p><strong>Exemples concrets :</strong></p>
                            <ul>
                                <li>"Rencontre individuelle | CAF | Dépistage"</li>
                                <li>"Blocage critique | Intervention intensive | Services adaptés"</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- ===================================
                     SOUS-SECTION 6: RÉFÉRENCE RAPIDE
                     =================================== -->
                <div id="aide-reference" class="sous-section">
                    <h2>Référence rapide</h2>
                    <p class="text-muted">Aide-mémoire et seuils critiques</p>

                    <!-- Carte: Seuils critiques -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Seuils critiques d'alerte</h3>

                        <div class="carte-gradient-success-danger">
                            <h4 class="mb-15">ASSIDUITÉ (A)</h4>
                            <table class="tableau-blanc">
                                <tr>
                                    <td class="ligne-separee"><strong>&lt; 70%</strong></td>
                                    <td class="ligne-separee-danger">Critique - Intervention immédiate</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>70-79%</strong></td>
                                    <td class="ligne-separee-warning">Fragile - Surveiller de près</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>80-89%</strong></td>
                                    <td class="ligne-separee-info">Acceptable</td>
                                </tr>
                                <tr>
                                    <td class="p-10"><strong>≥ 90%</strong></td>
                                    <td class="ligne-separee-success">Favorable</td>
                                </tr>
                            </table>

                            <h4 class="my-20-mb-15">COMPLÉTION (C) - Mêmes seuils</h4>
                            <table class="tableau-blanc">
                                <tr>
                                    <td class="ligne-separee"><strong>&lt; 70%</strong></td>
                                    <td class="ligne-separee-danger">Critique - Investigation obstacles</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>70-79%</strong></td>
                                    <td class="ligne-separee-warning">Fragile - Système de rappels</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>80-89%</strong></td>
                                    <td class="ligne-separee-info">Acceptable</td>
                                </tr>
                                <tr>
                                    <td class="p-10"><strong>≥ 90%</strong></td>
                                    <td class="ligne-separee-success">Favorable</td>
                                </tr>
                            </table>

                            <h4 class="my-20-mb-15">PERFORMANCE (P) - Mêmes seuils</h4>
                            <table class="tableau-blanc">
                                <tr>
                                    <td class="ligne-separee"><strong>&lt; 70%</strong></td>
                                    <td class="ligne-separee-danger">Critique - Soutien pédagogique urgent</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>70-79%</strong></td>
                                    <td class="ligne-separee-warning">Fragile - Remédiation ciblée</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>80-89%</strong></td>
                                    <td class="ligne-separee-info">Acceptable</td>
                                </tr>
                                <tr>
                                    <td class="p-10"><strong>≥ 90%</strong></td>
                                    <td class="ligne-separee-success">Favorable</td>
                                </tr>
                            </table>

                            <h4 class="my-20-mb-15">RISQUE D'ÉCHEC (1-A×C×P)</h4>
                            <table class="tableau-blanc">
                                <tr>
                                    <td class="ligne-separee"><strong>&gt; 70%</strong></td>
                                    <td class="ligne-separee-danger">Critique</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>50-70%</strong></td>
                                    <td class="ligne-separee-danger">Très élevé</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>40-50%</strong></td>
                                    <td class="td-orange">Élevé</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>30-40%</strong></td>
                                    <td class="ligne-separee-warning">Modéré</td>
                                </tr>
                                <tr>
                                    <td class="ligne-separee"><strong>20-30%</strong></td>
                                    <td class="ligne-separee-info">Faible</td>
                                </tr>
                                <tr>
                                    <td class="p-10"><strong>≤ 20%</strong></td>
                                    <td class="ligne-separee-success">Minimal</td>
                                </tr>
                            </table>
                        </div>

                        <div class="alerte alerte-erreur">
                            <strong>Règle d'or :</strong> Un étudiant avec un indice &lt; 70% nécessite UNE action. Un étudiant avec un risque &gt; 50% nécessite un PLAN D'INTERVENTION.
                        </div>
                    </div>

                    <!-- Carte: Architecture Single Source of Truth -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Architecture Single Source of Truth (rappel)</h3>
                        <p><strong>Les modules sources ne doivent JAMAIS être contournés.</strong></p>

                        <table class="tableau">
                            <thead>
                                <tr>
                                    <th>Module SOURCE</th>
                                    <th>Génère/Stocke</th>
                                    <th>Module LECTEUR</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>trimestre.js</strong></td>
                                    <td><code>calendrierComplet</code></td>
                                    <td>calendrier-vue.js</td>
                                </tr>
                                <tr>
                                    <td><strong>saisie-presences.js</strong></td>
                                    <td><code>indicesAssiduiteDetailles</code></td>
                                    <td>tableau-bord-apercu.js<br>profil-etudiant.js</td>
                                </tr>
                                <tr>
                                    <td><strong>portfolio.js</strong></td>
                                    <td><code>indicesCP</code></td>
                                    <td>tableau-bord-apercu.js<br>profil-etudiant.js</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="alerte alerte-information">
                            <strong>Règle d'or :</strong> Les modules ne se parlent JAMAIS directement. Toute communication passe exclusivement par localStorage.
                        </div>
                    </div>

                    <!-- Carte: Résolution de problèmes -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Résolution de problèmes courants</h3>

                        <div class="alerte-info-grise">
                            <h4 style="color: var(--bleu-principal)">Calendrier vide après rechargement</h4>
                            <p><strong>Cause :</strong> calendrierComplet pas généré ou corrompu</p>
                            <p><strong>Solution :</strong> Aller dans Réglages → Trimestre → Régénérer le calendrier</p>
                        </div>

                        <div class="alerte-info-grise">
                            <h4 style="color: var(--bleu-principal)">Indices A non calculés</h4>
                            <p><strong>Cause :</strong> Présences pas saisies ou module non initialisé</p>
                            <p><strong>Solution :</strong>
                                <ol class="m-5-0-0-20">
                                    <li>Vérifier ordre de chargement dans index 71</li>
                                    <li>Aller dans Présences → Saisie</li>
                                    <li>Saisir au moins une présence pour initialiser</li>
                                </ol>
                            </p>
                        </div>

                        <div class="alerte-info-grise">
                            <h4 style="color: var(--bleu-principal)">« Invalid Date » dans le calendrier</h4>
                            <p><strong>Cause :</strong> Conflit de noms de fonctions entre modules</p>
                            <p><strong>Solution :</strong> Vérifier que les fonctions sont préfixées (ex: formaterDateTrimestreYMD au lieu de formaterDate)</p>
                        </div>

                        <div class="alerte-info-grise">
                            <h4 style="color: var(--bleu-principal)">Données perdues</h4>
                            <p><strong>Cause :</strong> localStorage effacé (navigation privée, nettoyage navigateur)</p>
                            <p><strong>Solution :</strong> Utiliser Import/Export régulièrement pour backup JSON</p>
                            <p><strong>Prévention :</strong> Activer Export automatique hebdomadaire (à venir)</p>
                        </div>
                    </div>

                    <!-- Carte: Debug localStorage -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Debug - Console navigateur</h3>
                        <p>Commandes à exécuter dans la console du navigateur (F12) :</p>

                        <div class="carte-code-dark">
                            <p class="text-secondary">// Vérifier calendrierComplet</p>
                            <p style="color: #66d9ef;">console</p><span style="color: #f8f8f2;">.log(</span><span style="color: #e6db74;">'calendrierComplet existe?'</span><span style="color: #f8f8f2;">, </span><span style="color: #f92672;">!!</span><span style="color: #66d9ef;">localStorage</span><span style="color: #f8f8f2;">.getItem(</span><span style="color: #e6db74;">'calendrierComplet'</span><span style="color: #f8f8f2;">));</span>
                            <br><br>
                            <p class="text-secondary">// Voir contenu calendrier</p>
                            <p><span style="color: #66d9ef;">JSON</span><span style="color: #f8f8f2;">.parse(</span><span style="color: #66d9ef;">localStorage</span><span style="color: #f8f8f2;">.getItem(</span><span style="color: #e6db74;">'calendrierComplet'</span><span style="color: #f8f8f2;">));</span></p>
                            <br>
                            <p class="text-secondary">// Vérifier indices A</p>
                            <p><span style="color: #66d9ef;">console</span><span style="color: #f8f8f2;">.log(</span><span style="color: #e6db74;">'Indices A existent?'</span><span style="color: #f8f8f2;">, </span><span style="color: #f92672;">!!</span><span style="color: #66d9ef;">localStorage</span><span style="color: #f8f8f2;">.getItem(</span><span style="color: #e6db74;">'indicesAssiduiteDetailles'</span><span style="color: #f8f8f2;">));</span></p>
                            <br>
                            <p class="text-secondary">// Vérifier APIs disponibles</p>
                            <p><span style="color: #66d9ef;">console</span><span style="color: #f8f8f2;">.log(</span><span style="color: #e6db74;">'API calendrier:'</span><span style="color: #f8f8f2;">, </span><span style="color: #f92672;">typeof</span><span style="color: #f8f8f2;"> obtenirCalendrierComplet);</span></p>
                        </div>
                    </div>

                    <!-- Carte: FAQ (Phase 2) -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">Questions fréquentes (FAQ)</h3>

                        <div class="my-20">
                            <h4 class="titre-bleu-mb8">Questions sur le monitorage</h4>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Quelle est la différence entre Assiduité (A), Complétion (C) et Performance (P) ?</summary>
                                <div class="mt-10-pl-10">
                                    <ul>
                                        <li><strong>Assiduité (A) :</strong> Mesure la présence physique et cognitive en classe. Un étudiant assidu est engagé dans son apprentissage.</li>
                                        <li><strong>Complétion (C) :</strong> Mesure la remise des travaux demandés. Un taux élevé indique une bonne mobilisation.</li>
                                        <li><strong>Performance (P) :</strong> Mesure la qualité des productions selon vos critères d'évaluation (ex: SRPNF dans la pratique PAN-Maîtrise). Reflète le niveau de maîtrise.</li>
                                    </ul>
                                    <p class="mt-10"><strong>Exemple concret :</strong> Un étudiant peut avoir A=95% (toujours présent), C=80% (remet la plupart des travaux) et P=65% (qualité variable). L'indice R combinera ces trois dimensions pour prédire le risque.</p>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Comment interpréter l'indice de risque R ?</summary>
                                <div class="mt-10-pl-10">
                                    <p>L'indice R prédit le risque d'échec selon 6 niveaux :</p>
                                    <table class="tableau" class="mt-10">
                                        <thead>
                                            <tr>
                                                <th>Indice R</th>
                                                <th>Niveau</th>
                                                <th>Action recommandée</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>≥ 85%</td>
                                                <td class="text-success-bold">Excellent</td>
                                                <td>Valoriser et encourager l'autonomie</td>
                                            </tr>
                                            <tr>
                                                <td>70-84%</td>
                                                <td class="text-success-green">Bon</td>
                                                <td>Maintenir l'engagement, offrir défis</td>
                                            </tr>
                                            <tr>
                                                <td>60-69%</td>
                                                <td class="text-warning-bold">Fragile</td>
                                                <td>Surveiller de près, Interventions ciblées préventives en classe</td>
                                            </tr>
                                            <tr>
                                                <td>50-59%</td>
                                                <td class="text-orange-bold">À risque</td>
                                                <td>Rencontre individuelle, plan d'action</td>
                                            </tr>
                                            <tr>
                                                <td>40-49%</td>
                                                <td class="text-danger-red-bold">Critique</td>
                                                <td>Intervention intensive, RàI niveau 2</td>
                                            </tr>
                                            <tr>
                                                <td>&lt; 40%</td>
                                                <td style="color: #d32f2f; font-weight: bold;">Échec probable</td>
                                                <td>RàI niveau 3, référer aux services</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Qu'est-ce que la Réponse à l'Intervention (RàI) ?</summary>
                                <div class="mt-10-pl-10">
                                    <p>La RàI est un système d'intervention à trois niveaux :</p>
                                    <ul>
                                        <li><strong>Niveau 1 - Universel :</strong> Enseignement de qualité pour tous (80% des étudiants)</li>
                                        <li><strong>Niveau 2 - Préventif :</strong> Interventions de groupe pour étudiants fragiles ou à risque (15% des étudiants)</li>
                                        <li><strong>Niveau 3 - Intensif :</strong> Soutien individualisé pour étudiants en situation critique (&lt; 5% des étudiants)</li>
                                    </ul>
                                    <p class="mt-10"><strong>Dans l'application :</strong> Si l'option RàI est activée (Réglages → Pratique de notation), le profil étudiant suggère automatiquement le niveau RàI selon l'indice R et fournit des recommandations d'intervention adaptées.</p>
                                </div>
                            </details>
                        </div>

                        <div class="my-20">
                            <h4 class="titre-bleu-mb8">Questions techniques</h4>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Mes données sont-elles sauvegardées automatiquement ?</summary>
                                <div class="mt-10-pl-10">
                                    <p><strong>Oui,</strong> toutes les modifications sont sauvegardées automatiquement dans le localStorage du navigateur.</p>
                                    <div class="alerte alerte-attention" class="mt-10">
                                        <strong>⚠️ Important :</strong> Le localStorage peut être effacé si vous :
                                        <ul class="m-10-0-0-20">
                                            <li>Utilisez le mode navigation privée</li>
                                            <li>Nettoyez l'historique/les données du navigateur</li>
                                            <li>Changez de navigateur ou d'appareil</li>
                                        </ul>
                                    </div>
                                    <p class="mt-10"><strong>Recommandation :</strong> Exportez vos données régulièrement via Réglages → Import/Export pour créer des sauvegardes JSON.</p>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Puis-je utiliser l'application sur plusieurs appareils ?</summary>
                                <div class="mt-10-pl-10">
                                    <p><strong>Oui,</strong> mais avec transfert manuel :</p>
                                    <ol>
                                        <li>Sur l'appareil source : Réglages → Import/Export → Exporter</li>
                                        <li>Transférer le fichier JSON (email, iCloud, USB, etc.)</li>
                                        <li>Sur l'appareil cible : Réglages → Import/Export → Importer</li>
                                    </ol>
                                    <p class="mt-10"><strong>Note :</strong> Il n'y a pas de synchronisation automatique pour garantir la protection des données et le fonctionnement hors-ligne.</p>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">L'application fonctionne-t-elle sans connexion Internet ?</summary>
                                <div class="mt-10-pl-10">
                                    <p><strong>Oui, totalement.</strong> L'application est 100% autonome et ne nécessite aucune connexion Internet pour fonctionner.</p>
                                    <p class="mt-10">Vous pouvez l'utiliser :</p>
                                    <ul>
                                        <li>En mode hors-ligne complet</li>
                                        <li>Sur un appareil sans accès réseau</li>
                                        <li>En ouvrant simplement le fichier HTML local</li>
                                    </ul>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Pourquoi le calendrier affiche «Invalid Date» ?</summary>
                                <div class="mt-10-pl-10">
                                    <p><strong>Cause probable :</strong> Le calendrier n'a pas été généré ou a été corrompu.</p>
                                    <p class="mt-10"><strong>Solution :</strong></p>
                                    <ol>
                                        <li>Aller dans Réglages → Trimestre</li>
                                        <li>Remplir les champs (date début, date fin, nb semaines)</li>
                                        <li>Cliquer sur «Générer le calendrier complet»</li>
                                        <li>Vérifier que le message de succès apparaît</li>
                                        <li>Retourner dans Présences → Vue calendaire pour confirmer</li>
                                    </ol>
                                </div>
                            </details>
                        </div>

                        <div class="my-20">
                            <h4 class="titre-bleu-mb8">Questions sur l'utilisation</h4>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Dans quel ordre dois-je configurer l'application ?</summary>
                                <div class="mt-10-pl-10">
                                    <p><strong>Ordre recommandé :</strong></p>
                                    <ol>
                                        <li><strong>Réglages → Cours :</strong> Informations de base (code, titre, programme)</li>
                                        <li><strong>Réglages → Trimestre :</strong> Dates et génération du calendrier complet</li>
                                        <li><strong>Réglages → Horaire :</strong> Définir les plages horaires des séances</li>
                                        <li><strong>Réglages → Groupe :</strong> Importer ou créer la liste des étudiants</li>
                                        <li><strong>Matériel → Grilles de critères :</strong> Créer vos grilles SRPNF</li>
                                        <li><strong>Matériel → Échelle de performance :</strong> Personnaliser l'échelle IDME si nécessaire</li>
                                        <li><strong>Matériel → Productions :</strong> Définir toutes les évaluations du cours</li>
                                        <li><strong>Matériel → Rétroactions :</strong> Créer vos cartouches de rétroaction</li>
                                    </ol>
                                    <div class="alerte alerte-succes" class="mt-10">
                                        <strong>✓ Astuce :</strong> Une fois configuré, vous pouvez exporter tout le matériel et le réutiliser pour les prochaines sessions !
                                    </div>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Comment gérer un étudiant qui abandonne en cours de session ?</summary>
                                <div class="mt-10-pl-10">
                                    <ol>
                                        <li>Aller dans Réglages → Groupe</li>
                                        <li>Trouver l'étudiant dans la liste</li>
                                        <li>Changer son statut de «Actif» à «Inactif» ou «Abandon»</li>
                                        <li>L'étudiant disparaîtra des aperçus actifs mais ses données seront conservées</li>
                                    </ol>
                                    <p class="mt-10"><strong>Note :</strong> Vous pouvez réactiver l'étudiant en changeant à nouveau son statut si nécessaire.</p>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Que faire si la pondération totale n'est pas 100% ?</summary>
                                <div class="mt-10-pl-10">
                                    <p>L'application affiche la pondération totale dans Matériel → Productions. Si elle n'est pas égale à 100% :</p>
                                    <ol>
                                        <li>Vérifier que toutes les évaluations sont créées</li>
                                        <li>Ajuster les pondérations pour atteindre exactement 100%</li>
                                        <li>Les artefacts d'un portfolio ne comptent PAS dans le total (seul le Portfolio conteneur compte)</li>
                                    </ol>
                                    <div class="alerte alerte-attention" class="mt-10">
                                        <strong>⚠️ Important :</strong> Le calcul de la note finale nécessite que la pondération totale soit exactement 100%.
                                    </div>
                                </div>
                            </details>

                            <details class="carte-grise-info">
                                <summary class="titre-cliquable">Puis-je modifier les seuils des indices A, C, M ?</summary>
                                <div class="mt-10-pl-10">
                                    <p><strong>Actuellement :</strong> Les seuils sont harmonisés à 70% (Acceptable), 80% (Confortable), 85% (Maîtrisé) et ne sont pas modifiables dans l'interface.</p>
                                    <p class="mt-10"><strong>Pourquoi ?</strong> Ces seuils sont basés sur la recherche pédagogique et garantissent la cohérence des prédictions de risque.</p>
                                    <p class="mt-10"><strong>Personnalisation future :</strong> Une version avancée pourrait permettre de personnaliser ces seuils dans Réglages → Pratique de notation.</p>
                                </div>
                            </details>
                        </div>
                    </div>

                    <!-- Carte: Glossaire (Phase 2) -->
                    <div class="carte" class="bg-fff9e6">
                        <h3 class="carte-titre-bleu">Glossaire des termes</h3>

                        <div class="my-15">
                            <h4 style="color: var(--bleu-principal); border-bottom: 2px solid var(--bleu-pale); padding-bottom: 5px; margin-bottom: 15px;">A</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Artefact</dt>
                                <dd class="ml-20-mb-10">Production évaluée d'un étudiant. Peut être une dissertation, un examen, une présentation, etc. Dans un portfolio, plusieurs artefacts sont regroupés et seuls les N meilleurs sont retenus pour la note finale selon les règles PAN.</dd>

                                <dt class="titre-section-aide">Assiduité (A)</dt>
                                <dd class="ml-20-mb-10">Indice primaire mesurant la présence en classe. Calculé automatiquement à partir des présences saisies. Formule : (nombre de présences / nombre de séances) × 100. Reflète l'engagement cognitif de l'étudiant.</dd>
                            </dl>

                            <h4 class="titre-section-principal">C</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Calendrier complet</dt>
                                <dd class="ml-20-mb-10">Structure de données générée par le module trimestre.js. Contient 124 jours (début session jusqu'à fin + 10 jours). Chaque jour indique s'il y a cours, congé, reprise, etc. Source unique pour toutes les dates de l'application.</dd>

                                <dt class="titre-section-aide">Cartouche de rétroaction</dt>
                                <dd class="ml-20-mb-10">Matrice de commentaires prédéfinis organisés par critère SRPNF et niveau de performance IDME. Permet de générer rapidement des rétroactions personnalisées et cohérentes. Peut être verrouillée une fois finalisée.</dd>

                                <dt class="titre-section-aide">Complétion (C)</dt>
                                <dd class="ml-20-mb-10">Indice primaire mesurant la remise des travaux. Formule : (nombre d'artefacts complétés / nombre d'artefacts attendus) × 100. Reflète la mobilisation de l'étudiant. Calculé par portfolio.js.</dd>

                                <dt class="titre-section-aide">Congé imprévu</dt>
                                <dd class="ml-20-mb-10">Jour où le cours est annulé de manière non planifiée (tempête, urgence, etc.). N'affecte pas le calcul des semaines. Peut nécessiter une reprise pour maintenir le nombre de séances requis.</dd>

                                <dt class="titre-section-aide">Congé prévu</dt>
                                <dd class="ml-20-mb-10">Jour férié ou pause planifiée dans le calendrier académique (ex: semaine de lecture). Pris en compte lors de la génération du calendrier complet.</dd>
                            </dl>

                            <h4 class="titre-section-principal">É</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Échelle IDME</dt>
                                <dd class="ml-20-mb-10">Échelle de performance à 4 niveaux : <strong>I</strong>nsuffisant (&lt; 64%), <strong>D</strong>éveloppement (65-74%), <strong>M</strong>aîtrisé (75-84%), <strong>E</strong>tendu (≥ 85%). Basée sur la taxonomie SOLO de Biggs & Collis. Utilisée dans la pratique PAN-Maîtrise pour interpréter les scores des critères d'évaluation. <em>(Optionnel - voir Réglages → Pratique de notation)</em></dd>
                            </dl>

                            <h4 class="titre-section-principal">G</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Grille de critères SRPNF</dt>
                                <dd class="ml-20-mb-10">Outil d'évaluation structuré selon 5 critères : Structure (15%), Rigueur (20%), Plausibilité (10%), Nuance (25%), Français (30%). Chaque critère comporte 4 descripteurs permettant d'attribuer un score précis. Peut être dupliquée et personnalisée.</dd>
                            </dl>

                            <h4 class="titre-section-principal">I</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Indice de risque (R)</dt>
                                <dd class="ml-20-mb-10">Indice composite prédisant le risque d'échec. Formule : R = (2×A + C + P) / 4. Combine assiduité, complétion et performance en un seul score. 6 niveaux d'interprétation : Excellent (≥85%), Bon (70-84%), Fragile (60-69%), À risque (50-59%), Critique (40-49%), Échec probable (&lt;40%).</dd>

                                <dt class="titre-section-aide">Indice RàI</dt>
                                <dd class="ml-20-mb-10">Score déterminant le niveau d'intervention selon le cadre Réponse à l'Intervention. Calculé à partir de l'indice R. Trois niveaux : Universel (≥70%), Préventif (40-69%), Intensif (&lt;40%). <em>(Optionnel - voir Réglages → Pratique de notation → Activer RàI et détection des patterns)</em></dd>
                            </dl>

                            <h4 class="titre-section-principal">J</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Jetons</dt>
                                <dd class="ml-20-mb-10">Ressources limitées que l'apprenant·e peut utiliser pour adapter son parcours d'apprentissage. Chaque élève reçoit un nombre fixe de jetons par trimestre qu'il peut choisir d'utiliser selon ses besoins. Trois types de jetons sont disponibles : délai, reprise, et reprise ciblée. <em>(Configuration : Réglages → Pratique de notation → Système de jetons)</em></dd>

                                <dt class="titre-section-aide">Jetons de délai</dt>
                                <dd class="ml-20-mb-10">Permettent de prolonger l'échéance d'une évaluation d'un nombre de jours configuré (par défaut : 7 jours). L'étudiant·e utilise un jeton pour obtenir un délai supplémentaire sans pénalité. La nouvelle échéance est calculée automatiquement et visible dans son profil.</dd>

                                <dt class="titre-section-aide">Jetons de reprise</dt>
                                <dd class="ml-20-mb-10">Permettent de refaire une évaluation complète pour améliorer la maîtrise. L'étudiant·e soumet une nouvelle version de son travail qui remplace ou s'ajoute à l'évaluation originale selon la configuration. L'enseignant·e peut choisir de conserver l'évaluation originale en archive ou de la supprimer.</dd>

                                <dt class="titre-section-aide">Jetons de reprise ciblée</dt>
                                <dd class="ml-20-mb-10">Permettent de refaire une évaluation en ciblant <strong>UN SEUL critère spécifique</strong> (ex: Français, Rigueur, Structure). La correction apportée doit être justifiée. La note maximale pour le critère ciblé est configurable (par défaut : M - Maîtrisé, 75-84%). Les autres critères conservent leur note originale. Utile pour l'autocorrection linguistique ou l'amélioration ciblée d'un aspect précis du travail.</dd>
                            </dl>

                            <h4 class="titre-section-principal">L</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">localStorage</dt>
                                <dd class="ml-20-mb-10">Mécanisme de stockage local du navigateur. Toutes les données de l'application y sont sauvegardées automatiquement. Permet le fonctionnement 100% hors-ligne. Limité à 5-10 MB selon les navigateurs. Peut être effacé (mode privé, nettoyage) d'où l'importance des exports réguliers.</dd>
                            </dl>

                            <h4 class="titre-section-principal">M</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Mode provisoire / final (Portfolio)</dt>
                                <dd class="ml-20-mb-10"><strong>Provisoire :</strong> Tous les artefacts complétés sont considérés, même si &lt; nombre total attendu. <strong>Final :</strong> Ne calcule la note que si le nombre minimum d'artefacts complétés est atteint, sinon retourne 0. Permet de gérer les portfolios en cours de session.</dd>

                                <dt class="titre-section-aide">Monitorage pédagogique</dt>
                                <dd class="ml-20-mb-10">Approche systémique de suivi des apprentissages combinant observation continue (présences), évaluation formative (artefacts) et intervention différenciée (RàI). Objectif : identifier précocement les étudiants à risque pour intervenir avant l'échec.</dd>
                            </dl>

                            <h4 class="titre-section-principal">P</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">PAN (Pratiques d'Appréciation Nuancée)</dt>
                                <dd class="ml-20-mb-10">Système de notation permettant de sélectionner automatiquement les N meilleurs artefacts d'un portfolio. Exemple : sur 9 artefacts, retenir les 3 meilleurs. Règle configurable par portfolio. Respecte un minimum de complétion requis.</dd>

                                <dt class="titre-section-aide">Performance (P)</dt>
                                <dd class="ml-20-mb-10">Indice primaire mesurant la qualité des productions. Moyenne pondérée des scores SRPNF des artefacts sélectionnés (PAN). Reflète le niveau de maîtrise des compétences. Calculé par portfolio.js.</dd>

                                <dt class="titre-section-aide">Pondération</dt>
                                <dd class="ml-20-mb-10">Poids relatif d'une évaluation dans la note finale (%). La somme de toutes les pondérations doit être exactement 100%. Les artefacts d'un portfolio n'ont pas de pondération individuelle ; seul le Portfolio conteneur en a une.</dd>

                                <dt class="titre-section-aide">Portfolio</dt>
                                <dd class="ml-20-mb-10">Production composite regroupant plusieurs artefacts. Définit des règles PAN (nombre total, nombre à retenir, minimum requis). Le score final du portfolio est calculé selon les N meilleurs artefacts. Type spécial dans Matériel → Productions.</dd>

                                <dt class="titre-section-aide">Production</dt>
                                <dd class="ml-20-mb-10">Terme générique désignant toute évaluation du cours : examen, travail écrit, quiz, présentation, portfolio. Chaque production a un type, une pondération, et peut être liée à une grille de critères.</dd>
                            </dl>

                            <h4 class="titre-section-principal">R</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Reprise</dt>
                                <dd class="ml-20-mb-10">Séance de rattrapage planifiée pour compenser un congé imprévu. Exemple : si le lundi est férié, on peut reprendre le jeudi avec «Horaire du lundi». Gérée dans le calendrier complet pour maintenir le nombre requis de séances.</dd>

                                <dt class="titre-section-aide">RàI (Réponse à l'Intervention)</dt>
                                <dd class="ml-20-mb-10">Cadre d'intervention à trois paliers : <strong>Niveau 1</strong> (Universel, 80% des étudiants), <strong>Niveau 2</strong> (Ciblé, 15%), <strong>Niveau 3</strong> (Intensif, 5%). Permet d'adapter le soutien selon l'indice de risque. L'application suggère automatiquement le niveau approprié.</dd>
                            </dl>

                            <h4 class="titre-section-principal">S</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Séances complètes</dt>
                                <dd class="ml-20-mb-10">Structure de données générée par horaire.js. Fusionne les plages horaires (seancesHoraire) avec le calendrier complet pour créer la liste exhaustive de toutes les séances du trimestre avec leurs horaires précis. Source unique pour la saisie des présences.</dd>

                                <dt class="titre-section-aide">Single Source of Truth</dt>
                                <dd class="ml-20-mb-10">Principe architectural : chaque donnée a UNE source unique qui la génère et la stocke dans localStorage. Les autres modules la lisent uniquement. Exemples : trimestre.js génère calendrierComplet, saisie-presences.js génère indicesAssiduiteDetailles. Évite les duplications et incohérences.</dd>

                                <dt class="titre-section-aide">SOLO (Taxonomie)</dt>
                                <dd class="ml-20-mb-10">Structure of Observed Learning Outcomes (Biggs & Collis). Hiérarchie de 5 niveaux de compréhension : Préstructurel, Unistructurel, Multistructurel, Relationnel, Abstrait étendu. Fondement théorique de l'échelle IDME.</dd>

                                <dt class="titre-section-aide">SRPNF (Critères)</dt>
                                <dd class="ml-20-mb-10">Grille d'évaluation en 5 critères : <strong>S</strong>tructure (15%), <strong>R</strong>igueur (20%), <strong>P</strong>lausibilité (10%), <strong>N</strong>uance (25%), <strong>F</strong>rançais (30%). Développée spécifiquement pour l'évaluation de productions en littératie. Permet une évaluation objective et cohérente.</dd>

                                <dt class="titre-section-aide">Sous-critères (Pondération différenciée)</dt>
                                <dd class="ml-20-mb-10">Catégories d'erreurs au sein d'un critère algorithmique permettant une <strong>pondération différenciée</strong>. Exemple : dans un critère «Français écrit», les erreurs de ponctuation peuvent compter 0.5 point au lieu de 1.0 point. Chaque sous-critère possède un code (ex: "1", "pct", "syn"), un nom, une pondération (ajustable par paliers de 0.1), et une rétroaction personnalisée. Le système calcule la somme pondérée des erreurs et identifie le sous-critère dominant (MODE statistique) pour fournir une rétroaction ciblée. Cas d'usage principal : évaluation du français avec 11 catégories par défaut (codes 0-10). Nombre de sous-critères : illimité. Configuration : Matériel → Critères d'évaluation → Type «Algorithmique».</dd>
                            </dl>

                            <h4 class="titre-section-principal">T</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Trimestre</dt>
                                <dd class="ml-20-mb-10">Période académique (automne, hiver, été). Défini par une date de début, une date de fin, et un nombre de semaines de cours. Le module trimestre.js génère automatiquement le calendrier complet de 124 jours couvrant toute la session.</dd>
                            </dl>

                            <h4 class="titre-section-principal">V</h4>

                            <dl class="ml-10">
                                <dt class="titre-section-aide">Verrouillage</dt>
                                <dd class="ml-20-mb-10">Fonction de protection empêchant la modification ou suppression accidentelle. Disponible pour : productions, grilles de critères, échelles, cartouches. Un élément verrouillé affiche une icône de cadenas et ses boutons d'action sont désactivés. Peut être déverrouillé si nécessaire.</dd>
                            </dl>
                        </div>

                        <div class="alerte alerte-info" class="mt-20">
                            <strong>😎 Note :</strong> Ce glossaire est une référence rapide. Pour des explications détaillées avec exemples et formules, consultez le Guide complet (PDF) disponible dans les ressources ci-dessous.
                        </div>
                    </div>

                    <!-- Carte: Ressources -->
                    <div class="carte" class="bg-bleu-tres-pale">
                        <h3 class="carte-titre-bleu">Ressources et documentation</h3>

                        <p><strong>Références bibliographiques :</strong></p>
                        <div class="text-09-lh16-pl20-indent">
                            <p class="my-10">Arseneault-Hubert, F., Cormier, C. et Voisard, B. (2024). Les pratiques alternatives de notation : Pour mieux soutenir les apprentissages et en témoigner. <em>Pédagogie collégiale</em>, <em>37</em>(2), 27. <a href="https://eduq.info/xmlui/bitstream/handle/11515/39399/Voisard-et-al-37-2-24.pdf" target="_blank" style="color: var(--bleu-principal)">https://eduq.info/xmlui/bitstream/handle/11515/39399/Voisard-et-al-37-2-24.pdf</a></p>

                            <p class="my-10">Bédard, G. (2024). L'enseignement explicite de la littératie. <em>Pédagogie collégiale</em>, <em>37</em>(3), 85-92. <a href="https://eduq.info/xmlui/bitstream/handle/11515/39438/Bedard-37-3-24.pdf?sequence=2&isAllowed=y" target="_blank" style="color: var(--bleu-principal)">https://eduq.info/xmlui/bitstream/handle/11515/39438/Bedard-37-3-24.pdf</a></p>

                            <p class="my-10">Bédard, G. (2025). Observer pour mieux accompagner. <em>Pédagogie collégiale</em>, <em>38</em>(2), 38-45. <a href="https://eduq.info/xmlui/bitstream/handle/11515/39749/Bedard-38-2-25.pdf?sequence=2&isAllowed=y" target="_blank" style="color: var(--bleu-principal)">https://eduq.info/xmlui/bitstream/handle/11515/39749/Bedard-38-2-25.pdf</a></p>

                            <p class="my-10">Bélec, C. et Doré, R. (2023). <em>Une recherche collaborative pour renouveler l'enseignement de la littérature au collégial dans une optique de cohérence disciplinaire : l'intérêt d'une approche par compétence de la lecture</em>. Rapport PAREA, Cégep Gérald-Godin. <a href="https://www.cdc.qc.ca/parea/786755-belec-dore-litterature-competence-lecture-gerald-godin-PAREA-2023.pdf" target="_blank" style="color: var(--bleu-principal)">https://www.cdc.qc.ca/parea/786755-belec-dore-litterature-competence-lecture-gerald-godin-PAREA-2023.pdf</a></p>

                            <p class="my-10">Biggs, J. B. et Collis, K. F. (1982). <em>Evaluating the quality of learning: The SOLO taxonomy (Structure of the Observed Learning Outcome)</em>. Elsevier Inc.</p>

                            <p class="my-10">Blum, S. D. (dir.) (2020). <em>Ungrading: Why rating students undermines learning (and what to do instead)</em>. West Virginia University Press.</p>

                            <p class="my-10">Clark, R. et Talbert, R. (2023). <em>Grading for growth: A guide to alternative grading practices that promote authentic learning and student engagement</em>. Stylus Publishing.</p>

                            <p class="my-10">Conseil supérieur de l'éducation. (2018). <em>Évaluer pour que ça compte vraiment : Rapport sur l'état et les besoins de l'éducation 2016-2018</em>. Gouvernement du Québec.</p>

                            <p class="my-10">Gauthier, C. et Bissonnette, S. (2023). <em>Enseignement explicite et données probantes</em>. Gaëtan Morin Éditeur.</p>

                            <p class="my-10">Gauthier, C., Bissonnette, S. et Richard, M. (2013). <em>Enseignement explicite et réussite des élèves : La gestion des apprentissages</em>. Gaëtan Morin Éditeur.</p>

                            <p class="my-10">Gauthier, C. et Tardif, M. (2017). <em>La pédagogie</em> (4<sup>e</sup> édition) : <em>Théories et pratiques de l'Antiquité à nos jours</em>. Gaëtan Morin.</p>

                            <p class="my-10">Hollingsworth, J. et Ybarra, S. (2012). <em>L'enseignement explicite</em>. Chenelière.</p>

                            <p class="my-10">Nilson, L. B. (2014). <em>Specifications grading: Restoring rigor, motivating students, and saving faculty time</em>. Stylus Publishing.</p>

                            <p class="my-10">Viau, R. (2009). <em>La motivation à apprendre en milieu scolaire</em>. Éditions du renouveau pédagogique (ERPI).</p>
                        </div>

                        <p class="mt-15"><strong>Labo Codex :</strong></p>
                        <ul>
                            <li>Site web : <a href="https://codexnumeris.org/apropos" target="_blank" style="color: var(--bleu-principal)">https://codexnumeris.org/apropos</a></li>
                            <li>Approche systémique complète</li>
                            <li>Ressources additionnelles et outils</li>
                        </ul>

                        <p class="mt-15"><strong>Licence et partage :</strong></p>
                        <div class="carte-bleu-pale-mt10">
                            <p class="m-0-0-10-0"><strong>📜 Double licence :</strong></p>
                            <ul class="m-0">
                                <li><strong>Code source (HTML, CSS, JavaScript) :</strong> GNU GPL v3.0
                                    <ul class="text-09-mt5">
                                        <li>Garantit que le code reste libre et open source</li>
                                        <li>Modifications doivent être partagées sous même licence</li>
                                    </ul>
                                </li>
                                <li class="mt-10"><strong>Contenu pédagogique (documentation, aide, concepts) :</strong> Creative Commons BY-SA 4.0
                                    <ul class="text-09-mt5">
                                        <li>Partage et adaptation autorisés avec attribution</li>
                                        <li>Redistribution sous même licence</li>
                                        <li>Usage non-commercial autorisé</li>
                                    </ul>
                                </li>
                            </ul>
                            <p class="m-15-0-0-0-sm-bleu"><strong>😎 Détails complets :</strong> Voir LICENSE.md dans le dépôt du projet</p>
                        </div>
                    </div>

                    <!-- Carte: À propos -->
                    <div class="carte">
                        <h3 class="carte-titre-bleu">À propos de l'application</h3>
                        <table class="table-collapse">
                            <tr>
                                <td class="td-bold-30-bleu">Version</td>
                                <td class="ligne-separee-bleu">Beta 85 (interventions RàI)</td>
                            </tr>
                            <tr>
                                <td class="td-bold-bleu">Développé par</td>
                                <td class="ligne-separee-bleu">Grégoire Bédard<br>
                                    <span class="text-muted" style="font-size: 0.9rem">Cégep de Drummondville</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="td-bold-bleu">Licence</td>
                                <td class="ligne-separee-bleu">Double licence<br>
                                    <span class="text-muted" style="font-size: 0.9rem">GPL v3.0 (code) + CC BY-NC-SA 4.0 (contenu)</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="td-bold-bleu">Technologies</td>
                                <td class="ligne-separee-bleu">HTML5 / CSS3 / JavaScript ES6+ pur<br>
                                    <span class="text-muted" style="font-size: 0.9rem">100% autonome, aucune dépendance externe</span>
                                </td>
                            </tr>
                            <tr>
                                <td class="td-bold">Stockage</td>
                                <td class="p-10">localStorage uniquement<br>
                                    <span class="text-muted" style="font-size: 0.9rem">Fonctionnement hors-ligne</span>
                                </td>
                            </tr>
                        </table>

                        <p class="carte-bleu-mt20-center-italic">
                            <strong>"L'objectif pédagogique : Faire mentir les prédictions de risque par des interventions proactives !"</strong>
                        </p>
                    </div>
                </div>
                <!-- LLM:OK_TO_EDIT -->

            </section><!-- fin section-aide -->

        </main>

    </div>



    <!-- ===================================
     CHARGEMENT DES MODULES JAVASCRIPT
     ORDRE CRITIQUE - Voir: js/ordre-chargement.txt
     =================================== -->

    <!-- PRIORITÉ 0: Couche de stockage (Migration IndexedDB - Beta 91.5) -->
    <script src="js/db.js?v=2025112401"></script>

    <!-- Bibliothèque externe: Chart.js pour graphiques progression (Beta 93) -->
    <script src="libs/chart.min.js"></script>
    <script src="libs/chartjs-plugin-annotation.min.js"></script>

    <!-- PRIORITÉ 1: Fondations -->
    <script src="js/config.js"></script>
    <script src="js/navigation.js?v=2025120601"></script>
    <script src="js/modes.js?v=2025113001"></script>

    <!-- PRIORITÉ 2: Données de base -->
    <script src="js/trimestre.js?v=2025111325"></script>
    <script src="js/etudiants.js?v=2025120403"></script>
    <script src="js/productions.js?v=2025120600"></script>
    <script src="js/grilles.js?v=2025120613"></script>
    <script src="js/echelles.js?v=2025120606"></script>
    <script src="js/cartouches.js?v=2025120612"></script>
    <script src="js/cours.js?v=2025120115"></script>
    <script src="js/contexte.js?v=2025111201"></script>

    <!-- PRIORITÉ 3: Configuration et calcul des indices (AVANT affichage) -->
    <script src="js/interpretation-config.js?v=2025111501"></script>

    <!-- Système de pratiques de notation (Beta 90-91) -->
    <!-- IMPORTANT: pratique-configurable.js doit être chargé EN PREMIER car pratique-registre.js l'utilise -->
    <script src="js/pratiques/pratique-configurable.js?v=2025112710"></script>
    <script src="js/pratiques/pratique-registre.js"></script>
    <script src="js/pratiques/migration-pratiques.js"></script>
    <script src="js/pratiques/pratique-test.js"></script>
    <script src="js/pratiques/pratique-pan-maitrise.js?v=2025120609"></script>
    <script src="js/pratiques/pratique-sommative.js?v=2025120609"></script>
    <script src="js/pratiques/pratique-pan-specifications.js?v=2025112600"></script>
    <script src="js/pratiques/config-francois-chimie.js?v=2025112600"></script>

    <!-- Pratiques prédéfinies (Beta 92 - Jour 1) -->
    <script src="js/pratiques/pratiques-predefines.js?v=2025112602"></script>
    <script src="js/pratiques/pratique-manager.js?v=2025112501"></script>

    <!-- Licence Creative Commons (Beta 91.5 - Import/Export) -->
    <script src="js/cc-license.js?v=2025120118"></script>

    <!-- Interface de gestion des pratiques configurables -->
    <script src="js/pratiques.js?v=2025113019"></script>
    <script src="js/objectifs.js?v=2025120124"></script>

    <script src="js/portfolio.js?v=2025112701"></script>
    <script src="js/saisie-presences.js?v=2025120613"></script>

    <!-- PRIORITÉ 4: Modules d'affichage (APRÈS calcul) -->
    <script src="js/tableau-bord-apercu.js?v=2025120606"></script>
    <script src="js/profil-etudiant.js?v=2025120612"></script>
    <script src="js/presences-apercu.js?v=2025111029"></script>
    <script src="js/evaluations-apercu.js?v=2025111026"></script>

    <!-- PRIORITÉ 5: Modules fonctionnels -->
    <script src="js/calendrier-vue.js?v=2025120201"></script>
    <script src="js/horaire.js?v=2025120601"></script>
    <script src="js/groupe.js?v=2025120208"></script>
    <script src="js/interventions.js?v=2025120125"></script>

    <!-- PRIORITÉ 6: Modules avancés (Beta 91.5 - Import/Export) -->
    <script src="js/import-export.js?v=2025120608"></script>
    <script src="js/statistiques.js?v=2025113016"></script>
    <script src="js/liste-evaluations.js?v=2025120207"></script>
    <script src="js/snapshots.js?v=2025120615"></script>
    <script src="js/graphiques-progression.js?v=2025120608"></script>

    <!-- PRIORITÉ 7: Utilitaires -->
    <script src="js/evaluation-jetons.js?v=2025113013"></script>
    <script src="js/evaluation.js?v=2025120302"></script>

    <!-- PRIMO - Système conversationnel de configuration (Beta 92) -->
    <script src="js/primo-questions.js?v=2025120109"></script>
    <script src="js/primo-modal.js?v=2025120106"></script>
    <script src="js/primo-accueil.js?v=2025112809"></script>
    <script src="js/primo-validation-champs.js?v=2025112727"></script>
    <script src="js/primo-tooltips.js?v=2025112903"></script>

    <!-- GUIDAGE - Système d'assistance contextuelle en mode Assisté (Beta 92) -->
    <script src="js/guidage.js?v=2025112706"></script>

    <!-- TUTORIEL INTERACTIF - Guide après données démo (Beta 92) -->
    <script src="js/tutoriel-interactif.js?v=2025120102"></script>

    <!-- PRIORITÉ 8: Initialisation finale (TOUJOURS EN DERNIER) -->
    <script src="js/main.js?v=2025120600"></script>

    <!-- Script de débogage additionnel (optionnel) -->
    <script>
        // Mise à jour de la zone de débogage visuelle
        setInterval(() => {
            const debugSection = document.getElementById('debug-section');
            const debugSousSection = document.getElementById('debug-sous-section');

            if (debugSection && typeof sectionActive !== 'undefined') {
                debugSection.textContent = sectionActive || '--';
            }

            if (debugSousSection && typeof sousSectionActive !== 'undefined') {
                debugSousSection.textContent = sousSectionActive || '--';
            }
        }, 500);
    </script>

    <!-- Script pour gérer les toggles emoji dans les H2 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sélectionner tous les emojis avec la classe emoji-toggle
            const emojiToggles = document.querySelectorAll('.emoji-toggle');

            emojiToggles.forEach(emoji => {
                emoji.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();

                    // Récupérer l'ID de la cible depuis l'attribut data-target
                    const targetId = this.getAttribute('data-target');
                    const targetElement = document.getElementById(targetId);

                    if (targetElement) {
                        // Toggle la visibilité
                        if (targetElement.style.display === 'none' || targetElement.style.display === '') {
                            targetElement.style.display = 'block';
                        } else {
                            targetElement.style.display = 'none';
                        }
                    }
                });
            });
        });
    </script>

    <!-- Script d'initialisation des seuils d'interprétation -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Charger les seuils d'interprétation dans l'interface dès que la page est chargée
            if (typeof chargerSeuilsInterpretationUI === 'function') {
                // Attendre que la sous-section soit potentiellement affichée
                setTimeout(() => {
                    const sectionInterpretation = document.getElementById('reglages-interpretation');
                    if (sectionInterpretation) {
                        chargerSeuilsInterpretationUI();
                        console.log('Interface des seuils d\'interprétation initialisée');
                    }
                }, 100);
            }

            // Observer les changements de sous-section pour recharger les seuils si nécessaire
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                        const section = mutation.target;
                        if (section.id === 'reglages-interpretation' && section.classList.contains('actif')) {
                            if (typeof chargerSeuilsInterpretationUI === 'function') {
                                chargerSeuilsInterpretationUI();
                            }
                        }
                    }
                });
            });

            // Observer la sous-section des réglages d'interprétation
            const sectionInterpretation = document.getElementById('reglages-interpretation');
            if (sectionInterpretation) {
                observer.observe(sectionInterpretation, {
                    attributes: true,
                    attributeFilter: ['class']
                });
            }
        });
    </script>

    <!-- ===============================
     MODALES IMPORT/EXPORT
     À placer AVANT </body>
     =============================== -->

    <!-- Modal Export -->
    <div id="modalExport" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
     background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
        <div
            class="modal-content-scroll">
            <h3 class="titre-bleu-mb-20">Exporter les données</h3>

            <div class="mb-20">
                <label
                    class="item-bleu-pale-clickable">
                    <input type="checkbox" id="checkToutesLes" onchange="toggleToutesLesCles()"
                        class="mr-10-scale-13">
                    <strong>Toutes les clés</strong>
                </label>
            </div>

            <div id="listeClesExport"
                class="overflow-y-300-border">
                <!-- Rempli dynamiquement -->
            </div>

            <div class="mt-20-flex-gap10-end">
                <button class="btn btn-annuler" onclick="fermerModalExport()">Annuler</button>
                <button class="btn btn-confirmer" onclick="executerExport()">Exporter</button>
            </div>
        </div>
    </div>

    <!-- Modal Import -->
    <div id="modalImport" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
     background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
        <div class="modal-content-small">
            <h3 class="titre-bleu-mb-20">Importer les données</h3>

            <div
                class="carte-mb20-orange">
                <p class="m-0-bleu-principal">
                    <strong>😎 Attention :</strong> L'importation écrasera les données existantes pour les clés
                    importées.
                </p>
            </div>

            <input type="file" id="fichierImport" accept=".json"
                class="zone-depot">

            <div id="apercu-import"
                class="hidden-mb20-success">
                <!-- Rempli après sélection du fichier -->
            </div>

            <div class="d-flex-gap10-end">
                <button class="btn btn-annuler" onclick="fermerModalImport()">Annuler</button>
                <button class="btn btn-confirmer" id="btnExecuterImport" onclick="executerImport()" disabled>Importer</button>
            </div>
        </div>
    </div>

    <!-- ===============================
     MOTEUR DE RECHERCHE AIDE
     =============================== -->
    <script>
        /**
         * Recherche dans la section Aide en temps réel
         */
        function rechercherDansAide() {
            const input = document.getElementById('aide-recherche-input');
            const clearBtn = document.getElementById('aide-recherche-clear');
            const resultatsDiv = document.getElementById('aide-recherche-resultats');
            const recherche = input.value.trim().toLowerCase();

            // Afficher/masquer le bouton X
            clearBtn.style.display = recherche ? 'block' : 'none';

            // Si recherche vide, tout réafficher
            if (!recherche) {
                reafficherToutesLesCartes();
                resultatsDiv.style.display = 'none';
                return;
            }

            // Rechercher dans toutes les cartes
            const cartes = document.querySelectorAll('#section-aide .carte');
            let nbResultats = 0;
            let nbCartesVisibles = 0;

            cartes.forEach(carte => {
                // Retirer les surlignages précédents
                retirerSurlignage(carte);

                // Chercher dans le texte de la carte
                const texte = carte.textContent.toLowerCase();

                if (texte.includes(recherche)) {
                    carte.style.display = 'block';
                    nbCartesVisibles++;

                    // Surligner les occurrences
                    nbResultats += surlignerTexte(carte, recherche);
                } else {
                    carte.style.display = 'none';
                }
            });

            // Afficher/masquer les sous-sections vides
            const sousSections = document.querySelectorAll('#section-aide .sous-section');
            sousSections.forEach(section => {
                const cartesVisibles = section.querySelectorAll('.carte[style*="display: block"], .carte:not([style*="display: none"])').length;

                // Masquer le titre de la sous-section s'il n'y a pas de cartes visibles
                const titre = section.querySelector('h2');
                if (titre) {
                    titre.style.display = cartesVisibles > 0 ? 'block' : 'none';
                }
            });

            // Afficher les résultats
            resultatsDiv.style.display = 'block';
            if (nbCartesVisibles === 0) {
                resultatsDiv.innerHTML = '❌ Aucun résultat trouvé pour « ' + recherche + ' »';
                resultatsDiv.style.color = '#dc3545';
            } else {
                resultatsDiv.innerHTML = '' + nbResultats + ' occurrence(s) trouvée(s) dans ' + nbCartesVisibles + ' carte(s)';
                resultatsDiv.style.color = '#28a745';
            }
        }

        /**
         * Surligne le texte recherché dans un élément
         */
        function surlignerTexte(element, recherche) {
            let nbOccurrences = 0;
            const regex = new RegExp('(' + recherche.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + ')', 'gi');

            // Parcourir tous les nœuds de texte
            const walker = document.createTreeWalker(
                element,
                NodeFilter.SHOW_TEXT,
                null,
                false
            );

            const nodesATraiter = [];
            let node;
            while (node = walker.nextNode()) {
                if (node.textContent.toLowerCase().includes(recherche)) {
                    nodesATraiter.push(node);
                }
            }

            nodesATraiter.forEach(node => {
                const parent = node.parentNode;

                // Ne pas surligner dans les scripts ou styles
                if (parent.nodeName === 'SCRIPT' || parent.nodeName === 'STYLE') {
                    return;
                }

                const texte = node.textContent;
                const fragments = texte.split(regex);

                if (fragments.length > 1) {
                    const span = document.createElement('span');

                    fragments.forEach((fragment, index) => {
                        if (fragment.toLowerCase() === recherche.toLowerCase()) {
                            const mark = document.createElement('mark');
                            mark.textContent = fragment;
                            mark.style.backgroundColor = '#ffeb3b';
                            mark.style.padding = '2px 4px';
                            mark.style.borderRadius = '3px';
                            mark.style.fontWeight = 'bold';
                            mark.className = 'aide-surlignage';
                            span.appendChild(mark);
                            nbOccurrences++;
                        } else if (fragment) {
                            span.appendChild(document.createTextNode(fragment));
                        }
                    });

                    parent.replaceChild(span, node);
                }
            });

            return nbOccurrences;
        }

        /**
         * Retire tous les surlignages
         */
        function retirerSurlignage(element) {
            const marks = element.querySelectorAll('mark.aide-surlignage');
            marks.forEach(mark => {
                const parent = mark.parentNode;
                parent.replaceChild(document.createTextNode(mark.textContent), mark);
                parent.normalize(); // Fusionner les nœuds de texte adjacents
            });
        }

        /**
         * Réaffiche toutes les cartes et sous-sections
         */
        function reafficherToutesLesCartes() {
            // Réafficher toutes les cartes
            const cartes = document.querySelectorAll('#section-aide .carte');
            cartes.forEach(carte => {
                carte.style.display = 'block';
                retirerSurlignage(carte);
            });

            // Réafficher tous les titres de sous-sections
            const titres = document.querySelectorAll('#section-aide .sous-section h2');
            titres.forEach(titre => {
                titre.style.display = 'block';
            });
        }

        /**
         * Efface la recherche et réinitialise l'affichage
         */
        function effacerRechercheAide() {
            const input = document.getElementById('aide-recherche-input');
            const clearBtn = document.getElementById('aide-recherche-clear');
            const resultatsDiv = document.getElementById('aide-recherche-resultats');

            input.value = '';
            clearBtn.style.display = 'none';
            resultatsDiv.style.display = 'none';
            reafficherToutesLesCartes();

            // Remettre le focus sur le champ
            input.focus();
        }

        // Amélioration UX : Focus sur le champ de recherche avec Ctrl+F ou Cmd+F
        document.addEventListener('keydown', function(e) {
            // Vérifier si on est dans la section Aide
            const sectionAide = document.getElementById('section-aide');
            if (!sectionAide || !sectionAide.classList.contains('active')) {
                return;
            }

            // Ctrl+F ou Cmd+F
            if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                e.preventDefault();
                const input = document.getElementById('aide-recherche-input');
                if (input) {
                    input.focus();
                    input.select();
                }
            }

            // ESC pour effacer
            if (e.key === 'Escape') {
                const input = document.getElementById('aide-recherche-input');
                if (input && document.activeElement === input) {
                    effacerRechercheAide();
                }
            }
        });
    </script>

    <!-- Fonctions d'import/export du matériel pédagogique (Beta 78) -->
    <script>
        // ========================================
        // DEBUG: AFFICHER LE CONTENU DU LOCALSTORAGE
        // ========================================
        function debugLocalStorage() {
            console.clear();
            console.log('========================================');
            console.log('DEBUG: Contenu du localStorage');
            console.log('========================================');

            // Lister toutes les clés
            console.log('\nToutes les clés disponibles:');
            for (let i = 0; i < localStorage.length; i++) {
                const cle = localStorage.key(i);
                console.log(`  - ${cle}`);
            }

            // Vérifier productions (clé: productions)
            console.log('\nProductions (artefacts):');
            const productions = localStorage.getItem('productions');
            if (productions) {
                try {
                    const parsed = JSON.parse(productions);
                    console.log(`  Trouvées: ${Array.isArray(parsed) ? parsed.length : 'Structure invalide'} production(s)`);
                    console.log('  Contenu:', parsed);
                } catch (e) {
                    console.log('  ERREUR de parsing:', e);
                }
            } else {
                console.log('  ❌ Aucune production trouvée (clé "productions" vide)');
            }

            // Vérifier grillesTemplates
            console.log('\nGrilles de critères:');
            const grilles = localStorage.getItem('grillesTemplates');
            if (grilles) {
                try {
                    const parsed = JSON.parse(grilles);
                    if (Array.isArray(parsed)) {
                        console.log(`  Grilles: ${parsed.length}`);
                        console.log('  Contenu:', parsed);
                    } else {
                        console.log('  Structure invalide (pas un tableau)');
                    }
                } catch (e) {
                    console.log('  ERREUR de parsing:', e);
                }
            } else {
                console.log('  ❌ Aucune grille trouvée (clé "grillesTemplates" vide)');
            }

            // Vérifier échelles
            console.log('\n😎 Échelles de performance:');
            const echellesTemplates = localStorage.getItem('echellesTemplates');
            const niveauxEchelle = localStorage.getItem('niveauxEchelle');
            const configEchelle = localStorage.getItem('configEchelle');

            if (echellesTemplates || niveauxEchelle || configEchelle) {
                console.log('  Données trouvées:');
                if (echellesTemplates) {
                    console.log('    • echellesTemplates:', JSON.parse(echellesTemplates));
                }
                if (niveauxEchelle) {
                    console.log('    • niveauxEchelle:', JSON.parse(niveauxEchelle));
                }
                if (configEchelle) {
                    console.log('    • configEchelle:', JSON.parse(configEchelle));
                }
            } else {
                console.log('  ❌ Aucune échelle trouvée');
            }

            console.log('\n========================================');
            alert('Informations affichées dans la console du navigateur.\n\nAppuie sur F12 pour voir les détails.');
        }

        // ========================================
        // EXPORT DES GRILLES D'ÉVALUATION
        // ========================================
        // SUPPRIMÉ : La fonction exporterGrilles() est maintenant dans js/grilles.js avec support CC

        // ========================================
        // EXPORT DES ÉCHELLES DE PERFORMANCE
        // ========================================
        // Les fonctions exporterEchelles() et exporterEchelleActive() sont définies dans js/echelles.js
        // Elles exportent les échelles avec métadonnées CC BY-NC-SA 4.0

        // ========================================
        // EXPORT DES PRODUCTIONS
        // ========================================
        // La fonction exporterProductions() est définie dans js/productions.js
        // Elle exporte toutes les productions avec métadonnées CC BY-NC-SA 4.0

        // ========================================
        // IMPORT DES GRILLES D'ÉVALUATION
        // ========================================
        // OBSOLÈTE : Cette fonction a été déplacée vers grilles.js (supporte nouveau format CC)
        // La fonction importerGrilles() est maintenant chargée depuis grilles.js

        // ========================================
        // IMPORT DES ÉCHELLES DE PERFORMANCE
        // ========================================
        // OBSOLÈTE : Cette fonction a été déplacée vers echelles.js (supporte nouveau format CC)
        // La fonction importerEchelles() est maintenant chargée depuis echelles.js

        // ========================================
        // IMPORT DES PRODUCTIONS
        // ========================================
        function importerProductions(event) {
            const fichier = event.target.files[0];
            if (!fichier) return;

            const lecteur = new FileReader();
            lecteur.onload = function(e) {
                try {
                    const productionsImportees = JSON.parse(e.target.result);

                    // Validation structure
                    if (!Array.isArray(productionsImportees)) {
                        alert('Format invalide : le fichier doit contenir un tableau de productions.');
                        return;
                    }

                    // Validation contenu
                    for (let prod of productionsImportees) {
                        if (!prod.id || !prod.titre || !prod.type) {
                            alert('Format invalide : chaque production doit avoir au minimum un id, un titre et un type.');
                            return;
                        }
                    }

                    // Charger les productions existantes (clé: productions)
                    let productions = JSON.parse(localStorage.getItem('productions') || '[]');

                    // Fusionner (remplacer si ID existe, ajouter sinon)
                    let nbAjoutees = 0;
                    let nbMisesAJour = 0;

                    productionsImportees.forEach(prodImportee => {
                        const index = productions.findIndex(p => p.id === prodImportee.id);
                        if (index >= 0) {
                            productions[index] = prodImportee;
                            nbMisesAJour++;
                        } else {
                            productions.push(prodImportee);
                            nbAjoutees++;
                        }
                    });

                    // Sauvegarder (clé: productions)
                    localStorage.setItem('productions', JSON.stringify(productions));

                    // Recalculer si module disponible
                    if (typeof afficherTableauProductions === 'function') {
                        afficherTableauProductions();
                    }

                    // Notification
                    let message = `Import réussi :\n• ${nbAjoutees} production(s) ajoutée(s)\n• ${nbMisesAJour} production(s) mise(s) à jour`;

                    if (typeof afficherNotificationSucces === 'function') {
                        afficherNotificationSucces(message.replace(/\n/g, ' '));
                    } else {
                        alert(message);
                    }

                    // Réinitialiser le champ fichier
                    event.target.value = '';

                    // Recharger la page pour appliquer les changements
                    if (confirm('Import terminé ! Recharger la page pour voir les productions importées ?')) {
                        location.reload();
                    }

                } catch (err) {
                    console.error('Erreur import productions:', err);
                    alert('Fichier JSON invalide ou format incorrect.');
                }
            };
            lecteur.readAsText(fichier);
        }
    </script>

    <!-- Script pour afficher les informations contextuelles dans la navigation -->
    <script>
        /**
         * Affiche les informations contextuelles au centre sous le titre (cours, semaine, date)
         * Sources : cours.js (listeCours), calendrierComplet (semaine), Date système
         */
        function afficherInfosContextuelles() {
            const container = document.getElementById('info-contextuelles-centre');
            if (!container) return;

            // 1. Récupérer le cours actif depuis cours.js (localStorage)
            const listeCours = JSON.parse(localStorage.getItem('listeCours') || '[]');
            const coursActif = listeCours.find(c => c.actif) || listeCours[0] || null;
            const nomCours = coursActif ? (coursActif.nomCours || coursActif.codeCours || 'Aucun cours') : 'Aucun cours';

            // 1b. Récupérer la pratique de notation active
            const modalites = JSON.parse(localStorage.getItem('modalitesEvaluation') || '{}');
            const pratiqueId = modalites.pratique || 'sommative';
            const nomsConviviaux = {
                'sommative': 'Sommative',
                'pan-maitrise': 'PAN-Maîtrise',
                'alternative': 'PAN-Maîtrise'  // Ancien nom (rétrocompatibilité)
            };
            const nomPratique = nomsConviviaux[pratiqueId] || pratiqueId;

            // 2. Calculer la semaine actuelle depuis calendrierComplet (trimestre.js)
            const calendrier = JSON.parse(localStorage.getItem('calendrierComplet') || '{}');
            const aujourdhuiISO = new Date().toISOString().split('T')[0];
            const infoJour = calendrier[aujourdhuiISO] || null;

            const semaine = infoJour && infoJour.numeroSemaine ? `Semaine ${infoJour.numeroSemaine}` : 'Semaine non définie';

            // 3. Formater la date d'aujourd'hui (format: lundi 3 novembre 2025)
            const options = { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' };
            const dateFormatee = new Date().toLocaleDateString('fr-CA', options);

            // 4. Récupérer le groupe et le rang de la séance
            let groupeInfo = '';
            let seanceInfo = '';
            if (infoJour && (infoJour.statut === 'cours' || infoJour.statut === 'reprise')) {
                const seancesCompletes = JSON.parse(localStorage.getItem('seancesCompletes') || '{}');
                const seancesDuJour = seancesCompletes[aujourdhuiISO];

                // Récupérer le groupe de la première séance du jour
                if (seancesDuJour && seancesDuJour.length > 0 && seancesDuJour[0].groupe) {
                    groupeInfo = `Groupe ${seancesDuJour[0].groupe} : `;
                }

                // Utiliser la fonction source unique définie dans horaire.js
                const rangSeance = window.obtenirRangSeanceDansSemaine(aujourdhuiISO);
                if (rangSeance && rangSeance.ordinal) {
                    seanceInfo = ` · ${rangSeance.ordinal} séance`;
                }
            }

            // 5. Mettre à jour le HTML dans la navigation
            container.innerHTML = `
                <br>${nomCours}
                <br><span style="font-size: 0.85em; opacity: 0.85;">Pratique : ${nomPratique}</span>
                <br>${groupeInfo}${semaine} · ${dateFormatee}${seanceInfo}
            `;
        }

        // Appeler au chargement de la page
        document.addEventListener('DOMContentLoaded', afficherInfosContextuelles);

        // Rafraîchir si changement de cours ou calendrier
        window.addEventListener('storage', afficherInfosContextuelles);
    </script>
</body>

</html>