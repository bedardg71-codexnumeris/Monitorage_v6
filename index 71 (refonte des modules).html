<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Syst√®me de suivi Beta 0.71</title>

    <!-- AJOUTER CETTE LIGNE -->
    <link rel="stylesheet" href="styles.css">

    <style>
        /* Les styles embarqu√©s restent ici */
        /* ===============================
           VARIABLES CSS
           =============================== */
        :root {
            /* Palette de couleurs bleues */
            --bleu-principal: #032e5c;
            --bleu-moyen: #0a4d8c;
            --bleu-fonce: #021d3a;
            --bleu-pale: #e8f1f8;
            --bleu-tres-pale: #f4f8fc;
            --bleu-leger: #b8d4e8;
            --bleu-carte: #d0e4f5;

            /* Navigation */
            --sous-nav-bg: #f0f6fb;
            --sous-nav-normal: #0a4d8c;
            --sous-nav-hover: #032e5c;
            --sous-nav-actif: #032e5c;

            /* Accents */
            --orange-accent: #ff6b35;

            /* Statuts et alertes */
            --risque-critique: #dc3545;
            --succes: #28a745;

            /* Espacement */
            --espacement-petit: 8px;
            --espacement-moyen: 15px;
            --espacement-grand: 25px;
        }

        /* ===============================
           RESET ET BASE
           =============================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
            padding: 20px;
        }

        /* ===============================
           CONTENEUR PRINCIPAL
           =============================== */
        .conteneur {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(3, 46, 92, 0.1);
            overflow: hidden;
        }

        /* ===============================
           EN-T√äTE
           =============================== */
        .entete {
            background: var(--bleu-principal);
            color: white;
            padding: var(--espacement-grand);
            text-align: center;
            position: relative;
        }

        .entete h1 {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        .entete h2 {
            font-size: 1.2rem;
            font-weight: 300;
            color: var(--bleu-pale);
            margin-bottom: 15px;
        }

        .version {
            font-size: 0.9rem;
            color: var(--bleu-pale);
            margin-top: 10px;
        }

        .statut-test {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--orange-accent);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
        }

        /* ===============================
           NAVIGATION PRINCIPALE
           =============================== */
        .navigation-principale {
            background: var(--bleu-principal);
            padding: 0;
            display: flex;
            justify-content: center;
            gap: 0;
            border-bottom: 3px solid var(--orange-accent);
        }

        .navigation-principale button {
            flex: 1;
            padding: 15px 25px;
            background: transparent;
            color: var(--bleu-pale);
            border: none;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .navigation-principale button:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .navigation-principale button.actif {
            background: var(--bleu-moyen);
            color: white;
            border-bottom: 3px solid var(--orange-accent);
        }

        /* ===============================
           SOUS-NAVIGATION
           =============================== */
        .sous-navigation {
            background: var(--sous-nav-bg);
            padding: 12px 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            border-bottom: 1px solid var(--bleu-leger);
            min-height: 50px;
            align-items: center;
        }

        .sous-navigation button {
            padding: 8px 16px;
            background: white;
            color: var(--sous-nav-normal);
            border: 1px solid var(--bleu-leger);
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .sous-navigation button:hover {
            background: var(--bleu-pale);
            border-color: var(--sous-nav-hover);
            color: var(--sous-nav-hover);
        }

        .sous-navigation button.actif {
            background: var(--sous-nav-actif);
            color: white;
            border-color: var(--sous-nav-actif);
        }

        .sous-navigation.vide {
            background: transparent;
            padding: 20px;
            border: none;
        }

        .sous-navigation .vide {
            width: 100%;
            text-align: center;
            color: var(--bleu-leger);
            font-style: italic;
        }

        /* ===============================
           CONTENU PRINCIPAL
           =============================== */
        .contenu {
            padding: var(--espacement-grand);
            min-height: 500px;
        }

        /* ===============================
           SECTIONS ET SOUS-SECTIONS
           =============================== */
        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: apparition 0.3s ease;
        }

        .sous-section {
            display: none;
        }

        .sous-section.active {
            display: block;
            animation: apparition 0.3s ease;
        }

        @keyframes apparition {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===============================
           CARTES
           =============================== */
        .carte {
            background: white;
            border: 1px solid var(--bleu-pale);
            border-radius: 8px;
            padding: var(--espacement-moyen);
            margin-bottom: var(--espacement-moyen);
            box-shadow: 0 2px 8px rgba(3, 46, 92, 0.05);
        }

        .carte h3 {
            color: var(--bleu-principal);
            font-size: 1.1rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--bleu-pale);
        }

        /* ===============================
           BADGES DE TEST
           =============================== */
        .badge-info {
            display: inline-block;
            background: var(--bleu-pale);
            color: var(--bleu-principal);
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            margin: 5px;
        }

        .badge-succes {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        /* ===============================
           FORMULAIRES
           =============================== */
        .controle-form {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.95rem;
            transition: border-color 0.2s;
        }

        .controle-form:focus {
            outline: none;
            border-color: var(--bleu-principal);
            box-shadow: 0 0 0 3px rgba(3, 46, 92, 0.1);
        }

        .groupe-form {
            margin-bottom: 15px;
        }

        .groupe-form label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--bleu-principal);
        }

        /* ===============================
           TABLEAUX
           =============================== */
        .tableau {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .tableau th {
            background: var(--bleu-pale);
            padding: 10px;
            text-align: left;
            border: 1px solid #ddd;
            font-weight: 600;
            color: var(--bleu-principal);
        }

        .tableau td {
            padding: 10px;
            border: 1px solid #ddd;
        }

        .tableau tr:hover {
            background: var(--bleu-tres-pale);
        }

        /* ===============================
           UTILITAIRES
           =============================== */
        .text-muted {
            color: #6c757d;
        }

        .mt-3 {
            margin-top: 15px;
        }

        .btn-groupe {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        /* ===============================
           NOTIFICATIONS (pour module 14-utilitaires.js)
           =============================== */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(400px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .notification-succes {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 9999;
            animation: slideIn 0.3s ease;
            max-width: 400px;
        }

        .notification-details {
            margin-top: 5px;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* ===============================
           ZONE DE DEBUG
           =============================== */
        .debug-zone {
            background: #f8f9fa;
            border: 2px dashed #6c757d;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .debug-zone h4 {
            color: #6c757d;
            margin-bottom: 10px;
        }
    </style>
</head>

<body>
    <div class="conteneur">

        <!-- EN-T√äTE -->
        <header class="entete">
            <div class="entete-conteneur">
                <!-- Logo et m√©tadonn√©es -->
                <div class="logo-section">
                    <a href="https://codexnumeris.org" target="_blank" rel="noopener noreferrer" class="logo-link">
                        <div class="logo">
                            <img src="logo-codex-numeris.png" alt="Logo Codex Numeris">
                        </div>
                    </a>
                    <div class="logo-meta">

                        <a href="https://codexnumeris.org" target="_blank" rel="noopener noreferrer"
                            class="site-link">codexnumeris.org</a>
                        <br>
                        R√©fl√©chir, exp√©rimenter, partager.
                    </div>
                </div>

                <!-- Titre et description centr√©s -->
                <div class="titre-section">
                    <h1>CODEX NUMERIS</h1>
                    <p class="sous-titre">Syst√®me de suivi des apprentissages</p>

                    <!-- S√©lecteur de mode (sera g√©n√©r√© par 17-modes.js) -->
                    <div id="selecteur-mode"></div>
                </div>

                <!-- Informations l√©gales et techniques (√† droite) -->
                <div class="info-legales-section">
                    <div class="meta">
                        Beta 0.71
                        <br>Cr√©√© par Gr√©goire B√©dard
                        <br>Licence GNU GPL v3
                        <br>20 octobre 2025
                    </div>
                </div>
            </div>
        </header>

        <!-- NAVIGATION PRINCIPALE -->
        <nav class="navigation-principale">
            <button data-onglet="tableau-bord">Tableau de bord</button>
            <button data-onglet="presences">Pr√©sences</button>
            <button data-onglet="evaluations">√âvaluations</button>
            <button data-onglet="materiel">Mat√©riel</button>
            <button data-onglet="reglages">R√©glages</button>
            <button data-onglet="aide">Aide</button>
        </nav>

        <!-- SOUS-NAVIGATION (g√©n√©r√©e dynamiquement par 02-navigation.js) -->
        <div id="sous-navigation" class="sous-navigation"></div>

        <!-- CONTENU PRINCIPAL -->
        <main class="contenu">

            <!-- ===================================
     SECTION: TABLEAU DE BORD
     =================================== -->
            <section id="section-tableau-bord" class="section">

                <!-- Sous-section: Aper√ßu -->
                <div id="tableau-bord-apercu" class="sous-section">
                    <h2>Vue d'ensemble</h2>
                    <p class="text-muted">Monitorage p√©dagogique et priorisation des interventions</p>

                    <!-- ========== M√âTRIQUES GLOBALES DU GROUPE ========== -->
                    <div class="carte">
                        <h3>Indicateurs globaux du groupe</h3>

                        <div class="grille-statistiques">
                            <!-- Total √©tudiants -->
                            <div class="carte-metrique">
                                <strong id="tb-total-etudiants">0</strong>
                                <span>√âtudiant¬∑es inscrit¬∑es</span>
                            </div>

                            <!-- Assiduit√© sommative -->
                            <div class="carte-metrique">
                                <strong id="tb-assiduite-moyenne">‚Äî</strong>
                                <span>Assiduit√© moyenne</span>
                            </div>

                            <!-- Compl√©tion sommative -->
                            <div class="carte-metrique">
                                <strong id="tb-completion-moyenne">‚Äî</strong>
                                <span>Compl√©tion moyenne</span>
                            </div>

                            <!-- Performance alternative (3 derniers) -->
                            <div class="carte-metrique">
                                <strong id="tb-performance-moyenne">‚Äî</strong>
                                <span>Performance (3 derniers)</span>
                            </div>

                            <!-- Interventions requises -->
                            <div class="carte-metrique">
                                <strong id="tb-interventions-requises">0</strong>
                                <span>√âl√®ves √† risque</span>
                            </div>
                        </div>
                    </div>

                    <!-- ========== RISQUE D'√âCHEC ========== -->
                    <div class="carte">
                        <h3 style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Risque d'√©chec</span>
                            <span style="font-size: 1.2rem;">
                                <span class="emoji-toggle" data-target="note-risque">‚ÑπÔ∏è</span>
                            </span>
                        </h3>

                        <!-- Carte Note -->
                        <div id="note-risque" class="carte-info-toggle carte-info-note" style="display: none;">
                            <strong>Note :</strong> Le risque d'√©chec est calcul√© √† partir des indices A-C-P (Assiduit√©, Compl√©tion, Performance). Les risques faibles regroupent les niveaux minimal, faible et mod√©r√©, indiquant une situation stable.
                        </div>

                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <!-- Risques faibles combin√©s -->
                            <div
                                style="background: var(--alerte-fond-succes); padding: 15px; border-radius: 8px; border: 2px solid var(--btn-confirmer);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Risques faibles</span>
                                    <strong id="tb-risque-faibles"
                                        style="font-size: 1.8rem; color: var(--btn-confirmer);">0</strong>
                                </div>
                            </div>

                            <!-- Risque √©lev√© -->
                            <div
                                style="background: #fffbf0; padding: 15px; border-radius: 8px; border: 2px solid var(--risque-eleve);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Risque √©lev√©</span>
                                    <strong id="tb-risque-eleve"
                                        style="font-size: 1.8rem; color: var(--risque-eleve);">0</strong>
                                </div>
                            </div>

                            <!-- Risque tr√®s √©lev√© -->
                            <div
                                style="background: #fff8f0; padding: 15px; border-radius: 8px; border: 2px solid var(--risque-tres-eleve);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Risque tr√®s √©lev√©</span>
                                    <strong id="tb-risque-tres-eleve"
                                        style="font-size: 1.8rem; color: var(--risque-tres-eleve);">0</strong>
                                </div>
                            </div>

                            <!-- Risque critique -->
                            <div
                                style="background: #fff5f5; padding: 15px; border-radius: 8px; border: 2px solid var(--risque-critique);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Risque critique</span>
                                    <strong id="tb-risque-critique"
                                        style="font-size: 1.8rem; color: var(--risque-critique);">0</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ========== DISTRIBUTION DES PATTERNS ========== -->
                    <div class="carte">
                        <h3 style="display: flex; justify-content: space-between; align-items: center;">
                            <span>R√©partition des patterns d'apprentissage</span>
                            <span style="font-size: 1.2rem;">
                                <span class="emoji-toggle" data-target="note-patterns">‚ÑπÔ∏è</span>
                            </span>
                        </h3>

                        <!-- Carte Note -->
                        <div id="note-patterns" class="carte-info-toggle carte-info-note" style="display: none;">
                            <strong>Note :</strong> Les patterns identifient les trajectoires d'apprentissage selon l'√©volution des indices A-C-P. Une progression stable indique une am√©lioration constante, tandis que les blocages signalent des difficult√©s n√©cessitant un accompagnement cibl√©.
                        </div>

                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <!-- Stable -->
                            <div style="background: var(--alerte-fond-succes); padding: 15px; border-radius: 8px; border: 2px solid var(--btn-confirmer);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Progression stable</span>
                                    <strong id="tb-pattern-stable"
                                        style="font-size: 1.8rem; color: var(--btn-confirmer);">0</strong>
                                </div>
                                <div
                                    style="margin-top: 8px; background: white; height: 8px; border-radius: 4px; overflow: hidden;">
                                    <div id="tb-barre-stable"
                                        style="height: 100%; background: var(--btn-confirmer); width: 0%;"></div>
                                </div>
                            </div>

                            <!-- D√©fi sp√©cifique -->
                            <div style="background: #f3eeff; padding: 15px; border-radius: 8px; border: 2px solid var(--btn-modifier);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">D√©fi sp√©cifique</span>
                                    <strong id="tb-pattern-defi"
                                        style="font-size: 1.8rem; color: var(--btn-modifier);">0</strong>
                                </div>
                                <div
                                    style="margin-top: 8px; background: white; height: 8px; border-radius: 4px; overflow: hidden;">
                                    <div id="tb-barre-defi"
                                        style="height: 100%; background: var(--btn-modifier); width: 0%;"></div>
                                </div>
                            </div>

                            <!-- Blocage √©mergent -->
                            <div style="background: #fffbea; padding: 15px; border-radius: 8px; border: 2px solid var(--risque-modere);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Blocage √©mergent</span>
                                    <strong id="tb-pattern-emergent"
                                        style="font-size: 1.8rem; color: var(--risque-modere);">0</strong>
                                </div>
                                <div
                                    style="margin-top: 8px; background: white; height: 8px; border-radius: 4px; overflow: hidden;">
                                    <div id="tb-barre-emergent"
                                        style="height: 100%; background: var(--risque-modere); width: 0%;"></div>
                                </div>
                            </div>

                            <!-- Blocage critique -->
                            <div style="background: var(--alerte-fond-attention); padding: 15px; border-radius: 8px; border: 2px solid var(--btn-annuler);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Blocage critique</span>
                                    <strong id="tb-pattern-critique"
                                        style="font-size: 1.8rem; color: var(--btn-annuler);">0</strong>
                                </div>
                                <div
                                    style="margin-top: 8px; background: white; height: 8px; border-radius: 4px; overflow: hidden;">
                                    <div id="tb-barre-critique"
                                        style="height: 100%; background: var(--btn-annuler); width: 0%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ========== SYST√àME R√ÄI ========== -->
                    <div class="carte">
                        <h3 style="display: flex; justify-content: space-between; align-items: center;">
                            <span>Syst√®me de R√©ponse √† l'intervention (R√†I)</span>
                            <span style="font-size: 1.2rem;">
                                <span class="emoji-toggle" data-target="note-rai">‚ÑπÔ∏è</span>
                            </span>
                        </h3>

                        <!-- Carte Note -->
                        <div id="note-rai" class="carte-info-toggle carte-info-note" style="display: none;">
                            <strong>Note :</strong> Le syst√®me R√†I r√©partit les √©tudiants en 3 niveaux d'intervention selon leur risque d'√©chec. Niveau 1 (vert) : suivi r√©gulier suffisant. Niveau 2 (violet) : interventions cibl√©es recommand√©es. Niveau 3 (terracotta) : interventions intensives n√©cessaires.
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <!-- Niveau 1 -->
                            <div style="background: var(--alerte-fond-succes); padding: 15px; border-radius: 8px; border: 2px solid var(--btn-confirmer);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Niveau 1</span>
                                    <strong id="tb-rai-niveau1-pct"
                                            style="font-size: 1.8rem; color: var(--btn-confirmer);">0%</strong>
                                </div>
                            </div>

                            <!-- Niveau 2 -->
                            <div style="background: #f3eeff; padding: 15px; border-radius: 8px; border: 2px solid var(--btn-modifier);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Niveau 2</span>
                                    <strong id="tb-rai-niveau2-pct"
                                            style="font-size: 1.8rem; color: var(--btn-modifier);">0%</strong>
                                </div>
                            </div>

                            <!-- Niveau 3 -->
                            <div style="background: var(--alerte-fond-attention); padding: 15px; border-radius: 8px; border: 2px solid var(--btn-annuler);">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <span style="font-size: 0.9rem; color: #666;">Niveau 3</span>
                                    <strong id="tb-rai-niveau3-pct"
                                            style="font-size: 1.8rem; color: var(--btn-annuler);">0%</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ========== RACCOURCIS RAPIDES ========== -->
                    <div class="carte">
                        <h3>Raccourcis rapides</h3>

                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                            <!-- Voir la liste compl√®te -->
                            <button onclick="afficherSousSection('tableau-bord-liste')" style="padding: 20px; background: white; border: 2px solid var(--bleu-principal); 
                               border-radius: 8px; cursor: pointer; text-align: left; transition: all 0.2s;"
                                onmouseover="this.style.background='var(--bleu-tres-pale)'"
                                onmouseout="this.style.background='white'">
                                <div style="color: var(--bleu-principal); font-size: 1.5rem; margin-bottom: 8px;">
                                </div>
                                <div style="font-weight: 600; color: var(--bleu-principal); margin-bottom: 5px;">
                                    Liste compl√®te
                                </div>
                                <div style="font-size: 0.85rem; color: #666;">
                                    Consulter tous les √©tudiants avec filtres et recherche
                                </div>
                            </button>

                            <!-- Saisir pr√©sences -->
                            <button onclick="afficherSection('presences')" style="padding: 20px; background: white; border: 2px solid var(--bleu-principal); 
                               border-radius: 8px; cursor: pointer; text-align: left; transition: all 0.2s;"
                                onmouseover="this.style.background='var(--bleu-tres-pale)'"
                                onmouseout="this.style.background='white'">
                                <div style="color: var(--bleu-principal); font-size: 1.5rem; margin-bottom: 8px;">
                                </div>
                                <div style="font-weight: 600; color: var(--bleu-principal); margin-bottom: 5px;">
                                    Saisir pr√©sences
                                </div>
                                <div style="font-size: 0.85rem; color: #666;">
                                    Enregistrer l'assiduit√© au cours d'aujourd'hui
                                </div>
                            </button>

                            <!-- √âvaluer productions -->
                            <button onclick="afficherSection('evaluations')" style="padding: 20px; background: white; border: 2px solid var(--bleu-principal); 
                               border-radius: 8px; cursor: pointer; text-align: left; transition: all 0.2s;"
                                onmouseover="this.style.background='var(--bleu-tres-pale)'"
                                onmouseout="this.style.background='white'">
                                <div style="color: var(--bleu-principal); font-size: 1.5rem; margin-bottom: 8px;">üìù
                                </div>
                                <div style="font-weight: 600; color: var(--bleu-principal); margin-bottom: 5px;">
                                    √âvaluer productions
                                </div>
                                <div style="font-size: 0.85rem; color: #666;">
                                    Corriger et √©valuer les artefacts du portfolio
                                </div>
                            </button>
                        </div>
                    </div>

                </div>
                <!-- FIN sous-section tableau-bord-apercu -->

                <!-- Sous-section: Liste des individus -->
                <div id="tableau-bord-liste" class="sous-section">
                    <h2>Liste des √©tudiant¬∑es</h2>
                    <p class="text-muted">Consultation de la liste compl√®te et acc√®s aux portfolios individuels</p>

                    <div class="carte">
                        <h3>üë• √âtudiant¬∑es inscrit¬∑es
                            <span id="compteur-tableau-bord-liste"
                                style="color: #666; font-size: 0.9rem; font-weight: normal;">
                                (0 √©tudiant¬∑e)
                            </span>
                        </h3>

                        <!-- ZONE INFO: Lien vers configuration -->
                        <div style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px;
                margin-bottom: 20px; border-left: 4px solid var(--bleu-principal);">
                            <p style="margin: 0; color: var(--bleu-moyen);">
                                <strong>Pour ajouter, modifier ou supprimer des √©tudiants :</strong>
                                Allez dans <strong>R√©glages ‚Ä∫ Groupe</strong>
                            </p>
                        </div>

                        <!-- FILTRAGE ET RECHERCHE -->
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div class="groupe-form">
                                    <label for="filtre-groupe-liste">Groupe</label>
                                    <select id="filtre-groupe-liste" class="controle-form"
                                        onchange="afficherListeEtudiantsConsultation()">
                                        <option value="">Tous les groupes</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label for="filtre-programme-liste">Programme</label>
                                    <select id="filtre-programme-liste" class="controle-form"
                                        onchange="afficherListeEtudiantsConsultation()">
                                        <option value="">Tous les programmes</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label for="filtre-statut-liste">Statut</label>
                                    <select id="filtre-statut-liste" class="controle-form"
                                        onchange="afficherListeEtudiantsConsultation()">
                                        <option value="actifs">Actifs seulement</option>
                                        <option value="tous">Tous</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label for="recherche-nom-liste">Recherche (nom/pr√©nom)</label>
                                    <input type="text" id="recherche-nom-liste" class="controle-form"
                                        placeholder="Rechercher..." oninput="afficherListeEtudiantsConsultation()">
                                </div>
                            </div>
                        </div>

                        <!-- TABLEAU DES √âTUDIANTS -->
                        <div id="tableEtudiantsListe"
                            style="overflow-x: auto; border: 1px solid #ddd; border-radius: 4px;">
                            <table class="tableau" style="width: 100%; border-collapse: collapse; background: white;">
                                <thead style="background: var(--bleu-moyen); color: white;">
                                    <tr>
                                        <th style="padding: 12px; text-align: left; width: 100px;">DA</th>
                                        <th style="padding: 12px; text-align: center; width: 80px;">Groupe</th>
                                        <th style="padding: 12px; text-align: left;">Nom</th>
                                        <th style="padding: 12px; text-align: left;">Pr√©nom</th>
                                        <th style="padding: 12px; text-align: center; width: 100px;">Code prog.</th>
                                        <th style="padding: 12px; text-align: left;">Nom du programme</th>
                                        <th style="padding: 12px; text-align: center; width: 60px;">SA</th>
                                        <th style="padding: 12px; text-align: center; width: 60px;">CAF</th>
                                        <th style="padding: 12px; text-align: center; width: 100px;">
                                            Assiduit√©<br>
                                            <span style="font-weight: normal; font-size: 0.8rem;">(indice A)</span>
                                        </th>
                                        <th style="padding: 12px; text-align: center; width: 100px;">
                                            Compl√©tion<br>
                                            <span style="font-weight: normal; font-size: 0.8rem;">(indice C)</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="tbody-tableau-bord-liste">
                                    <!-- G√©n√©r√© dynamiquement par le module JS -->
                                </tbody>
                            </table>
                        </div>

                        <!-- MESSAGE SI AUCUN √âTUDIANT -->
                        <div id="message-aucun-etudiant" style="display: none; text-align: center; padding: 40px; 
                background: #f8f9fa; border-radius: 8px; color: #666;">
                            <p style="font-size: 1.1rem; margin-bottom: 10px;">üì≠ Aucun¬∑e √©tudiant¬∑e trouv√©¬∑e</p>
                            <p style="font-size: 0.9rem; margin-bottom: 15px;">
                                <span id="message-filtre-actif">
                                    Aucun r√©sultat avec les filtres actuels.
                                </span>
                                <span id="message-liste-vide" style="display: none;">
                                    Allez dans <strong>R√©glages ‚Ä∫ Groupe</strong> pour ajouter des √©tudiant¬∑es
                                </span>
                            </p>
                            <button onclick="resetFiltresListe()" id="btn-reset-filtres" class="btn btn-annuler">
                                R√©initialiser les filtres
                            </button>
                        </div>

                    </div><!-- FIN carte -->
                </div><!-- FIN sous-section tableau-bord-liste -->

                <!-- Sous-section: Profil -->
                <div id="tableau-bord-profil" class="sous-section">
                    <div id="contenuProfilEtudiant">
                        <div class="carte">
                            <p class="text-muted">S√©lectionnez un¬∑e √©tudiant¬∑e depuis la liste pour voir son profil.</p>
                        </div>
                    </div>
                </div><!-- FIN sous-section tableau-bord-profil -->

            </section>
            <!-- FIN section-tableau-bord -->

            <!-- ===================================
                 SECTION: PR√âSENCES
                 =================================== -->
            <section id="section-presences" class="section">

                <!-- Sous-section: Aper√ßu -->
                <div id="presences-apercu" class="sous-section">
                    <div class="carte">
                        <h3>Aper√ßu des pr√©sences</h3>
                        <p>Vue d'ensemble des pr√©sences.</p>
                        <div class="badge-info">Section: presences</div>
                        <div class="badge-info">Sous-section: apercu</div>
                    </div>
                </div>

                <!-- Sous-section: Vue calendaire -->
                <div id="presences-calendrier" class="sous-section">
                    <div class="carte">
                        <h3>Vue calendaire</h3>
                        <div id="conteneur-calendrier">
                            [Le calendrier sera g√©n√©r√© ici]
                        </div>
                    </div>
                </div>

                <!-- Sous-section: Saisie -->
                <div id="presences-saisie" class="sous-section">
                    <h2>Enregistrement quotidien</h2>
                    <p class="text-muted">Enregistrer les pr√©sences pour une s√©ance</p>

                    <!-- Avertissement si format non configur√© -->
                    <div id="alerteFormatHoraire" class="alerte alerte-attention" style="display: none;">
                        <h4>‚ÑπÔ∏è Configuration requise</h4>
                        <p>
                            Le format horaire n'est pas configur√©. La dur√©e par d√©faut est fix√©e √† <strong>2h par
                                s√©ance</strong>.
                            <br>Pour d√©finir le format exact (2√ó2h ou 1√ó4h), veuillez configurer l'horaire dans
                            <a href="#"
                                onclick="afficherSection('reglages'); afficherSousSection('reglages-horaire'); return false;"
                                style="text-decoration: underline; font-weight: 600;">R√©glages >
                                Horaire</a>.
                        </p>
                    </div>

                    <!-- En-t√™te de la s√©ance -->
                    <div id="enteteDateSeance" style="display: none;">
                        <div id="texteDateSeance"></div>
                    </div>

                    <!-- Contr√¥les de saisie -->
                    <div class="carte" style="margin-bottom: 20px;">
                        <div class="grille-saisie-presences">
                            <div class="groupe-form">
                                <label for="date-cours" class="label-formulaire">Date du cours</label>
                                <div style="display: flex; gap: 8px; align-items: center;">
                                    <button id="btn-cours-precedent" onclick="allerCoursPrecedent()"
                                        class="btn btn-principal btn-compact" style="flex-shrink: 0;">
                                        ‚Üê Pr√©c√©dent
                                    </button>
                                    <input type="date" id="date-cours" class="controle-form"
                                        onchange="initialiserSaisiePresences(); mettreAJourBoutonsNavigation();"
                                        style="flex: 1;">
                                    <button id="btn-cours-suivant" onclick="allerCoursSuivant()"
                                        class="btn btn-principal btn-compact" style="flex-shrink: 0;">
                                        Suivant ‚Üí
                                    </button>
                                </div>
                            </div>
                            <div class="groupe-form">
                                <label for="selectGroupePresences" class="label-formulaire">Filtrer par groupe</label>
                                <select id="selectGroupePresences" class="controle-form"
                                    onchange="initialiserSaisiePresences()">
                                    <option value="">Tous les groupes</option>
                                </select>
                            </div>
                            <div class="groupe-form">
                                <label for="selectTriPresences" class="label-formulaire">Trier par</label>
                                <select id="selectTriPresences" class="controle-form"
                                    onchange="initialiserSaisiePresences()">
                                    <option value="nom">Ordre alphab√©tique (nom)</option>
                                    <option value="assiduite-croissant">Assiduit√© croissante (‚Üë)</option>
                                    <option value="assiduite-decroissant">Assiduit√© d√©croissante (‚Üì)</option>
                                </select>
                            </div>

                        </div>

                        <!-- Tableau de saisie -->
                        <div class="carte">
                            <h3>
                                Liste des √©tudiant¬∑es
                                <span id="nbEtudiantsPresences"
                                    style="font-weight: normal; color: var(--bleu-moyen); font-size: 0.9rem;">
                                    (0 √©tudiant¬∑e)
                                </span>
                            </h3>

                            <table class="tableau">
                                <thead>
                                    <tr>
                                        <th style="width: 100px;">DA</th>
                                        <th>Pr√©nom</th>
                                        <th>Nom</th>
                                        <th id="colonneHeuresTitre" style="width: 120px; text-align: center;">
                                            Heures (par d√©faut: 2h)
                                            <div
                                                style="margin-top: 8px; display: flex; flex-direction: column; gap: 4px; align-items: center;">
                                                <button id="btn-tous-presents" onclick="remplirTousPresents()"
                                                    class="btn btn-principal btn-compact"
                                                    style="font-weight: 600;">
                                                    Tous 2h
                                                </button>
                                                <button id="btn-reinit-saisie" onclick="reinitialiserSaisie()"
                                                    class="btn btn-annuler btn-compact"
                                                    title="R√©initialiser la saisie">
                                                    R√©initialiser
                                                </button>
                                            </div>
                                        </th>
                                        <th style="width: 200px;">Notes</th>
                                        <th style="width: 100px;">Total heures</th>
                                        <th style="width: 100px;">Assiduit√©</th>
                                    </tr>
                                </thead>
                                <tbody id="tbody-saisie-presences">
                                    <tr>
                                        <td colspan="7" style="text-align: center; padding: 30px; color: #999;">
                                            S√©lectionnez une date pour afficher le tableau de saisie
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Boutons d'action -->
                        <div class="btn-groupe" style="margin-top: 20px;">
                            <button class="btn btn-confirmer" onclick="enregistrerPresences()">
                                Enregistrer les pr√©sences
                            </button>
                            <button class="btn btn-annuler" onclick="afficherSousSection('presences-apercu')">
                                Annuler
                            </button>
                        </div>
                    </div>


            </section>

            <!-- ===============================
     PARTIE HTML : Structure de la sous-section
     √Ä int√©grer dans index.html
     =============================== -->

            <div id="evaluations-liste" class="sous-section">
                <h2>Historique et filtres</h2>
                <p class="description-section">Vue d'ensemble des √©valuations et calcul automatique des indices C et
                    P</p>

                <!-- Statistiques globales -->
                <div class="conteneur-statistiques">
                    <div class="carte-statistique">
                        <div class="valeur" id="stat-etudiants-evalues">0/0</div>
                        <div class="label">√âtudiants √©valu√©s</div>
                    </div>
                    <div class="carte-statistique">
                        <div class="valeur" id="stat-artefacts-completes">0/0</div>
                        <div class="label">Artefacts compl√©t√©s</div>
                    </div>
                    <div class="carte-statistique">
                        <div class="valeur" id="stat-moyenne-groupe">‚Äî</div>
                        <div class="label">Moyenne du groupe</div>
                    </div>
                </div>

                <!-- Filtres -->
                <div class="carte">
                    <h3>üîç Filtres</h3>
                    <div class="grille-filtres">
                        <div class="groupe-form">
                            <label for="filtre-groupe-eval">Filtrer par groupe</label>
                            <select id="filtre-groupe-eval" class="controle-form" onchange="filtrerListeEvaluations()">
                                <option value="">Tous les groupes</option>
                            </select>
                        </div>
                        <div class="groupe-form">
                            <label for="filtre-production-eval">Filtrer par production</label>
                            <select id="filtre-production-eval" class="controle-form"
                                onchange="filtrerListeEvaluations()">
                                <option value="">Toutes les productions</option>
                            </select>
                        </div>
                        <div class="groupe-form">
                            <label for="filtre-statut-eval">Filtrer par statut</label>
                            <select id="filtre-statut-eval" class="controle-form" onchange="filtrerListeEvaluations()">
                                <option value="">Tous</option>
                                <option value="evalues">√âvalu√©s seulement</option>
                                <option value="non-evalues">Non √©valu√©s</option>
                                <option value="risque">√Ä risque</option>
                            </select>
                        </div>
                        <div class="groupe-form">
                            <label for="tri-evaluations">Trier</label>
                            <select id="tri-evaluations" class="controle-form" onchange="trierListeEvaluations()">
                                <option value="nom-asc">Par ordre alphab√©tique de nom (A‚ÜíZ)</option>
                                <option value="assiduite-asc">Par assiduit√© croissante (‚Üë)</option>
                                <option value="assiduite-desc">Par assiduit√© d√©croissante (‚Üì)</option>
                                <option value="completion-asc">Par compl√©tion croissante (‚Üë)</option>
                                <option value="completion-desc">Par compl√©tion d√©croissante (‚Üì)</option>
                                <option value="performance-asc">Par performance croissante (‚Üë)</option>
                                <option value="performance-desc">Par performance d√©croissante (‚Üì)</option>
                                <option value="risque-asc">Par risque croissant (‚Üë)</option>
                                <option value="risque-desc">Par risque d√©croissant (‚Üì)</option>
                            </select>
                        </div>
                        <button class="btn btn-principal btn-compact" onclick="reinitialiserFiltresEval()"
                            style="white-space: nowrap;">
                            ‚Üª R√©init.
                        </button>
                    </div>
                </div>

                <!-- Liste des √©tudiants avec √©valuations -->
                <div id="conteneur-evaluations-accordeon">
                    <!-- Sera rempli dynamiquement par JavaScript -->
                </div>

                <!-- Message si aucune √©valuation -->
                <div id="message-aucune-evaluation" class="carte" style="display:none;">
                    <p style="text-align:center; color: var(--bleu-leger);">
                        <em>Aucune √©valuation trouv√©e selon les filtres s√©lectionn√©s</em>
                    </p>
                </div>
            </div>



            <!-- Sous-section: √âvaluer (formulaire d'√©valuation) -->
            <div id="evaluations-individuelles" class="sous-section">
                <h2>√âvaluation des productions et r√©troaction diff√©renci√©e automatique</h2>
                <p class="text-muted">√âvaluation d√©taill√©e selon les crit√®res et les √©chelles de performance</p>

                <!-- Conteneur principal en Layout L modifi√© -->
                <div class="carte" style="margin-bottom: 20px;">

                    <!-- PARTIE HAUTE : 2 colonnes -->
                    <div class="grille-evaluation-principale" style="margin-bottom: 20px;">

                        <!-- COLONNE GAUCHE : PARAM√àTRES DE L'√âVALUATION -->
                        <div style="padding: 15px; background: var(--gris-tres-clair); border-radius: 8px;">
                            <!-- Boutons de gestion des √©valuations -->
                            <div class="groupe-boutons-colonne" style="margin-bottom: 15px;">
                                <div class="groupe-boutons-ligne">
                                    <button class="btn btn-modifier btn-tres-compact btn-largeur-auto" onclick="ouvrirBanqueEvaluations()"
                                        title="Parcourir les √©valuations sauvegard√©es et en charger une">
                                        Charger
                                    </button>

                                    <button class="btn btn-modifier btn-tres-compact btn-largeur-auto" onclick="ouvrirModalJetonReprise()"
                                        title="Appliquer un jeton de reprise pour cr√©er une nouvelle version d'une √©valuation">
                                        Jeton
                                    </button>
                                </div>

                                <div class="groupe-boutons-ligne">
                                    <button class="btn btn-modifier btn-tres-compact btn-largeur-auto" onclick="afficherModalReparationEvaluations()"
                                        title="R√©parer les √©valuations avec crit√®res manquants">
                                        R√©parer
                                    </button>
                                </div>

                                <div class="groupe-boutons-ligne">
                                    <button class="btn btn-principal btn-tres-compact btn-largeur-auto" onclick="sauvegarderEvaluation()"
                                        title="Sauvegarder l'√©valuation">
                                        Sauvegarder
                                    </button>

                                    <button class="btn btn-annuler btn-tres-compact btn-largeur-auto" onclick="nouvelleEvaluation()"
                                        title="R√©initialiser tous les param√®tres et commencer une nouvelle √©valuation">
                                        R√©initialiser
                                    </button>
                                </div>
                            </div>

                            <hr class="separateur-horizontal">

                            <div class="indicateur-verrouillage" style="margin-bottom: 15px;">
                                <h4 style="margin: 0;">Param√®tres de l'√©valuation</h4>

                                <!-- Indicateur de verrouillage (style productions) -->
                                <div id="indicateurVerrouillageEval" style="display: none;">
                                    <span id="iconeStatutVerrouillageEval" onclick="basculerVerrouillageEvaluationCourante()"
                                        style="font-size: 1rem; cursor: pointer; user-select: none;"
                                        title="Cliquez pour verrouiller/d√©verrouiller">‚úÖ</span>
                                    <span id="iconeVerrouEval" onclick="basculerVerrouillageEvaluationCourante()"
                                        style="font-size: 1rem; cursor: pointer; user-select: none; color: #999;"
                                        title="Cliquez pour verrouiller/d√©verrouiller">üîí</span>
                                </div>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 12px;">
                                <label class="label-formulaire">Groupe :</label>
                                <select id="selectGroupeEval" class="controle-form"
                                    onchange="filtrerEtudiantsParGroupe()">
                                    <option value="">Tous les groupes</option>
                                </select>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 12px;">
                                <label class="label-formulaire">√âtudiant¬∑e :</label>
                                <select id="selectEtudiantEval" class="controle-form"
                                    onchange="chargerEvaluationsEtudiant()">
                                    <option value="">-- Choisir un¬∑e √©tudiant¬∑e --</option>
                                </select>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 12px;">
                                <label class="label-formulaire">Production √©tudiante :</label>
                                <select id="selectProduction1" class="controle-form" onchange="chargerProduction(1)">
                                    <option value="">-- Choisir une production --</option>
                                </select>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 12px;">
                                <label class="label-formulaire">Grille d'√©valuation :</label>
                                <select id="selectGrille1" class="controle-form" onchange="chargerGrilleSelectionnee()">
                                    <option value="">-- Choisir une grille --</option>
                                </select>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 12px;">
                                <label class="label-formulaire">√âchelle de performance :</label>
                                <select id="selectEchelle1" class="controle-form"
                                    onchange="changerEchelleEvaluation(1)">
                                    <option value="">-- Choisir une √©chelle --</option>
                                </select>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 12px;">
                                <label class="label-formulaire">Cartouche de r√©troaction :</label>
                                <select id="selectCartoucheEval" class="controle-form"
                                    onchange="cartoucheSelectionnee()">
                                    <option value="">-- Choisir une cartouche --</option>
                                </select>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 12px;">
                                <label class="label-formulaire">Statut de remise :</label>
                                <select id="remiseProduction1" class="controle-form" onchange="changerStatutRemise(1)">
                                    <option value="non-remis">Non remis</option>
                                    <option value="remis">Remis</option>
                                    <option value="en-retard">En retard</option>
                                </select>
                            </div>

                            <!-- NOTE ET NIVEAU -->
                            <div id="noteFinale1" class="boite-note-finale">
                                <div class="label">Note finale</div>
                                <div class="valeur">
                                    <span id="noteProduction1">0.0</span>
                                </div>
                                <div class="niveau">
                                    Niveau: <span id="niveauProduction1">--</span>
                                </div>
                            </div>
                        </div>

                        <!-- COLONNE DROITE : CRIT√àRES AVEC R√âTROACTIONS -->
                        <div class="zone-criteres">
                            <h4>√âvaluation et pr√©visualisation de la r√©troaction</h4>

                            <div id="listeCriteresGrille1" class="conteneur-liste">
                                <p style="color: #999; font-style: italic; font-size: 0.85rem;">
                                    S√©lectionnez une grille et une cartouche
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- PARTIE BASSE : R√âTROACTION FINALE -->
                    <div class="zone-retroaction">
                        <div class="zone-retroaction-header">
                            <h4>R√©troaction finale</h4>
                        </div>

                        <!-- Options √† inclure (TOUTES COCH√âES PAR D√âFAUT) -->
                        <div class="grille-checkboxes" style="margin-bottom: 15px;">
                            <label style="font-size: 0.85rem; cursor: pointer;">
                                <input type="checkbox" id="afficherDescription1" onchange="genererRetroaction(1)"
                                    checked>
                                Description
                            </label>
                            <label style="font-size: 0.85rem; cursor: pointer;">
                                <input type="checkbox" id="afficherObjectif1" onchange="genererRetroaction(1)" checked>
                                Objectif
                            </label>
                            <label style="font-size: 0.85rem; cursor: pointer;">
                                <input type="checkbox" id="afficherTache1" onchange="genererRetroaction(1)" checked>
                                T√¢che
                            </label>
                            <label style="font-size: 0.85rem; cursor: pointer;">
                                <input type="checkbox" id="afficherAdresse1" onchange="genererRetroaction(1)" checked>
                                Adresse
                            </label>
                            <label style="font-size: 0.85rem; cursor: pointer;">
                                <input type="checkbox" id="afficherContexte1" onchange="genererRetroaction(1)" checked>
                                Contexte
                            </label>
                        </div>

                        <!-- Zone de texte pour la r√©troaction finale -->
                        <textarea id="retroactionFinale1" class="controle-form" rows="12"
                            placeholder="La r√©troaction sera g√©n√©r√©e automatiquement ici selon vos √©valuations et les options coch√©es. Vous pouvez modifier le texte avant de le copier."
                            style="width: 100%; height: 200px; padding: 12px; border-radius: 5px;
    border: 1px solid #ddd; font-family: inherit; resize: vertical;
    font-size: 0.85rem; line-height: 1.5; background: white;">
</textarea>

                        <button class="btn btn-confirmer btn-compact" onclick="copierRetroaction(1)"
                            style="margin-top: 10px;">
                            Copier dans le presse-papier
                        </button>
                    </div>

                </div><!-- fin carte du layout √©valuation -->

            </div><!-- fin sous-section evaluations-individuelles -->

            <!-- MODAL: Banque d'√©valuations (Charger une √©valuation) -->
            <div id="modalBanqueEvaluations" class="modal-overlay">
                <div class="modal-contenu modal-large">
                    <button onclick="fermerBanqueEvaluations()" class="modal-fermer">‚úï</button>

                    <h2 class="modal-titre">Banque d'√©valuations</h2>
                    <p style="color: #666; margin-bottom: 20px;">Parcourez toutes les √©valuations sauvegard√©es et s√©lectionnez-en une pour la charger dans le formulaire.</p>

                    <!-- Filtres -->
                    <div class="grille-4-colonnes" style="margin-bottom: 20px; padding: 15px; background: var(--gris-tres-clair); border-radius: 8px;">
                        <div>
                            <label class="label-formulaire">Groupe</label>
                            <select id="filtreBanqueGroupe" onchange="filtrerBanqueEvaluations()" class="controle-form">
                                <option value="">Tous les groupes</option>
                            </select>
                        </div>
                        <div>
                            <label class="label-formulaire">√âtudiant</label>
                            <select id="filtreBanqueEtudiant" onchange="filtrerBanqueEvaluations()" class="controle-form">
                                <option value="">Tous les √©tudiants</option>
                            </select>
                        </div>
                        <div>
                            <label class="label-formulaire">Production</label>
                            <select id="filtreBanqueProduction" onchange="filtrerBanqueEvaluations()" class="controle-form">
                                <option value="">Toutes les productions</option>
                            </select>
                        </div>
                        <div>
                            <label class="label-formulaire">Trier par</label>
                            <select id="triBanqueEvaluation" onchange="filtrerBanqueEvaluations()" class="controle-form">
                                <option value="date-desc">Date (plus r√©cent)</option>
                                <option value="date-asc">Date (plus ancien)</option>
                                <option value="groupe-asc">Groupe (A-Z)</option>
                                <option value="etudiant-asc">√âtudiant (A-Z)</option>
                                <option value="production-asc">Production (A-Z)</option>
                                <option value="note-desc">Note (plus haute)</option>
                                <option value="note-asc">Note (plus basse)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Actions globales -->
                    <div style="display: flex; gap: 8px; margin-bottom: 20px;">
                        <button class="btn btn-principal btn-compact" onclick="verrouillerToutesEvaluations(true)">
                            Verrouiller tout
                        </button>
                        <button class="btn btn-annuler btn-compact" onclick="verrouillerToutesEvaluations(false)">
                            D√©verrouiller tout
                        </button>
                    </div>

                    <!-- Liste des √©valuations -->
                    <div id="listeBanqueEvaluations" style="max-height: 500px; overflow-y: auto;">
                        <!-- G√©n√©r√© par JS -->
                    </div>
                </div>
            </div>

            <!-- MODAL: Appliquer un jeton de reprise -->
            <div id="modalJetonReprise" class="modal-overlay">
                <div class="modal-contenu">
                    <button onclick="fermerModalJetonReprise()" class="modal-fermer">‚úï</button>

                    <h2 class="modal-titre">Appliquer un jeton de reprise</h2>
                    <p style="color: #666; margin-bottom: 20px;">
                        Un jeton de reprise permet √† un √©tudiant de refaire une √©valuation. Le syst√®me cr√©era un duplicata de l'√©valuation s√©lectionn√©e,
                        conservera l'ancienne version pour r√©f√©rence, et comptabilisera uniquement la nouvelle √©valuation dans les indices.
                    </p>

                    <!-- Filtres et tri -->
                    <div class="grille-3-colonnes" style="margin-bottom: 20px; padding: 15px; background: var(--gris-tres-clair); border-radius: 8px;">
                        <div>
                            <label class="label-formulaire">√âtudiant</label>
                            <select id="filtreJetonEtudiant" onchange="filtrerListeJetons()" class="controle-form">
                                <option value="">Tous les √©tudiants</option>
                            </select>
                        </div>
                        <div>
                            <label class="label-formulaire">Production</label>
                            <select id="filtreJetonProduction" onchange="filtrerListeJetons()" class="controle-form">
                                <option value="">Toutes les productions</option>
                            </select>
                        </div>
                        <div>
                            <label class="label-formulaire">Trier par</label>
                            <select id="triJetonEvaluation" onchange="filtrerListeJetons()" class="controle-form">
                                <option value="date-desc">Date (plus r√©cent)</option>
                                <option value="date-asc">Date (plus ancien)</option>
                                <option value="etudiant-asc">√âtudiant (A-Z)</option>
                                <option value="production-asc">Production (A-Z)</option>
                                <option value="note-desc">Note (plus haute)</option>
                                <option value="note-asc">Note (plus basse)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Liste des √©valuations -->
                    <div style="margin-bottom: 20px;">
                        <div id="listeJetonsEvaluations" style="max-height: 400px; overflow-y: auto;">
                            <!-- G√©n√©r√© par JS -->
                        </div>
                    </div>

                    <!-- Options du jeton -->
                    <div style="margin-bottom: 20px; padding: 15px; background: #fff3e0; border-radius: 8px; border-left: 4px solid #ff9800;">
                        <h4 style="margin-top: 0; color: #e65100;">‚ÑπÔ∏è Important</h4>
                        <ul style="margin: 10px 0; padding-left: 20px; color: #666;">
                            <li>L'√©valuation originale sera marqu√©e comme "remplac√©e" et ne comptera plus dans les indices</li>
                            <li>Une nouvelle √©valuation sera cr√©√©e avec les m√™mes param√®tres</li>
                            <li>Vous pourrez modifier la nouvelle √©valuation avant de la sauvegarder</li>
                            <li>Les deux versions resteront visibles dans la liste avec un lien de tra√ßabilit√©</li>
                        </ul>
                    </div>

                    <div style="text-align: right;">
                        <button class="btn btn-annuler" onclick="fermerModalJetonReprise()" style="margin-right: 10px;">
                            Annuler
                        </button>
                        <button class="btn btn-confirmer" onclick="appliquerJetonReprise()">
                            Appliquer le jeton de reprise
                        </button>
                    </div>
                </div>
            </div>

            <!-- Modal R√©paration des √©valuations -->
            <div id="modalReparationEvaluations" class="modal-overlay">
                <div class="modal-contenu modal-compact">
                    <button onclick="fermerModalReparationEvaluations()" class="modal-fermer">‚úï</button>

                    <h2 class="modal-titre">R√©paration des √©valuations</h2>

                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--bleu-principal); font-size: 1rem; margin-bottom: 10px;">Qu'est-ce que cette fonction ?</h3>
                        <p style="color: #666; line-height: 1.6;">
                            Cette fonction permet de <strong>r√©parer automatiquement</strong> les √©valuations dont les crit√®res n'ont pas √©t√© correctement sauvegard√©s.
                            Elle extrait les niveaux (I, D, M, E) depuis la r√©troaction finale et reconstruit le tableau des crit√®res manquants.
                        </p>
                    </div>

                    <div class="alerte alerte-attention" style="margin-bottom: 25px;">
                        <h4>‚ÑπÔ∏è Quand l'utiliser ?</h4>
                        <ul style="margin: 0; padding-left: 20px; color: #666; line-height: 1.8;">
                            <li><strong>Apr√®s une migration de donn√©es</strong> depuis une ancienne version</li>
                            <li><strong>Si des √©valuations ne se chargent pas</strong> correctement lors de la modification</li>
                            <li><strong>Si vous constatez des crit√®res vides</strong> alors que la r√©troaction contient les niveaux</li>
                            <li><strong>Apr√®s un probl√®me technique</strong> ayant affect√© la sauvegarde</li>
                        </ul>
                    </div>

                    <div style="margin-bottom: 25px; padding: 15px; background: #e3f2fd; border-radius: 8px; border-left: 4px solid #2196F3;">
                        <h3 style="color: #1565c0; font-size: 1rem; margin-top: 0; margin-bottom: 10px;">Comment √ßa fonctionne ?</h3>
                        <ol style="margin: 0; padding-left: 20px; color: #666; line-height: 1.8;">
                            <li>Analyse toutes les √©valuations sauvegard√©es</li>
                            <li>D√©tecte celles avec un tableau <code>criteres</code> vide</li>
                            <li>Extrait les niveaux depuis la r√©troaction (ex: "STRUCTURE (I)")</li>
                            <li>Reconstruit automatiquement les crit√®res manquants</li>
                            <li>Sauvegarde les modifications dans le localStorage</li>
                        </ol>
                    </div>

                    <div style="margin-bottom: 25px; padding: 15px; background: #f1f8e9; border-radius: 8px; border-left: 4px solid #8bc34a;">
                        <h3 style="color: #558b2f; font-size: 1rem; margin-top: 0; margin-bottom: 10px;">‚úÖ R√©sultat attendu</h3>
                        <p style="margin: 0; color: #666; line-height: 1.6;">
                            Apr√®s la r√©paration, un rapport d√©taill√© affichera le nombre d'√©valuations r√©par√©es, ignor√©es (d√©j√† correctes) et √©chou√©es.
                            Les √©valuations r√©par√©es pourront √™tre modifi√©es normalement avec tous leurs crit√®res restaur√©s.
                        </p>
                    </div>

                    <div style="text-align: right; padding-top: 15px; border-top: 1px solid #dee2e6;">
                        <button class="btn btn-annuler" onclick="fermerModalReparationEvaluations()" style="margin-right: 10px;">
                            Annuler
                        </button>
                        <button class="btn btn-confirmer" onclick="lancerReparationEvaluations()">
                            Lancer la r√©paration
                        </button>
                    </div>
                </div>
            </div>

            </section><!-- fin section-evaluations -->

            <!-- ===================================
                 SECTION: MAT√âRIEL P√âDAGOGIQUE
                 =================================== -->
            <section id="section-materiel" class="section">

                <!-- Sous-section: Aper√ßu du mat√©riel -->
                <div id="materiel-apercu" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Vue d'ensemble</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="note-apercu">‚ÑπÔ∏è</span>
                            <span class="emoji-toggle" data-target="conseil-apercu">üí°</span>
                        </span>
                    </h2>
                    <p class="text-muted">R√©sum√© du mat√©riel p√©dagogique configur√©</p>

                    <!-- Carte Note -->
                    <div id="note-apercu" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Cette vue d'ensemble pr√©sente un r√©sum√© du mat√©riel p√©dagogique configur√© pour le cours.
                        Le mat√©riel comprend les productions (exercices formatifs et certificatifs), les grilles de crit√®res d'√©valuation,
                        les √©chelles de performance (IDME), et les cartouches de r√©troaction. Un mat√©riel bien configur√© facilite l'√©valuation
                        coh√©rente et permet le suivi longitudinal des apprentissages.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-apercu" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong> Commence par configurer la pratique de notation dans la section R√©glages, puis cr√©e tes grilles de crit√®res
                        et ton √©chelle de performance. Enfin, d√©finis les productions du cours en les associant aux grilles cr√©√©es.
                        Cette s√©quence assure une configuration coh√©rente et facilite la gestion des √©valuations.
                    </div>

                    <div class="carte">
                        <h3>Mat√©riel configur√©</h3>
                        <p><strong>Pratique de notation :</strong> <span id="stat-pratique">‚Äî</span></p>
                        <p><strong>Productions :</strong> <span id="stat-productions">‚Äî</span></p>
                        <p><strong>Grilles de crit√®res :</strong> <span id="stat-grilles">‚Äî</span></p>
                        <p><strong>√âchelles de performance :</strong> <span id="stat-echelles">‚Äî</span></p>
                        <p><strong>Cartouches de r√©troaction :</strong> <span id="stat-cartouches">‚Äî</span></p>
                    </div>
                </div>

                <!-- Sous-section: Productions -->
                <div id="materiel-productions" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Exercices formatifs et certificatifs</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="note-productions">‚ÑπÔ∏è</span>
                            <span class="emoji-toggle" data-target="conseil-productions">üí°</span>
                        </span>
                    </h2>
                    <p class="text-muted">D√©finir les √©valuations du cours et leurs pond√©rations</p>

                    <!-- Carte Note -->
                    <div id="note-productions" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les productions repr√©sentent l'ensemble des travaux que les √©tudiants doivent r√©aliser
                        durant le cours. Elles peuvent √™tre de type formatif (pour l'apprentissage) ou certificatif (pour l'√©valuation).
                        Chaque production peut √™tre associ√©e √† une grille de crit√®res et poss√®de une pond√©ration qui contribue √† la note finale.
                        Les portfolios permettent de regrouper plusieurs artefacts et de s√©lectionner automatiquement les N meilleurs selon
                        la pratique de notation configur√©e.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-productions" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong> Assure-toi que la somme des pond√©rations totalise 100%. Pour les portfolios, d√©finis d'abord le nombre d'artefacts
                        √† retenir (ex: les 3 meilleurs sur 9). Les artefacts individuels n'ont pas de pond√©ration propre, c'est le portfolio
                        conteneur qui d√©finit la pond√©ration globale. Pense √† verrouiller les productions une fois finalis√©es pour √©viter
                        les modifications accidentelles.
                    </div>

                    <!-- D√âFINITION DES √âVALUATIONS -->
                    <div class="carte">
                        <h3>üìù Productions</h3>

                        <!-- VUE D'ENSEMBLE -->
                        <div class="grille-statistiques" style="margin-bottom: 20px;">
                            <div class="carte-metrique">
                                <strong id="nombreEvaluations">0</strong>
                                <span>Productions</span>
                            </div>
                            <div class="carte-metrique">
                                <strong id="ponderationTotale">0%</strong>
                                <span>Total</span>
                                <small id="statutPonderation" style="display: block; margin-top: 5px;"></small>
                            </div>
                            <div class="carte-metrique" style="grid-column: span 2;">
                                <span id="typesEvaluations" style="font-size: 0.9rem;">
                                    Aucune production configur√©e
                                </span>
                            </div>
                        </div>

                        <!-- TABLEAU/CONTENEUR DES √âVALUATIONS -->
                        <div id="tableauEvaluationsContainer" style="margin-bottom: 20px;">
                            <p class="text-muted" id="aucuneEvaluation" style="font-style: italic;">
                                Aucune √©valuation d√©finie.
                            </p>
                        </div>

                        <!-- FORMULAIRE D'AJOUT/MODIFICATION (cach√© par d√©faut) -->
                        <div id="formulaireProduction" style="display: none; margin-top: 20px; padding: 15px; 
             background: var(--bleu-pale); border-radius: 6px;">

                            <h4 id="titreFormEvaluation" style="color: var(--bleu-principal); margin-bottom: 15px;">
                                Nouvelle production
                            </h4>

                            <!-- Ligne 1 : Tous les champs principaux sur une ligne -->
                            <div
                                style="display: grid; grid-template-columns: 1.5fr 2fr 2fr 1.5fr 100px; gap: 10px; margin-bottom: 15px;">
                                <div class="groupe-form">
                                    <label>Description</label>
                                    <input type="text" id="productionDescription" class="controle-form"
                                        placeholder="Ex: Strat√©gies">
                                </div>
                                <div class="groupe-form">
                                    <label>Titre</label>
                                    <input type="text" id="productionTitre" class="controle-form"
                                        placeholder="Ex: Analyse #1">
                                </div>
                                <div class="groupe-form">
                                    <label>Type</label>
                                    <select id="productionType" class="controle-form"
                                        onchange="gererChangementTypeProduction()">
                                        <option value="">Choisir...</option>
                                        <option value="examen">Examen</option>
                                        <option value="travail">Travail √©crit</option>
                                        <option value="quiz">Quiz/Test</option>
                                        <option value="presentation">Pr√©sentation</option>
                                        <option value="portfolio">üìÅ Portfolio (conteneur d'artefacts)</option>
                                        <option value="artefact-portfolio">Artefact d'un portfolio</option>
                                        <option value="autre">Autre</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Pond√©ration (%)</label>
                                    <input type="number" id="productionPonderation" class="controle-form" min="0"
                                        max="100" placeholder="Ex: 20">
                                </div>
                                <div class="groupe-form">
                                    <label>Grille</label>
                                    <select id="productionGrille" class="controle-form">
                                        <option value="">Aucune</option>
                                    </select>
                                </div>
                            </div>

                            <small id="msgPonderationArtefact"
                                style="display: none; padding: 10px; background: var(--bleu-pale); border-radius: 4px; color: var(--bleu-principal); font-size: 0.85rem; margin-top: 10px;">
                                Les artefacts individuels n'ont pas de pond√©ration propre. C'est le Portfolio
                                conteneur qui d√©finit la pond√©ration globale.
                            </small>

                            <!-- CHAMPS SP√âCIFIQUES AU PORTFOLIO (cach√©s par d√©faut) -->
                            <div id="champsPortfolio" style="display: none; margin-top: 20px; padding: 15px; 
                 background: var(--bleu-carte); border-radius: 6px; border: 2px solid var(--bleu-moyen);">

                                <h5 style="color: var(--bleu-principal); margin-bottom: 15px;">Configuration du
                                    portfolio</h5>

                                <!-- R√®gles du portfolio -->
                                <div
                                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                                    <div class="groupe-form">
                                        <label>Nombre d'artefacts √† retenir (note finale)</label>
                                        <input type="number" id="portfolioNombreRetenir" class="controle-form" value="3"
                                            min="1" max="10">
                                    </div>
                                    <div class="groupe-form">
                                        <label>Minimum d'artefacts √† compl√©ter</label>
                                        <input type="number" id="portfolioMinimumCompleter" class="controle-form"
                                            value="7" min="1" max="20">
                                    </div>

                                    <div class="groupe-form">
                                        <label>Nombre total d'artefacts pr√©vus</label>
                                        <input type="number" id="portfolioNombreTotal" class="controle-form" value="9"
                                            min="1" max="50">
                                        <small style="color: #666; font-size: 0.8rem;">Ex: 9 au programme</small>
                                    </div>
                                </div>

                                <p
                                    style="background: var(--bleu-tres-pale); padding: 10px; border-radius: 4px; font-size: 0.9rem;">
                                    Le portfolio inclura automatiquement tous les artefacts de type "Artefact
                                    d'un
                                    portfolio" cr√©√©s durant la session.
                                </p>
                            </div>

                            <!-- Ligne 2 : Objectif et T√¢che sur 2 colonnes -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
                                <div class="groupe-form">
                                    <label>Objectif d'apprentissage</label>
                                    <textarea id="productionObjectif" class="controle-form" rows="3"
                                        placeholder="Ex: D√©velopper les comp√©tences d'analyse..."></textarea>
                                </div>
                                <div class="groupe-form">
                                    <label>Description de la t√¢che</label>
                                    <textarea id="productionTache" class="controle-form" rows="3"
                                        placeholder="Ex: R√©diger un texte de 500 mots..."></textarea>
                                </div>
                            </div>

                            <!-- Boutons du formulaire -->
                            <div class="btn-groupe" style="justify-content: flex-end; margin-top: 15px;">
                                <button class="btn btn-annuler" onclick="annulerFormProduction()">Annuler</button>
                                <button class="btn btn-confirmer" onclick="sauvegarderProduction()">
                                    <span id="btnTexteEvaluation">Ajouter</span>
                                </button>
                            </div>

                        </div><!-- Fin du formulaireProduction -->

                        <button id="btnajouterProduction" class="btn btn-confirmer" style="margin-top: 15px;"
                            onclick="afficherFormProduction()">
                            + Ajouter une production
                        </button>

                    </div><!-- Fin de la carte -->

                </div><!--fin sous-section productions-->

                <!-- Sous-section : Grilles de crit√®res -->
                <div id="materiel-grille-criteres" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Crit√®res d'√©valuation</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="note-grilles">‚ÑπÔ∏è</span>
                            <span class="emoji-toggle" data-target="conseil-grilles">üí°</span>
                        </span>
                    </h2>
                    <p class="text-muted">Cr√©er des grilles de crit√®res r√©utilisables pour √©valuer diff√©rents types
                        de
                        productions.</p>

                    <!-- Carte Note -->
                    <div id="note-grilles" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les grilles de crit√®res d√©finissent les aspects sur lesquels les productions sont √©valu√©es.
                        Chaque crit√®re poss√®de une pond√©ration relative et peut √™tre de type holistique (jugement global), analytique
                        (points par √©l√©ment) ou algorithmique (calcul automatique). Dans le mod√®le SRPNF, les cinq crit√®res sont :
                        Structure (15%), Rigueur (20%), Plausibilit√© (10%), Nuance (25%) et Fran√ßais (30%). Les grilles peuvent √™tre
                        r√©utilis√©es pour diff√©rentes productions et verrouill√©es une fois finalis√©es.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-grilles" class="carte-info-toggle carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong> Pour le crit√®re Fran√ßais, utilise le type algorithmique avec la formule (nb_erreurs / nb_mots) √ó 100.
                        Les grilles peuvent √™tre dupliqu√©es et modifi√©es pour cr√©er des variantes adapt√©es √† diff√©rents types
                        de productions. Pense √† nommer tes grilles de fa√ßon descriptive (ex: "Grille analyse litt√©raire", "Grille dissertation").
                        La somme des pond√©rations des crit√®res doit totaliser 100%.
                    </div>

                    <!-- CARTE : GRILLES DE CRIT√àRES -->
                    <div class="carte">
                        <h3>Gestion des grilles de crit√®res d'√©valuation</h3>

                        <!-- S√©lecteur d'√©valuation -->
                        <div class="groupe-form" style="max-width: 400px; margin-bottom: 20px;">
                            <label>Cr√©er ou modifier une grille d'√©valuation :</label>
                            <select id="selectGrilleTemplate" class="controle-form" onchange="chargerGrilleTemplate()">
                                <option value="">-- Nouvelle grille --</option>
                                <option value="new">‚ûï Cr√©er une nouvelle grille</option>
                            </select>
                        </div>

                        <!-- Nom de la grille (visible uniquement en cr√©ation/√©dition) -->
                        <div id="nomGrilleContainer" class="groupe-form"
                            style="max-width: 400px; margin-bottom: 20px; display: none;">
                            <label>Nom de la grille :</label>
                            <input type="text" id="nomGrilleTemplate" class="controle-form"
                                placeholder="Ex: Grille analyse litt√©raire" onchange="sauvegarderNomGrille()">
                        </div>

                        <!-- Message si aucune √©valuation s√©lectionn√©e -->
                        <div id="aucuneEvalSelectionnee" style="padding: 20px; background: var(--bleu-tres-pale); 
             border-radius: 6px; text-align: center; color: var(--bleu-leger);">
                            <p>Cr√©ez une nouvelle grille ou s√©lectionnez une grille existante √† modifier</p>
                        </div>

                        <!-- Conteneur des crit√®res (cach√© par d√©faut) -->
                        <div id="criteresContainer" style="display: none;">
                            <!-- Liste des crit√®res existants -->
                            <div id="listeCriteres" style="margin-bottom: 20px;">
                                <!-- Les crit√®res seront affich√©s ici -->
                            </div>

                            <!-- Formulaire d'ajout de crit√®re (cach√© par d√©faut) -->
                            <div id="formAjoutCritere" style="display: none; padding: 15px; background: var(--bleu-pale); 
                 border: 1px solid var(--bleu-leger); border-radius: 6px; margin-bottom: 20px;">

                                <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">Nouveau crit√®re</h4>

                                <div
                                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                    <div class="groupe-form">
                                        <label>Nom du crit√®re *</label>
                                        <input type="text" id="critereNom" class="controle-form"
                                            placeholder="Ex: Qualit√© de l'argumentation">
                                    </div>
                                    <div class="groupe-form">
                                        <label>Pond√©ration relative (%)</label>
                                        <input type="number" id="criterePonderation" class="controle-form" min="0"
                                            max="100" placeholder="Ex: 25">
                                    </div>
                                </div>

                                <div class="groupe-form" style="margin-bottom: 15px;">
                                    <label>Description</label>
                                    <textarea id="critereDescription" class="controle-form" rows="3"
                                        placeholder="Description d√©taill√©e du crit√®re..."></textarea>
                                </div>

                                <div class="groupe-form" style="margin-bottom: 15px;">
                                    <label>Type de crit√®re</label>
                                    <select id="critereType" class="controle-form" onchange="afficherChampFormule()">
                                        <option value="holistique">Holistique (jugement global)</option>
                                        <option value="analytique">Analytique (points par √©l√©ment)</option>
                                        <option value="algorithmique">Algorithmique (calcul automatique)</option>
                                    </select>
                                </div>

                                <!-- Champ formule (cach√© par d√©faut) -->
                                <div id="champFormule" class="groupe-form" style="display: none; margin-bottom: 15px;">
                                    <label>Formule de calcul</label>
                                    <input type="text" id="critereFormule" class="controle-form"
                                        placeholder="Ex: (nb_erreurs / nb_mots) * 100">
                                    <small style="color: var(--bleu-leger);">
                                        Pour le fran√ßais √©crit : nombre d'erreurs / nombre de mots
                                    </small>
                                </div>

                                <div class="btn-groupe" style="justify-content: flex-end;">
                                    <button class="btn btn-annuler" onclick="annulerAjoutCritere()">Fermer</button>
                                    <button class="btn btn-principal" onclick="sauvegarderEtFermer()"
                                        style="margin-left: 10px;">
                                        Ajouter et fermer
                                    </button>
                                    <button class="btn btn-confirmer" onclick="sauvegarderCritere()">
                                        <span id="btnTexteCritere">Ajouter et continuer</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Boutons d'actions -->
                            <div class="btn-groupe" style="justify-content: space-between; margin-bottom: 20px;">
                                <div>
                                    <button id="btnAjouterCritere" class="btn btn-confirmer"
                                        onclick="afficherFormCritere()">
                                        + Ajouter un crit√®re
                                    </button>
                                </div>
                                <div>
                                    <button class="btn btn-principal" onclick="afficherGrillesCriteres()"
                                        style="margin-right: 10px;">
                                        Voir les grilles existantes
                                    </button>
                                    <button id="btnDupliquerGrille" class="btn btn-modifier"
                                        onclick="dupliquerGrilleActuelle()" style="margin-right: 10px; display: none;">
                                        Dupliquer cette grille
                                    </button>
                                    <button class="btn btn-confirmer" onclick="enregistrerCommeGrille()">
                                        Sauvegarder cette grille
                                    </button>
                                </div>
                            </div>

                            <!-- Modal pour les grilles existantes (cach√© par d√©faut) -->
                            <div id="modalGrilles" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
                 background: rgba(0,0,0,0.5); z-index: 1000;">
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                     background: white; padding: 30px; border-radius: 8px; max-width: 600px; width: 90%; 
                     max-height: 80vh; overflow-y: auto;">
                                    <h3 style="margin-bottom: 20px; color: var(--bleu-principal);">Grilles de
                                        crit√®res
                                        disponibles</h3>

                                    <div id="listeGrilles" style="margin-bottom: 20px;">
                                        <!-- Les grilles seront affich√©es ici -->
                                    </div>

                                    <div class="btn-groupe" style="justify-content: flex-end;">
                                        <button class="btn btn-annuler" onclick="fermerModalGrilles()">Fermer</button>
                                    </div>
                                </div>
                            </div>

                            <!-- R√©sum√© de la pond√©ration -->
                            <div style="margin-top: 20px; padding: 10px; background: var(--bleu-tres-pale); 
                 border-radius: 6px; text-align: right;">
                                <strong>Total des pond√©rations : </strong>
                                <span id="totalPonderationCriteres"
                                    style="font-size: 1.2rem; font-weight: bold;">0%</span>
                                <small id="statutPonderationCriteres" style="display: block; margin-top: 5px;"></small>
                            </div>
                        </div>
                    </div>

                </div><!--fin sous-section grille-criteres-->

                <!-- Sous-section : √âchelle de performance -->
                <div id="materiel-echelle-performance" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Niveaux de performance</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="note-echelle">‚ÑπÔ∏è</span>
                        </span>
                    </h2>
                    <p class="text-muted">Configuration de l'√©chelle de notation pour les PAN/SBG</p>

                    <!-- Carte Note (pas de Conseil pour √âchelle) -->
                    <div id="note-echelle" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> L'√©chelle de performance d√©finit les niveaux de ma√Ætrise utilis√©s pour √©valuer les crit√®res.
                        Le syst√®me utilise par d√©faut l'√©chelle IDME (Insuffisant, en D√©veloppement, Ma√Ætris√©, √âtendu) bas√©e sur la taxonomie SOLO.
                        Chaque niveau correspond √† un seuil de performance : Insuffisant (&lt; 64%), D√©veloppement (65-74%), Ma√Ætris√© (75-84%),
                        √âtendu (‚â• 85%). Cette √©chelle peut √™tre personnalis√©e selon les besoins p√©dagogiques et permet un suivi longitudinal
                        de la progression des √©tudiants.
                    </div>

                    <!-- CARTE : √âCHELLE DE PERFORMANCE PAN/SBG -->
                    <div class="carte">
                        <h3>üìà √âchelle de performance</h3>

                        <!-- S√©lecteur d'√©chelle -->
                        <div class="groupe-form" style="max-width: 400px; margin-bottom: 20px;">
                            <label>Cr√©er ou modifier une √©chelle de performance :</label>
                            <select id="selectEchelleTemplate" class="controle-form"
                                onchange="chargerEchelleTemplate()">
                                <option value="">-- Nouvelle √©chelle --</option>
                                <option value="new">‚ûï Cr√©er une nouvelle √©chelle</option>
                            </select>
                        </div>

                        <!-- Nom de l'√©chelle (visible uniquement en cr√©ation/√©dition) -->
                        <div id="nomEchelleContainer" class="groupe-form"
                            style="max-width: 400px; margin-bottom: 20px; display: none;">
                            <label>Nom de l'√©chelle :</label>
                            <input type="text" id="nomEchelleTemplate" class="controle-form"
                                placeholder="Ex: √âchelle standard A-F" onchange="sauvegarderNomEchelle()">
                        </div>

                        <!-- Note explicative -->
                        <div style="font-size: 0.85rem; color: #666; margin-bottom: 20px; padding: 12px;
             background: var(--bleu-pale); border-radius: 6px; border-left: 3px solid var(--bleu-moyen);">
                            <strong>Note :</strong> Cette √©chelle s'applique uniquement aux pratiques alternatives
                            de
                            notation
                            (PAN).
                            La note finale sera convertie en pourcentage pour respecter le RREC. C'est √† cette fin
                            que
                            servent les plages de notes et les valeurs ponctuelles.
                        </div>

                        <!-- CONFIGURATION GLOBALE -->
                        <div
                            style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 6px; margin-bottom: 20px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">Configuration globale
                            </h4>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                <div class="groupe-form">
                                    <label>Type d'√©chelle</label>
                                    <select id="typeEchelle" class="controle-form" onchange="changerTypeEchelle()">
                                        <option value="lettres">Lettres (A, B, C...)</option>
                                        <option value="pourcentage">Pourcentage (%)</option>
                                        <option value="autre">Autre (personnalis√©)</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Seuil de r√©ussite (%)</label>
                                    <input type="number" id="seuilReussite" class="controle-form" value="60" min="0"
                                        max="100" onchange="sauvegarderConfigEchelle()">
                                </div>
                            </div>

                            <!-- Champ conditionnel pour type "autre" -->
                            <div id="champAutreEchelle" style="display: none; margin-top: 15px;">
                                <div class="groupe-form">
                                    <label>Note de passage personnalis√©e :</label>
                                    <div id="notePassageContainer">
                                        <!-- Input sera ins√©r√© ici par changerTypeEchelle() -->
                                    </div>
                                </div>
                            </div>

                            <!-- G√©n√©ration de niveaux personnalis√©s -->
                            <div class="groupe-form" style="margin-top: 15px;">
                                <label>G√©n√©rer des niveaux personnalis√©s (codes s√©par√©s par virgules) :</label>
                                <div style="display: flex; gap: 10px;">
                                    <input type="text" id="codesPersonnalises" class="controle-form"
                                        placeholder="Ex: Excellent, Bon, Moyen, Faible"
                                        onchange="sauvegarderConfigEchelle()">
                                    <button class="btn btn-principal" onclick="genererNiveauxPersonnalises()">G√©n√©rer</button>
                                </div>
                                <small
                                    style="color: var(--bleu-leger); font-size: 0.8rem; display: block; margin-top: 5px;">
                                    Les niveaux seront cr√©√©s automatiquement avec r√©partition uniforme des
                                    pourcentages
                                </small>
                            </div>
                        </div>

                        <!-- TABLEAU DES NIVEAUX -->
                        <div
                            style="background: white; border: 1px solid var(--bleu-leger); border-radius: 6px; padding: 15px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">Niveaux de performance
                            </h4>

                            <div id="tableauNiveaux">
                                <!-- Le tableau sera g√©n√©r√© ici par afficherTableauNiveaux() -->
                            </div>

                            <!-- Boutons d'actions -->
                            <div class="btn-groupe" style="margin-top: 20px; justify-content: space-between;">
                                <div style="display: flex; gap: 10px;">
                                    <button class="btn btn-principal" onclick="sauvegarderNiveaux()">
                                        Sauvegarder les niveaux
                                    </button>
                                    <button class="btn btn-annuler" onclick="reinitialiserNiveauxDefaut()">
                                        R√©initialiser par d√©faut
                                    </button>
                                </div>
                                <div style="display: flex; gap: 10px;">
                                    <button id="btnDupliquerEchelle" class="btn btn-modifier"
                                        onclick="dupliquerEchelleActuelle()" style="display: none;">
                                        Dupliquer
                                    </button>
                                    <button class="btn btn-confirmer" onclick="enregistrerCommeEchelle()">
                                        Enregistrer comme √©chelle
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Visualisation de l'√©chelle -->
                        <div style="margin-top: 20px; padding: 15px; background: var(--vert-pale); 
             border-radius: 6px; border: 1px solid var(--vert-leger);">
                            <h5 style="color: var(--vert-leger); margin-bottom: 10px;">Aper√ßu de l'√©chelle</h5>
                            <div id="apercuEchelle" style="display: flex; justify-content: space-between; 
                 align-items: center; padding: 10px; background: white; border-radius: 4px;">
                                <!-- L'aper√ßu sera g√©n√©r√© ici par afficherApercuEchelle() -->
                            </div>
                        </div>

                        <!-- Toggle Conseil pratique -->
                        <details style="margin-bottom: 20px;">
                            <summary style="cursor: pointer; padding: 12px; background: var(--bleu-tres-pale);
                                border-radius: 6px; border-left: 3px solid var(--bleu-moyen);
                                color: var(--bleu-principal); user-select: none; display: flex;
                                justify-content: space-between; align-items: center;">
                                <span></span>
                                <span style="font-size: 1.2rem;">üí°</span>
                            </summary>
                            <div style="padding: 12px; font-size: 0.85rem; color: #666; line-height: 1.6;">
                                <strong>Conseil pratique - Aide √† la configuration :</strong>
                                <ul style="margin: 8px 0 0 0; padding-left: 20px; line-height: 1.6;">
                                    <li><strong>Code</strong> : 1 √† 3 caract√®res (ex: I, D, M, E)</li>
                                    <li><strong>Nom</strong> : Titre du niveau (ex: Ma√Ætris√©)</li>
                                    <li><strong>Description</strong> : Contexte p√©dagogique (optionnel)</li>
                                    <li><strong>Min/Max</strong> : Plage de % (0-100%)</li>
                                    <li><strong>Valeur ponctuelle</strong> : Note utilis√©e pour les calculs (ex: 75%)</li>
                                    <li><strong>Couleur</strong> : Choisir dans la palette</li>
                                </ul>
                            </div>
                        </details>

                    </div>

                </div><!--fin sous-section echelle-performance-->


                <!-- Sous-section : R√©troactions -->
                <div id="materiel-retroactions" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>R√©troactions pr√©d√©finies</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="note-retroactions">‚ÑπÔ∏è</span>
                            <span class="emoji-toggle" data-target="conseil-retroactions">üí°</span>
                        </span>
                    </h2>
                    <p class="text-muted">Cr√©er des cartouches de r√©troaction bas√©es sur les crit√®res et l'√©chelle
                        de
                        performance</p>

                    <!-- Carte Note -->
                    <div id="note-retroactions" class="carte-info-toggle carte-info-note" style="display: none;">
                        <strong>Note :</strong> Les r√©troactions seront g√©n√©r√©es automatiquement en assemblant les commentaires pr√©r√©dig√©s
                        par l'enseignant¬∑e selon les crit√®res d'√©valuation et le niveau de performance atteint pour
                        chaque crit√®re. Un ensemble complet de commentaires porte ici le nom de <strong>cartouche</strong>.
                    </div>

                    <!-- Carte Conseil pratique -->
                    <div id="conseil-retroactions" class="carte-info-toggle carte-info-conseil" style="display: none;">
                            <strong>Conseil pratique :</strong> Les commentaires peuvent avoir entre 50 et 75 mots environ. R√©dige-les de fa√ßon personnelle
                            et constructive. Chaque cellule de la matrice correspond √† un commentaire pour un niveau de
                            performance donn√© sur un crit√®re sp√©cifique. Utilise les codes de ta grille (I, D, M, E) et
                            le format propos√© pour structurer tes commentaires. Les cartouches peuvent √™tre verrouill√©es
                            une fois finalis√©es.
                        </div>

<!-- CARTE : CARTOUCHES DE R√âTROACTION -->
                    <div class="carte">
                        <h3>üí¨ Cartouches de r√©troaction</h3>

                        <!-- S√©lecteur de grille et cartouche -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                            <div class="groupe-form">
                                <label>Grille de crit√®res :</label>
                                <select id="selectGrilleRetroaction" class="controle-form"
                                    onchange="chargerCartouchesRetroaction()">
                                    <option value="">-- Choisir une grille --</option>
                                </select>
                            </div>
                            <div class="groupe-form">
                                <label>Cartouche :</label>
                                <select id="selectCartouche" class="controle-form"
                                    onchange="chargerMatriceRetroaction()">
                                    <option value="">-- Nouvelle cartouche --</option>
                                </select>
                            </div>
                        </div>

                        <!-- Message si aucune grille s√©lectionn√©e -->
                        <div id="aucuneEvalRetroaction" style="padding: 20px; background: var(--bleu-tres-pale); 
             border-radius: 6px; text-align: center; color: var(--bleu-leger);">
                            <p>S√©lectionnez une grille de crit√®res pour cr√©er ou modifier une cartouche de
                                r√©troaction
                            </p>
                        </div>

                        <!-- Informations de la cartouche -->
                        <div id="infoCartouche" style="display: none; margin-bottom: 20px;">
                            <div class="groupe-form" style="max-width: 500px;">
                                <label>Nom de la cartouche :</label>
                                <input type="text" id="nomCartouche" class="controle-form"
                                    placeholder="Ex: Dissertation argumentative - Session Automne 2025">
                            </div>

                            <div class="groupe-form" style="margin-top: 15px;">
                                <label>Contexte de la r√©troaction (optionnel) :</label>
                                <textarea id="contexteCartouche" class="controle-form" rows="3"
                                    placeholder="Ex: Cette production porte sur l'analyse d'un texte argumentatif. L'√©tudiant¬∑e devait d√©montrer sa capacit√© √†..."></textarea>
                                <small style="color: #666; font-size: 0.85rem;">Ce texte appara√Ætra au d√©but de la
                                    r√©troaction si
                                    l'option est coch√©e lors de la g√©n√©ration.</small>
                            </div>

                            <!-- Liste des cartouches existantes -->
                            <div id="listeCartouchesExistants" style="display: none; margin-bottom: 20px;">
                                <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">Cartouches
                                    enregistr√©es
                                </h4>
                                <div id="listeCartouchesContainer">
                                    <!-- Les cartouches seront affich√©es ici par afficherListeCartouches() -->
                                </div>
                            </div>

                            <!-- M√©triques de la cartouche -->
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; 
                 margin-top: 15px; padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                                <div class="carte-metrique">
                                    <strong id="nbCriteres">0</strong>
                                    <span>Crit√®res</span>
                                </div>
                                <div class="carte-metrique">
                                    <strong id="nbNiveaux">0</strong>
                                    <span>Niveaux</span>
                                </div>
                                <div class="carte-metrique">
                                    <strong id="nbCommentaires">0</strong>
                                    <span>Commentaires √† r√©diger</span>
                                </div>
                                <div class="carte-metrique">
                                    <strong id="pctComplete">0%</strong>
                                    <span>Compl√©t√©</span>
                                </div>
                            </div>
                        </div>

                        <!-- ZONE D'IMPORTATION DES COMMENTAIRES -->
                        <div id="zoneImportCommentaires" style="display: none; margin-bottom: 20px;">
                            <div class="carte"
                                style="background: var(--vert-pale); border-left: 3px solid var(--vert-leger);">
                                <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">
                                    Importation rapide des commentaires
                                </h4>

                                <div class="groupe-form">
                                    <label>Collez vos commentaires ici (format Markdown) :</label>
                                    <textarea id="commentairesColles" class="controle-form" rows="12"
                                        placeholder="## STRUCTURE&#10;&#10;**STRUCTURE (I)** : Commentaire incomplet...&#10;&#10;**STRUCTURE (D)** : Commentaire en d√©veloppement...&#10;&#10;**STRUCTURE (M)** : Commentaire ma√Ætris√©...&#10;&#10;**STRUCTURE (E)** : Commentaire √©tendu..."
                                        style="font-family: monospace; font-size: 0.85rem;"></textarea>
                                </div>

                                <div class="btn-groupe">
                                    <button onclick="annulerImportCommentaires()" class="btn btn-annuler">
                                        Annuler
                                    </button>
                                    <button onclick="importerCommentaires()" class="btn btn-confirmer">
                                        Importer les commentaires
                                    </button>
                                </div>

                                <div
                                    style="background: white; padding: 12px; border-radius: 6px; margin-top: 15px; font-size: 0.85rem;">
                                    <strong>Format attendu :</strong>
                                    <pre
                                        style="margin-top: 8px; color: #666; font-family: monospace; line-height: 1.4;">## NOM_DU_CRIT√àRE

**NOM_DU_CRIT√àRE (I)** : Texte du commentaire...

**NOM_DU_CRIT√àRE (D)** : Texte du commentaire...

**NOM_DU_CRIT√àRE (M)** : Texte du commentaire...

**NOM_DU_CRIT√àRE (E)** : Texte du commentaire...</pre>
                                    <small style="color: var(--bleu-moyen); display: block; margin-top: 10px;">
                                        üí° Les codes de niveau (I, D, M, E) doivent correspondre √† ceux de votre
                                        √©chelle
                                        de
                                        performance.
                                    </small>
                                </div>
                            </div>
                        </div>

                        <!-- Boutons d'action principaux -->
                        <div class="btn-groupe" style="margin-bottom: 20px;">
                            <button class="btn btn-principal" onclick="afficherImportCommentaires()"
                                style="margin-right: auto;">
                                Importer des commentaires
                            </button>
                        </div>

                        <!-- MATRICE DE R√âTROACTION -->
                        <div id="matriceRetroaction" style="display: none;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 15px;">
                                Matrice des commentaires de r√©troaction
                            </h4>

                            <div id="matriceContainer" style="overflow-x: auto;">
                                <!-- La matrice sera g√©n√©r√©e dynamiquement ici par afficherMatriceRetroaction() -->
                            </div>

                            <!-- Boutons d'action de la matrice -->
                            <div class="btn-groupe" style="margin-top: 20px;">
                                <button class="btn btn-confirmer" onclick="sauvegarderCartouche()">
                                    Sauvegarder la cartouche
                                </button>
                                <button class="btn btn-supprimer" onclick="supprimerCartouche()"
                                    style="margin-left: 10px;">
                                    Supprimer
                                </button>
                            </div>
                        </div>

                        <!-- APER√áU DE R√âTROACTION -->
                        <div id="apercuRetroaction" style="display: none; margin-top: 20px; padding: 15px; 
             background: var(--vert-pale); border-radius: 6px; border: 1px solid var(--vert-leger);">
                            <h5 style="color: var(--vert-leger); margin-bottom: 10px;">
                                Aper√ßu d'une r√©troaction g√©n√©r√©e
                            </h5>
                            <div id="exempleRetroaction" style="padding: 15px; background: white; 
                 border-radius: 4px; font-size: 0.9rem; line-height: 1.6;">
                                <!-- L'aper√ßu sera g√©n√©r√© ici par genererApercuAleatoire() -->
                            </div>
                            <button class="btn btn-principal mt-2" onclick="genererApercuAleatoire()">
                                G√©n√©rer un aper√ßu al√©atoire
                            </button>
                        </div>
                    </div>

                </div><!--fin sous-section retroactions-->

            </section><!-- fin section-materiel -->

            <!-- ===================================
                 SECTION: R√âGLAGES
                 =================================== -->
            <section id="section-reglages" class="section">

                <!-- Sous-section: Aper√ßu des r√©glages -->
                <div id="reglages-apercu" class="sous-section">
                    <h2>Aper√ßu de la configuration</h2>
                    <p class="text-muted">
                        R√©sum√© de la configuration actuelle du syst√®me. Les statistiques sont calcul√©es en temps r√©el depuis les donn√©es stock√©es localement.
                    </p>

                    <div class="carte">
                        <h3>üìä Informations du cours</h3>
                        <p class="text-muted">
                            Donn√©es de base du cours configur√©.
                        </p>
                        <button class="btn btn-principal" onclick="chargerStatistiquesApercu()"
                            style="margin-top: 10px;">
                            Rafra√Æchir les statistiques
                        </button>
                    </div>

                    <!-- Grille de cartes statistiques -->
                    <div class="grille-statistiques">

                        <!-- Carte : Informations du cours -->
                        <div class="carte">
                            <h3>üìö Informations du cours</h3>
                            <p><strong>Code :</strong> <span id="stat-code-cours">‚Äî</span></p>
                            <p><strong>Trimestre :</strong> <span id="stat-trimestre">‚Äî</span></p>
                            <p><strong>Bornes du trimestre :</strong> <span id="stat-calendrier">‚Äî</span></p>
                            <p><strong>Horaire :</strong> <span id="stat-horaire">‚Äî</span></p>
                            <p><strong>Groupes :</strong> <span id="stat-nb-groupes">‚Äî</span></p>
                            <p><strong>√âl√®ves :</strong> <span id="stat-nb-eleves">‚Äî</span></p>
                        </div>

                        <!-- Carte : Syst√®me -->
                        <div class="carte">
                            <h3>Syst√®me</h3>
                            <p><strong>Version :</strong> <span id="stat-version">‚Äî</span></p>
                            <p><strong>Derni√®re MAJ :</strong> <span id="stat-derniere-maj">‚Äî</span></p>
                            <p><strong>Poids donn√©es :</strong> <span id="stat-poids">‚Äî</span></p>
                        </div>

                    </div>
                    <!-- fin grille-statistiques -->


                </div>
                <!-- fin sous-section reglages-apercu -->

                <!-- Sous-section : Cours -->
                <div id="reglages-cours" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Configuration du cours</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="conseil-cours">üí°</span>
                        </span>
                    </h2>
                    <p class="text-muted">Informations techniques du cours : code, nom, comp√©tences, enseignant¬∑e,
                        trimestre,
                        format horaire</p>

                    <!-- Carte Conseil pratique (masqu√©e par d√©faut) -->
                    <div id="conseil-cours" class="carte-info-toggle" carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6;">
                            <li><strong>Cours actif :</strong> Un seul cours peut √™tre actif √† la fois. Le cours
                                actif est utilis√© comme r√©f√©rence dans toute l'application</li>
                            <li><strong>Verrouillage :</strong> Verrouillez un cours termin√© pour √©viter les
                                modifications accidentelles</li>
                            <li><strong>Duplication :</strong> Dupliquez un cours pour cr√©er rapidement une
                                nouvelle session en modifiant seulement l'ann√©e</li>
                            <li><strong>Code de cours :</strong> Format habituel : XXX-XXX-XX
                                (d√©partement-num√©ro-pond√©ration)</li>
                            <li><strong>Format horaire :</strong> D√©finit comment les heures sont r√©parties dans
                                la semaine (utilis√© pour le calendrier)</li>
                        </ul>
                    </div>

                    <div class="carte">
                        <h3>üìö Cours configur√©s</h3>

                        <!-- VUE D'ENSEMBLE -->
                        <div class="grille-statistiques" style="margin-bottom: 20px;">
                            <div class="carte-metrique">
                                <strong id="nombreCours">0</strong>
                                <span>Configurations</span>
                            </div>
                            <div class="carte-metrique">
                                <strong id="sessionActive">H2025</strong>
                                <span>Session active</span>
                            </div>
                            <div class="carte-metrique" style="grid-column: span 2;">
                                <span id="resumeCours" style="font-size: 0.9rem;">
                                    Aucune configuration de cours
                                </span>
                            </div>
                        </div>

                        <!-- BOUTON AJOUTER UN COURS -->
                        <button id="btnAjouterCours" class="btn btn-confirmer" onclick="afficherFormCours()"
                            style="margin-bottom: 20px;">
                            + Ajouter un cours
                        </button>

                        <!-- TABLEAU/CONTENEUR DES COURS -->
                        <div id="tableauCoursContainer" style="margin-bottom: 20px;">
                            <p class="text-muted" style="font-style: italic;">
                                Aucun cours configur√©.
                            </p>
                        </div>

                        <!-- FORMULAIRE D'AJOUT/MODIFICATION (cach√© par d√©faut) -->
                        <div id="formulaireCours" style="display: none; margin-top: 20px; padding: 20px; 
             background: var(--bleu-pale); border: 1px solid var(--bleu-leger); border-radius: 8px;">

                            <h4 id="titreFormCours" style="color: var(--bleu-principal); margin-bottom: 20px;">
                                Nouvelle configuration de cours
                            </h4>

                            <!-- Informations g√©n√©rales -->
                            <h5 style="color: var(--bleu-moyen); margin-bottom: 15px; padding-bottom: 8px; 
                border-bottom: 2px solid var(--bleu-leger);">
                                Informations g√©n√©rales
                            </h5>
                            <div
                                style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>Code du cours</label>
                                    <input type="text" id="codeCours" class="controle-form"
                                        placeholder="Ex: 601-101-MQ">
                                </div>
                                <div class="groupe-form">
                                    <label>Nom du cours</label>
                                    <input type="text" id="nomCours" class="controle-form"
                                        placeholder="Ex: √âcriture et litt√©rature">
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 3fr; gap: 15px; margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>N¬∞ de la comp√©tence</label>
                                    <input type="text" id="numeroCompetence" class="controle-form"
                                        placeholder="Ex: 4EF0">
                                </div>
                                <div class="groupe-form">
                                    <label>Comp√©tence</label>
                                    <input type="text" id="competence" class="controle-form"
                                        placeholder="Ex: Analyser des textes litt√©raires">
                                </div>
                            </div>

                            <div class="groupe-form" style="margin-bottom: 20px;">
                                <label>√âl√©ments de comp√©tence</label>
                                <textarea id="elementsCompetence" class="controle-form" rows="4"
                                    placeholder="‚Ä¢ Reconna√Ætre le propos du texte&#10;‚Ä¢ Rep√©rer et classer des th√®mes et proc√©d√©s stylistiques&#10;‚Ä¢ Choisir les √©l√©ments de l'analyse"></textarea>
                            </div>

                            <!-- Enseignant¬∑e -->
                            <h5 style="color: var(--bleu-moyen); margin-bottom: 15px; margin-top: 25px; padding-bottom: 8px; 
                border-bottom: 2px solid var(--bleu-leger);">
                                Enseignant¬∑e
                            </h5>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>Pr√©nom</label>
                                    <input type="text" id="prenomEnseignant" class="controle-form"
                                        placeholder="Ex: Gr√©goire">
                                </div>
                                <div class="groupe-form">
                                    <label>Nom</label>
                                    <input type="text" id="nomEnseignant" class="controle-form"
                                        placeholder="Ex: B√©dard">
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px; margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>D√©partement</label>
                                    <input type="text" id="departement" class="controle-form"
                                        placeholder="Ex: Litt√©rature et communication">
                                </div>
                                <div class="groupe-form">
                                    <label>Local</label>
                                    <input type="text" id="local" class="controle-form" placeholder="Ex: 2314">
                                </div>
                            </div>

                            <!-- Session et horaire -->
                            <h5 style="color: var(--bleu-moyen); margin-bottom: 15px; margin-top: 25px; padding-bottom: 8px; 
                border-bottom: 2px solid var(--bleu-leger);">
                                Session et horaire
                            </h5>
                            <div
                                style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>Session</label>
                                    <select id="session" class="controle-form">
                                        <option value="H">Hiver</option>
                                        <option value="A">Automne</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Ann√©e</label>
                                    <input type="number" id="annee" class="controle-form" value="2025" min="2020"
                                        max="2030">
                                </div>
                                <div class="groupe-form">
                                    <label>Heures/semaine</label>
                                    <input type="number" id="heuresParSemaine" class="controle-form" value="4" min="1"
                                        max="10">
                                </div>
                                <div class="groupe-form">
                                    <label>Format horaire</label>
                                    <select id="formatHoraire" class="controle-form">
                                        <option value="1x4">1 p√©riode de 4h</option>
                                        <option value="2x2" selected>2 p√©riodes de 2h</option>
                                        <option value="4x1">4 p√©riodes de 1h</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Boutons d'action -->
                            <div class="btn-groupe" style="justify-content: flex-end; margin-top: 25px; padding-top: 20px; 
                 border-top: 2px solid var(--bleu-leger);">
                                <button class="btn btn-annuler" onclick="annulerFormCours()">
                                    Annuler
                                </button>
                                <button class="btn btn-confirmer" onclick="sauvegarderCours()">
                                    <span id="btnTexteCours">Ajouter</span>
                                </button>
                            </div>
                        </div>
                    </div>

                </div><!--fin sous-section cours-->

                <!-- SECTION TRIMESTRE (R√©glages > Trimestre) -->
                <!-- Cette section g√®re les DONN√âES ADMINISTRATIVES du trimestre -->
                <!-- Module associ√©: trimestre.js -->

                <div id="reglages-trimestre" class="sous-section">
                    <h2>Configuration du trimestre</h2>
                    <p class="text-muted">
                        D√©finissez les param√®tres administratifs du trimestre : dates de d√©but et de fin,
                        semaines sp√©ciales, cong√©s pr√©vus et impr√©vus avec leurs reprises √©ventuelles.
                    </p>

                    <!-- CARTE: CADRE R√âGULIER -->
                    <div class="carte">
                        <h3>Cadre r√©gulier</h3>

                        <!-- Statistiques (calcul√©es automatiquement) -->
                        <div class="grille-statistiques" style="margin-bottom: 20px;">
                            <div class="carte-metrique">
                                <strong id="nombreSemaines">0</strong>
                                <span>Semaines</span>
                            </div>
                            <div class="carte-metrique">
                                <strong id="nombreJoursCours">0</strong>
                                <span>Jours de cours</span>
                            </div>
                            <div class="carte-metrique">
                                <strong id="totalConges">0</strong>
                                <span>Cong√©s</span>
                            </div>
                        </div>

                        <!-- Bornes du trimestre -->
                        <h5 style="color: var(--bleu-moyen); margin-bottom: 15px; padding-bottom: 8px; 
            border-bottom: 2px solid var(--bleu-leger);">
                            Bornes du trimestre
                        </h5>
                        <div class="grille-statistiques">
                            <div class="groupe-form">
                                <label>D√©but du trimestre :</label>
                                <input type="date" class="controle-form" id="debutTrimestre"
                                    onchange="sauvegarderCadreCalendrier()">
                            </div>
                            <div class="groupe-form">
                                <label>Fin des cours r√©guliers :</label>
                                <input type="date" class="controle-form" id="finCours"
                                    onchange="sauvegarderCadreCalendrier()">
                            </div>
                            <div class="groupe-form">
                                <label>Fin du trimestre :</label>
                                <input type="date" class="controle-form" id="finTrimestre"
                                    onchange="sauvegarderCadreCalendrier()">
                            </div>
                            <div class="groupe-form">
                                <label>Remise des notes :</label>
                                <input type="date" class="controle-form" id="remiseNotes"
                                    onchange="sauvegarderCadreCalendrier()">
                            </div>
                        </div>

                        <!-- Semaines sp√©ciales -->
                        <h5 class="mt-3" style="color: var(--bleu-moyen); margin-bottom: 15px; padding-bottom: 8px; 
            border-bottom: 2px solid var(--bleu-leger);">
                            Semaines sp√©ciales
                        </h5>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 20px;">

                            <!-- COLONNE GAUCHE: Semaine de planification -->
                            <div>
                                <h6>Semaine de planification et de mise √† jour</h6>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <div class="groupe-form" style="flex: 1;">
                                        <label>Du :</label>
                                        <input type="date" class="controle-form" id="semainePlanificationDebut"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                    <span style="padding-top: 20px;">au</span>
                                    <div class="groupe-form" style="flex: 1;">
                                        <label>&nbsp;</label>
                                        <input type="date" class="controle-form" id="semainePlanificationFin"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                </div>
                            </div>

                            <!-- COLONNE DROITE: Semaine d'examens -->
                            <div>
                                <h6>Semaine d'examens</h6>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <div class="groupe-form" style="flex: 1;">
                                        <label>Du :</label>
                                        <input type="date" class="controle-form" id="semaineExamensDebut"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                    <span style="padding-top: 20px;">au</span>
                                    <div class="groupe-form" style="flex: 1;">
                                        <label>&nbsp;</label>
                                        <input type="date" class="controle-form" id="semaineExamensFin"
                                            onchange="sauvegarderCadreCalendrier()">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Bouton de sauvegarde -->
                        <div class="btn-groupe" style="justify-content: flex-end;">
                            <button class="btn btn-confirmer" onclick="sauvegarderCadreCalendrier()">
                                Sauvegarder les bornes
                            </button>
                        </div>
                    </div><!-- FIN carte Cadre r√©gulier -->

                    <!-- CARTE: AM√âNAGEMENTS -->
                    <div class="carte mt-3">
                        <h3>Am√©nagements</h3>

                        <!-- SECTION: Cong√©s pr√©vus -->
                        <h5 style="color: var(--bleu-moyen); margin-bottom: 15px; padding-bottom: 8px; 
            border-bottom: 2px solid var(--bleu-leger);">
                            Cong√©s f√©ri√©s et activit√©s institutionnelles
                        </h5>
                        <p class="text-muted" style="font-size: 0.85rem; margin-bottom: 15px;">
                            Cong√©s f√©ri√©s, journ√©es p√©dagogiques, journ√©e Carri√®re, etc. avec leurs reprises
                            √©ventuelles
                        </p>

                        <!-- Container des √©v√©nements pr√©vus (g√©n√©r√© par trimestre.js) -->
                        <div id="congesPrevusContainer" style="margin-bottom: 20px;">
                            <p class="text-muted" style="font-style: italic;">Aucun √©v√©nement pr√©vu d√©clar√©.</p>
                        </div>

                        <!-- Bouton pour afficher le formulaire d'ajout -->
                        <button id="btnAjouterPrevu" class="btn btn-confirmer" onclick="afficherFormEvenement()"
                            style="margin-bottom: 30px;">
                            + Ajouter un √©v√©nement pr√©vu
                        </button>

                        <!-- FORMULAIRE D'AJOUT √âV√âNEMENT PR√âVU (cach√© par d√©faut) -->
                        <div id="formEvenementPrevu" style="display: none; margin-bottom: 30px; padding: 20px; background: var(--vert-pale); 
    border: 1px solid var(--vert-leger); border-radius: 8px;">

                            <h4 style="color: var(--vert-leger); margin-bottom: 20px;">
                                <span style="margin-right: 10px;">‚úì</span>Nouvel √©v√©nement pr√©vu
                            </h4>

                            <div
                                style="display: grid; grid-template-columns: 1fr 2fr 1.5fr 1fr; gap: 15px; margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>Date √©v√©nement</label>
                                    <input type="date" class="controle-form" id="dateEvenementPrevu">
                                </div>
                                <div class="groupe-form">
                                    <label>Description</label>
                                    <select class="controle-form" id="descriptionEvenementPrevu">
                                        <option value="">Choisir...</option>
                                        <option>F√™te du travail (f√©ri√©)</option>
                                        <option>Action de gr√¢ce (f√©ri√©)</option>
                                        <option>Journ√©e carri√®re</option>
                                        <option>Vendredi saint (f√©ri√©)</option>
                                        <option>Lundi de P√¢ques (f√©ri√©)</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Reprise pr√©vue</label>
                                    <select class="controle-form" id="horaireReprisePrevu">
                                        <option value="">Pas de reprise</option>
                                        <option value="Horaire du lundi">Horaire du lundi</option>
                                        <option value="Horaire du mardi">Horaire du mardi</option>
                                        <option value="Horaire du mercredi">Horaire du mercredi</option>
                                        <option value="Horaire du jeudi">Horaire du jeudi</option>
                                        <option value="Horaire du vendredi">Horaire du vendredi</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Date reprise</label>
                                    <input type="date" class="controle-form" id="dateReprisePrevu">
                                </div>
                            </div>

                            <div class="btn-groupe" style="justify-content: flex-end;">
                                <button class="btn btn-annuler" onclick="annulerFormEvenement()">Annuler</button>
                                <button class="btn btn-confirmer" onclick="confirmerAjoutEvenement()">Ajouter</button>
                            </div>
                        </div><!-- FIN formulaire ajout pr√©vu -->

                        <!-- SECTION: √âv√©nements impr√©vus -->
                        <h5 class="mt-3" style="color: var(--bleu-moyen); margin-bottom: 15px; padding-bottom: 8px; 
            border-bottom: 2px solid var(--bleu-leger);">
                            √âv√©nements impr√©vus
                        </h5>
                        <p class="text-muted" style="font-size: 0.85rem; margin-bottom: 15px;">
                            Maladie, conditions m√©t√©orologiques, urgence, autre, etc.
                        </p>

                        <!-- Container des √©v√©nements impr√©vus (g√©n√©r√© par trimestre.js) -->
                        <div id="congesImprevusContainer" style="margin-bottom: 20px;">
                            <p class="text-muted" style="font-style: italic;">Aucun √©v√©nement impr√©vu d√©clar√©.</p>
                        </div>

                        <!-- Bouton pour afficher le formulaire d'ajout -->
                        <button id="btnAjouterEvenementImprevu" class="btn btn-confirmer"
                            onclick="afficherFormEvenementImprevu()">
                            + Ajouter un √©v√©nement impr√©vu
                        </button>

                        <!-- FORMULAIRE D'AJOUT √âV√âNEMENT IMPR√âVU (cach√© par d√©faut) -->
                        <div id="formEvenementImprevu" style="display: none; margin-top: 20px; padding: 20px; background: #fff4e6; 
    border: 1px solid var(--orange-accent); border-radius: 8px;">

                            <h4 style="color: var(--orange-accent); margin-bottom: 10px;">
                                <span style="margin-right: 10px;">‚ö†</span>Nouvel √©v√©nement impr√©vu
                            </h4>

                            <p style="font-size: 0.85rem; color: #666; margin-bottom: 20px;">
                                Pour les √©v√©nements impr√©vus, la reprise peut √™tre planifi√©e apr√®s coup selon les
                                circonstances.
                            </p>

                            <div
                                style="display: grid; grid-template-columns: 1fr 2fr 1.5fr 1fr; gap: 15px; margin-bottom: 20px;">
                                <div class="groupe-form">
                                    <label>Date √©v√©nement</label>
                                    <input type="date" class="controle-form" id="dateEvenementImprevu">
                                </div>
                                <div class="groupe-form">
                                    <label>Description</label>
                                    <select class="controle-form" id="descriptionEvenementImprevu">
                                        <option value="">Choisir...</option>
                                        <option>Maladie</option>
                                        <option>M√©t√©o</option>
                                        <option>Urgence</option>
                                        <option>Autre</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Reprise pr√©vue (optionnelle)</label>
                                    <select class="controle-form" id="horaireRepriseImprevu">
                                        <option value="">Pas de reprise</option>
                                        <option value="Horaire du lundi">Horaire du lundi</option>
                                        <option value="Horaire du mardi">Horaire du mardi</option>
                                        <option value="Horaire du mercredi">Horaire du mercredi</option>
                                        <option value="Horaire du jeudi">Horaire du jeudi</option>
                                        <option value="Horaire du vendredi">Horaire du vendredi</option>
                                    </select>
                                </div>
                                <div class="groupe-form">
                                    <label>Date reprise</label>
                                    <input type="date" class="controle-form" id="dateRepriseImprevu">
                                </div>
                            </div>

                            <div class="btn-groupe" style="justify-content: flex-end;">
                                <button class="btn btn-annuler" onclick="annulerFormEvenementImprevu()">Annuler</button>
                                <button class="btn btn-confirmer"
                                    onclick="confirmerAjoutEvenementImprevu()">Ajouter</button>
                            </div>
                        </div><!-- FIN formulaire ajout impr√©vu -->

                    </div><!-- FIN carte Am√©nagements -->

                </div><!-- FIN sous-section reglages-trimestre -->


                <!-- Sous-section: Horaire -->
                <div id="reglages-horaire" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Configuration de l'horaire</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="conseil-horaire">üí°</span>
                        </span>
                    </h2>
                    <p class="text-muted">D√©finissez le format horaire hebdomadaire de vos s√©ances de cours</p>

                    <!-- Carte Conseil pratique (masqu√©e par d√©faut) -->
                    <div id="conseil-horaire" class="carte-info-toggle" carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6;">
                            <li><strong>Format 2√ó2h :</strong> Id√©al pour deux p√©riodes de cours s√©par√©es dans
                                la semaine (ex: lundi et jeudi)</li>
                            <li><strong>Format 1√ó4h :</strong> Convient aux cours intensifs d'une seule p√©riode
                                continue</li>
                            <li><strong>Heure de d√©but/fin :</strong> Respecte le format 24h (ex: 13:00, pas
                                1:00 PM)</li>
                            <li><strong>Reprises :</strong> Les s√©ances de reprise seront automatiquement
                                ajout√©es lors de la configuration des cong√©s impr√©vus dans la section
                                Trimestre</li>
                            <li><strong>Modification :</strong> Vous pouvez modifier le format horaire en tout
                                temps. Les s√©ances existantes seront supprim√©es et devront √™tre recr√©√©es</li>
                        </ul>
                    </div>

                    <!-- S√©lecteur de format horaire -->
                    <div class="carte" style="margin-bottom: 20px;">
                        <h3>üïê Format des cours</h3>
                        <div style="display: flex; gap: 30px; margin-top: 15px;">
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="radio" name="formatHoraire" value="2x2" id="format2x2"
                                    style="margin-right: 8px;">
                                <span>2 s√©ances de 2h s√©par√©es</span>
                            </label>
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="radio" name="formatHoraire" value="1x4" id="format1x4"
                                    style="margin-right: 8px;">
                                <span>1 s√©ance de 4h cons√©cutives</span>
                            </label>
                        </div>
                    </div><!-- FIN carte format -->

                    <!-- Configuration des s√©ances -->
                    <div class="carte">
                        <h3>Horaire des s√©ances</h3>
                        <div id="messageAucunFormat" style="display: block; 
     background: #fff3cd; 
     border: 1px solid #ffc107; 
     border-radius: 6px; 
     padding: 12px; 
     margin-bottom: 15px;
     font-size: 0.9rem;">
                            <strong style="color: #856404;">‚ÑπÔ∏è √âtape 1 :</strong>
                            <span style="color: #856404;">S√©lectionne d'abord un format horaire ci-dessus (2√ó2h ou
                                1√ó4h)</span>
                        </div>

                        <!-- Conteneur pour les s√©ances existantes -->
                        <div id="seancesContainer" style="margin-bottom: 20px;">
                            <p class="text-muted" style="font-style: italic;">Aucune s√©ance configur√©e.</p>
                        </div>

                        <!-- Formulaire d'ajout (cach√© par d√©faut) -->
                        <div id="formAjoutSeance" style="display: none; 
             background: var(--bleu-tres-pale); 
             padding: 20px; 
             border-radius: 6px; 
             border: 1px solid var(--bleu-leger);
             margin-bottom: 20px;">
                            <h4 style="margin-top: 0; color: var(--bleu-principal);">Configurer les s√©ances</h4>

                            <!-- Le contenu dynamique sera ins√©r√© ici par afficherFormulaireSeances() -->
                            <div id="seancesFormContainer"></div>

                            <div class="btn-groupe" style="margin-top: 15px; justify-content: flex-end;">
                                <button class="btn btn-annuler" onclick="annulerAjoutSeance()">Annuler</button>
                                <button class="btn btn-confirmer" id="btnConfirmerSeances"
                                    onclick="confirmerAjoutSeances()">
                                    Ajouter les s√©ances
                                </button>
                            </div>
                        </div><!-- FIN formulaire ajout -->

                        <!-- Bouton pour afficher le formulaire -->
                        <button class="btn btn-confirmer" onclick="afficherFormulaireSeances()">
                            + Configurer l'horaire
                        </button>
                    </div><!-- FIN carte horaire -->

                </div><!-- FIN sous-section reglages-horaire -->

                <!-- Sous-section : Groupe -->
                <div id="reglages-groupe" class="sous-section">
                    <h2 style="display: flex; justify-content: space-between; align-items: center;">
                        <span>Configuration du groupe d'√©tudiants</span>
                        <span style="font-size: 1.2rem;">
                            <span class="emoji-toggle" data-target="conseil-groupe">üí°</span>
                        </span>
                    </h2>
                    <p class="text-muted">Liste compl√®te des √©tudiants inscrits : ajout, import, modification,
                        export
                    </p>

                    <!-- Carte Conseil pratique (masqu√©e par d√©faut) -->
                    <div id="conseil-groupe" class="carte-info-toggle" carte-info-conseil" style="display: none;">
                        <strong>Conseil pratique :</strong>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6;">
                            <li><strong>Champ Groupe :</strong> Permet d'organiser tes √©tudiants si tu as
                                plusieurs groupes (ex: Groupe 1, Groupe 2). Utilise le filtre en haut pour afficher un groupe
                                sp√©cifique.</li>
                            <li><strong>Import CSV/TSV :</strong> Format attendu avec 7 colonnes : DA, Groupe,
                                Nom, Pr√©nom, Programme, SA, CAF. Les colonnes peuvent √™tre s√©par√©es par des virgules ou des
                                tabulations.</li>
                            <li><strong>Copier-coller :</strong> Tu peux copier directement depuis Excel ou
                                Google Sheets. La pr√©visualisation te permet de v√©rifier avant d'importer.</li>
                            <li><strong>Modification :</strong> Utilise l'ic√¥ne pour modifier un¬∑e
                                √©tudiant¬∑e, ou pour le¬∑la supprimer.</li>
                            <li><strong>Export :</strong> Exporte ta liste au format CSV pour backup ou partage.
                                Le fichier peut ensuite √™tre r√©import√©.</li>
                            <li><strong>R√©initialisation :</strong> Attention ! Le bouton ¬´ R√©initialiser ¬ª
                                supprime <strong>tous les √©tudiants</strong>. Cette action est irr√©versible.</li>
                            <li><strong>Lien avec les autres sections :</strong> La liste configur√©e ici est
                                automatiquement disponible dans l'onglet ¬´ √âtudiants ‚Ä∫ Liste des individus ¬ª pour la gestion des
                                portfolios.</li>
                        </ul>
                    </div>

                    <div class="carte">
                        <h3>üë• Groupe d'√©tudiants</h3>

                        <!-- VUE D'ENSEMBLE -->
                        <div class="grille-statistiques" style="margin-bottom: 20px;">
                            <div class="carte-metrique">
                                <strong id="nbEtudiantsTotal">0</strong>
                                <span>√âtudiant¬∑es au total</span>
                            </div>
                            <div class="carte-metrique">
                                <strong id="nbGroupes">0</strong>
                                <span>Groupes</span>
                            </div>
                            <div class="carte-metrique" style="grid-column: span 2;">
                                <div id="detailGroupes" style="font-size: 0.9rem; color: #666; text-align: left;">
                                    <em>Aucun groupe configur√©</em>
                                </div>
                            </div>
                        </div>

                        <!-- FILTRAGE PAR GROUPE -->
                        <div
                            style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                                <label style="font-weight: 500; color: var(--bleu-principal);">
                                    üîç Filtrer par groupe :
                                </label>
                                <select id="filtreGroupe" onchange="filtrerParGroupe()" class="controle-form"
                                    style="flex: 1; min-width: 200px; max-width: 300px;">
                                    <option value="">Tous les groupes</option>
                                    <!-- Options g√©n√©r√©es dynamiquement -->
                                </select>
                                <button onclick="resetFiltreGroupe()" class="btn btn-annuler">
                                    R√©initialiser
                                </button>
                            </div>
                        </div>

                        <!-- FORMULAIRE D'AJOUT MANUEL -->
                        <details style="margin-bottom: 20px;">
                            <summary style="cursor: pointer; font-weight: 600; color: var(--bleu-principal); 
       padding: 12px; background: var(--bleu-tres-pale); border-radius: 6px; user-select: none;">
                                ‚ûï Ajouter un¬∑e √©tudiant¬∑e manuellement
                            </summary>

                            <div
                                style="background: var(--bleu-tres-pale); padding: 20px; border-radius: 8px; margin-top: 10px;">
                                <!-- CHANGEMENT ICI ‚Üì -->
                                <div class="formulaire-ajout-grid">
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.85rem;">
                                            DA
                                        </label>
                                        <input type="text" id="etudiantDA" class="controle-form" placeholder="1234567"
                                            style="width: 100%;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.85rem;">
                                            Groupe
                                        </label>
                                        <input type="text" id="etudiantGroupe" class="controle-form" placeholder="1"
                                            style="width: 100%;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.85rem;">
                                            Nom <span style="color: #e74c3c;">*</span>
                                        </label>
                                        <input type="text" id="etudiantNom" class="controle-form" required
                                            placeholder="Nom" style="width: 100%;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.85rem;">
                                            Pr√©nom <span style="color: #e74c3c;">*</span>
                                        </label>
                                        <input type="text" id="etudiantPrenom" class="controle-form" required
                                            placeholder="Pr√©nom" style="width: 100%;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.85rem;">
                                            Programme
                                        </label>
                                        <input type="text" id="etudiantProgramme" class="controle-form"
                                            placeholder="200.B1" style="width: 100%;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.85rem;">SA</label>
                                        <select id="etudiantSA" class="controle-form" style="width: 100%;">
                                            <option value="">---</option>
                                            <option value="Oui">‚úì</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 5px; font-weight: 500; font-size: 0.85rem;">CAF</label>
                                        <select id="etudiantCAF" class="controle-form" style="width: 100%;">
                                            <option value="">---</option>
                                            <option value="Oui">‚úì</option>
                                        </select>
                                    </div>
                                    <div>
                                        <button onclick="addStudent()" class="btn btn-principal"
                                            style="padding: 10px 20px; font-size: 0.95rem; font-weight: 600; white-space: nowrap;">
                                            ‚ûï Ajouter
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </details>

                        <!-- ZONE D'IMPORT -->
                        <details style="margin-bottom: 20px;">
                            <summary style="cursor: pointer; font-weight: 600; color: var(--bleu-principal); 
                           padding: 12px; background: #f8f9fa; border-radius: 6px; 
                           user-select: none;">
                                Importer des √©tudiants (CSV/TSV ou copier-coller)
                            </summary>

                            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 10px;">
                                <div style="margin-bottom: 15px;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">
                                        Option 1 : Importer un fichier CSV/TSV
                                    </label>
                                    <input type="file" id="fichierCsvEntree" accept=".csv,.tsv,.txt"
                                        onchange="handleFileImport(event)" class="controle-form">
                                    <small style="color: #666; display: block; margin-top: 5px;">
                                        Format attendu : DA, Groupe, Nom, Pr√©nom, Programme, SA, CAF
                                    </small>
                                </div>

                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">
                                        Option 2 : Copier-coller des donn√©es
                                    </label>
                                    <textarea id="donneesCollees" class="controle-form" placeholder="Collez vos donn√©es ici (colonnes s√©par√©es par des tabulations ou virgules)
Exemple :
1234567	1	Tremblay	Marie	582.A1	Oui	
1234568	1	Gagnon	Pierre	582.A1		Oui" rows="6"
                                        style="font-family: 'Courier New', monospace; font-size: 0.9rem;"></textarea>
                                    <button onclick="previewPastedData()" class="btn btn-principal"
                                        style="margin-top: 10px;">
                                        Pr√©visualiser les donn√©es
                                    </button>
                                </div>
                            </div>
                        </details>

                        <!-- ZONE DE PR√âVISUALISATION (cach√©e par d√©faut) -->
                        <div id="previewZone" style="display: none; margin-bottom: 20px; background: #fff3cd; 
                                     padding: 15px; border-radius: 8px; border: 2px solid #ffc107;">
                            <h4 style="margin-top: 0; color: #856404;">‚ÑπÔ∏è Pr√©visualisation de l'import</h4>
                            <p style="color: #856404; margin-bottom: 15px;">
                                V√©rifiez les donn√©es avant de les importer d√©finitivement.
                            </p>
                            <div id="previewTable" style="overflow-x: auto; max-height: 300px; 
                                          border: 1px solid #ddd; border-radius: 4px; background: white;">
                                <!-- Le tableau sera g√©n√©r√© ici -->
                            </div>
                            <div style="display: flex; gap: 10px; margin-top: 15px;">
                                <button onclick="confirmImport()" class="btn btn-confirmer">
                                    Confirmer l'import
                                </button>
                                <button onclick="cancelImport()" class="btn btn-annuler">
                                    Annuler
                                </button>
                            </div>
                        </div>

                        <!-- LISTE DES √âTUDIANTS -->
                        <div id="students-list-container" style="display: none; margin-bottom: 20px;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <h4 style="color: var(--bleu-principal); margin: 0;">
                                    Liste des √©tudiants <span id="compteurFiltres"></span>
                                </h4>
                                <div style="display: flex; gap: 10px;">
                                    <button onclick="exportStudentsData()" class="btn btn-principal"
                                        style="padding: 8px 15px;">
                                        Exporter (CSV)
                                    </button>
                                    <button onclick="resetStudentsData()" class="btn btn-supprimer"
                                        style="padding: 8px 15px;">
                                        R√©initialiser
                                    </button>
                                </div>
                            </div>

                            <div style="overflow-x: auto; border: 1px solid #ddd; border-radius: 4px;">
                                <table id="students-table" class="tableau-donnees"
                                    style="width: 100%; border-collapse: collapse; background: white;">
                                    <thead style="background: var(--bleu-moyen); color: white;">
                                        <tr>
                                            <th style="padding: 12px; text-align: left;">DA</th>
                                            <th style="padding: 12px; text-align: center; width: 80px;">Groupe</th>
                                            <th style="padding: 12px; text-align: left;">Nom</th>
                                            <th style="padding: 12px; text-align: left;">Pr√©nom</th>
                                            <th style="padding: 12px; text-align: left;">Programme</th>
                                            <th style="padding: 12px; text-align: center; width: 60px;">SA</th>
                                            <th style="padding: 12px; text-align: center; width: 60px;">CAF</th>
                                            <th style="padding: 12px; text-align: center; width: 120px;">Actions
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody id="students-tbody">
                                        <!-- Les lignes seront g√©n√©r√©es par afficherListeEtudiants() -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- MESSAGE SI AUCUN √âTUDIANT -->
                        <div id="no-students-msg" style="display: block; text-align: center; padding: 40px;
                                         background: #f8f9fa; border-radius: 8px; color: #666;">
                            <p style="font-size: 1.1rem; margin-bottom: 10px;">üì≠ Aucun¬∑e √©tudiant¬∑e dans le groupe
                            </p>
                            <p style="font-size: 0.9rem;">
                                Utilisez le formulaire ci-dessus ou l'import pour ajouter des √©tudiant¬∑es
                            </p>
                        </div>
                    </div><!-- FIN carte -->

                    <!-- ‚Üì‚Üì‚Üì AJOUTER LA NOUVELLE CARTE ICI ‚Üì‚Üì‚Üì -->

                    <div class="carte">
                        <h3>üîí Clonage anonymis√© (Groupe 9999 ‚Üí D√©mo)</h3>

                        <div
                            style="background: var(--bleu-tres-pale); padding: 15px; border-radius: 6px; margin-bottom: 20px; border-left: 4px solid var(--bleu-principal);">
                            <p style="margin: 0; font-size: 0.95rem; color: var(--bleu-moyen);">
                                <strong>√Ä quoi sert cette fonctionnalit√© ?</strong><br>
                                Le Groupe 9999 est un groupe fictif utilis√© pour les d√©monstrations et formations.
                                Les √©tudiants du Groupe 9999 sont des clones anonymis√©s d'√©tudiants r√©els du Groupe
                                1,
                                avec des noms fictifs et des DA reconnaissables (9999XXX).
                            </p>
                        </div>

                        <!-- STATISTIQUES -->
                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div
                                style="background: white; padding: 15px; border-radius: 6px; border: 1px solid var(--bleu-pale); text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: var(--bleu-principal);"
                                    id="stat-groupe1">--</div>
                                <div style="font-size: 0.9rem; color: #666;">√âtudiants Groupe 1</div>
                            </div>
                            <div
                                style="background: white; padding: 15px; border-radius: 6px; border: 1px solid var(--bleu-pale); text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: var(--bleu-moyen);"
                                    id="stat-groupe2">--</div>
                                <div style="font-size: 0.9rem; color: #666;">√âtudiants Groupe 9999</div>
                            </div>
                            <div
                                style="background: white; padding: 15px; border-radius: 6px; border: 1px solid var(--bleu-pale); text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: var(--risque-minimal);"
                                    id="stat-mappings">--</div>
                                <div style="font-size: 0.9rem; color: #666;">Mappings actifs</div>
                            </div>
                        </div>

                        <!-- ACTIONS -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">Actions rapides</h4>
                            <div class="btn-groupe">
                                <button onclick="genererMappingAleatoire()" class="btn btn-principal">
                                    G√©n√©rer mapping al√©atoire (10 √©tudiants)
                                </button>
                                <button onclick="synchroniserDonnees()" class="btn btn-principal">
                                    Synchroniser maintenant
                                </button>
                                <button onclick="afficherTableauMapping()" class="btn btn-principal">
                                    Afficher le mapping
                                </button>
                            </div>
                        </div>

                        <!-- TABLEAU -->
                        <div id="tableau-mapping-groupes">
                            <div style="text-align: center; padding: 20px; color: #999;">Chargement...</div>
                        </div>

                        <!-- INFOS TECHNIQUES -->
                        <div
                            style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 6px; font-size: 0.85rem; color: #666;">
                            <details>
                                <summary style="cursor: pointer; font-weight: bold;">üìö Informations techniques
                                </summary>
                                <ul style="margin: 10px 0; padding-left: 20px;">
                                    <li><strong>Groupe 1 :</strong> √âtudiants r√©els (DA : 1234567)</li>
                                    <li><strong>Groupe 9999 :</strong> Clones fictifs (DA : 9999001, 9999002...)
                                    </li>
                                    <li><strong>Noms :</strong> 80% qu√©b√©cois, 20% africains</li>
                                    <li><strong>Synchronisation :</strong> Pr√©sences, √©valuations, portfolios</li>
                                </ul>
                            </details>
                        </div>
                    </div><!-- FIN carte clonage -->

                    <script>
                        // Initialisation statistiques clonage
                        document.addEventListener('DOMContentLoaded', function () {
                            setTimeout(function () {
                                if (typeof obtenirEtudiantsGroupe1 === 'function') {
                                    mettreAJourStatistiquesClonage();
                                }
                            }, 500);
                        });

                        document.addEventListener('click', function (e) {
                            if (e.target.matches('[data-sous-onglet="reglages-groupe"]')) {
                                setTimeout(function () {
                                    if (typeof obtenirEtudiantsGroupe1 === 'function') {
                                        mettreAJourStatistiquesClonage();
                                        afficherTableauMapping();
                                    }
                                }, 100);
                            }
                        });

                        function mettreAJourStatistiquesClonage() {
                            const groupe1 = obtenirEtudiantsGroupe1();
                            const groupe2 = obtenirEtudiantsGroupe2();
                            const mapping = chargerMapping();

                            document.getElementById('stat-groupe1').textContent = groupe1.length;
                            document.getElementById('stat-groupe2').textContent = groupe2.length;
                            document.getElementById('stat-mappings').textContent = Object.keys(mapping).length;
                        }
                    </script>

                </div><!-- FIN sous-section reglages-groupe -->

                <!-- Sous-section : Pratique de notation -->
                <!-- Sous-section : Pratique de notation -->
                <!-- Sous-section : Pratique de notation -->
                <div id="reglages-pratique-notation" class="sous-section">
                    <h2>Configuration de la pratique de notation</h2>
                    <p class="text-muted">Configuration du syst√®me de notation du cours</p>

                    <!-- CONFIGURATION DE LA NOTATION -->
                    <div class="carte">
                        <h3>Configuration de la notation</h3>

                        <!-- NOTE RREC -->
                        <div style="font-size: 0.85rem; color: #666; margin-bottom: 20px; padding: 12px;
             background: var(--bleu-pale); border-radius: 6px; border-left: 3px solid var(--orange-accent);">
                            <strong>Note :</strong> Le R√®glement sur le r√©gime des √©tudes coll√©giales (RREC) exige une
                            note finale chiffr√©e en %.
                            Pendant l'apprentissage, vous pouvez mettre en place une pratique alternative de notation
                            (PAN),
                            mais celle-ci doit √™tre convertie en note chiffr√©e (%) √† la fin du trimestre.
                        </div>

                        <!-- FORMULAIRES C√îTE √Ä C√îTE -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <!-- Colonne gauche -->
                            <div class="groupe-form">
                                <label>Pratique de notation</label>
                                <select id="pratiqueNotation" class="controle-form">
                                    <option value="">Choisir une pratique de notation</option>
                                    <option value="sommative">Sommative traditionnelle (en %)</option>
                                    <option value="alternative">Alternative (PAN)</option>
                                </select>
                            </div>

                            <!-- Colonne droite -->
                            <div class="groupe-form" id="colonnePAN" style="display: none;">
                                <label>Type de pratique alternative</label>
                                <select id="typePAN" class="controle-form">
                                    <option value="">Choisir un type de PAN...</option>
                                    <option value="maitrise">Notation bas√©e sur la ma√Ætrise</option>
                                    <option value="specifications">Notation par sp√©cifications</option>
                                    <option value="denotation">D√©notation (Ungrading)</option>
                                </select>
                            </div>
                        </div>

                        <!-- INFO PAN -->
                        <div id="infoPAN" style="display: none; margin-top: 15px; padding: 10px; 
             background: white; border-radius: 4px; font-size: 0.85rem; color: #666;">
                        </div>

                        <!-- ==========================================
             SECTION : OPTIONS D'AFFICHAGE DES INDICES
             ========================================== -->
                        <div id="optionsAffichageIndices" style="display: none; margin-top: 25px; padding: 15px; 
             background: var(--bleu-tres-pale); border-radius: 6px; border-left: 4px solid var(--bleu-moyen);">

                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">
                                Affichage des indices au tableau de bord
                            </h4>

                            <p style="font-size: 0.85rem; color: #666; margin-bottom: 15px;">
                                Choisir quels types d'indices afficher dans le tableau de bord.
                                Pour fins de recherche ou d'exp√©rimentation, tu peux afficher les deux syst√®mes
                                simultan√©ment
                                pour comparer les approches sommative et alternative.
                            </p>

                            <div style="display: flex; flex-direction: column; gap: 12px;">

                                <!-- Option 1 : Indices sommatifs -->
                                <label style="display: flex; align-items: start; gap: 10px; cursor: pointer; 
                       padding: 10px; background: white; border-radius: 4px;">
                                    <input type="checkbox" id="afficherSommatif" checked style="margin-top: 3px;">
                                    <div>
                                        <strong>Afficher les indices sommatifs</strong>
                                        <div style="font-size: 0.8rem; color: #666; margin-top: 3px;">
                                            Calcul sur toute la session (A, C, P globaux)
                                        </div>
                                    </div>
                                </label>

                                <!-- Option 2 : Indices alternatifs PAN -->
                                <label style="display: flex; align-items: start; gap: 10px; cursor: pointer; 
                       padding: 10px; background: white; border-radius: 4px;">
                                    <input type="checkbox" id="afficherAlternatif" style="margin-top: 3px;">
                                    <div>
                                        <strong>Afficher les indices alternatifs (PAN)</strong>
                                        <div style="font-size: 0.8rem; color: #666; margin-top: 3px;">
                                            Calcul sur 3 derniers cours (12h) et meilleurs artefacts
                                        </div>
                                    </div>
                                </label>

                            </div>
                        </div>
                        <!-- FIN SECTION OPTIONS AFFICHAGE -->

                        <!-- STATUT + BOUTON GROUP√âS EN BAS -->
                        <div style="margin-top: 30px; padding: 15px; background: var(--bleu-tres-pale); 
                    border-radius: 6px; border-left: 4px solid var(--bleu-moyen);">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <!-- Statut √† gauche -->
                                <div>
                                    <strong style="color: var(--bleu-principal);">Statut de configuration :</strong>
                                    <span id="statutModalites" style="margin-left: 10px; font-weight: bold;">
                                        <span style="color: var(--risque-critique);">‚úó √Ä configurer</span>
                                    </span>
                                </div>

                                <!-- Bouton √† droite -->
                                <button class="btn btn-confirmer" id="btnSauvegarderPratiqueNotation">
                                    Sauvegarder la configuration
                                </button>
                            </div>
                        </div>

                    </div>
                </div><!--fin sous-section pratique-notation-->

                <!-- Sous-section : Productions -->

                <!-- Sous-section: Import/Export des donn√©es -->
                <div id="reglages-import-export" class="sous-section">
                    <h2>Gestion des donn√©es</h2>
                    <p class="text-muted">Sauvegarde et restauration des donn√©es locales</p>

                    <div class="carte">
                        <h3>Sauvegarde et restauration</h3>
                        <p class="text-muted" style="margin-bottom: 25px;">
                            G√®re tes donn√©es locales : exporte pour sauvegarder, importe pour restaurer.
                        </p>

                        <!-- Export -->
                        <div style="padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px; margin-bottom: 20px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">üì§ Exporter les donn√©es</h4>
                            <p>
                                Sauvegarde tes donn√©es dans un fichier JSON. Tu pourras choisir quelles
                                donn√©es exporter (toutes ou s√©lection personnalis√©e).
                            </p>
                            <button class="btn btn-principal" onclick="ouvrirModalExport()" style="margin-top: 10px;">
                                Ouvrir l'exportation
                            </button>
                            <p class="text-muted" style="margin-top: 10px; font-size: 0.9rem;">
                                üí° Exporte r√©guli√®rement pour √©viter toute perte de donn√©es.
                            </p>
                        </div>

                        <!-- Import -->
                        <div style="padding: 15px; background: var(--bleu-tres-pale); border-radius: 6px;">
                            <h4 style="color: var(--bleu-principal); margin-bottom: 10px;">üì• Importer des donn√©es</h4>
                            <p>
                                Restaure des donn√©es depuis un fichier JSON export√© pr√©c√©demment.
                            </p>
                            <button class="btn btn-principal" onclick="ouvrirModalImport()" style="margin-top: 10px;">
                                Ouvrir l'importation
                            </button>
                            <div class="badge-alerte" style="margin-top: 15px;">
                                <strong>Important :</strong> L'import √©crasera les donn√©es existantes
                                pour les cl√©s import√©es. Exporte d'abord si n√©cessaire !
                            </div>
                        </div>
                    </div>

                    <!-- R√©initialisation -->
                    <div class="carte">
                        <h4>R√©initialisation compl√®te</h4>
                        <p>
                            Efface <strong>toutes</strong> les donn√©es et revient √† l'√©tat initial.
                            <strong>Cette action est irr√©versible.</strong>
                        </p>
                        <button class="btn btn-supprimer" onclick="reinitialiserDonnees()">
                            R√©initialiser toutes les donn√©es
                        </button>
                        <p class="text-muted" style="margin-top: 10px; font-size: 0.9rem;">
                            Triple confirmation requise + mot de passe "EFFACER" pour s√©curit√©
                        </p>
                    </div>

                    <!-- Informations -->
                    <div class="carte">
                        <h4>Informations</h4>
                        <ul style="margin-left: 20px; line-height: 1.8; font-size: 0.95rem;">
                            <li><strong>Stockage :</strong> Local dans le navigateur (localStorage)</li>
                            <li><strong>Format :</strong> Fichiers JSON lisibles</li>
                            <li><strong>Compatibilit√© :</strong> Fonctionne sur tous appareils</li>
                            <li><strong>S√©curit√© :</strong> Aucune donn√©e envoy√©e sur internet</li>
                            <li><strong>Limite :</strong> ~5-10 Mo selon navigateurs</li>
                        </ul>
                    </div>

                </div>
                <!-- fin sous-section import-export -->

            </section><!-- fin section-reglages -->

            <!-- ===================================
                 SECTION: AIDE
                 =================================== -->
            <section id="section-aide" class="section">

                <!-- Sous-section: Documentation -->
                <div id="aide-documentation" class="sous-section">
                    <h2>Documentation</h2>
                    <p class="text-muted">Guide d'utilisation et ressources p√©dagogiques</p>

                    <div class="carte">
                        <h3>Guide de monitorage</h3>
                        <p>Documentation compl√®te √† venir.</p>
                    </div>
                </div>

                <!-- Sous-section: √Ä propos -->
                <div id="aide-a-propos" class="sous-section">
                    <h2>√Ä propos</h2>
                    <p class="text-muted">Informations sur l'application</p>

                    <div class="carte">
                        <h3>Application de monitorage p√©dagogique</h3>
                        <p>Version : Beta 1.0</p>
                        <p>D√©velopp√© par : Gr√©goire B√©dard</p>
                        <p>Licence : Creative Commons BY-NC-SA 4.0</p>
                    </div>
                </div>

            </section><!-- fin section-aide -->

        </main>

    </div>



    <!-- ===================================
     CHARGEMENT DES MODULES JAVASCRIPT
     ORDRE CRITIQUE - Voir: js/ordre-chargement.txt
     =================================== -->

    <!-- PRIORIT√â 1: Fondations -->
    <script src="js/config.js"></script>
    <script src="js/navigation.js?v=1761397763"></script>

    <!-- PRIORIT√â 2: Donn√©es de base -->
    <script src="js/trimestre.js?v=1761390149"></script>
    <script src="js/tableau-bord-apercu.js"></script>
    <script src="js/etudiants.js"></script>
    <script src="js/productions.js?v=1761397763"></script>
    <script src="js/grilles.js?v=1761397763"></script>
    <script src="js/echelles.js?v=1761354698"></script>
    <script src="js/cartouches.js"></script>
    <script src="js/cours.js?v=1761391739"></script>

    <!-- PRIORIT√â 3: Modules fonctionnels -->
    <script src="js/calendrier-vue.js"></script>
    <script src="js/saisie-presences.js"></script>
    <script src="js/horaire.js?v=1761391190"></script>
    <script src="js/groupe.js"></script>
    <script src="js/pratiques.js"></script>

    <!-- PRIORIT√â 4: Modules avanc√©s -->
    <script src="js/import-export.js?v=1761387764"></script>
    <script src="js/statistiques.js"></script>
    <script src="js/profil-etudiant.js"></script>
    <script src="js/liste-evaluations.js?v=1761391739"></script>
    <script src="js/modes.js"></script>

    <!-- PRIORIT√â 5: Utilitaires -->
    <script src="js/evaluation.js?v=1761391739"></script>
    <script src="js/portfolio.js"></script>

    <!-- PRIORIT√â 6: Initialisation finale (TOUJOURS EN DERNIER) -->
    <script src="js/main.js"></script>

    <!-- Script de d√©bogage additionnel (optionnel) -->
    <script>
        // Mise √† jour de la zone de d√©bogage visuelle
        setInterval(() => {
            const debugSection = document.getElementById('debug-section');
            const debugSousSection = document.getElementById('debug-sous-section');

            if (debugSection && typeof sectionActive !== 'undefined') {
                debugSection.textContent = sectionActive || '--';
            }

            if (debugSousSection && typeof sousSectionActive !== 'undefined') {
                debugSousSection.textContent = sousSectionActive || '--';
            }
        }, 500);
    </script>

    <!-- Script pour g√©rer les toggles emoji dans les H2 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // S√©lectionner tous les emojis avec la classe emoji-toggle
            const emojiToggles = document.querySelectorAll('.emoji-toggle');

            emojiToggles.forEach(emoji => {
                emoji.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();

                    // R√©cup√©rer l'ID de la cible depuis l'attribut data-target
                    const targetId = this.getAttribute('data-target');
                    const targetElement = document.getElementById(targetId);

                    if (targetElement) {
                        // Toggle la visibilit√©
                        if (targetElement.style.display === 'none' || targetElement.style.display === '') {
                            targetElement.style.display = 'block';
                        } else {
                            targetElement.style.display = 'none';
                        }
                    }
                });
            });
        });
    </script>

    <!-- ===============================
     MODALES IMPORT/EXPORT
     √Ä placer AVANT </body>
     =============================== -->

    <!-- Modal Export -->
    <div id="modalExport" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
     background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
        <div
            style="background: white; border-radius: 12px; padding: 30px; max-width: 600px; max-height: 80vh; overflow-y: auto; width: 90%;">
            <h3 style="color: var(--bleu-principal); margin-bottom: 20px;">Exporter les donn√©es</h3>

            <div style="margin-bottom: 20px;">
                <label
                    style="display: flex; align-items: center; padding: 10px; background: var(--bleu-pale); border-radius: 6px; cursor: pointer;">
                    <input type="checkbox" id="checkToutesLes" onchange="toggleToutesLesCles()"
                        style="margin-right: 10px; transform: scale(1.3);">
                    <strong>Toutes les cl√©s</strong>
                </label>
            </div>

            <div id="listeClesExport"
                style="max-height: 300px; overflow-y: auto; border: 1px solid var(--bleu-pale); border-radius: 6px; padding: 10px;">
                <!-- Rempli dynamiquement -->
            </div>

            <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: flex-end;">
                <button class="btn btn-annuler" onclick="fermerModalExport()">Annuler</button>
                <button class="btn btn-confirmer" onclick="executerExport()">Exporter</button>
            </div>
        </div>
    </div>

    <!-- Modal Import -->
    <div id="modalImport" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
     background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
        <div style="background: white; border-radius: 12px; padding: 30px; max-width: 600px; width: 90%;">
            <h3 style="color: var(--bleu-principal); margin-bottom: 20px;">Importer les donn√©es</h3>

            <div
                style="margin-bottom: 20px; padding: 20px; background: var(--bleu-tres-pale); border-radius: 6px; border-left: 4px solid var(--orange-accent);">
                <p style="margin: 0; color: var(--bleu-principal);">
                    <strong>‚ÑπÔ∏è Attention :</strong> L'importation √©crasera les donn√©es existantes pour les cl√©s
                    import√©es.
                </p>
            </div>

            <input type="file" id="fichierImport" accept=".json"
                style="margin-bottom: 20px; padding: 10px; width: 100%; border: 2px dashed var(--bleu-leger); border-radius: 6px; cursor: pointer;">

            <div id="apercu-import"
                style="display: none; margin-bottom: 20px; padding: 15px; background: #e8f5e9; border-radius: 6px; border-left: 4px solid #4caf50;">
                <!-- Rempli apr√®s s√©lection du fichier -->
            </div>

            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button class="btn btn-annuler" onclick="fermerModalImport()">Annuler</button>
                <button class="btn btn-confirmer" id="btnExecuterImport" onclick="executerImport()" disabled>Importer</button>
            </div>
        </div>
    </div>
</body>

</html>